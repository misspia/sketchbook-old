!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=110)}([function(e,t,n){"use strict";e.exports=n(66)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ve}));var r=n(12),i=n.n(r),o=n(18),a=n.n(o),s=n(0),l=n.n(s),u=n(19),c=n(10),h=n(13),d=(n(98),n(7),n(64)),p=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},x=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},b=function(e){return"object"===(void 0===e?"undefined":f(e))&&e.constructor===Object},_=Object.freeze([]),w=Object.freeze({});function S(e){return"function"==typeof e}function T(e){return e.displayName||e.name||"Component"}function E(e){return e&&"string"==typeof e.styledComponentId}var M=void 0!==e&&Object({NODE_ENV:"production"}).SC_ATTR||"data-styled",A="undefined"!=typeof window&&"HTMLElement"in window,P="boolean"==typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||!1;var L=function(e){function t(n){m(this,t);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=x(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/src/utils/errors.md#"+n+" for more information. "+(i?"Additional arguments: "+i.join(", "):"")));return x(a)}return y(t,e),t}(Error),C=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,O=function(e){var t=""+(e||""),n=[];return t.replace(C,(function(e,t,r){return n.push({componentId:t,matchIndex:r}),e})),n.map((function(e,r){var i=e.componentId,o=e.matchIndex,a=n[r+1];return{componentId:i,cssFromDOM:a?t.slice(o,a.matchIndex):t.slice(o)}}))},R=/^\s*\/\/.*$/gm,N=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),F=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),I=[],k=function(e){if(-2===e){var t=I;return I=[],t}},D=a()((function(e){I.push(e)})),z=void 0,U=void 0,j=void 0,B=function(e,t,n){return t>0&&-1!==n.slice(0,t).indexOf(U)&&n.slice(t-U.length,t)!==U?"."+z:e};F.use([function(e,t,n){2===e&&n.length&&n[0].lastIndexOf(U)>0&&(n[0]=n[0].replace(j,B))},D,k]),N.use([D,k]);var G=function(e){return N("",e)};function H(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",i=e.join("").replace(R,""),o=t&&n?n+" "+t+" { "+i+" }":i;return z=r,U=t,j=new RegExp("\\"+U+"\\b","g"),F(n||!t?"":t,o)}var V=function(){return n.nc},W=function(e,t,n){n&&((e[t]||(e[t]=Object.create(null)))[n]=!0)},X=function(e,t){e[t]=Object.create(null)},Y=function(e){return function(t,n){return void 0!==e[t]&&e[t][n]}},q=function(e){var t="";for(var n in e)t+=Object.keys(e[n]).join(" ")+" ";return t.trim()},J=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets.length,n=0;n<t;n+=1){var r=document.styleSheets[n];if(r.ownerNode===e)return r}throw new L(10)},Q=function(e,t,n){if(!t)return!1;var r=e.cssRules.length;try{e.insertRule(t,n<=r?n:r)}catch(e){return!1}return!0},Z=function(e){return"\n/* sc-component-id: "+e+" */\n"},$=function(e,t){for(var n=0,r=0;r<=t;r+=1)n+=e[r];return n},K=function(e,t){return function(n){var r=V();return"<style "+[r&&'nonce="'+r+'"',M+'="'+q(t)+'"','data-styled-version="4.1.3"',n].filter(Boolean).join(" ")+">"+e()+"</style>"}},ee=function(e,t){return function(){var n,r=((n={})[M]=q(t),n["data-styled-version"]="4.1.3",n),i=V();return i&&(r.nonce=i),l.a.createElement("style",g({},r,{dangerouslySetInnerHTML:{__html:e()}}))}},te=function(e){return function(){return Object.keys(e)}},ne=function(e){return document.createTextNode(Z(e))},re=function e(t,n){var r=void 0===t?Object.create(null):t,i=void 0===n?Object.create(null):n,o=function(e){var t=i[e];return void 0!==t?t:i[e]=[""]},a=function(){var e="";for(var t in i){var n=i[t][0];n&&(e+=Z(t)+n)}return e};return{clone:function(){var t=function(e){var t=Object.create(null);for(var n in e)t[n]=g({},e[n]);return t}(r),n=Object.create(null);for(var o in i)n[o]=[i[o][0]];return e(t,n)},css:a,getIds:te(i),hasNameForId:Y(r),insertMarker:o,insertRules:function(e,t,n){o(e)[0]+=t.join(" "),W(r,e,n)},removeRules:function(e){var t=i[e];void 0!==t&&(t[0]="",X(r,e))},sealed:!1,styleTag:null,toElement:ee(a,r),toHTML:K(a,r)}},ie=function(e,t,n,r,i){if(A&&!n){var o=function(e,t,n){var r=document.createElement("style");r.setAttribute(M,""),r.setAttribute("data-styled-version","4.1.3");var i=V();if(i&&r.setAttribute("nonce",i),r.appendChild(document.createTextNode("")),e&&!t)e.appendChild(r);else{if(!t||!e||!t.parentNode)throw new L(6);t.parentNode.insertBefore(r,n?t:t.nextSibling)}return r}(e,t,r);return P?function(e,t){var n=Object.create(null),r=Object.create(null),i=void 0!==t,o=!1,a=function(t){var i=r[t];return void 0!==i?i:(r[t]=ne(t),e.appendChild(r[t]),n[t]=Object.create(null),r[t])},s=function(){var e="";for(var t in r)e+=r[t].data;return e};return{clone:function(){throw new L(5)},css:s,getIds:te(r),hasNameForId:Y(n),insertMarker:a,insertRules:function(e,r,s){for(var l=a(e),u=[],c=r.length,h=0;h<c;h+=1){var d=r[h],p=i;if(p&&-1!==d.indexOf("@import"))u.push(d);else{p=!1;var f=h===c-1?"":" ";l.appendData(""+d+f)}}W(n,e,s),i&&u.length>0&&(o=!0,t().insertRules(e+"-import",u))},removeRules:function(a){var s=r[a];if(void 0!==s){var l=ne(a);e.replaceChild(l,s),r[a]=l,X(n,a),i&&o&&t().removeRules(a+"-import")}},sealed:!1,styleTag:e,toElement:ee(s,n),toHTML:K(s,n)}}(o,i):function(e,t){var n=Object.create(null),r=Object.create(null),i=[],o=void 0!==t,a=!1,s=function(e){var t=r[e];return void 0!==t?t:(r[e]=i.length,i.push(0),X(n,e),r[e])},l=function(){var t=J(e).cssRules,n="";for(var o in r){n+=Z(o);for(var a=r[o],s=$(i,a),l=s-i[a];l<s;l+=1){var u=t[l];void 0!==u&&(n+=u.cssText)}}return n};return{clone:function(){throw new L(5)},css:l,getIds:te(r),hasNameForId:Y(n),insertMarker:s,insertRules:function(r,l,u){for(var c=s(r),h=J(e),d=$(i,c),p=0,f=[],m=l.length,v=0;v<m;v+=1){var g=l[v],y=o;y&&-1!==g.indexOf("@import")?f.push(g):Q(h,g,d+p)&&(y=!1,p+=1)}o&&f.length>0&&(a=!0,t().insertRules(r+"-import",f)),i[c]+=p,W(n,r,u)},removeRules:function(s){var l=r[s];if(void 0!==l){var u=i[l];!function(e,t,n){for(var r=t-n,i=t;i>r;i-=1)e.deleteRule(i)}(J(e),$(i,l)-1,u),i[l]=0,X(n,s),o&&a&&t().removeRules(s+"-import")}},sealed:!1,styleTag:e,toElement:ee(l,n),toHTML:K(l,n)}}(o,i)}return re()},oe=/\s+/,ae=void 0;ae=A?P?40:1e3:-1;var se=0,le=void 0,ue=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A?document.head:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var n=t.tags[0];return t.importRuleTag=ie(t.target,n?n.styleTag:null,t.forceServer,!0)},se+=1,this.id=se,this.forceServer=r,this.target=r?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!A||this.forceServer)return this;var e=[],t=[],n=!1,r=document.querySelectorAll("style["+M+'][data-styled-version="4.1.3"]'),i=r.length;if(!i)return this;for(var o=0;o<i;o+=1){var a=r[o];n||(n=!!a.getAttribute("data-styled-streamed"));for(var s,l=(a.getAttribute(M)||"").trim().split(oe),u=l.length,c=0;c<u;c+=1)s=l[c],this.rehydratedNames[s]=!0;t.push.apply(t,O(a.textContent)),e.push(a)}var h=t.length;if(!h)return this;var d=this.makeTag(null);!function(e,t,n){for(var r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.componentId,s=o.cssFromDOM,l=G(s);e.insertRules(a,l)}for(var u=0,c=t.length;u<c;u+=1){var h=t[u];h.parentNode&&h.parentNode.removeChild(h)}}(d,e,t),this.capacity=Math.max(1,ae-h),this.tags.push(d);for(var p=0;p<h;p+=1)this.tagMap[t[p].componentId]=d;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];le=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map((function(e){for(var n=e.getIds(),r=e.clone(),i=0;i<n.length;i+=1)t.tagMap[n[i]]=r;return r})),t.rehydratedNames=g({},this.rehydratedNames),t.deferred=g({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach((function(e){e.sealed=!0}))},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return ie(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!t.sealed)return t;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=ae,n=this.makeTag(n),this.tags.push(n)),this.tagMap[e]=n},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var n=this.tagMap[e];return void 0!==n&&n.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,n){for(var r=this.clones,i=0;i<r.length;i+=1)r[i].inject(e,t,n);var o=this.getTagForId(e);if(void 0!==this.deferred[e]){var a=this.deferred[e].concat(t);o.insertRules(e,a,n),this.deferred[e]=void 0}else o.insertRules(e,t,n)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,this.deferred[e]=void 0}},e.prototype.toHTML=function(){return this.tags.map((function(e){return e.toHTML()})).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map((function(t,n){var r="sc-"+e+"-"+n;return Object(s.cloneElement)(t.toElement(),{key:r})}))},v(e,null,[{key:"master",get:function(){return le||(le=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),ce=function(){function e(t,n){var r=this;m(this,e),this.inject=function(e){e.hasNameForId(r.id,r.name)||e.inject(r.id,r.rules,r.name)},this.toString=function(){throw new L(12,String(r.name))},this.name=t,this.rules=n,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),he=/([A-Z])/g,de=/^ms-/;var pe=function(e){return null==e||!1===e||""===e},fe=function e(t,n){var r=Object.keys(t).filter((function(e){return!pe(t[e])})).map((function(n){return b(t[n])?e(t[n],n):n.replace(he,"-$1").toLowerCase().replace(de,"-ms-")+": "+(r=n,(null==(i=t[n])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in u.a?String(i).trim():i+"px")+";");var r,i})).join(" ");return n?n+" {\n  "+r+"\n}":r};function me(e,t,n){if(Array.isArray(e)){for(var r,i=[],o=0,a=e.length;o<a;o+=1)null!==(r=me(e[o],t,n))&&(Array.isArray(r)?i.push.apply(i,r):i.push(r));return i}if(pe(e))return null;if(E(e))return"."+e.styledComponentId;if(S(e)){if(t){var s=!1;try{Object(c.isElement)(new e(t))&&(s=!0)}catch(e){}if(s)throw new L(13,T(e));return me(e(t),t,n)}return e}return e instanceof ce?n?(e.inject(n),e.getName()):e:b(e)?fe(e):e.toString()}function ve(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return S(e)||b(e)?me(p(_,[e].concat(n))):me(p(e,n))}function ge(e){for(var t,n=0|e.length,r=0|n,i=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return((r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16))^r>>>15)>>>0}var ye=function(e){return String.fromCharCode(e+(e>25?39:97))};function xe(e){var t="",n=void 0;for(n=e;n>52;n=Math.floor(n/52))t=ye(n%52)+t;return ye(n%52)+t}function be(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(Array.isArray(r)&&!be(r,t))return!1;if(S(r)&&!E(r))return!1}return!t.some((function(e){return S(e)||function(e){for(var t in e)if(S(e[t]))return!0;return!1}(e)}))}var _e,we=function(e){return xe(ge(e))},Se=function(){function e(t,n,r){m(this,e),this.rules=t,this.isStatic=be(t,n),this.componentId=r,ue.master.hasId(r)||ue.master.deferredInject(r,[])}return e.prototype.generateAndInjectStyles=function(e,t){var n=this.isStatic,r=this.componentId,i=this.lastClassName;if(A&&n&&"string"==typeof i&&t.hasNameForId(r,i))return i;var o=me(this.rules,e,t),a=we(this.componentId+o.join(""));return t.hasNameForId(r,a)||t.inject(this.componentId,H(o,"."+a,void 0,r),a),this.lastClassName=a,a},e.generateName=function(e){return we(e)},e}(),Te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w,r=!!n&&e.theme===n.theme,i=e.theme&&!r?e.theme:t||n.theme;return i},Ee=/[[\].#*$><+~=|^:(),"'`-]+/g,Me=/(^-|-$)/g;function Ae(e){return e.replace(Ee,"-").replace(Me,"")}function Pe(e){return"string"==typeof e&&!0}var Le={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Ce={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Oe=((_e={})[c.ForwardRef]={$$typeof:!0,render:!0},_e),Re=Object.defineProperty,Ne=Object.getOwnPropertyNames,Fe=Object.getOwnPropertySymbols,Ie=void 0===Fe?function(){return[]}:Fe,ke=Object.getOwnPropertyDescriptor,De=Object.getPrototypeOf,ze=Object.prototype,Ue=Array.prototype;function je(e,t,n){if("string"!=typeof t){var r=De(t);r&&r!==ze&&je(e,r,n);for(var i=Ue.concat(Ne(t),Ie(t)),o=Oe[e.$$typeof]||Le,a=Oe[t.$$typeof]||Le,s=i.length,l=void 0,u=void 0;s--;)if(u=i[s],!(Ce[u]||n&&n[u]||a&&a[u]||o&&o[u])&&(l=ke(t,u)))try{Re(e,u,l)}catch(e){}return e}return e}var Be=Object(s.createContext)(),Ge=Be.Consumer,He=(function(e){function t(n){m(this,t);var r=x(this,e.call(this,n));return r.getContext=Object(h.a)(r.getContext.bind(r)),r.renderInner=r.renderInner.bind(r),r}y(t,e),t.prototype.render=function(){return this.props.children?l.a.createElement(Be.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(e){var t=this.getContext(this.props.theme,e);return l.a.createElement(Be.Provider,{value:t},l.a.Children.only(this.props.children))},t.prototype.getTheme=function(e,t){if(S(e))return e(t);if(null===e||Array.isArray(e)||"object"!==(void 0===e?"undefined":f(e)))throw new L(8);return g({},t,e)},t.prototype.getContext=function(e,t){return this.getTheme(e,t)}}(s.Component),function(){function e(){m(this,e),this.masterSheet=ue.master,this.instance=this.masterSheet.clone(),this.sealed=!1}e.prototype.seal=function(){if(!this.sealed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.sealed=!0}},e.prototype.collectStyles=function(e){if(this.sealed)throw new L(2);return l.a.createElement(We,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new L(3)}}(),Object(s.createContext)()),Ve=He.Consumer,We=function(e){function t(n){m(this,t);var r=x(this,e.call(this,n));return r.getContext=Object(h.a)(r.getContext),r}return y(t,e),t.prototype.getContext=function(e,t){if(e)return e;if(t)return new ue(t);throw new L(4)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.sheet,r=e.target;return l.a.createElement(He.Provider,{value:this.getContext(n,r)},t)},t}(s.Component),Xe=(new Set,{});var Ye=function(e){function t(){m(this,t);var n=x(this,e.call(this));return n.attrs={},n.renderOuter=n.renderOuter.bind(n),n.renderInner=n.renderInner.bind(n),n}return y(t,e),t.prototype.render=function(){return l.a.createElement(Ve,null,this.renderOuter)},t.prototype.renderOuter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue.master;return this.styleSheet=e,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():l.a.createElement(Ge,null,this.renderInner)},t.prototype.renderInner=function(e){var t=this.props.forwardedComponent,n=t.componentStyle,r=t.defaultProps,i=(t.displayName,t.foldedComponentIds),o=t.styledComponentId,a=t.target,l=void 0;l=n.isStatic?this.generateAndInjectStyles(w,this.props):void 0!==e?this.generateAndInjectStyles(Te(this.props,e,r),this.props):this.generateAndInjectStyles(this.props.theme||w,this.props);var u=this.props.as||this.attrs.as||a,c=Pe(u),h={},p=g({},this.attrs,this.props),f=void 0;for(f in p)"forwardedComponent"!==f&&"as"!==f&&("forwardedRef"===f?h.ref=p[f]:c&&!Object(d.a)(f)||(h[f]=p[f]));return this.props.style&&this.attrs.style&&(h.style=g({},this.attrs.style,this.props.style)),h.className=Array.prototype.concat(i,this.props.className,o,this.attrs.className,l).filter(Boolean).join(" "),Object(s.createElement)(u,h)},t.prototype.buildExecutionContext=function(e,t,n){var r=this,i=g({},t,{theme:e});return n.length?(this.attrs={},n.forEach((function(e){var t,n=e,o=!1,a=void 0,s=void 0;for(s in S(n)&&(n=n(i),o=!0),n)a=n[s],o||!S(a)||(t=a)&&t.prototype&&t.prototype.isReactComponent||E(a)||(a=a(i)),r.attrs[s]=a,i[s]=a})),i):i},t.prototype.generateAndInjectStyles=function(e,t){var n=t.forwardedComponent,r=n.attrs,i=n.componentStyle;n.warnTooManyClasses;return i.isStatic&&!r.length?i.generateAndInjectStyles(w,this.styleSheet):i.generateAndInjectStyles(this.buildExecutionContext(e,t,r),this.styleSheet)},t}(s.Component);function qe(e,t,n){var r=E(e),i=!Pe(e),o=t.displayName,a=void 0===o?function(e){return Pe(e)?"styled."+e:"Styled("+T(e)+")"}(e):o,s=t.componentId,u=void 0===s?function(e,t,n){var r="string"!=typeof t?"sc":Ae(t),i=(Xe[r]||0)+1;Xe[r]=i;var o=r+"-"+e.generateName(r+i);return n?n+"-"+o:o}(Se,t.displayName,t.parentComponentId):s,c=t.ParentComponent,h=void 0===c?Ye:c,d=t.attrs,p=void 0===d?_:d,f=t.displayName&&t.componentId?Ae(t.displayName)+"-"+t.componentId:t.componentId||u,m=r&&e.attrs?Array.prototype.concat(e.attrs,p).filter(Boolean):p,v=new Se(r?e.componentStyle.rules.concat(n):n,m,f),y=l.a.forwardRef((function(e,t){return l.a.createElement(h,g({},e,{forwardedComponent:y,forwardedRef:t}))}));return y.attrs=m,y.componentStyle=v,y.displayName=a,y.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):_,y.styledComponentId=f,y.target=r?e.target:e,y.withComponent=function(e){var r=t.componentId,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["componentId"]),o=r&&r+"-"+(Pe(e)?e:Ae(T(e)));return qe(e,g({},i,{attrs:m,componentId:o,ParentComponent:h}),n)},y.toString=function(){return"."+y.styledComponentId},i&&je(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),y}var Je=function(e){return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;if(!Object(c.isValidElementType)(n))throw new L(1,String(n));var i=function(){return t(n,r,ve.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,g({},r,i))},i.attrs=function(i){return e(t,n,g({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(qe,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Je[e]=Je(e)}));!function(){function e(t,n){m(this,e),this.rules=t,this.componentId=n,this.isStatic=be(t,_),ue.master.hasId(n)||ue.master.deferredInject(n,[])}e.prototype.createStyles=function(e,t){var n=H(me(this.rules,e,t),"");t.inject(this.componentId,n)},e.prototype.removeStyles=function(e){var t=this.componentId;e.hasId(t)&&e.remove(t)},e.prototype.renderStyles=function(e,t){this.removeStyles(t),this.createStyles(e,t)}}();A&&(window.scCGSHMRCache={});t.b=Je}).call(this,n(96))},function(e,t,n){e.exports=n(103)()},function(e,t,n){e.exports=n(105)()},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(65)},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t){e.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},function(e,t,n){"use strict";e.exports=n(97)},,function(e,t,n){e.exports=function e(t){"use strict";var n=/^\0+/g,r=/[\0\r\f]/g,i=/: */g,o=/zoo|gra/,a=/([,: ])(transform)/g,s=/,+\s*(?![^(]*[)])/g,l=/ +\s*(?![^(]*[)])/g,u=/ *[\0] */g,c=/,\r+?/g,h=/([\t\r\n ])*\f?&/g,d=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,p=/\W+/g,f=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,v=/:(read-only)/g,g=/\s+(?=[{\];=:>])/g,y=/([[}=:>])\s+/g,x=/(\{[^{]+?);(?=\})/g,b=/\s{2,}/g,_=/([^\(])(:+) */g,w=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,T=/([\s\S]*?);/g,E=/-self|flex-/g,M=/[^]*?(:[rp][el]a[\w-]+)[^]*/,A=/stretch|:\s*\w+\-(?:conte|avail)/,P=/([^-])(image-set\()/,L="-webkit-",C="-moz-",O="-ms-",R=59,N=125,F=123,I=40,k=41,D=10,z=13,U=32,j=45,B=42,G=44,H=58,V=47,W=1,X=1,Y=0,q=1,J=1,Q=1,Z=0,$=0,K=0,ee=[],te=[],ne=0,re=null,ie=0,oe=1,ae="",se="",le="";function ue(e,t,i,o,a){for(var s,l,c=0,h=0,d=0,p=0,g=0,y=0,x=0,b=0,w=0,T=0,E=0,M=0,A=0,P=0,C=0,O=0,Z=0,te=0,re=0,he=i.length,ge=he-1,ye="",xe="",be="",_e="",we="",Se="";C<he;){if(x=i.charCodeAt(C),C===ge&&h+p+d+c!==0&&(0!==h&&(x=h===V?D:V),p=d=c=0,he++,ge++),h+p+d+c===0){if(C===ge&&(O>0&&(xe=xe.replace(r,"")),xe.trim().length>0)){switch(x){case U:case 9:case R:case z:case D:break;default:xe+=i.charAt(C)}x=R}if(1===Z)switch(x){case F:case N:case R:case 34:case 39:case I:case k:case G:Z=0;case 9:case z:case D:case U:break;default:for(Z=0,re=C,g=x,C--,x=R;re<he;)switch(i.charCodeAt(re++)){case D:case z:case R:++C,x=g,re=he;break;case H:O>0&&(++C,x=g);case F:re=he}}switch(x){case F:for(g=(xe=xe.trim()).charCodeAt(0),E=1,re=++C;C<he;){switch(x=i.charCodeAt(C)){case F:E++;break;case N:E--;break;case V:switch(y=i.charCodeAt(C+1)){case B:case V:C=ve(y,C,ge,i)}break;case 91:x++;case I:x++;case 34:case 39:for(;C++<ge&&i.charCodeAt(C)!==x;);}if(0===E)break;C++}switch(be=i.substring(re,C),0===g&&(g=(xe=xe.replace(n,"").trim()).charCodeAt(0)),g){case 64:switch(O>0&&(xe=xe.replace(r,"")),y=xe.charCodeAt(1)){case 100:case 109:case 115:case j:s=t;break;default:s=ee}if(re=(be=ue(t,s,be,y,a+1)).length,K>0&&0===re&&(re=xe.length),ne>0&&(l=me(3,be,s=ce(ee,xe,te),t,X,W,re,y,a,o),xe=s.join(""),void 0!==l&&0===(re=(be=l.trim()).length)&&(y=0,be="")),re>0)switch(y){case 115:xe=xe.replace(S,fe);case 100:case 109:case j:be=xe+"{"+be+"}";break;case 107:be=(xe=xe.replace(f,"$1 $2"+(oe>0?ae:"")))+"{"+be+"}",be=1===J||2===J&&pe("@"+be,3)?"@"+L+be+"@"+be:"@"+be;break;default:be=xe+be,112===o&&(_e+=be,be="")}else be="";break;default:be=ue(t,ce(t,xe,te),be,o,a+1)}we+=be,M=0,Z=0,P=0,O=0,te=0,A=0,xe="",be="",x=i.charCodeAt(++C);break;case N:case R:if((re=(xe=(O>0?xe.replace(r,""):xe).trim()).length)>1)switch(0===P&&((g=xe.charCodeAt(0))===j||g>96&&g<123)&&(re=(xe=xe.replace(" ",":")).length),ne>0&&void 0!==(l=me(1,xe,t,e,X,W,_e.length,o,a,o))&&0===(re=(xe=l.trim()).length)&&(xe="\0\0"),g=xe.charCodeAt(0),y=xe.charCodeAt(1),g){case 0:break;case 64:if(105===y||99===y){Se+=xe+i.charAt(C);break}default:if(xe.charCodeAt(re-1)===H)break;_e+=de(xe,g,y,xe.charCodeAt(2))}M=0,Z=0,P=0,O=0,te=0,xe="",x=i.charCodeAt(++C)}}switch(x){case z:case D:if(h+p+d+c+$===0)switch(T){case k:case 39:case 34:case 64:case 126:case 62:case B:case 43:case V:case j:case H:case G:case R:case F:case N:break;default:P>0&&(Z=1)}h===V?h=0:q+M===0&&107!==o&&xe.length>0&&(O=1,xe+="\0"),ne*ie>0&&me(0,xe,t,e,X,W,_e.length,o,a,o),W=1,X++;break;case R:case N:if(h+p+d+c===0){W++;break}default:switch(W++,ye=i.charAt(C),x){case 9:case U:if(p+c+h===0)switch(b){case G:case H:case 9:case U:ye="";break;default:x!==U&&(ye=" ")}break;case 0:ye="\\0";break;case 12:ye="\\f";break;case 11:ye="\\v";break;case 38:p+h+c===0&&q>0&&(te=1,O=1,ye="\f"+ye);break;case 108:if(p+h+c+Y===0&&P>0)switch(C-P){case 2:112===b&&i.charCodeAt(C-3)===H&&(Y=b);case 8:111===w&&(Y=w)}break;case H:p+h+c===0&&(P=C);break;case G:h+d+p+c===0&&(O=1,ye+="\r");break;case 34:case 39:0===h&&(p=p===x?0:0===p?x:p);break;case 91:p+h+d===0&&c++;break;case 93:p+h+d===0&&c--;break;case k:p+h+c===0&&d--;break;case I:if(p+h+c===0){if(0===M)switch(2*b+3*w){case 533:break;default:E=0,M=1}d++}break;case 64:h+d+p+c+P+A===0&&(A=1);break;case B:case V:if(p+c+d>0)break;switch(h){case 0:switch(2*x+3*i.charCodeAt(C+1)){case 235:h=V;break;case 220:re=C,h=B}break;case B:x===V&&b===B&&re+2!==C&&(33===i.charCodeAt(re+2)&&(_e+=i.substring(re,C+1)),ye="",h=0)}}if(0===h){if(q+p+c+A===0&&107!==o&&x!==R)switch(x){case G:case 126:case 62:case 43:case k:case I:if(0===M){switch(b){case 9:case U:case D:case z:ye+="\0";break;default:ye="\0"+ye+(x===G?"":"\0")}O=1}else switch(x){case I:P+7===C&&108===b&&(P=0),M=++E;break;case k:0==(M=--E)&&(O=1,ye+="\0")}break;case 9:case U:switch(b){case 0:case F:case N:case R:case G:case 12:case 9:case U:case D:case z:break;default:0===M&&(O=1,ye+="\0")}}xe+=ye,x!==U&&9!==x&&(T=x)}}w=b,b=x,C++}if(re=_e.length,K>0&&0===re&&0===we.length&&0===t[0].length==0&&(109!==o||1===t.length&&(q>0?se:le)===t[0])&&(re=t.join(",").length+2),re>0){if(s=0===q&&107!==o?function(e){for(var t,n,i=0,o=e.length,a=Array(o);i<o;++i){for(var s=e[i].split(u),l="",c=0,h=0,d=0,p=0,f=s.length;c<f;++c)if(!(0===(h=(n=s[c]).length)&&f>1)){if(d=l.charCodeAt(l.length-1),p=n.charCodeAt(0),t="",0!==c)switch(d){case B:case 126:case 62:case 43:case U:case I:break;default:t=" "}switch(p){case 38:n=t+se;case 126:case 62:case 43:case U:case k:case I:break;case 91:n=t+n+se;break;case H:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(Q>0){n=t+n.substring(8,h-1);break}default:(c<1||s[c-1].length<1)&&(n=t+se+n)}break;case G:t="";default:n=h>1&&n.indexOf(":")>0?t+n.replace(_,"$1"+se+"$2"):t+n+se}l+=n}a[i]=l.replace(r,"").trim()}return a}(t):t,ne>0&&void 0!==(l=me(2,_e,s,e,X,W,re,o,a,o))&&0===(_e=l).length)return Se+_e+we;if(_e=s.join(",")+"{"+_e+"}",J*Y!=0){switch(2!==J||pe(_e,2)||(Y=0),Y){case 111:_e=_e.replace(v,":-moz-$1")+_e;break;case 112:_e=_e.replace(m,"::"+L+"input-$1")+_e.replace(m,"::-moz-$1")+_e.replace(m,":-ms-input-$1")+_e}Y=0}}return Se+_e+we}function ce(e,t,n){var r=t.trim().split(c),i=r,o=r.length,a=e.length;switch(a){case 0:case 1:for(var s=0,l=0===a?"":e[0]+" ";s<o;++s)i[s]=he(l,i[s],n,a).trim();break;default:s=0;var u=0;for(i=[];s<o;++s)for(var h=0;h<a;++h)i[u++]=he(e[h]+" ",r[s],n,a).trim()}return i}function he(e,t,n,r){var i=t,o=i.charCodeAt(0);switch(o<33&&(o=(i=i.trim()).charCodeAt(0)),o){case 38:switch(q+r){case 0:case 1:if(0===e.trim().length)break;default:return i.replace(h,"$1"+e.trim())}break;case H:switch(i.charCodeAt(1)){case 103:if(Q>0&&q>0)return i.replace(d,"$1").replace(h,"$1"+le);break;default:return e.trim()+i.replace(h,"$1"+e.trim())}default:if(n*q>0&&i.indexOf("\f")>0)return i.replace(h,(e.charCodeAt(0)===H?"":"$1")+e.trim())}return e+i}function de(e,t,n,r){var u,c=0,h=e+";",d=2*t+3*n+4*r;if(944===d)return function(e){var t=e.length,n=e.indexOf(":",9)+1,r=e.substring(0,n).trim(),i=e.substring(n,t-1).trim();switch(e.charCodeAt(9)*oe){case 0:break;case j:if(110!==e.charCodeAt(10))break;default:var o=i.split((i="",s)),a=0;for(n=0,t=o.length;a<t;n=0,++a){for(var u=o[a],c=u.split(l);u=c[n];){var h=u.charCodeAt(0);if(1===oe&&(h>64&&h<90||h>96&&h<123||95===h||h===j&&u.charCodeAt(1)!==j))switch(isNaN(parseFloat(u))+(-1!==u.indexOf("("))){case 1:switch(u){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:u+=ae}}c[n++]=u}i+=(0===a?"":",")+c.join(" ")}}return i=r+i+";",1===J||2===J&&pe(i,1)?L+i+i:i}(h);if(0===J||2===J&&!pe(h,1))return h;switch(d){case 1015:return 97===h.charCodeAt(10)?L+h+h:h;case 951:return 116===h.charCodeAt(3)?L+h+h:h;case 963:return 110===h.charCodeAt(5)?L+h+h:h;case 1009:if(100!==h.charCodeAt(4))break;case 969:case 942:return L+h+h;case 978:return L+h+C+h+h;case 1019:case 983:return L+h+C+h+O+h+h;case 883:return h.charCodeAt(8)===j?L+h+h:h.indexOf("image-set(",11)>0?h.replace(P,"$1"+L+"$2")+h:h;case 932:if(h.charCodeAt(4)===j)switch(h.charCodeAt(5)){case 103:return L+"box-"+h.replace("-grow","")+L+h+O+h.replace("grow","positive")+h;case 115:return L+h+O+h.replace("shrink","negative")+h;case 98:return L+h+O+h.replace("basis","preferred-size")+h}return L+h+O+h+h;case 964:return L+h+O+"flex-"+h+h;case 1023:if(99!==h.charCodeAt(8))break;return u=h.substring(h.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),L+"box-pack"+u+L+h+O+"flex-pack"+u+h;case 1005:return o.test(h)?h.replace(i,":"+L)+h.replace(i,":"+C)+h:h;case 1e3:switch(c=(u=h.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(c)){case 226:u=h.replace(w,"tb");break;case 232:u=h.replace(w,"tb-rl");break;case 220:u=h.replace(w,"lr");break;default:return h}return L+h+O+u+h;case 1017:if(-1===h.indexOf("sticky",9))return h;case 975:switch(c=(h=e).length-10,d=(u=(33===h.charCodeAt(c)?h.substring(0,c):h).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(u.charCodeAt(8)<111)break;case 115:h=h.replace(u,L+u)+";"+h;break;case 207:case 102:h=h.replace(u,L+(d>102?"inline-":"")+"box")+";"+h.replace(u,L+u)+";"+h.replace(u,O+u+"box")+";"+h}return h+";";case 938:if(h.charCodeAt(5)===j)switch(h.charCodeAt(6)){case 105:return u=h.replace("-items",""),L+h+L+"box-"+u+O+"flex-"+u+h;case 115:return L+h+O+"flex-item-"+h.replace(E,"")+h;default:return L+h+O+"flex-line-pack"+h.replace("align-content","").replace(E,"")+h}break;case 973:case 989:if(h.charCodeAt(3)!==j||122===h.charCodeAt(4))break;case 931:case 953:if(!0===A.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?de(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):h.replace(u,L+u)+h.replace(u,C+u.replace("fill-",""))+h;break;case 962:if(h=L+h+(102===h.charCodeAt(5)?O+h:"")+h,n+r===211&&105===h.charCodeAt(13)&&h.indexOf("transform",10)>0)return h.substring(0,h.indexOf(";",27)+1).replace(a,"$1"+L+"$2")+h}return h}function pe(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10),i=e.substring(n+1,e.length-1);return re(2!==t?r:r.replace(M,"$1"),i,t)}function fe(e,t){var n=de(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(T," or ($1)").substring(4):"("+t+")"}function me(e,t,n,r,i,o,a,s,l,u){for(var c,h=0,d=t;h<ne;++h)switch(c=te[h].call(ye,e,d,n,r,i,o,a,s,l,u)){case void 0:case!1:case!0:case null:break;default:d=c}if(d!==t)return d}function ve(e,t,n,r){for(var i=t+1;i<n;++i)switch(r.charCodeAt(i)){case V:if(e===B&&r.charCodeAt(i-1)===B&&t+2!==i)return i+1;break;case D:if(e===V)return i+1}return i}function ge(e){for(var t in e){var n=e[t];switch(t){case"keyframe":oe=0|n;break;case"global":Q=0|n;break;case"cascade":q=0|n;break;case"compress":Z=0|n;break;case"semicolon":$=0|n;break;case"preserve":K=0|n;break;case"prefix":re=null,n?"function"!=typeof n?J=1:(J=2,re=n):J=0}}return ge}function ye(t,n){if(void 0!==this&&this.constructor===ye)return e(t);var i=t,o=i.charCodeAt(0);o<33&&(o=(i=i.trim()).charCodeAt(0)),oe>0&&(ae=i.replace(p,91===o?"":"-")),o=1,1===q?le=i:se=i;var a,s=[le];ne>0&&void 0!==(a=me(-1,n,s,s,X,W,0,0,0,0))&&"string"==typeof a&&(n=a);var l=ue(ee,s,n,0,0);return ne>0&&void 0!==(a=me(-2,l,s,s,X,W,l.length,0,0,0))&&"string"!=typeof(l=a)&&(o=0),ae="",le="",se="",Y=0,X=1,W=1,Z*o==0?l:l.replace(r,"").replace(g,"").replace(y,"$1").replace(x,"$1").replace(b," ")}return ye.use=function e(t){switch(t){case void 0:case null:ne=te.length=0;break;default:if("function"==typeof t)te[ne++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else ie=0|!!t}return e},ye.set=ge,void 0!==t&&ge(t),ye}(null)},function(e,t,n){"use strict";var r=function(e,t){return e===t};t.a=function(e,t){var n;void 0===t&&(t=r);var i,o=[],a=!1,s=function(e,n){return t(e,o[n])};return function(){for(var t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return a&&n===this&&r.length===o.length&&r.every(s)||(i=e.apply(this,r),a=!0,n=this,o=r),i}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float uRadius;\n\nvarying float dist;\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nvoid main() {\n  const vec3 color = vec3(0.0, 0.0, 0.0);\n  float opacity = 1.0;\n\n  float threshold = uRadius * 0.8;\n  if(dist >= threshold) {\n    float offsetDist = remap(dist, threshold, uRadius, 0.0, 1.0);\n    opacity = 1.0 - offsetDist;\n  }\n\n  gl_FragColor = vec4(0.0, 0.0, 0.0, opacity);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvarying float dist;\n\nvoid main () {\n  dist = length(position.xyz);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=a(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(l[s[h]]=n[s[h]])}}return l}},function(e,t,n){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,o,a,s,l,u,c,h){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}}()},function(e,t,n){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){var r=n(107);e.exports=p,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t))},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],p=n.index;if(s+=e.slice(a,p),a=p+h.length,d)s+=d[1];else{var f=e[a],m=n[2],v=n[3],g=n[4],y=n[5],x=n[6],b=n[7];s&&(r.push(s),s="");var _=null!=m&&null!=f&&f!==m,w="+"===x||"*"===x,S="?"===x||"*"===x,T=n[2]||c,E=g||y;r.push({name:v||o++,prefix:m||"",delimiter:T,optional:S,repeat:w,partial:_,asterisk:!!b,pattern:E?u(E):b?".*":"[^"+l(T)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var o="",s=n||{},l=(i||{}).pretty?a:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!=typeof c){var h,d=s[c.name];if(null==d){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(h=l(d[p]),!t[u].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===p?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!t[u].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');o+=c.prefix+h}}else o+=c}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function h(e){return e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var u=e[s];if("string"==typeof u)a+=l(u);else{var d=l(u.prefix),p="(?:"+u.pattern+")";t.push(u),u.repeat&&(p+="(?:"+d+p+")*"),a+=p=u.optional?u.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var f=l(n.delimiter||"/"),m=a.slice(-f.length)===f;return i||(a=(m?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+f+"|$)",c(new RegExp("^"+a,h(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return c(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(o(e,n),t,n)}(e,t,n)}},function(e,t){e.exports="#define GLSLIFY 1\nattribute vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nconst int len = 10;\nconst vec3 pink = vec3(0.98, 0.81, 0.85);\nconst vec3 blue = vec3(0.79, 0.91, 0.93);\n\nuniform vec3 u_metaballs[len];\nuniform vec2 u_resolution;\n\nvoid main() {\n  vec2 coord = gl_FragCoord.xy;\n  float velocity = 0.0;\n  vec3 color = blue;\n\n  for(int i = 0; i < len; i++) {\n    vec3 ball = u_metaballs[i];\n    float dx = ball.x - coord.x;\n    float dy = ball.y - coord.y;\n    float r = ball.z;\n    velocity += r * r / (dx * dx + dy * dy);\n\n    if(velocity > 1.0) {\n      float distanceFromRadius = abs(distance(coord.xy, ball.xy));\n      float scaledDistance = distanceFromRadius / r;\n\n      color.r = 2.9 - scaledDistance;\n      color.gb = pink.gb;\n      break;\n    }\n  }\n  gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 v_position;\nattribute vec2 a_position;\nuniform float u_time;\n\nvoid main(void) {\n  gl_PointSize = 2.0;\n  v_position = a_position;\n\n  vec2 pos;\n  pos.x = a_position.x * mod(cos(u_time + length(a_position)), 1.0);\n  pos.y = a_position.y * mod(sin(u_time + length(a_position)), 1.0);\n\n  float posVel = 25.0;\n  float ct = 5.0 + cos(pos.x * posVel) + cos(pos.y * posVel);\n  mat2 transform = mat2(cos(pos.x * ct), sin(pos.x * ct), sin(pos.y * ct), cos(pos.y * ct));\n  pos = transform * pos;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 v_position;\nuniform float u_time;\n\nvoid main() {\n  float gChannel = v_position.y * abs(sin(u_time));\n  gl_FragColor = vec4(v_position.x, gChannel, 1.0, 0.1);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform float u_time;\n\nvec3 yellow = vec3(0.93, 0.86, 0.78);\nvec3 coral = vec3(1.0, 0.38, 0.5);\n\nfloat mapRange(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (newMax - newMin) * (value - oldMin) / (oldMax - oldMin);\n}\n\nfloat smin(float a, float b, float k ) {\n    float h = clamp( 0.5+0.5*(b-a)/k, 0.0, 1.0 );\n    return mix( b, a, h ) - k*h*(1.0-h);\n}\n\nfloat distanceField(vec2 pos, float radius, vec2 origin) {\n   \tfloat d1 = length(pos - origin) - radius;\n    float d2 = length(pos + origin) - radius;\n    float d3 = length(pos - origin.yx) - radius;\n    float d4 = length(pos + origin.yx) - radius;\n\n    float mappedPos = mapRange(pos.x, -1.0, 1.0, 0.1, 0.7); // decrease color channel range\n    float minDist = smin(d1, d2, 0.25);\n\n    return  minDist < 0.0 ? mappedPos : 1.0 - mappedPos;\n}\n\nvoid main() {\n\tvec2 pos = (2.0 * gl_FragCoord.xy - u_resolution.xy) / u_resolution.y;\n\n  float radius = 0.3;\n  vec2 origin;\n\n  origin.x = sin(u_time) * 0.5;\n  origin.y = cos(u_time * 0.5) * 0.5;\n\n  float intensity = distanceField(pos, radius, origin);\n  vec3 color = vec3(intensity * coral);\n  gl_FragColor = vec4(color, 1.0);\n\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform float u_time;\n\n#define MTL_YLW             1.0\n#define MTL_BLUE            2.0\n\n#define MAX_MARCHING_STEPS  255\n#define MIN_DIST            0.0\n#define MAX_DIST            100.0\n#define EPSILON             0.0001\n\nfloat smin( float a, float b, float k ) {\n    float h = clamp( 0.5 + 0.5 * (b - a) / k, 0.0, 1.0 );\n    return mix(b, a, h) - k * h * (1.0 - h);\n}\n\nfloat add(float a, float b) {\n  return smin(a, b, 0.8);\n}\n\nfloat sdSphere(vec3 p, float s) {\n  return length(p) - s;\n}\n\nfloat sdTorus(vec3 p, vec2 t) {\n  vec2 q = vec2(length(p.xz) - t.x, p.y);\n  return length(q) - t.y;\n}\n\nvec3 distort(vec3 p) {\n    float c = cos(10.0 * p.y);\n    float s = sin(10.0 * p.y);\n    mat2  m = mat2(c, -s, s, c);\n    vec3  q = vec3(m * p.xz, p.y);\n    return q;\n}\n\nfloat sceneSDF(vec3 p) {\n  float timeFactor = 1.5;\n  vec3 pt = p, ps1 = p, ps2 = p;\n\n  ps1.y += sin(u_time * timeFactor);\n  ps1.x += sin(-u_time * timeFactor);\n\n  ps2.y += cos(u_time * timeFactor);\n  ps2.x += cos(u_time * timeFactor);\n\n  float torus = sdTorus(distort(pt), vec2(0.4, 0.1));\n  float sphereLeft = sdSphere(ps1, 0.15);\n  float sphereRight = sdSphere(ps2, 0.15);\n  return add(add(torus, sphereLeft), sphereRight);\n}\n\nfloat rayMarch(vec3 camera, vec3 dir, float start, float end) {\n    float depth = start;\n    for (int i = 0; i < MAX_MARCHING_STEPS; i++) {\n        float dist = sceneSDF(camera + depth * dir);\n        if (dist < EPSILON) return depth;\n        depth += dist;\n        if (depth >= end) return end;\n    }\n    return end;\n}\n\nvec3 rayDirection(float fov, vec2 uv) {\n  vec3 dir;\n  dir.xy = uv - u_resolution / 2.0;\n  dir.z = -(u_resolution.y / tan(radians(fov) / 2.0));\n\n  return normalize(dir);\n}\n\nvec3 estimateNormal(vec3 p) {\n    return normalize(vec3(\n        sceneSDF(vec3(p.x + EPSILON, p.y, p.z)) - sceneSDF(vec3(p.x - EPSILON, p.y, p.z)),\n        sceneSDF(vec3(p.x, p.y + EPSILON, p.z)) - sceneSDF(vec3(p.x, p.y - EPSILON, p.z)),\n        sceneSDF(vec3(p.x, p.y, p.z  + EPSILON)) - sceneSDF(vec3(p.x, p.y, p.z - EPSILON))\n    ));\n}\n\nvec3 phongContribForLight(vec3 kd, vec3 ks, float alpha, vec3 p, vec3 camera,\n                          vec3 lightPos, vec3 lightIntensity) {\n    vec3 N = estimateNormal(p);\n    vec3 L = normalize(lightPos - p);\n    vec3 V = normalize(camera - p);\n    vec3 R = normalize(reflect(-L, N));\n\n    float dotLN = dot(L, N);\n    float dotRV = dot(R, V);\n\n    if (dotLN < 0.0) return vec3(0.0, 0.0, 0.0);\n    if (dotRV < 0.0) return lightIntensity * (kd * dotLN);\n\n    return lightIntensity * (kd * dotLN + ks * pow(dotRV, alpha));\n}\n\nvec3 phongIllumination(vec3 ka, vec3 kd, vec3 ks, float alpha, vec3 p, vec3 camera) {\n    const vec3 ambientLight = 0.5 * vec3(1.0, 1.0, 1.0);\n    vec3 color = ambientLight * ka;\n\n    vec3 light1Intensity = vec3(0.4, 0.4, 0.4);\n    vec3 light1Pos = vec3(4.0, 2.0, 4.0);\n\n    vec3 light2Intensity = vec3(0.4, 0.4, 0.4);\n    vec3 light2Pos = vec3(2.0, 2.0, 2.0);\n\n    color += phongContribForLight(kd, ks, alpha, p, camera,\n                                  light1Pos,\n                                  light1Intensity);\n    color += phongContribForLight(kd, ks, alpha, p, camera,\n                                  light2Pos,\n                                  light2Intensity);\n    return color;\n}\n\nvoid main() {\n  vec3 bgColor = vec3(1.0, 0.6, 0.8);\n  vec3 dir = rayDirection(45.0, gl_FragCoord.xy);\n  vec3 camera = vec3(0.0, 0.0, 5.0);\n  float dist = rayMarch(camera, dir, MIN_DIST, MAX_DIST);\n\n  if (dist > MAX_DIST - EPSILON) {\n      gl_FragColor = vec4(bgColor, 1.0);\n      return;\n  }\n\n  vec3 p = camera + dist * dir;\n  vec3 ka = vec3(1.0, 1.0, 0.1);\n  vec3 kd = ka / 2.0;\n  vec3 ks = vec3(1.0, 1.0, 1.0);\n  float shininess = 9.0;\n  vec3 color = phongIllumination(ka, kd, ks, shininess, p, camera);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform float u_time;\n\n#define MAX_ITER\t40\n#define MIN_DIST\t0.0\n#define MAX_DIST\t10.0\n#define EPSILON\t\t0.001\n\nfloat udRoundBox( vec3 p, vec3 b, float r ) {\n  return length(max(abs(p) - b, 0.0)) - r;\n}\n\nfloat smin( float a, float b, float k ) {\n    float h = clamp( 0.5 + 0.5 * (b - a) / k, 0.0, 1.0 );\n    return mix( b, a, h ) - k * h * (1.0 - h);\n}\n\nmat2 rotate(float angle) {\n    return mat2(\n      vec3(cos(angle), -sin(angle), 0.0),\n      vec3(sin(angle), cos(angle), 0.0)\n    );\n}\n\nfloat repeat(float axis, float n) {\n  return mod(axis, n) - n * 0.5;\n}\n\nfloat sceneSDF(vec3 p) {\n    vec3 qLeft = p;\n    vec3 qRight = p;\n\n    float rotationDeg = 15.0;\n\n    qLeft.xy = p.xy * rotate(rotationDeg);\n    qRight.xy = p.xy * rotate(-rotationDeg);\n\n    vec3 dimmensions = vec3(0.4, 1.5, 1.0);\n    float rounding = 0.1;\n    float boxLeft = udRoundBox(qLeft, dimmensions, rounding);\n    float boxRight = udRoundBox(qRight, dimmensions, rounding);\n    return smin(boxLeft, boxRight, 0.1);\n}\n\nvec3 estimateNormal(vec3 p) {\n  vec2 eps = vec2(0.0, EPSILON);\n  return normalize(vec3(\n        sceneSDF(p + eps.yxx) - sceneSDF(p - eps.yxx),\n        sceneSDF(p + eps.xyx) - sceneSDF(p - eps.xyx),\n        sceneSDF(p + eps.xxy) - sceneSDF(p - eps.xxy)));\n}\n\nvec3 toonIllunination(float intensity) {\n  vec3 toonMap;\n  if (intensity < 0.256) {\n      toonMap = vec3(0.195);\n  } else if (intensity < 0.781) {\n      toonMap = vec3(0.781);\n  } else {\n      toonMap = vec3(0.900);\n  }\n  return toonMap;\n}\n\nvec4 colorObject(vec3 p, vec3 rayDir) {\n  vec3 normal = estimateNormal(p);\n\n\tfloat diffuse = max(0.0, dot(-rayDir, normal));\n\tfloat specular = pow(diffuse, 128.0);\n  vec3 lighting = toonIllunination(diffuse + specular);\n\n  return vec4(lighting, 1.0);\n}\n\nvec4 colorBG() {\n  return vec4(0.5, 0.7, 0.7, 1.0);\n}\n\nvec4 rayMarch(vec3 camera, vec3 rayDir) {\n  float totalDist = 0.0;\n  vec3 p = camera;\n  float dist = EPSILON;\n\n  for (int i = 0; i < MAX_ITER; i++) {\n      if (dist < EPSILON) break;\n      dist = sceneSDF(p);\n      p += dist * rayDir;\n  }\n\n  if(dist < EPSILON) {\n    return colorObject(p, rayDir);\n  } else {\n    return colorBG();\n  }\n}\n\nvoid main() {\n  vec3 camera\t= vec3(1.0 + cos(u_time) * 2.0, 3.5 + sin( u_time), 3.5);\n  vec3 target\t= vec3(0.0, 0.0, 0.0);\n\n  vec3 upDir\t\t= vec3(0.0, 1.0, 0.0);\n\n  vec3 camDir\t\t= normalize(target - camera);\n  vec3 camRight\t= normalize(cross(upDir, camera));\n  vec3 camUp\t\t= cross(camDir, camRight);\n\n  vec2 uv =  gl_FragCoord.xy / u_resolution.xy * 2.0 - 1.0;\n  uv.x *= u_resolution.x / u_resolution.y;\n\n  vec3 rayDir = normalize(camRight * uv.x + camUp * uv.y + camDir);\n\n  vec4 color = rayMarch(camera, rayDir);\n  gl_FragColor = color;\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 uv = a_position / u_resolution;\n\n   // convert from 0->1 to 0->2\n   uv *= 2.0;\n\n   // convert from 0->2 to -1->+1 (clipspace)\n   vec2 clipSpace = uv - 1.0;\n   clipSpace *= vec2(1.0, -1.0);\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\n\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\n\nconst float fdelta = 2.0;\nconst float fhalf = 1.0;\n\nvec4 toonShade(float lum) {\n  vec4 color = vec4(0.9, 0.9, 1.0, 1.0);\n  if(lum < 1.0) {\n    if(mod(gl_FragCoord.x + gl_FragCoord.y, fdelta) == 0.0) {\n      color = vec4(1.0, 0.7, 0.7, 1.0);\n    }\n  }\n  if(lum < 0.75) {\n    if(mod(gl_FragCoord.x - gl_FragCoord.y, fdelta) == 0.0) {\n      color = vec4(1.0, 0.5, 0.5, 1.0);\n    }\n  }\n  if(lum < 0.5) {\n    if(mod(gl_FragCoord.x + gl_FragCoord.y - fhalf, fdelta) == 0.0) {\n      color = vec4(1.0, 0.3, 0.3, 1.0);\n    }\n  }\n  if(lum < 0.25) {\n    if(mod(gl_FragCoord.x - gl_FragCoord.y - fhalf, fdelta) == 0.0) {\n      color = vec4(1.0, 0.0, 0.0, 1.0);\n    }\n\n  }\n  return color;\n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / u_resolution;\n  vec2 uv_mouse = u_mouse / u_resolution;\n  uv_mouse.y = 1.0 - uv_mouse.y; // flip axis\n\n  float radar = length(vec2(0.5) - 0.2);\n\n  vec4 bgTexture = texture2D(u_image0, v_texCoord);\n  vec4 fgTexture = texture2D(u_image1, v_texCoord);\n\n  float lum = length(bgTexture.rgb);\n  vec4 color = toonShade(lum);\n\n  if(uv_mouse.x > uv.x) {\n    color = 1.0 - color;\n  }\n  \n  // see batman symbol\n  // if(uv_mouse.x > uv.x) {\n  //   if(fgTexture.a < 0.5) {\n  //     color = 1.0 - color;\n  //   }\n  // } else {\n  //   if(fgTexture.a > 0.5) {\n  //     color = 1.0 - color;\n  //   }\n  // }\n\n  gl_FragColor = vec4(color.rgb, 1.0);\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nattribute vec4 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_displacement;\nuniform bool u_should_explode;\n\nvarying vec3  v_normal;\n\nconst float PI = 3.14159;\n\nfloat sineInOut(const float t) {\n  float t_normal = cos(PI * t);\n  if(t_normal > 0.94) {\n    return 0.0;\n  } else {\n    return -0.5 * (t_normal - 1.0);\n  }\n}\n\nvoid main () {\n   v_normal = normal;\n   float dist = u_displacement;\n   float offsetFactor = 1.2;\n\n   vec4 offset = position;\n   offset.xyz += normal * dist * offsetFactor;\n\n  if(u_should_explode) {\n    offset.xyz += normal * dist * offsetFactor;\n  }\n  gl_Position = projectionMatrix * modelViewMatrix * offset;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvarying vec3 v_normal;\n\nuniform bool u_should_explode;\n\nvoid main () {\n  gl_FragColor = vec4(v_normal.rrr, 0.9);\n}\n"},function(e,t,n){e.exports=function(){"use strict";var e=function(){var t=0,n=document.createElement("div");function r(e){return n.appendChild(e.dom),e}function i(e){for(var r=0;r<n.children.length;r++)n.children[r].style.display=r===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(e){e.preventDefault(),i(++t%n.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=r(new e.Panel("FPS","#0ff","#002")),u=r(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=r(new e.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:n,addPanel:r,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-o,200),a+1e3<=e&&(l.update(1e3*s/(e-a),100),a=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:n,setMode:i}};return e.Panel=function(e,t,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,c=2*a,h=3*a,d=15*a,p=74*a,f=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,l),v.fillStyle=t,v.fillText(e,u,c),v.fillRect(h,d,p,f),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h,d,p,f),{dom:m,update:function(l,g){r=Math.min(r,l),i=Math.max(i,l),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,d),v.fillStyle=t,v.fillText(o(l)+" "+e+" ("+o(r)+"-"+o(i)+")",u,c),v.drawImage(m,h+a,d,p-a,f,h,d,p-a,f),v.fillRect(h+p-a,d,a,f),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h+p-a,d,a,o((1-l/g)*f))}}},e}()},function(e,t){e.exports=function(e){function t(t,n){var r,i,o,a,s;this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(u),l.update(),p=d.NONE},this.update=(r=new e.Vector3,i=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),o=i.clone().inverse(),a=new e.Vector3,s=new e.Quaternion,function(){var e=l.object.position;return r.copy(e).sub(l.target),r.applyQuaternion(i),m.setFromVector3(r),l.autoRotate&&p===d.NONE&&C(2*Math.PI/60/60*l.autoRotateSpeed),m.theta+=v.theta,m.phi+=v.phi,m.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,m.theta)),m.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(l.minDistance,Math.min(l.maxDistance,m.radius)),l.target.add(y),r.setFromSpherical(m),r.applyQuaternion(o),e.copy(l.target).add(r),l.object.lookAt(l.target),!0===l.enableDamping?(v.theta*=1-l.dampingFactor,v.phi*=1-l.dampingFactor):v.set(0,0,0),g=1,y.set(0,0,0),!!(x||a.distanceToSquared(l.object.position)>f||8*(1-s.dot(l.object.quaternion))>f)&&(l.dispatchEvent(u),a.copy(l.object.position),s.copy(l.object.quaternion),x=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",X,!1),l.domElement.removeEventListener("mousedown",z,!1),l.domElement.removeEventListener("wheel",B,!1),l.domElement.removeEventListener("touchstart",H,!1),l.domElement.removeEventListener("touchend",W,!1),l.domElement.removeEventListener("touchmove",V,!1),document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",j,!1),window.removeEventListener("keydown",G,!1)};var l=this,u={type:"change"},c={type:"start"},h={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},p=d.NONE,f=1e-6,m=new e.Spherical,v=new e.Spherical,g=1,y=new e.Vector3,x=!1,b=new e.Vector2,_=new e.Vector2,w=new e.Vector2,S=new e.Vector2,T=new e.Vector2,E=new e.Vector2,M=new e.Vector2,A=new e.Vector2,P=new e.Vector2;function L(){return Math.pow(.95,l.zoomSpeed)}function C(e){v.theta-=e}function O(e){v.phi-=e}var R,N=(R=new e.Vector3,function(e,t){R.setFromMatrixColumn(t,0),R.multiplyScalar(-e),y.add(R)}),F=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),y.add(t)}}(),I=function(){var t=new e.Vector3;return function(n,r){var i=l.domElement===document?l.domElement.body:l.domElement;if(l.object instanceof e.PerspectiveCamera){var o=l.object.position;t.copy(o).sub(l.target);var a=t.length();a*=Math.tan(l.object.fov/2*Math.PI/180),N(2*n*a/i.clientHeight,l.object.matrix),F(2*r*a/i.clientHeight,l.object.matrix)}else l.object instanceof e.OrthographicCamera?(N(n*(l.object.right-l.object.left)/l.object.zoom/i.clientWidth,l.object.matrix),F(r*(l.object.top-l.object.bottom)/l.object.zoom/i.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function k(t){l.object instanceof e.PerspectiveCamera?g/=t:l.object instanceof e.OrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*t)),l.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function D(t){l.object instanceof e.PerspectiveCamera?g*=t:l.object instanceof e.OrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/t)),l.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function z(e){if(!1!==l.enabled){if(e.preventDefault(),e.button===l.mouseButtons.ORBIT){if(!1===l.enableRotate)return;!function(e){b.set(e.clientX,e.clientY)}(e),p=d.ROTATE}else if(e.button===l.mouseButtons.ZOOM){if(!1===l.enableZoom)return;!function(e){M.set(e.clientX,e.clientY)}(e),p=d.DOLLY}else if(e.button===l.mouseButtons.PAN){if(!1===l.enablePan)return;!function(e){S.set(e.clientX,e.clientY)}(e),p=d.PAN}p!==d.NONE&&(document.addEventListener("mousemove",U,!1),document.addEventListener("mouseup",j,!1),l.dispatchEvent(c))}}function U(e){if(!1!==l.enabled)if(e.preventDefault(),p===d.ROTATE){if(!1===l.enableRotate)return;!function(e){_.set(e.clientX,e.clientY),w.subVectors(_,b);var t=l.domElement===document?l.domElement.body:l.domElement;C(2*Math.PI*w.x/t.clientWidth*l.rotateSpeed),O(2*Math.PI*w.y/t.clientHeight*l.rotateSpeed),b.copy(_),l.update()}(e)}else if(p===d.DOLLY){if(!1===l.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),P.subVectors(A,M),P.y>0?k(L()):P.y<0&&D(L()),M.copy(A),l.update()}(e)}else if(p===d.PAN){if(!1===l.enablePan)return;!function(e){T.set(e.clientX,e.clientY),E.subVectors(T,S),I(E.x,E.y),S.copy(T),l.update()}(e)}}function j(e){!1!==l.enabled&&(document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",j,!1),l.dispatchEvent(h),p=d.NONE)}function B(e){!1===l.enabled||!1===l.enableZoom||p!==d.NONE&&p!==d.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?D(L()):e.deltaY>0&&k(L()),l.update()}(e),l.dispatchEvent(c),l.dispatchEvent(h))}function G(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){switch(e.keyCode){case l.keys.UP:I(0,l.keyPanSpeed),l.update();break;case l.keys.BOTTOM:I(0,-l.keyPanSpeed),l.update();break;case l.keys.LEFT:I(l.keyPanSpeed,0),l.update();break;case l.keys.RIGHT:I(-l.keyPanSpeed,0),l.update()}}(e)}function H(e){if(!1!==l.enabled){switch(e.touches.length){case 1:if(!1===l.enableRotate)return;!function(e){b.set(e.touches[0].pageX,e.touches[0].pageY)}(e),p=d.TOUCH_ROTATE;break;case 2:if(!1===l.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);M.set(0,r)}(e),p=d.TOUCH_DOLLY;break;case 3:if(!1===l.enablePan)return;!function(e){S.set(e.touches[0].pageX,e.touches[0].pageY)}(e),p=d.TOUCH_PAN;break;default:p=d.NONE}p!==d.NONE&&l.dispatchEvent(c)}}function V(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===l.enableRotate)return;if(p!==d.TOUCH_ROTATE)return;!function(e){_.set(e.touches[0].pageX,e.touches[0].pageY),w.subVectors(_,b);var t=l.domElement===document?l.domElement.body:l.domElement;C(2*Math.PI*w.x/t.clientWidth*l.rotateSpeed),O(2*Math.PI*w.y/t.clientHeight*l.rotateSpeed),b.copy(_),l.update()}(e);break;case 2:if(!1===l.enableZoom)return;if(p!==d.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);A.set(0,r),P.subVectors(A,M),P.y>0?D(L()):P.y<0&&k(L()),M.copy(A),l.update()}(e);break;case 3:if(!1===l.enablePan)return;if(p!==d.TOUCH_PAN)return;!function(e){T.set(e.touches[0].pageX,e.touches[0].pageY),E.subVectors(T,S),I(E.x,E.y),S.copy(T),l.update()}(e);break;default:p=d.NONE}}function W(e){!1!==l.enabled&&(l.dispatchEvent(h),p=d.NONE)}function X(e){e.preventDefault()}l.domElement.addEventListener("contextmenu",X,!1),l.domElement.addEventListener("mousedown",z,!1),l.domElement.addEventListener("wheel",B,!1),l.domElement.addEventListener("touchstart",H,!1),l.domElement.addEventListener("touchend",W,!1),l.domElement.addEventListener("touchmove",V,!1),window.addEventListener("keydown",G,!1),this.update()}return t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t,Object.defineProperties(t.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t}},function(e,t){e.exports="#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float uTime;\nuniform float uFreq;\n\nattribute vec4 position;\nattribute vec3 normal;\n\nvoid main () {\n  vec4 offset = position;\n  float dist = sin(uTime) * 0.5 + 0.5;\n  offset.xyz += normal * dist;\n  gl_Position = projectionMatrix * modelViewMatrix * offset;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float uTime;\nuniform float uFreq;\n\nfloat map(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvoid main () {\n  // gl_FragColor = vec4(1.0, 0.4, 0.3, 0.9);\n  // gl_FragColor = vec4(1, 0.6, 0.8, 0.9);\n  vec4 color;\n  color.rgba = vec4(1, 0.5, 0.4, 0.9);\n  color.r = map(uFreq, 0.0, 255.0, 0.2, 1.0);\n  color.b = map(uFreq, 0.0, 255.0, 0.5, 0.8);\n  color.g = map(uFreq, 0.0, 255.0, 0.2, 0.7);\n  gl_FragColor = color;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform vec3 uNoise;\nuniform float uTime;\nuniform float uAmp;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nvoid main () {\n  float dist = distance(uv.x, 0.5);\n  float noiseFactor = 1.0 - remap(dist, 0.0, 0.5, 0.0, 1.0);\n  float displacement = uAmp * snoise(vec3(position * uNoise * 0.06) + uTime * 0.5 );\n  vec3 newPosition = position + normal * (displacement * noiseFactor);\n\n  vNormal = normal;\n  vPosition = newPosition;\n  vUv = uv;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\nuniform vec3 uColor;\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nvoid main() {\n    float zDistance = 1.0 - vPosition.z;\n    vec3 shadow = uColor * 0.4;\n    vec3 white = vec3(\n        remap(zDistance, -1.0, 1.0, shadow.r, uColor.r),\n        remap(zDistance, -1.0, 1.0, shadow.g, uColor.g),\n        remap(zDistance, -1.0, 1.0, shadow.b, uColor.b)\n    );\n\n    // gl_FragColor = vec4(1.0, 0.75, 0.8, 1.0);\n    gl_FragColor = vec4(white, 1.0);\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nfloat fbm3d(vec3 x, const in int it) {\n    float v = 0.0;\n    float a = 0.5;\n    vec3 shift = vec3(100);\n\n    \n    for (int i = 0; i < 32; ++i) {\n        if(i<it) {\n            v += a * snoise(x);\n            x = x * 2.0 + shift;\n            a *= 0.5;\n        }\n    }\n    return v;\n}\n\nvec4 gammaCorrect(vec4 color, float gamma){\n  return pow(color, vec4(1.0 / gamma));\n}\n\nvec4 levelRange(vec4 color, float minInput, float maxInput){\n  return min(max(color - vec4(minInput), vec4(0.0)) / (vec4(maxInput) - vec4(minInput)), vec4(1.0));\n}\n\nvec4 levels(vec4 color, float minInput, float gamma, float maxInput){\n  return gammaCorrect(levelRange(color, minInput, maxInput), gamma);\n}\n\nuniform sampler2D uTxtShape;\nuniform sampler2D uTxtCloudNoise;\nuniform float uTime;\n\nuniform float uFac1;\nuniform float uFac2;\nuniform float uTimeFactor1;\nuniform float uTimeFactor2;\nuniform float uDisplStrenght1;\nuniform float uDisplStrenght2;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vec2 newUv = vUv;\n\n    vec4 txtNoise1 = texture2D(uTxtCloudNoise, vec2(vUv.x + uTime * 0.1, vUv.y - uTime * 0.14));\n    vec4 txtNoise2 = texture2D(uTxtCloudNoise, vec2(vUv.x - uTime * 0.02, vUv.y + uTime * 0.17 + 0.2));\n\n    float noiseBig = fbm3d(vec3(vUv * uFac1, uTime * uTimeFactor1), 3);\n    newUv += noiseBig * uDisplStrenght1;\n\n    float noiseSmall = snoise(vec3(newUv * uFac2, uTime * uTimeFactor2));\n\n    newUv += noiseSmall * uDisplStrenght2;\n\n    vec4 txtShape = texture2D(uTxtShape, newUv);\n\n    float alpha = levels((txtNoise1 + txtNoise2) * 0.6, 0.2, 0.4, 0.7).r;\n    alpha *= txtShape.r;\n\n    gl_FragColor = vec4(vec3(0.85, 0.8, 1.0), alpha);\n    // gl_FragColor = vec4(vec3(alpha, 0.0, 0.0), 1.0);\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvarying vec2 vUv;\n\nvoid main() {\n\t// #include <uv_vertex>\n  vUv = uv;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvoid main() {\n    gl_FragColor = vec4(1.0, 0.75, 0.8, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main () {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports='precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture_a;\nuniform sampler2D u_texture_b;\nuniform float u_time;\nuniform float u_mix_value;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nfloat rand(vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\n//\n// GLSL textureless classic 2D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec2 P)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod289(Pi); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute(permute(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\nvoid main() {\n    float zDistance = 1.0 - vPosition.z;\n    vec3 white = vec3(\n        remap(zDistance, -1.0, 1.0, 0.7, 0.9),\n        remap(zDistance, -1.0, 1.0, 0.7, 0.9),\n        remap(zDistance, -1.0, 1.0, 0.7, 0.9)\n    );\n    vec4 color = vec4(white, 1.0);\n\n    vec4 tA = texture2D(u_texture_a, vUv);\n    vec4 tB = texture2D(u_texture_b, vUv);\n    vec4 texture = mix(tA, tB, u_mix_value);\n\n    bool isWhite = texture.r > 0.95 && texture.g > 0.9 && texture.b > 0.9;\n\n    // to account for white spots in the character\n    bool isInCharacterZone = vUv.x < 0.41 || vUv.x > 0.6 || vUv.y > 0.7;\n    if(isInCharacterZone && isWhite) {\n        color.a = 0.0;\n        texture.a = 0.0;\n    }\n\n    gl_FragColor = texture * color;\n}\n'},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_time;\nuniform float u_amp;\nuniform vec3 u_noise;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nvoid main () {\n  float displacement = u_amp * snoise(vec3(position * u_noise * 0.06) + u_time );\n  vec3 newPosition = position + normal * displacement;\n\n  vNormal = normal;\n  vPosition = newPosition;\n  vUv = uv;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    vec3 color = vec3(0.96, 0.91, 0.4);\n    color.r = remapFreq(0.9, 1.0);\n    color.g = remapFreq(0.85, 0.91);\n    color.b = remapFreq(0.35, 0.45);\n    // color.b = 1.0 - remapFreq(0.3, 0.9);\n\n    gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main () {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\n// chunk(shadowmap_pars_fragment);\n\nvoid main() {\n    vec3 color = vec3(0.07, 0.065, 0.7);\n    color.r = remapFreq(0.05, 0.1);\n    color.g = remapFreq(0.045, 0.09);\n    color.b = remapFreq(0.6, 0.8);\n\n    gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports='precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform  float u_freq;\nuniform float u_time;\n\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\n// chunk(shadowmap_pars_vertex);\n\nvoid main () {\n  float amp = remapFreq(1.0, 3.5);\n  vec3 fnoise = vec3(1.0, 1.0, 1.0);\n  fnoise.x = remapFreq(0.0, 1.0);\n  fnoise.y = remapFreq(0.0, 2.0);\n  fnoise.z = remapFreq(-1.0, 3.0);\n\n  float displacement = amp * cnoise(vec3(position * fnoise * 0.06) + u_time );\n  vec3 newPosition = position + normal * displacement;\n\n   // chunk(shadowmap_vertex);\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n\n}\n'},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nmat4 scaleY(float scale) {\n  return mat4(\n    vec4(1.0, 0.0, 0.0, 0.0),\n    vec4(0.0, scale, 0.0, 0.0),\n    vec4(0.0, 0.0, 1.0, 0.0),\n    vec4(0.0, 0.0, 0.0, 1.0)\n  );\n}\n\nmat4 translateY(float translate) {\n  return mat4(\n    vec4(1.0, 0.0, 0.0, 0.0),\n    vec4(0.0, 1.0, 0.0, 0.0),\n    vec4(0.0, 0.0, 1.0, 0.0),\n    vec4(0.0, translate, 0.0, 1.0)\n  );\n}\n\nvoid main () {\n  float freq = remapFreq(0.5, 2.0);\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  // gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0) * scaleY(freq) * translateY(freq);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    vec3 color = vec3(0.9, 0.35, 0.35);\n    color.r = remapFreq(0.7, 1.0);\n    color.g = remapFreq(0.2, 0.4);\n    color.b = remapFreq(0.2, 0.4);\n\n    gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_time;\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    vec3 color = vec3(0.0, 0.0, 0.0);\n\n    if(u_freq > 200.0) {\n        color.r = remapFreq(0.5, 0.7);\n        color.g = remapFreq(0.5, 0.7);\n        color.b = remapFreq(0.5, 1.0);\n    } else {\n        color.r = remapFreq(0.0, 0.6);\n        color.g = remapFreq(0.0, 0.6);\n        color.b = remapFreq(0.0, 0.6);\n    }\n\n    float alpha = remapFreq(0.0, 1.0);\n    gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_time;\nuniform vec3 u_rotate_speed;\nuniform vec3 u_translate_speed;\nuniform float u_angle;\nuniform float u_radius;\n\nconst float DEG_TO_RAD = 3.141592653589793 / 180.0;\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nmat3 rotate() {\n    float rad = u_time * DEG_TO_RAD;\n    return rotateX(rad * u_rotate_speed.x) *\n            rotateY(rad * u_rotate_speed.y) *\n            rotateZ(rad * u_rotate_speed.z);\n}\n\nvec3 translate() {\n    vec3 centerCoord = vec3(0.0, 0.0, 0.0);\n    return vec3(\n        centerCoord.x + u_radius * sin(u_angle),\n        centerCoord.y + u_radius * cos(u_angle),\n        centerCoord.z\n\n    );\n}\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nbool isInBounds(vec3 pos) {\n    vec3 bounds = vec3(100.0, 100.0, 100.0);\n    return abs(pos.x) < bounds.x &&\n            abs(pos.y) < bounds.y &&\n            abs(pos.z) < bounds.z;\n}\n\nvoid main () {\n    vec3 pos = position;\n    pos *= rotate();\n    pos += translate();\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    float colorFactor = 0.7;\n    vec3 color = vec3(0.0, 0.0, 1.0);\n\n    float alpha = 1.0;\n\n    if(u_freq > 240.0) {\n        color.r = reverseRemapFreq(0.4, 0.8);\n        color.g = reverseRemapFreq(0.4, 0.8);\n        color.b = reverseRemapFreq(0.6, 1.0);\n        alpha = remapFreq(0.1, 0.6);\n\n    } else if(u_freq > 200.0) {\n        color.r = reverseRemapFreq(0.4, 1.0);\n        color.g = reverseRemapFreq(0.4, 1.0);\n        color.b = reverseRemapFreq(0.6, 1.0);\n        alpha = remapFreq(0.1, 0.8);\n    } else {\n        color.r = reverseRemapFreq(0.4, 1.0) ;\n        color.g = reverseRemapFreq(0.4, 1.0) ;\n        color.b = reverseRemapFreq(0.4, 1.0);\n        alpha = remapFreq(0.1, 1.0);\n    }\n\n    gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_freq;\nuniform float u_radius;\nuniform float u_angle;\nuniform float u_time;\n\nconst float DEG_TO_RAD = 3.141592653589793 / 180.0;\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nvec3 translate() {\n    vec3 centerCoord = vec3(0.0, 0.0, 0.0);\n    return vec3(\n        centerCoord.x + u_radius * sin(u_angle),\n        centerCoord.y,\n        centerCoord.z + u_radius * cos(u_angle)\n    );\n}\n\nvoid main () {\n\n  vec3 pos = position;\n\n  pos += translate();\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\nuniform sampler2D u_texture;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    vec4 texture = texture2D(u_texture, gl_PointCoord);\n    vec4 color = vec4(0.0, 1.0, 1.0, 1.0);\n    color.r = reverseRemapFreq(0.0, 0.7);\n    color.g = remapFreq(0.0, 0.7);\n    color.b = remapFreq(0.0, 0.7);\n    color.a = 0.0;\n\n    gl_FragColor = vec4(color.rgb * texture.rgb, color.a);\n    if(texture.a < 0.1) discard;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_time;\nuniform float u_freq;\nuniform vec3 u_translate_speed;\nuniform float u_max_screen_dimension;\nuniform float u_min_size;\nuniform float u_max_size;\n\nconst float DEG_TO_RAD = 3.141592653589793 / 180.0;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvec3 translate() {\n  return vec3(\n    position.x + sin(u_time) * u_translate_speed.x,\n    position.y + sin(u_time) * u_translate_speed.y,\n    position.z + sin(u_time) * u_translate_speed.z\n  );\n}\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nmat3 rotate() {\n  vec3 u_rotate_speed = vec3(10.0, 0.1, 2.0);\n    float rad = u_time * DEG_TO_RAD;\n    return rotateX(rad * u_rotate_speed.x) *\n            rotateY(rad * u_rotate_speed.y) *\n            rotateZ(rad * u_rotate_speed.z);\n}\n\nvoid main () {\n  vec3 pos = position;\n  pos *= rotate();\n  pos += translate();\n\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  float size = remapFreq(u_min_size, u_max_size);\n  gl_PointSize = size * (300.0 / -mvPosition.z);\n  gl_Position = projectionMatrix * mvPosition;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    vec3 color = vec3(0.0, 0.0, 1.0);\n    color.r = remapFreq(0.2, 1.0);\n    color.g = remapFreq(0.2, 1.0);\n    color.b = remapFreq(0.2, 1.0);\n\n    float alpha = remapFreq(0.7, 1.0);\n\n    gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_freq;\nuniform float u_time;\nuniform float u_radius;\nuniform float u_angle;\nuniform vec3 u_rotate_speed;\nuniform vec3 u_translate_speed;\nuniform vec3 u_rotation;\nuniform float u_position_z;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nmat3 rotate() {\n    return rotateX(u_rotation.x) *\n            rotateY(u_rotation.y) *\n            rotateZ(u_rotation.z);\n}\n\nmat3 scale() {\n    float scale = remapFreq(0.1, 1.0);\n    return mat3(\n        scale, 0.0, 0.0,\n        0.0, scale, 0.0,\n        0.0, 0.0, scale\n    );\n}\n\nvec3 translate() {\n    vec3 centerCoord = vec3(0.0, 0.0, 0.0);\n    return vec3(\n        centerCoord.x + u_radius * sin(u_angle),\n        centerCoord.y + u_radius * cos(u_angle),\n        u_position_z\n    );\n}\n\nvoid main () {\n    vec3 pos = position;\n    pos *= rotate();\n    pos *= scale();\n    pos += translate();\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float uFreq;\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nfloat remapFreq(float freq, float min, float max) {\n  return remap(freq, 0.0, 255.0, min, max);\n}\n\nvoid main() {\n  vec3 baseColor = vec3(0.6, 0.6, 0.6);\n  vec3 color = baseColor;\n  color.r = remapFreq(uFreq, 0.0, baseColor.r);\n  color.g = remapFreq(uFreq, 0.0, baseColor.g);\n  color.b = remapFreq(uFreq, 0.0, baseColor.b);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main () {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,c=u&&u(Object);e.exports=function e(t,n,h){if("string"!=typeof n){if(c){var d=u(n);d&&d!==c&&e(t,d,h)}var p=a(n);s&&(p=p.concat(s(n)));for(var f=0;f<p.length;++f){var m=p[f];if(!(r[m]||i[m]||h&&h[m])){var v=l(n,m);try{o(t,m,v)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return r.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.a=i},function(e,t,n){"use strict";
/** @license React v17.0.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),i=n(17),o=n(67);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(m,e)||!p.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,x);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,T=60107,E=60108,M=60114,A=60109,P=60110,L=60112,C=60113,O=60120,R=60115,N=60116,F=60121,I=60128,k=60129,D=60130,z=60131;if("function"==typeof Symbol&&Symbol.for){var U=Symbol.for;w=U("react.element"),S=U("react.portal"),T=U("react.fragment"),E=U("react.strict_mode"),M=U("react.profiler"),A=U("react.provider"),P=U("react.context"),L=U("react.forward_ref"),C=U("react.suspense"),O=U("react.suspense_list"),R=U("react.memo"),N=U("react.lazy"),F=U("react.block"),U("react.scope"),I=U("react.opaque.id"),k=U("react.debug_trace_mode"),D=U("react.offscreen"),z=U("react.legacy_hidden")}var j,B="function"==typeof Symbol&&Symbol.iterator;function G(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=B&&e[B]||e["@@iterator"])?e:null}function H(e){if(void 0===j)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var V=!1;function W(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function X(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function Y(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case T:return"Fragment";case S:return"Portal";case M:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case O:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case L:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return Y(e.type);case F:return Y(e._render);case N:t=e._payload,e=e._init;try{return Y(e(t))}catch(e){}}return null}function q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function J(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=J(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=J(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ue(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ve=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ye).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var we=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(we[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Me=null,Ae=null,Pe=null;function Le(e){if(e=$r(e)){if("function"!=typeof Me)throw Error(a(280));var t=e.stateNode;t&&(t=ei(t),Me(e.stateNode,e.type,t))}}function Ce(e){Ae?Pe?Pe.push(e):Pe=[e]:Ae=e}function Oe(){if(Ae){var e=Ae,t=Pe;if(Pe=Ae=null,Le(e),t)for(e=0;e<t.length;e++)Le(t[e])}}function Re(e,t){return e(t)}function Ne(e,t,n,r,i){return e(t,n,r,i)}function Fe(){}var Ie=Re,ke=!1,De=!1;function ze(){null===Ae&&null===Pe||(Fe(),Oe())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var je=!1;if(h)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){je=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(e){je=!1}function Ge(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var He=!1,Ve=null,We=!1,Xe=null,Ye={onError:function(e){He=!0,Ve=e}};function qe(e,t,n,r,i,o,a,s,l){He=!1,Ve=null,Ge.apply(Ye,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Je(e)!==e)throw Error(a(188))}function $e(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ze(i),e;if(o===r)return Ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ke(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,ot=[],at=null,st=null,lt=null,ut=new Map,ct=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ft(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&(null!==(t=$r(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vt(e){var t=Zr(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=$r(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){gt(e)&&n.delete(t)}function xt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=$r(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&gt(at)&&(at=null),null!==st&&gt(st)&&(st=null),null!==lt&&gt(lt)&&(lt=null),ut.forEach(yt),ct.forEach(yt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xt)))}function _t(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&bt(at,e),null!==st&&bt(st,e),null!==lt&&bt(lt,e),ut.forEach(t),ct.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)vt(n),null===n.blockedOn&&ht.shift()}function wt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:wt("Animation","AnimationEnd"),animationiteration:wt("Animation","AnimationIteration"),animationstart:wt("Animation","AnimationStart"),transitionend:wt("Transition","TransitionEnd")},Tt={},Et={};function Mt(e){if(Tt[e])return Tt[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return Tt[e]=n[t];return e}h&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var At=Mt("animationend"),Pt=Mt("animationiteration"),Lt=Mt("animationstart"),Ct=Mt("transitionend"),Ot=new Map,Rt=new Map,Nt=["abort","abort",At,"animationEnd",Pt,"animationIteration",Lt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ct,"transitionEnd","waiting","waiting"];function Ft(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Ot.set(r,i),u(i,[r])}}(0,o.unstable_now)();var It=8;function kt(e){if(0!=(1&e))return It=15,1;if(0!=(2&e))return It=14,2;if(0!=(4&e))return It=13,4;var t=24&e;return 0!==t?(It=12,t):0!=(32&e)?(It=11,32):0!==(t=192&e)?(It=10,t):0!=(256&e)?(It=9,256):0!==(t=3584&e)?(It=8,t):0!=(4096&e)?(It=7,4096):0!==(t=4186112&e)?(It=6,t):0!==(t=62914560&e)?(It=5,t):67108864&e?(It=4,67108864):0!=(134217728&e)?(It=3,134217728):0!==(t=805306368&e)?(It=2,t):0!=(1073741824&e)?(It=1,1073741824):(It=8,e)}function Dt(e,t){var n=e.pendingLanes;if(0===n)return It=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=It=15;else if(0!==(o=134217727&n)){var l=o&~a;0!==l?(r=kt(l),i=It):0!==(s&=o)&&(r=kt(s),i=It)}else 0!==(o=n&~a)?(r=kt(o),i=It):0!==s&&(r=kt(s),i=It);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(kt(t),i<=It)return t;It=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=jt(24&~t))?Ut(10,t):e;case 10:return 0===(e=jt(192&~t))?Ut(8,t):e;case 8:return 0===(e=jt(3584&~t))&&(0===(e=jt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=jt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function jt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/Wt|0)|0},Vt=Math.log,Wt=Math.LN2;var Xt=o.unstable_UserBlockingPriority,Yt=o.unstable_runWithPriority,qt=!0;function Jt(e,t,n,r){ke||Fe();var i=Zt,o=ke;ke=!0;try{Ne(i,e,t,n,r)}finally{(ke=o)||ze()}}function Qt(e,t,n,r){Yt(Xt,Zt.bind(null,e,t,n,r))}function Zt(e,t,n,r){var i;if(qt)if((i=0==(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var o=$t(e,t,n,r);if(null===o)i&&ft(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(o,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=mt(at,e,t,n,r,i),!0;case"dragenter":return st=mt(st,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ut.set(o,mt(ut.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ct.set(o,mt(ct.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;ft(e,r)}Cr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Ee(r);if(null!==(i=Zr(i))){var o=Je(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Qe(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Cr(e,t,r,i,n),null}var Kt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Kt?Kt.value:Kt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function sn(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var ln,un,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),fn=sn(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(ln=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=ln=0,cn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=sn(mn),gn=sn(i({},mn,{dataTransfer:0})),yn=sn(i({},pn,{relatedTarget:0})),xn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=sn(i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),_n=sn(i({},hn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Mn(){return En}var An=sn(i({},pn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Pn=sn(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Cn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=sn(i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Rn=[9,13,27,32],Nn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var In=h&&"TextEvent"in window&&!Fn,kn=h&&(!Nn||Fn&&8<Fn&&11>=Fn),Dn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ce(r),0<(t=Rr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Xn=null;function Yn(e){Tr(e,0)}function qn(e){if(Z(Kr(e)))return e}function Jn(e,t){if("change"===e)return t}var Qn=!1;if(h){var Zn;if(h){var $n="oninput"in document;if(!$n){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),$n="function"==typeof Kn.oninput}Zn=$n}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",tr),Xn=Wn=null)}function tr(e){if("value"===e.propertyName&&qn(Xn)){var t=[];if(Vn(t,Xn,e,Ee(e)),e=Yn,ke)e(t);else{ke=!0;try{Re(e,t)}finally{ke=!1,ze()}}}}function nr(e,t,n){"focusin"===e?(er(),Xn=n,(Wn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Xn)}function ir(e,t){if("click"===e)return qn(t)}function or(e,t){if("input"===e||"change"===e)return qn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},sr=Object.prototype.hasOwnProperty;function lr(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!sr.call(t,n[r])||!ar(e[n[r]],t[n[r]]))return!1;return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pr=h&&"documentMode"in document&&11>=document.documentMode,fr=null,mr=null,vr=null,gr=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;gr||null==fr||fr!==$(r)||("selectionStart"in(r=fr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Rr(mr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fr)))}Ft("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ft("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ft(Nt,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),br=0;br<xr.length;br++)Rt.set(xr[br],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Sr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(qe.apply(this,arguments),He){if(!He)throw Error(a(198));var c=Ve;He=!1,Ve=null,We||(We=!0,Xe=c)}}(r,t,void 0,e),e.currentTarget=null}function Tr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Sr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Sr(i,s,u),o=l}}}if(We)throw e=Xe,We=!1,Xe=null,e}function Er(e,t){var n=ti(t),r=e+"__bubble";n.has(r)||(Lr(t,e,2,!1),n.add(r))}var Mr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Mr]||(e[Mr]=!0,s.forEach((function(t){wr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&wr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ti(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Lr(o,e,i,t),a.add(s))}function Lr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Qt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Cr(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Zr(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(De)return e(t,n);De=!0;try{Ie(e,t,n)}finally{De=!1,ze()}}((function(){var r=o,i=Ee(n),a=[];e:{var s=Ot.get(e);if(void 0!==s){var l=dn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case At:case Pt:case Lt:l=xn;break;case Ct:l=Cn;break;case"scroll":l=fn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Ue(f,d))&&c.push(Or(f,m,p)))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!Zr(u)&&!u[Jr])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Zr(u):null)&&(u!==(h=Je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=vn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Pn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:Kr(l),p=null==u?s:Kr(u),(s=new c(m,f+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,Zr(i)===r&&((c=new c(d,f+"enter",u,n,i)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,f=0,p=c=l;p;p=Nr(p))f++;for(p=0,m=d;m;m=Nr(m))p++;for(;0<f-p;)c=Nr(c),f--;for(;0<p-f;)d=Nr(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=Nr(c),d=Nr(d)}c=null}else c=null;null!==l&&Fr(a,s,l,c,!1),null!==u&&null!==h&&Fr(a,h,u,c,!0)}if("select"===(l=(s=r?Kr(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Jn;else if(Hn(s))if(Qn)v=or;else{v=rr;var g=nr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Vn(a,v,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?Kr(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(fr=g,mr=r,vr=null);break;case"focusout":vr=mr=fr=null;break;case"mousedown":gr=!0;break;case"contextmenu":case"mouseup":case"dragend":gr=!1,yr(a,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":yr(a,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Bn?Un(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(kn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Bn&&(y=nn()):(en="value"in(Kt=i)?Kt.value:Kt.textContent,Bn=!0)),0<(g=Rr(r,x)).length&&(x=new _n(x,e,null,n,i),a.push({event:x,listeners:g}),y?x.data=y:null!==(y=jn(n))&&(x.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(zn=!0,Dn);case"textInput":return(e=t.data)===Dn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Nn&&Un(e,t)?(e=nn(),tn=en=Kt=null,Bn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Rr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Tr(a,t)}))}function Or(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Rr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ue(e,n))&&r.unshift(Or(e,o,i)),null!=(o=Ue(e,t))&&r.push(Or(e,o,i))),e=e.return}return r}function Nr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Fr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Ue(n,o))&&a.unshift(Or(n,l,s)):i||null!=(l=Ue(n,o))&&a.push(Or(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Ir(){}var kr=null,Dr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ur(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jr="function"==typeof setTimeout?setTimeout:void 0,Br="function"==typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Vr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Wr=0;var Xr=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Xr,qr="__reactProps$"+Xr,Jr="__reactContainer$"+Xr,Qr="__reactEvents$"+Xr;function Zr(e){var t=e[Yr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jr]||n[Yr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Vr(e);null!==e;){if(n=e[Yr])return n;e=Vr(e)}return t}n=(e=n).parentNode}return null}function $r(e){return!(e=e[Yr]||e[Jr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Kr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ei(e){return e[qr]||null}function ti(e){var t=e[Qr];return void 0===t&&(t=e[Qr]=new Set),t}var ni=[],ri=-1;function ii(e){return{current:e}}function oi(e){0>ri||(e.current=ni[ri],ni[ri]=null,ri--)}function ai(e,t){ri++,ni[ri]=e.current,e.current=t}var si={},li=ii(si),ui=ii(!1),ci=si;function hi(e,t){var n=e.type.contextTypes;if(!n)return si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function di(e){return null!=(e=e.childContextTypes)}function pi(){oi(ui),oi(li)}function fi(e,t,n){if(li.current!==si)throw Error(a(168));ai(li,t),ai(ui,n)}function mi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,Y(t)||"Unknown",o));return i({},n,r)}function vi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||si,ci=li.current,ai(li,e),ai(ui,ui.current),!0}function gi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=mi(e,t,ci),r.__reactInternalMemoizedMergedChildContext=e,oi(ui),oi(li),ai(li,e)):oi(ui),ai(ui,n)}var yi=null,xi=null,bi=o.unstable_runWithPriority,_i=o.unstable_scheduleCallback,wi=o.unstable_cancelCallback,Si=o.unstable_shouldYield,Ti=o.unstable_requestPaint,Ei=o.unstable_now,Mi=o.unstable_getCurrentPriorityLevel,Ai=o.unstable_ImmediatePriority,Pi=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Ci=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Ri={},Ni=void 0!==Ti?Ti:function(){},Fi=null,Ii=null,ki=!1,Di=Ei(),zi=1e4>Di?Ei:function(){return Ei()-Di};function Ui(){switch(Mi()){case Ai:return 99;case Pi:return 98;case Li:return 97;case Ci:return 96;case Oi:return 95;default:throw Error(a(332))}}function ji(e){switch(e){case 99:return Ai;case 98:return Pi;case 97:return Li;case 96:return Ci;case 95:return Oi;default:throw Error(a(332))}}function Bi(e,t){return e=ji(e),bi(e,t)}function Gi(e,t,n){return e=ji(e),_i(e,t,n)}function Hi(){if(null!==Ii){var e=Ii;Ii=null,wi(e)}Vi()}function Vi(){if(!ki&&null!==Fi){ki=!0;var e=0;try{var t=Fi;Bi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fi=null}catch(t){throw null!==Fi&&(Fi=Fi.slice(e+1)),_i(Ai,Hi),t}finally{ki=!1}}}var Wi=_.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Yi=ii(null),qi=null,Ji=null,Qi=null;function Zi(){Qi=Ji=qi=null}function $i(e){var t=Yi.current;oi(Yi),e.type._context._currentValue=t}function Ki(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function eo(e,t){qi=e,Qi=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ra=!0),e.firstContext=null)}function to(e,t){if(Qi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Qi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===qi)throw Error(a(308));Ji=t,qi.dependencies={lanes:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var no=!1;function ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ao(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function so(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var o=e.updateQueue;no=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?a=c:s.next=c,s=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==a){for(d=o.baseState,s=0,h=c=u=null;;){l=a.lane;var p=a.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(l=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,l);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(l="function"==typeof(f=m.payload)?f.call(p,d,l):f))break e;d=i({},d,l);break e;case 2:no=!0}}null!==a.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else p={eventTime:p,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,u=d):h=h.next=p,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(u=d),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=h,Fs|=s,e.lanes=s,e.memoizedState=d}}function uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var co=(new r.Component).refs;function ho(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ol(),i=al(e),o=oo(r,i);o.payload=t,null!=n&&(o.callback=n),ao(e,o),sl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ol(),i=al(e),o=oo(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),ao(e,o),sl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ol(),r=al(e),i=oo(n,r);i.tag=2,null!=t&&(i.callback=t),ao(e,i),sl(e,r,n)}};function fo(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function mo(e,t,n){var r=!1,i=si,o=t.contextType;return"object"==typeof o&&null!==o?o=to(o):(i=di(t)?ci:li.current,o=(r=null!=(r=t.contextTypes))?hi(e,i):si),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=po,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function vo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=co,ro(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=to(o):(o=di(t)?ci:li.current,i.context=hi(e,o)),lo(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(ho(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&po.enqueueReplaceState(i,i.state,null),lo(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var yo=Array.isArray;function xo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===co&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function bo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function _o(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ul(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xo(e,t,n),r.return=e,r):((r=jl(n.type,n.key,n.props,null,e.mode,r)).ref=xo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Bl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Hl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=jl(t.type,t.key,t.props,null,e.mode,n)).ref=xo(e,null,t),n.return=e,n;case S:return(t=Vl(t,e.mode,n)).return=e,t}if(yo(t)||G(t))return(t=Bl(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===T?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null}if(yo(n)||G(n))return null!==i?null:h(e,t,n,r,null);bo(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===T?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(yo(r)||G(r))return h(t,e=e.get(n)||null,r,i,null);bo(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=p(i,h,s[m],l);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(i,h),u;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<s.length;m++)null!==(v=f(h,i,m,s[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(i,e)})),u}function v(i,s,l,u){var c=G(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var x=p(i,m,y.value,u);if(null===x){null===m&&(m=g);break}e&&m&&null===x.alternate&&t(i,m),s=o(x,s,v),null===h?c=x:h.sibling=x,h=x,m=g}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return c}for(m=r(i,m);!y.done;v++,y=l.next())null!==(y=f(m,i,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"==typeof o&&null!==o&&o.type===T&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case w:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===T){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=xo(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===T?((r=Bl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=jl(o.type,o.key,o.props,null,e.mode,l)).ref=xo(e,r,o),l.return=e,e=l)}return s(e);case S:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Vl(o,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Hl(o,e.mode,l)).return=e,e=r),s(e);if(yo(o))return m(e,r,o,l);if(G(o))return v(e,r,o,l);if(c&&bo(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,Y(e.type)||"Component"))}return n(e,r)}}var wo=_o(!0),So=_o(!1),To={},Eo=ii(To),Mo=ii(To),Ao=ii(To);function Po(e){if(e===To)throw Error(a(174));return e}function Lo(e,t){switch(ai(Ao,t),ai(Mo,e),ai(Eo,To),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}oi(Eo),ai(Eo,t)}function Co(){oi(Eo),oi(Mo),oi(Ao)}function Oo(e){Po(Ao.current);var t=Po(Eo.current),n=fe(t,e.type);t!==n&&(ai(Mo,e),ai(Eo,n))}function Ro(e){Mo.current===e&&(oi(Eo),oi(Mo))}var No=ii(0);function Fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Io=null,ko=null,Do=!1;function zo(e,t){var n=Dl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Uo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function jo(e){if(Do){var t=ko;if(t){var n=t;if(!Uo(e,t)){if(!(t=Hr(n.nextSibling))||!Uo(e,t))return e.flags=-1025&e.flags|2,Do=!1,void(Io=e);zo(Io,n)}Io=e,ko=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,Do=!1,Io=e}}function Bo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Io=e}function Go(e){if(e!==Io)return!1;if(!Do)return Bo(e),Do=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ur(t,e.memoizedProps))for(t=ko;t;)zo(e,t),t=Hr(t.nextSibling);if(Bo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ko=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ko=null}}else ko=Io?Hr(e.stateNode.nextSibling):null;return!0}function Ho(){ko=Io=null,Do=!1}var Vo=[];function Wo(){for(var e=0;e<Vo.length;e++)Vo[e]._workInProgressVersionPrimary=null;Vo.length=0}var Xo=_.ReactCurrentDispatcher,Yo=_.ReactCurrentBatchConfig,qo=0,Jo=null,Qo=null,Zo=null,$o=!1,Ko=!1;function ea(){throw Error(a(321))}function ta(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function na(e,t,n,r,i,o){if(qo=o,Jo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xo.current=null===e||null===e.memoizedState?Pa:La,e=n(r,i),Ko){o=0;do{if(Ko=!1,!(25>o))throw Error(a(301));o+=1,Zo=Qo=null,t.updateQueue=null,Xo.current=Ca,e=n(r,i)}while(Ko)}if(Xo.current=Aa,t=null!==Qo&&null!==Qo.next,qo=0,Zo=Qo=Jo=null,$o=!1,t)throw Error(a(300));return e}function ra(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zo?Jo.memoizedState=Zo=e:Zo=Zo.next=e,Zo}function ia(){if(null===Qo){var e=Jo.alternate;e=null!==e?e.memoizedState:null}else e=Qo.next;var t=null===Zo?Jo.memoizedState:Zo.next;if(null!==t)Zo=t,Qo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Qo=e).memoizedState,baseState:Qo.baseState,baseQueue:Qo.baseQueue,queue:Qo.queue,next:null},null===Zo?Jo.memoizedState=Zo=e:Zo=Zo.next=e}return Zo}function oa(e,t){return"function"==typeof t?t(e):t}function aa(e){var t=ia(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Qo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.lane;if((qo&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=h,o=r):l=l.next=h,Jo.lanes|=c,Fs|=c}u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,ar(r,t.memoizedState)||(Ra=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function sa(e){var t=ia(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);ar(o,t.memoizedState)||(Ra=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function la(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(qo&e)===e)&&(t._workInProgressVersionPrimary=r,Vo.push(t))),e)return n(t._source);throw Vo.push(t),Error(a(350))}function ua(e,t,n,r){var i=Ms;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),l=Xo.current,u=l.useState((function(){return la(i,t,n)})),c=u[1],h=u[0];u=Zo;var d=e.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var v=Jo;return e.memoizedState={refs:p,source:t,subscribe:r},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var e=o(t._source);if(!ar(s,e)){e=n(t._source),ar(h,e)||(c(e),e=al(v),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var l=31-Ht(a),u=1<<l;r[l]|=e,a&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=al(v);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ar(f,n)&&ar(m,t)&&ar(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:h}).dispatch=c=Ma.bind(null,Jo,e),u.queue=e,u.baseQueue=null,h=la(i,t,n),u.memoizedState=u.baseState=h),h}function ca(e,t,n){return ua(ia(),e,t,n)}function ha(e){var t=ra();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:e}).dispatch=Ma.bind(null,Jo,e),[t.memoizedState,e]}function da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Jo.updateQueue)?(t={lastEffect:null},Jo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pa(e){return e={current:e},ra().memoizedState=e}function fa(){return ia().memoizedState}function ma(e,t,n,r){var i=ra();Jo.flags|=e,i.memoizedState=da(1|t,n,void 0,void 0===r?null:r)}function va(e,t,n,r){var i=ia();r=void 0===r?null:r;var o=void 0;if(null!==Qo){var a=Qo.memoizedState;if(o=a.destroy,null!==r&&ta(r,a.deps))return void da(t,n,o,r)}Jo.flags|=e,i.memoizedState=da(1|t,n,o,r)}function ga(e,t){return ma(516,4,e,t)}function ya(e,t){return va(516,4,e,t)}function xa(e,t){return va(4,2,e,t)}function ba(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _a(e,t,n){return n=null!=n?n.concat([e]):null,va(4,2,ba.bind(null,t,e),n)}function wa(){}function Sa(e,t){var n=ia();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ta(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ta(e,t){var n=ia();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ta(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ea(e,t){var n=Ui();Bi(98>n?98:n,(function(){e(!0)})),Bi(97<n?97:n,(function(){var n=Yo.transition;Yo.transition=1;try{e(!1),t()}finally{Yo.transition=n}}))}function Ma(e,t,n){var r=ol(),i=al(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Jo||null!==a&&a===Jo)Ko=$o=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,n);if(o.eagerReducer=a,o.eagerState=l,ar(l,s))return}catch(e){}sl(e,i,r)}}var Aa={readContext:to,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useLayoutEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useMutableSource:ea,useOpaqueIdentifier:ea,unstable_isNewReconciler:!1},Pa={readContext:to,useCallback:function(e,t){return ra().memoizedState=[e,void 0===t?null:t],e},useContext:to,useEffect:ga,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ma(4,2,ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4,2,e,t)},useMemo:function(e,t){var n=ra();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ra();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ma.bind(null,Jo,e),[r.memoizedState,e]},useRef:pa,useState:ha,useDebugValue:wa,useDeferredValue:function(e){var t=ha(e),n=t[0],r=t[1];return ga((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=ha(!1),t=e[0];return pa(e=Ea.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ra();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ua(r,e,t,n)},useOpaqueIdentifier:function(){if(Do){var e=!1,t=function(e){return{$$typeof:I,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Wr++).toString(36))),Error(a(355))})),n=ha(t)[1];return 0==(2&Jo.mode)&&(Jo.flags|=516,da(5,(function(){n("r:"+(Wr++).toString(36))}),void 0,null)),t}return ha(t="r:"+(Wr++).toString(36)),t},unstable_isNewReconciler:!1},La={readContext:to,useCallback:Sa,useContext:to,useEffect:ya,useImperativeHandle:_a,useLayoutEffect:xa,useMemo:Ta,useReducer:aa,useRef:fa,useState:function(){return aa(oa)},useDebugValue:wa,useDeferredValue:function(e){var t=aa(oa),n=t[0],r=t[1];return ya((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=aa(oa)[0];return[fa().current,e]},useMutableSource:ca,useOpaqueIdentifier:function(){return aa(oa)[0]},unstable_isNewReconciler:!1},Ca={readContext:to,useCallback:Sa,useContext:to,useEffect:ya,useImperativeHandle:_a,useLayoutEffect:xa,useMemo:Ta,useReducer:sa,useRef:fa,useState:function(){return sa(oa)},useDebugValue:wa,useDeferredValue:function(e){var t=sa(oa),n=t[0],r=t[1];return ya((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=sa(oa)[0];return[fa().current,e]},useMutableSource:ca,useOpaqueIdentifier:function(){return sa(oa)[0]},unstable_isNewReconciler:!1},Oa=_.ReactCurrentOwner,Ra=!1;function Na(e,t,n,r){t.child=null===e?So(t,null,n,r):wo(t,e.child,n,r)}function Fa(e,t,n,r,i){n=n.render;var o=t.ref;return eo(t,i),r=na(e,t,n,r,o,i),null===e||Ra?(t.flags|=1,Na(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,es(e,t,i))}function Ia(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||zl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ka(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)?es(e,t,o):(t.flags|=1,(e=Ul(a,r)).ref=t.ref,e.return=t,t.child=e)}function ka(e,t,n,r,i,o){if(null!==e&&lr(e.memoizedProps,r)&&e.ref===t.ref){if(Ra=!1,0==(o&i))return t.lanes=e.lanes,es(e,t,o);0!=(16384&e.flags)&&(Ra=!0)}return Ua(e,t,n,r,o)}function Da(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ml(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ml(t,e),null;t.memoizedState={baseLanes:0},ml(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ml(t,r);return Na(e,t,i,n),t.child}function za(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ua(e,t,n,r,i){var o=di(n)?ci:li.current;return o=hi(t,o),eo(t,i),n=na(e,t,n,r,o,i),null===e||Ra?(t.flags|=1,Na(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,es(e,t,i))}function ja(e,t,n,r,i){if(di(n)){var o=!0;vi(t)}else o=!1;if(eo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),mo(t,n,r),go(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=to(u):u=hi(t,u=di(n)?ci:li.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&vo(t,a,r,u),no=!1;var d=t.memoizedState;a.state=d,lo(t,r,a,i),l=t.memoizedState,s!==r||d!==l||ui.current||no?("function"==typeof c&&(ho(t,n,c,r),l=t.memoizedState),(s=no||fo(t,n,s,r,d,l,u))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,io(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Xi(t.type,s),a.props=u,h=t.pendingProps,d=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=to(l):l=hi(t,l=di(n)?ci:li.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==l)&&vo(t,a,r,l),no=!1,d=t.memoizedState,a.state=d,lo(t,r,a,i);var f=t.memoizedState;s!==h||d!==f||ui.current||no?("function"==typeof p&&(ho(t,n,p,r),f=t.memoizedState),(u=no||fo(t,n,u,r,d,f,l))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Ba(e,t,n,r,o,i)}function Ba(e,t,n,r,i,o){za(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&gi(t,n,!1),es(e,t,o);r=t.stateNode,Oa.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):Na(e,t,s,o),t.memoizedState=r.state,i&&gi(t,n,!0),t.child}function Ga(e){var t=e.stateNode;t.pendingContext?fi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&fi(0,t.context,!1),Lo(e,t.containerInfo)}var Ha,Va,Wa,Xa={dehydrated:null,retryLane:0};function Ya(e,t,n){var r,i=t.pendingProps,o=No.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ai(No,1&o),null===e?(void 0!==i.fallback&&jo(t),e=i.children,o=i.fallback,a?(e=qa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xa,e):"number"==typeof i.unstable_expectedLoadTime?(e=qa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xa,t.lanes=33554432,e):((n=Gl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Qa(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Xa,i):(n=Ja(e,t,i.children,n),t.memoizedState=null,n))}function qa(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Gl(t,i,0,null),n=Bl(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Ja(e,t,n,r){var i=e.child;return e=i.sibling,n=Ul(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Qa(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ul(a,s),null!==e?r=Ul(e,r):(r=Bl(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Za(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ki(e.return,t)}function $a(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Ka(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Na(e,t,r.children,n),0!=(2&(r=No.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Za(e,n);else if(19===e.tag)Za(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ai(No,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$a(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$a(t,!0,n,null,o,t.lastEffect);break;case"together":$a(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function es(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ul(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ul(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ts(e,t){if(!Do)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ns(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return di(t.type)&&pi(),null;case 3:return Co(),oi(ui),oi(li),Wo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Go(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ro(t);var o=Po(Ao.current);if(n=t.type,null!==e&&null!=t.stateNode)Va(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Po(Eo.current),Go(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Yr]=t,r[qr]=s,n){case"dialog":Er("cancel",r),Er("close",r);break;case"iframe":case"object":case"embed":Er("load",r);break;case"video":case"audio":for(e=0;e<_r.length;e++)Er(_r[e],r);break;case"source":Er("error",r);break;case"img":case"image":case"link":Er("error",r),Er("load",r);break;case"details":Er("toggle",r);break;case"input":ee(r,s),Er("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Er("invalid",r);break;case"textarea":le(r,s),Er("invalid",r)}for(var u in Se(n,s),e=null,s)s.hasOwnProperty(u)&&(o=s[u],"children"===u?"string"==typeof o?r.textContent!==o&&(e=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Er("scroll",r));switch(n){case"input":Q(r),re(r,s,!0);break;case"textarea":Q(r),ce(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Ir)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===he&&(e=pe(n)),e===he?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Yr]=t,e[qr]=r,Ha(e,t),t.stateNode=e,u=Te(n,r),n){case"dialog":Er("cancel",e),Er("close",e),o=r;break;case"iframe":case"object":case"embed":Er("load",e),o=r;break;case"video":case"audio":for(o=0;o<_r.length;o++)Er(_r[o],e);o=r;break;case"source":Er("error",e),o=r;break;case"img":case"image":case"link":Er("error",e),Er("load",e),o=r;break;case"details":Er("toggle",e),o=r;break;case"input":ee(e,r),o=K(e,r),Er("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Er("invalid",e);break;case"textarea":le(e,r),o=se(e,r),Er("invalid",e);break;default:o=r}Se(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?_e(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ve(e,h):"children"===s?"string"==typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"==typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Er("scroll",e):null!=h&&b(e,s,h,u))}switch(n){case"input":Q(e),re(e,r,!1);break;case"textarea":Q(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Ir)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Wa(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=Po(Ao.current),Po(Eo.current),Go(t)?(r=t.stateNode,n=t.memoizedProps,r[Yr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yr]=t,t.stateNode=r)}return null;case 13:return oi(No),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Go(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&No.current)?0===Os&&(Os=3):(0!==Os&&3!==Os||(Os=4),null===Ms||0==(134217727&Fs)&&0==(134217727&Is)||hl(Ms,Ps))),(r||n)&&(t.flags|=4),null);case 4:return Co(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return $i(t),null;case 17:return di(t.type)&&pi(),null;case 19:if(oi(No),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(u=r.rendering))if(s)ts(r,!1);else{if(0!==Os||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Fo(e))){for(t.flags|=64,ts(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ai(No,1&No.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Us&&(t.flags|=64,s=!0,ts(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Fo(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ts(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Do)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Us&&1073741824!==n&&(t.flags|=64,s=!0,ts(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=No.current,ai(No,s?1&t|2:1&t),n):null;case 23:case 24:return vl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function rs(e){switch(e.tag){case 1:di(e.type)&&pi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Co(),oi(ui),oi(li),Wo(),0!=(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Ro(e),null;case 13:return oi(No),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return oi(No),null;case 4:return Co(),null;case 10:return $i(e),null;case 23:case 24:return vl(),null;default:return null}}function is(e,t){try{var n="",r=t;do{n+=X(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function os(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ha=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Va=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Po(Eo.current);var a,s=null;switch(n){case"input":o=K(e,o),r=K(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Ir)}for(h in Se(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var u=o[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(u=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Er("scroll",e),s||u===c||(s=[])):"object"==typeof c&&null!==c&&c.$$typeof===I?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Wa=function(e,t,n,r){n!==r&&(t.flags|=4)};var as="function"==typeof WeakMap?WeakMap:Map;function ss(e,t,n){(n=oo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,Vs=r),os(0,t)},n}function ls(e,t,n){(n=oo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return os(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this),os(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var us="function"==typeof WeakSet?WeakSet:Set;function cs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Nl(e,t)}else t.current=null}function hs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ds(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Cl(n,e),Ll(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&uo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}uo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function ps(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function fs(e,t){if(xi&&"function"==typeof xi.onCommitFiberUnmount)try{xi.onCommitFiberUnmount(yi,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Cl(t,n);else{r=t;try{i()}catch(e){Nl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(cs(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Nl(t,e)}break;case 5:cs(t);break;case 4:ys(e,t)}}function ms(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function vs(e){return 5===e.tag||3===e.tag||4===e.tag}function gs(e){e:{for(var t=e.return;null!==t;){if(vs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Ir));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function ys(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,l=i,u=l;;)if(fs(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,l=i.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(fs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function xs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?_e(n,l):"dangerouslySetInnerHTML"===s?ve(n,l):"children"===s?ge(n,l):b(n,s,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(zs=zi(),ps(t.child,!0)),void bs(t);case 19:return void bs(t);case 17:return;case 23:case 24:return void ps(t,null!==t.memoizedState)}throw Error(a(163))}function bs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new us),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function _s(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var ws=Math.ceil,Ss=_.ReactCurrentDispatcher,Ts=_.ReactCurrentOwner,Es=0,Ms=null,As=null,Ps=0,Ls=0,Cs=ii(0),Os=0,Rs=null,Ns=0,Fs=0,Is=0,ks=0,Ds=null,zs=0,Us=1/0;function js(){Us=zi()+500}var Bs,Gs=null,Hs=!1,Vs=null,Ws=null,Xs=!1,Ys=null,qs=90,Js=[],Qs=[],Zs=null,$s=0,Ks=null,el=-1,tl=0,nl=0,rl=null,il=!1;function ol(){return 0!=(48&Es)?zi():-1!==el?el:el=zi()}function al(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Ui()?1:2;if(0===tl&&(tl=Ns),0!==Wi.transition){0!==nl&&(nl=null!==Ds?Ds.pendingLanes:0),e=tl;var t=4186112&~nl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ui(),0!=(4&Es)&&98===e?e=Ut(12,tl):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),tl),e}function sl(e,t,n){if(50<$s)throw $s=0,Ks=null,Error(a(185));if(null===(e=ll(e,t)))return null;Gt(e,t,n),e===Ms&&(Is|=t,4===Os&&hl(e,Ps));var r=Ui();1===t?0!=(8&Es)&&0==(48&Es)?dl(e):(ul(e,n),0===Es&&(js(),Hi())):(0==(4&Es)||98!==r&&99!==r||(null===Zs?Zs=new Set([e]):Zs.add(e)),ul(e,n)),Ds=e}function ll(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ul(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Ht(s),u=1<<l,c=o[l];if(-1===c){if(0==(u&r)||0!=(u&i)){c=t,kt(u);var h=It;o[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(r=Dt(e,e===Ms?Ps:0),t=It,0===r)null!==n&&(n!==Ri&&wi(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ri&&wi(n)}15===t?(n=dl.bind(null,e),null===Fi?(Fi=[n],Ii=_i(Ai,Vi)):Fi.push(n),n=Ri):14===t?n=Gi(99,dl.bind(null,e)):n=Gi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),cl.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function cl(e){if(el=-1,nl=tl=0,0!=(48&Es))throw Error(a(327));var t=e.callbackNode;if(Pl()&&e.callbackNode!==t)return null;var n=Dt(e,e===Ms?Ps:0);if(0===n)return null;var r=n,i=Es;Es|=16;var o=xl();for(Ms===e&&Ps===r||(js(),gl(e,r));;)try{wl();break}catch(t){yl(e,t)}if(Zi(),Ss.current=o,Es=i,null!==As?r=0:(Ms=null,Ps=0,r=Os),0!=(Ns&Is))gl(e,0);else if(0!==r){if(2===r&&(Es|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=zt(e))&&(r=bl(e,n))),1===r)throw t=Rs,gl(e,0),hl(e,n),ul(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:El(e);break;case 3:if(hl(e,n),(62914560&n)===n&&10<(r=zs+500-zi())){if(0!==Dt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ol(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jr(El.bind(null,e),r);break}El(e);break;case 4:if(hl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ws(n/1960))-n)){e.timeoutHandle=jr(El.bind(null,e),n);break}El(e);break;case 5:El(e);break;default:throw Error(a(329))}}return ul(e,zi()),e.callbackNode===t?cl.bind(null,e):null}function hl(e,t){for(t&=~ks,t&=~Is,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function dl(e){if(0!=(48&Es))throw Error(a(327));if(Pl(),e===Ms&&0!=(e.expiredLanes&Ps)){var t=Ps,n=bl(e,t);0!=(Ns&Is)&&(n=bl(e,t=Dt(e,t)))}else n=bl(e,t=Dt(e,0));if(0!==e.tag&&2===n&&(Es|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=zt(e))&&(n=bl(e,t))),1===n)throw n=Rs,gl(e,0),hl(e,t),ul(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e),ul(e,zi()),null}function pl(e,t){var n=Es;Es|=1;try{return e(t)}finally{0===(Es=n)&&(js(),Hi())}}function fl(e,t){var n=Es;Es&=-2,Es|=8;try{return e(t)}finally{0===(Es=n)&&(js(),Hi())}}function ml(e,t){ai(Cs,Ls),Ls|=t,Ns|=t}function vl(){Ls=Cs.current,oi(Cs)}function gl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Br(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&pi();break;case 3:Co(),oi(ui),oi(li),Wo();break;case 5:Ro(r);break;case 4:Co();break;case 13:case 19:oi(No);break;case 10:$i(r);break;case 23:case 24:vl()}n=n.return}Ms=e,As=Ul(e.current,null),Ps=Ls=Ns=t,Os=0,Rs=null,ks=Is=Fs=0}function yl(e,t){for(;;){var n=As;try{if(Zi(),Xo.current=Aa,$o){for(var r=Jo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}$o=!1}if(qo=0,Zo=Qo=Jo=null,Ko=!1,Ts.current=null,null===n||null===n.return){Os=1,Rs=t,As=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Ps,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&No.current),d=a;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var v=d.updateQueue;if(null===v){var g=new Set;g.add(u),d.updateQueue=g}else v.add(u);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=oo(-1,1);y.tag=2,ao(s,y)}s.lanes|=1;break e}l=void 0,s=t;var x=o.pingCache;if(null===x?(x=o.pingCache=new as,l=new Set,x.set(u,l)):void 0===(l=x.get(u))&&(l=new Set,x.set(u,l)),!l.has(s)){l.add(s);var b=Fl.bind(null,o,u,s);u.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((Y(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Os&&(Os=2),l=is(l,s),d=a;do{switch(d.tag){case 3:o=l,d.flags|=4096,t&=-t,d.lanes|=t,so(d,ss(0,o,t));break e;case 1:o=l;var _=d.type,w=d.stateNode;if(0==(64&d.flags)&&("function"==typeof _.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Ws||!Ws.has(w)))){d.flags|=4096,t&=-t,d.lanes|=t,so(d,ls(d,o,t));break e}}d=d.return}while(null!==d)}Tl(n)}catch(e){t=e,As===n&&null!==n&&(As=n=n.return);continue}break}}function xl(){var e=Ss.current;return Ss.current=Aa,null===e?Aa:e}function bl(e,t){var n=Es;Es|=16;var r=xl();for(Ms===e&&Ps===t||gl(e,t);;)try{_l();break}catch(t){yl(e,t)}if(Zi(),Es=n,Ss.current=r,null!==As)throw Error(a(261));return Ms=null,Ps=0,Os}function _l(){for(;null!==As;)Sl(As)}function wl(){for(;null!==As&&!Si();)Sl(As)}function Sl(e){var t=Bs(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Tl(e):As=t,Ts.current=null}function Tl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ns(n,t,Ls)))return void(As=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Ls)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=rs(t)))return n.flags&=2047,void(As=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function El(e){var t=Ui();return Bi(99,Ml.bind(null,e,t)),null}function Ml(e,t){do{Pl()}while(null!==Ys);if(0!=(48&Es))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<o;){var u=31-Ht(o),c=1<<u;i[u]=0,s[u]=-1,l[u]=-1,o&=~c}if(null!==Zs&&0==(24&r)&&Zs.has(e)&&Zs.delete(e),e===Ms&&(As=Ms=null,Ps=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Es,Es|=32,Ts.current=null,kr=qt,dr(s=hr())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var h=0,d=-1,p=-1,f=0,m=0,v=s,g=null;t:for(;;){for(var y;v!==l||0!==o&&3!==v.nodeType||(d=h+o),v!==u||0!==c&&3!==v.nodeType||(p=h+c),3===v.nodeType&&(h+=v.nodeValue.length),null!==(y=v.firstChild);)g=v,v=y;for(;;){if(v===s)break t;if(g===l&&++f===o&&(d=h),g===u&&++m===c&&(p=h),null!==(y=v.nextSibling))break;g=(v=g).parentNode}v=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Dr={focusedElem:s,selectionRange:l},qt=!1,rl=null,il=!1,Gs=r;do{try{Al()}catch(e){if(null===Gs)throw Error(a(330));Nl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);rl=null,Gs=r;do{try{for(s=e;null!==Gs;){var x=Gs.flags;if(16&x&&ge(Gs.stateNode,""),128&x){var b=Gs.alternate;if(null!==b){var _=b.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&x){case 2:gs(Gs),Gs.flags&=-3;break;case 6:gs(Gs),Gs.flags&=-3,xs(Gs.alternate,Gs);break;case 1024:Gs.flags&=-1025;break;case 1028:Gs.flags&=-1025,xs(Gs.alternate,Gs);break;case 4:xs(Gs.alternate,Gs);break;case 8:ys(s,l=Gs);var w=l.alternate;ms(l),null!==w&&ms(w)}Gs=Gs.nextEffect}}catch(e){if(null===Gs)throw Error(a(330));Nl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);if(_=Dr,b=hr(),x=_.focusedElem,s=_.selectionRange,b!==x&&x&&x.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){null!==s&&dr(x)&&(b=s.start,void 0===(_=s.end)&&(_=b),"selectionStart"in x?(x.selectionStart=b,x.selectionEnd=Math.min(_,x.value.length)):(_=(b=x.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),l=x.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!_.extend&&w>s&&(l=s,s=w,w=l),l=cr(x,w),o=cr(x,s),l&&o&&(1!==_.rangeCount||_.anchorNode!==l.node||_.anchorOffset!==l.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((b=b.createRange()).setStart(l.node,l.offset),_.removeAllRanges(),w>s?(_.addRange(b),_.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),_.addRange(b))))),b=[];for(_=x;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<b.length;x++)(_=b[x]).element.scrollLeft=_.left,_.element.scrollTop=_.top}qt=!!kr,Dr=kr=null,e.current=n,Gs=r;do{try{for(x=e;null!==Gs;){var S=Gs.flags;if(36&S&&ds(x,Gs.alternate,Gs),128&S){b=void 0;var T=Gs.ref;if(null!==T){var E=Gs.stateNode;switch(Gs.tag){case 5:b=E;break;default:b=E}"function"==typeof T?T(b):T.current=b}}Gs=Gs.nextEffect}}catch(e){if(null===Gs)throw Error(a(330));Nl(Gs,e),Gs=Gs.nextEffect}}while(null!==Gs);Gs=null,Ni(),Es=i}else e.current=n;if(Xs)Xs=!1,Ys=e,qs=t;else for(Gs=r;null!==Gs;)t=Gs.nextEffect,Gs.nextEffect=null,8&Gs.flags&&((S=Gs).sibling=null,S.stateNode=null),Gs=t;if(0===(r=e.pendingLanes)&&(Ws=null),1===r?e===Ks?$s++:($s=0,Ks=e):$s=0,n=n.stateNode,xi&&"function"==typeof xi.onCommitFiberRoot)try{xi.onCommitFiberRoot(yi,n,void 0,64==(64&n.current.flags))}catch(e){}if(ul(e,zi()),Hs)throw Hs=!1,e=Vs,Vs=null,e;return 0!=(8&Es)||Hi(),null}function Al(){for(;null!==Gs;){var e=Gs.alternate;il||null===rl||(0!=(8&Gs.flags)?Ke(Gs,rl)&&(il=!0):13===Gs.tag&&_s(e,Gs)&&Ke(Gs,rl)&&(il=!0));var t=Gs.flags;0!=(256&t)&&hs(e,Gs),0==(512&t)||Xs||(Xs=!0,Gi(97,(function(){return Pl(),null}))),Gs=Gs.nextEffect}}function Pl(){if(90!==qs){var e=97<qs?97:qs;return qs=90,Bi(e,Ol)}return!1}function Ll(e,t){Js.push(t,e),Xs||(Xs=!0,Gi(97,(function(){return Pl(),null})))}function Cl(e,t){Qs.push(t,e),Xs||(Xs=!0,Gi(97,(function(){return Pl(),null})))}function Ol(){if(null===Ys)return!1;var e=Ys;if(Ys=null,0!=(48&Es))throw Error(a(331));var t=Es;Es|=32;var n=Qs;Qs=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===o)throw Error(a(330));Nl(o,e)}}for(n=Js,Js=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===o)throw Error(a(330));Nl(o,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Es=t,Hi(),!0}function Rl(e,t,n){ao(e,t=ss(0,t=is(n,t),1)),t=ol(),null!==(e=ll(e,1))&&(Gt(e,1,t),ul(e,t))}function Nl(e,t){if(3===e.tag)Rl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Rl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){var i=ls(n,e=is(t,e),1);if(ao(n,i),i=ol(),null!==(n=ll(n,1)))Gt(n,1,i),ul(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ws||!Ws.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Fl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ol(),e.pingedLanes|=e.suspendedLanes&n,Ms===e&&(Ps&n)===n&&(4===Os||3===Os&&(62914560&Ps)===Ps&&500>zi()-zs?gl(e,0):ks|=n),ul(e,t)}function Il(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Ui()?1:2:(0===tl&&(tl=Ns),0===(t=jt(62914560&~tl))&&(t=4194304))),n=ol(),null!==(e=ll(e,t))&&(Gt(e,t,n),ul(e,n))}function kl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Dl(e,t,n,r){return new kl(e,t,n,r)}function zl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ul(e,t){var n=e.alternate;return null===n?((n=Dl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jl(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)zl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case T:return Bl(n.children,i,o,t);case k:s=8,i|=16;break;case E:s=8,i|=1;break;case M:return(e=Dl(12,n,t,8|i)).elementType=M,e.type=M,e.lanes=o,e;case C:return(e=Dl(13,n,t,i)).type=C,e.elementType=C,e.lanes=o,e;case O:return(e=Dl(19,n,t,i)).elementType=O,e.lanes=o,e;case D:return Gl(n,i,o,t);case z:return(e=Dl(24,n,t,i)).elementType=z,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case P:s=9;break e;case L:s=11;break e;case R:s=14;break e;case N:s=16,r=null;break e;case F:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Bl(e,t,n,r){return(e=Dl(7,e,r,t)).lanes=n,e}function Gl(e,t,n,r){return(e=Dl(23,e,r,t)).elementType=D,e.lanes=n,e}function Hl(e,t,n){return(e=Dl(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=Dl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Xl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Yl(e,t,n,r){var i=t.current,o=ol(),s=al(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(di(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(di(u)){n=mi(n,u,l);break e}}n=l}else n=si;return null===t.context?t.context=n:t.pendingContext=n,(t=oo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ao(i,t),sl(i,s,o),s}function ql(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Jl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ql(e,t){Jl(e,t),(e=e.alternate)&&Jl(e,t)}function Zl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Wl(e,t,null!=n&&!0===n.hydrate),t=Dl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ro(t),e[Jr]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=ql(a);s.call(e)}}Yl(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Zl(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=ql(a);l.call(e)}}fl((function(){Yl(t,a,e,i)}))}return ql(a)}function eu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(a(200));return Xl(e,t,null,n)}Bs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ui.current)Ra=!0;else{if(0==(n&r)){switch(Ra=!1,t.tag){case 3:Ga(t),Ho();break;case 5:Oo(t);break;case 1:di(t.type)&&vi(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ai(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ya(e,t,n):(ai(No,1&No.current),null!==(t=es(e,t,n))?t.sibling:null);ai(No,1&No.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Ka(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ai(No,No.current),r)break;return null;case 23:case 24:return t.lanes=0,Da(e,t,n)}return es(e,t,n)}Ra=0!=(16384&e.flags)}else Ra=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=hi(t,li.current),eo(t,n),i=na(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,di(r)){var o=!0;vi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ro(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&ho(t,r,s,e),i.updater=po,t.stateNode=i,i._reactInternals=t,go(t,r,e,n),t=Ba(null,t,r,!0,o,n)}else t.tag=0,Na(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return zl(e)?1:0;if(null!=e){if((e=e.$$typeof)===L)return 11;if(e===R)return 14}return 2}(i),e=Xi(i,e),o){case 0:t=Ua(null,t,i,e,n);break e;case 1:t=ja(null,t,i,e,n);break e;case 11:t=Fa(null,t,i,e,n);break e;case 14:t=Ia(null,t,i,Xi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ua(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ga(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,io(e,t),lo(t,r,null,n),(r=t.memoizedState.element)===i)Ho(),t=es(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(ko=Hr(t.stateNode.containerInfo.firstChild),Io=t,o=Do=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Vo.push(o);for(n=So(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Na(e,t,r,n),Ho();t=t.child}return t;case 5:return Oo(t),null===e&&jo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Ur(r,i)?s=null:null!==o&&Ur(r,o)&&(t.flags|=16),za(e,t),Na(e,t,s,n),t.child;case 6:return null===e&&jo(t),null;case 13:return Ya(e,t,n);case 4:return Lo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(ai(Yi,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=ar(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!ui.current){t=es(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=oo(-1,n&-n)).tag=2,ao(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),Ki(l.return,n),u.lanes|=n;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Na(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,eo(t,n),r=r(i=to(i,o.unstable_observedBits)),t.flags|=1,Na(e,t,r,n),t.child;case 14:return o=Xi(i=t.type,t.pendingProps),Ia(e,t,i,o=Xi(i.type,o),r,n);case 15:return ka(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,di(r)?(e=!0,vi(t)):e=!1,eo(t,n),mo(t,r,i),go(t,r,i,n),Ba(null,t,r,!0,e,n);case 19:return Ka(e,t,n);case 23:case 24:return Da(e,t,n)}throw Error(a(156,t.tag))},Zl.prototype.render=function(e){Yl(e,this._internalRoot,null,null)},Zl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Yl(null,e,null,(function(){t[Jr]=null}))},et=function(e){13===e.tag&&(sl(e,4,ol()),Ql(e,4))},tt=function(e){13===e.tag&&(sl(e,67108864,ol()),Ql(e,67108864))},nt=function(e){if(13===e.tag){var t=ol(),n=al(e);sl(e,n,t),Ql(e,n)}},rt=function(e,t){return t()},Me=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ei(r);if(!i)throw Error(a(90));Z(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Re=pl,Ne=function(e,t,n,r,i){var o=Es;Es|=4;try{return Bi(98,e.bind(null,t,n,r,i))}finally{0===(Es=o)&&(js(),Hi())}},Fe=function(){0==(49&Es)&&(function(){if(null!==Zs){var e=Zs;Zs=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ul(e,zi())}))}Hi()}(),Pl())},Ie=function(e,t){var n=Es;Es|=2;try{return e(t)}finally{0===(Es=n)&&(js(),Hi())}};var tu={Events:[$r,Kr,ei,Ce,Oe,Pl,{current:!1}]},nu={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{yi=iu.inject(ru),xi=iu}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=eu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Es;if(0!=(48&n))return e(t);Es|=1;try{if(e)return Bi(99,e.bind(null,t))}finally{Es=n,Hi()}},t.hydrate=function(e,t,n){if(!$l(t))throw Error(a(200));return Kl(null,e,t,!0,n)},t.render=function(e,t,n){if(!$l(t))throw Error(a(200));return Kl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(a(40));return!!e._reactRootContainer&&(fl((function(){Kl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Jr]=null}))})),!0)},t.unstable_batchedUpdates=pl,t.unstable_createPortal=function(e,t){return eu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Kl(e,t,n,!1,r)},t.version="17.0.1"},function(e,t,n){"use strict";
/** @license React v17.0.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(17),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var x=y.prototype=new g;x.constructor=y,r(x,v.prototype),x.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:b.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case o:l=!0}}if(l)return a=a(l=e),e=""===r?"."+M(l,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),A(a,t,n,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+M(s=e[u],u);l+=A(s,t,n,c,a)}else if("function"==typeof(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=c.call(e),u=0;!(s=e.next()).done;)l+=A(s=s.value,t,n,c=r+M(s,u++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function L(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var C={current:null};function O(){var e=C.current;if(null===e)throw Error(p(321));return e}var R={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error(p(143));return e}},t.Component=v,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var o=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!w.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];o.children=u}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.1"},function(e,t,n){"use strict";e.exports=n(68)},function(e,t,n){"use strict";
/** @license React v0.20.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i,o,a;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,h=null,d=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(d,0),e}};r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(d,0))},i=function(e,t){h=setTimeout(e,t)},o=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,g=null,y=-1,x=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+x;try{g(!0,e)?w.postMessage(null):(v=!1,g=null)}catch(e){throw w.postMessage(null),e}}else v=!1},r=function(e){g=e,v||(v=!0,w.postMessage(null))},i=function(e,n){y=p((function(){e(t.unstable_now())}),n)},o=function(){f(y),y=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<M(i,t)))break e;e[r]=t,e[n]=i,n=r}}function T(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>M(a,n))void 0!==l&&0>M(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>M(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function M(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],P=[],L=1,C=null,O=3,R=!1,N=!1,F=!1;function I(e){for(var t=T(P);null!==t;){if(null===t.callback)E(P);else{if(!(t.startTime<=e))break;E(P),t.sortIndex=t.expirationTime,S(A,t)}t=T(P)}}function k(e){if(F=!1,I(e),!N)if(null!==T(A))N=!0,r(D);else{var t=T(P);null!==t&&i(k,t.startTime-e)}}function D(e,n){N=!1,F&&(F=!1,o()),R=!0;var r=O;try{for(I(n),C=T(A);null!==C&&(!(C.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=C.callback;if("function"==typeof a){C.callback=null,O=C.priorityLevel;var s=a(C.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?C.callback=s:C===T(A)&&E(A),I(n)}else E(A);C=T(A)}if(null!==C)var l=!0;else{var u=T(P);null!==u&&i(k,u.startTime-n),l=!1}return l}finally{C=null,O=r,R=!1}}var z=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||R||(N=!0,r(D))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return T(A)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:L++,callback:n,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,S(P,e),null===T(A)&&e===T(P)&&(F?o():F=!0,i(k,a-s))):(e.sortIndex=l,S(A,e),N||R||(N=!0,r(D))),e},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}},function(e,t,n){e.exports=n.p+"403bc6f5bddc48d5ae05f83adca563a7.mp3"},function(e,t,n){e.exports=n.p+"462121f9f97118b75069169251770aa1.jpg"},function(e,t,n){e.exports=n.p+"a3dd59bdee9d284e5f38aa0853f5f9c2.jpg"},function(e,t,n){e.exports=n.p+"9ec121e1b941e29b327ead1f3fd1d5df.jpg"},function(e,t,n){e.exports=n.p+"a77e67433af901eb23d1a3bc9842a58c.jpg"},function(e,t,n){e.exports=n.p+"baa7eaaa6f8d6a93e20cb0223ecfee7e.jpg"},function(e,t,n){e.exports=n.p+"cf02e8d1c7c3d2d5483c53f9459f5464.jpg"},function(e,t,n){e.exports=n.p+"a1e17dfe3d39dd8b52379b119dd6a30c.jpg"},function(e,t,n){e.exports=n.p+"768d153eabe0494e377d3ae0e50faf83.jpg"},function(e,t,n){e.exports=n.p+"aa33bdc4d2d1d3572087b0b1e8f5711c.jpg"},function(e,t,n){e.exports=n.p+"8675303aeff5e765d7eeeecd2c9d5741.jpg"},function(e,t,n){e.exports=n.p+"b599f813a76b3bab5375b9df96fc3061.jpg"},function(e,t,n){e.exports=n.p+"7cf06caf5de0a2bb1b4fa73c292c1e0f.jpg"},function(e,t,n){e.exports=n.p+"a4ac84e7059e59683be09227d245d003.jpg"},function(e,t,n){e.exports=n.p+"d2a78ff9c761c519fc1db05832af3a1c.jpg"},function(e,t,n){e.exports=n.p+"08b64b965f542d4760c1a60b5407405c.jpg"},function(e,t,n){e.exports=n.p+"5029f2992fcc311faacd3cd214728056.jpg"},function(e,t,n){e.exports=n.p+"8ff99d4ad331a6cb8df97748fdab4287.jpg"},function(e,t,n){e.exports=n.p+"2f17aea1c47b38e65993aa9c78c9db65.jpg"},function(e,t,n){e.exports=n.p+"a29ab34a61c2f5504cad588f169cd4f3.png"},function(e,t,n){e.exports=n.p+"183d99d08a5e2ba9912e8ad69512fe94.jpg"},function(e,t,n){e.exports=n.p+"bcfb9394f4141ab0c9cdaeaf62f1aadd.jpg"},function(e,t,n){e.exports=n.p+"be2bf8db582b674ba961add047716dfe.jpg"},function(e,t,n){e.exports=n.p+"e4553dbc5f2188290af4ceb007c64fea.jpg"},function(e,t,n){e.exports=n.p+"44bc6af3cea65fa13ff3cba9e4d94933.jpg"},function(e,t,n){e.exports=n.p+"87fe6339f668ac2298aff772f6688816.jpg"},function(e,t,n){e.exports=n.p+"6fcfa7e6789e87957c0c7419c18fad9c.png"},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";
/** @license React v16.7.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116;function g(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case d:case a:case l:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case u:return e;default:return t}}case v:case m:case o:return t}}}function y(e){return g(e)===d}t.typeOf=g,t.AsyncMode=h,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=o,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===l||e===s||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===p)},t.isAsyncMode=function(e){return y(e)||g(e)===h},t.isConcurrentMode=y,t.isContextConsumer=function(e){return g(e)===c},t.isContextProvider=function(e){return g(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return g(e)===p},t.isFragment=function(e){return g(e)===a},t.isLazy=function(e){return g(e)===v},t.isMemo=function(e){return g(e)===m},t.isPortal=function(e){return g(e)===o},t.isProfiler=function(e){return g(e)===l},t.isStrictMode=function(e){return g(e)===s},t.isSuspense=function(e){return g(e)===f}},function(e,t,n){e.exports=n(99)()},function(e,t,n){"use strict";var r=n(100),i=n(101),o=n(102);e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(104);function i(){}e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(106);function i(){}e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=i,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){e.exports="#define GLSLIFY 1\nattribute vec4 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main () {\n  gl_Position = position;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvoid main () {\n  gl_FragColor = vec4(position.xyz, 1.0);\n}\n"},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"ACESFilmicToneMapping",(function(){return wr})),n.d(r,"AddEquation",(function(){return Vn})),n.d(r,"AddOperation",(function(){return vr})),n.d(r,"AdditiveBlending",(function(){return jn})),n.d(r,"AlphaFormat",(function(){return ni})),n.d(r,"AlwaysDepth",(function(){return sr})),n.d(r,"AlwaysStencilFunc",(function(){return Eo})),n.d(r,"AmbientLight",(function(){return cf})),n.d(r,"AmbientLightProbe",(function(){return Nf})),n.d(r,"AnimationClip",(function(){return vp})),n.d(r,"AnimationLoader",(function(){return Tp})),n.d(r,"AnimationMixer",(function(){return um})),n.d(r,"AnimationObjectGroup",(function(){return sm})),n.d(r,"AnimationUtils",(function(){return rp})),n.d(r,"ArcCurve",(function(){return Rp})),n.d(r,"ArrayCamera",(function(){return Ac})),n.d(r,"ArrowHelper",(function(){return Zm})),n.d(r,"Audio",(function(){return Hf})),n.d(r,"AudioAnalyser",(function(){return Jf})),n.d(r,"AudioContext",(function(){return Pf})),n.d(r,"AudioListener",(function(){return Gf})),n.d(r,"AudioLoader",(function(){return Lf})),n.d(r,"AxesHelper",(function(){return $m})),n.d(r,"AxisHelper",(function(){return ig})),n.d(r,"BackSide",(function(){return On})),n.d(r,"BasicDepthPacking",(function(){return oo})),n.d(r,"BasicShadowMap",(function(){return Mn})),n.d(r,"BinaryTextureLoader",(function(){return ug})),n.d(r,"Bone",(function(){return oh})),n.d(r,"BooleanKeyframeTrack",(function(){return up})),n.d(r,"BoundingBoxHelper",(function(){return og})),n.d(r,"Box2",(function(){return ym})),n.d(r,"Box3",(function(){return za})),n.d(r,"Box3Helper",(function(){return Xm})),n.d(r,"BoxBufferGeometry",(function(){return ml})),n.d(r,"BoxGeometry",(function(){return fl})),n.d(r,"BoxHelper",(function(){return Wm})),n.d(r,"BufferAttribute",(function(){return Ss})),n.d(r,"BufferGeometry",(function(){return Gs})),n.d(r,"BufferGeometryLoader",(function(){return vf})),n.d(r,"ByteType",(function(){return Wr})),n.d(r,"Cache",(function(){return yp})),n.d(r,"Camera",(function(){return bl})),n.d(r,"CameraHelper",(function(){return Gm})),n.d(r,"CanvasRenderer",(function(){return dg})),n.d(r,"CanvasTexture",(function(){return Oh})),n.d(r,"CatmullRomCurve3",(function(){return zp})),n.d(r,"CineonToneMapping",(function(){return _r})),n.d(r,"CircleBufferGeometry",(function(){return Vd})),n.d(r,"CircleGeometry",(function(){return Hd})),n.d(r,"ClampToEdgeWrapping",(function(){return Rr})),n.d(r,"Clock",(function(){return Df})),n.d(r,"ClosedSplineCurve3",(function(){return tg})),n.d(r,"Color",(function(){return fs})),n.d(r,"ColorKeyframeTrack",(function(){return cp})),n.d(r,"CompressedTexture",(function(){return Ch})),n.d(r,"CompressedTextureLoader",(function(){return Ep})),n.d(r,"ConeBufferGeometry",(function(){return Gd})),n.d(r,"ConeGeometry",(function(){return Bd})),n.d(r,"CubeCamera",(function(){return wl})),n.d(r,"CubeGeometry",(function(){return fl})),n.d(r,"CubeReflectionMapping",(function(){return Tr})),n.d(r,"CubeRefractionMapping",(function(){return Er})),n.d(r,"CubeTexture",(function(){return Xl})),n.d(r,"CubeTextureLoader",(function(){return Pp})),n.d(r,"CubeUVReflectionMapping",(function(){return Lr})),n.d(r,"CubeUVRefractionMapping",(function(){return Cr})),n.d(r,"CubicBezierCurve",(function(){return Gp})),n.d(r,"CubicBezierCurve3",(function(){return Hp})),n.d(r,"CubicInterpolant",(function(){return op})),n.d(r,"CullFaceBack",(function(){return _n})),n.d(r,"CullFaceFront",(function(){return wn})),n.d(r,"CullFaceFrontBack",(function(){return Sn})),n.d(r,"CullFaceNone",(function(){return bn})),n.d(r,"Curve",(function(){return Cp})),n.d(r,"CurvePath",(function(){return Qp})),n.d(r,"CustomBlending",(function(){return Hn})),n.d(r,"CylinderBufferGeometry",(function(){return jd})),n.d(r,"CylinderGeometry",(function(){return Ud})),n.d(r,"Cylindrical",(function(){return vm})),n.d(r,"DataTexture",(function(){return Tl})),n.d(r,"DataTexture2DArray",(function(){return Yl})),n.d(r,"DataTexture3D",(function(){return ql})),n.d(r,"DataTextureLoader",(function(){return Mp})),n.d(r,"DecrementStencilOp",(function(){return fo})),n.d(r,"DecrementWrapStencilOp",(function(){return vo})),n.d(r,"DefaultLoadingManager",(function(){return bp})),n.d(r,"DepthFormat",(function(){return li})),n.d(r,"DepthStencilFormat",(function(){return ui})),n.d(r,"DepthTexture",(function(){return Rh})),n.d(r,"DirectionalLight",(function(){return uf})),n.d(r,"DirectionalLightHelper",(function(){return Um})),n.d(r,"DirectionalLightShadow",(function(){return lf})),n.d(r,"DiscreteInterpolant",(function(){return sp})),n.d(r,"DodecahedronBufferGeometry",(function(){return Wh})),n.d(r,"DodecahedronGeometry",(function(){return Vh})),n.d(r,"DoubleSide",(function(){return Rn})),n.d(r,"DstAlphaFactor",(function(){return tr})),n.d(r,"DstColorFactor",(function(){return rr})),n.d(r,"DynamicBufferAttribute",(function(){return Wv})),n.d(r,"DynamicCopyUsage",(function(){return No})),n.d(r,"DynamicDrawUsage",(function(){return Ao})),n.d(r,"DynamicReadUsage",(function(){return Co})),n.d(r,"EdgesGeometry",(function(){return zd})),n.d(r,"EdgesHelper",(function(){return ag})),n.d(r,"EllipseCurve",(function(){return Op})),n.d(r,"EqualDepth",(function(){return cr})),n.d(r,"EqualStencilFunc",(function(){return bo})),n.d(r,"EquirectangularReflectionMapping",(function(){return Mr})),n.d(r,"EquirectangularRefractionMapping",(function(){return Ar})),n.d(r,"Euler",(function(){return la})),n.d(r,"EventDispatcher",(function(){return Io})),n.d(r,"ExtrudeBufferGeometry",(function(){return Td})),n.d(r,"ExtrudeGeometry",(function(){return Sd})),n.d(r,"Face3",(function(){return ys})),n.d(r,"Face4",(function(){return Nv})),n.d(r,"FaceColors",(function(){return kn})),n.d(r,"FileLoader",(function(){return Sp})),n.d(r,"FlatShading",(function(){return Nn})),n.d(r,"Float32Attribute",(function(){return Kv})),n.d(r,"Float32BufferAttribute",(function(){return Os})),n.d(r,"Float64Attribute",(function(){return eg})),n.d(r,"Float64BufferAttribute",(function(){return Rs})),n.d(r,"FloatType",(function(){return Qr})),n.d(r,"Fog",(function(){return Rc})),n.d(r,"FogExp2",(function(){return Oc})),n.d(r,"Font",(function(){return Ef})),n.d(r,"FontLoader",(function(){return Af})),n.d(r,"FrontFaceDirectionCCW",(function(){return En})),n.d(r,"FrontFaceDirectionCW",(function(){return Tn})),n.d(r,"FrontSide",(function(){return Cn})),n.d(r,"Frustum",(function(){return Al})),n.d(r,"GammaEncoding",(function(){return Ki})),n.d(r,"Geometry",(function(){return pl})),n.d(r,"GeometryUtils",(function(){return hg})),n.d(r,"GreaterDepth",(function(){return dr})),n.d(r,"GreaterEqualDepth",(function(){return hr})),n.d(r,"GreaterEqualStencilFunc",(function(){return To})),n.d(r,"GreaterStencilFunc",(function(){return wo})),n.d(r,"GridHelper",(function(){return Fm})),n.d(r,"Group",(function(){return Pc})),n.d(r,"HalfFloatType",(function(){return Zr})),n.d(r,"HemisphereLight",(function(){return ef})),n.d(r,"HemisphereLightHelper",(function(){return Nm})),n.d(r,"HemisphereLightProbe",(function(){return Rf})),n.d(r,"IcosahedronBufferGeometry",(function(){return Hh})),n.d(r,"IcosahedronGeometry",(function(){return Gh})),n.d(r,"ImageBitmapLoader",(function(){return Sf})),n.d(r,"ImageLoader",(function(){return Ap})),n.d(r,"ImageUtils",(function(){return Go})),n.d(r,"ImmediateRenderObject",(function(){return wm})),n.d(r,"IncrementStencilOp",(function(){return po})),n.d(r,"IncrementWrapStencilOp",(function(){return mo})),n.d(r,"InstancedBufferAttribute",(function(){return mf})),n.d(r,"InstancedBufferGeometry",(function(){return ff})),n.d(r,"InstancedInterleavedBuffer",(function(){return hm})),n.d(r,"InstancedMesh",(function(){return ch})),n.d(r,"Int16Attribute",(function(){return Jv})),n.d(r,"Int16BufferAttribute",(function(){return As})),n.d(r,"Int32Attribute",(function(){return Zv})),n.d(r,"Int32BufferAttribute",(function(){return Ls})),n.d(r,"Int8Attribute",(function(){return Xv})),n.d(r,"Int8BufferAttribute",(function(){return Ts})),n.d(r,"IntType",(function(){return qr})),n.d(r,"InterleavedBuffer",(function(){return Nc})),n.d(r,"InterleavedBufferAttribute",(function(){return kc})),n.d(r,"Interpolant",(function(){return ip})),n.d(r,"InterpolateDiscrete",(function(){return Gi})),n.d(r,"InterpolateLinear",(function(){return Hi})),n.d(r,"InterpolateSmooth",(function(){return Vi})),n.d(r,"InvertStencilOp",(function(){return go})),n.d(r,"JSONLoader",(function(){return pg})),n.d(r,"KeepStencilOp",(function(){return co})),n.d(r,"KeyframeTrack",(function(){return lp})),n.d(r,"LOD",(function(){return eh})),n.d(r,"LatheBufferGeometry",(function(){return Fd})),n.d(r,"LatheGeometry",(function(){return Nd})),n.d(r,"Layers",(function(){return ua})),n.d(r,"LensFlare",(function(){return mg})),n.d(r,"LessDepth",(function(){return lr})),n.d(r,"LessEqualDepth",(function(){return ur})),n.d(r,"LessEqualStencilFunc",(function(){return _o})),n.d(r,"LessStencilFunc",(function(){return xo})),n.d(r,"Light",(function(){return Kp})),n.d(r,"LightProbe",(function(){return Of})),n.d(r,"LightShadow",(function(){return tf})),n.d(r,"Line",(function(){return gh})),n.d(r,"Line3",(function(){return _m})),n.d(r,"LineBasicMaterial",(function(){return hh})),n.d(r,"LineCurve",(function(){return Vp})),n.d(r,"LineCurve3",(function(){return Wp})),n.d(r,"LineDashedMaterial",(function(){return tp})),n.d(r,"LineLoop",(function(){return _h})),n.d(r,"LinePieces",(function(){return Iv})),n.d(r,"LineSegments",(function(){return bh})),n.d(r,"LineStrip",(function(){return Fv})),n.d(r,"LinearEncoding",(function(){return Zi})),n.d(r,"LinearFilter",(function(){return Ur})),n.d(r,"LinearInterpolant",(function(){return ap})),n.d(r,"LinearMipMapLinearFilter",(function(){return Hr})),n.d(r,"LinearMipMapNearestFilter",(function(){return Br})),n.d(r,"LinearMipmapLinearFilter",(function(){return Gr})),n.d(r,"LinearMipmapNearestFilter",(function(){return jr})),n.d(r,"LinearToneMapping",(function(){return yr})),n.d(r,"Loader",(function(){return _p})),n.d(r,"LoaderUtils",(function(){return pf})),n.d(r,"LoadingManager",(function(){return xp})),n.d(r,"LogLuvEncoding",(function(){return to})),n.d(r,"LoopOnce",(function(){return Ui})),n.d(r,"LoopPingPong",(function(){return Bi})),n.d(r,"LoopRepeat",(function(){return ji})),n.d(r,"LuminanceAlphaFormat",(function(){return ai})),n.d(r,"LuminanceFormat",(function(){return oi})),n.d(r,"MOUSE",(function(){return yn})),n.d(r,"Material",(function(){return bs})),n.d(r,"MaterialLoader",(function(){return df})),n.d(r,"Math",(function(){return Uo})),n.d(r,"MathUtils",(function(){return Uo})),n.d(r,"Matrix3",(function(){return Bo})),n.d(r,"Matrix4",(function(){return oa})),n.d(r,"MaxEquation",(function(){return qn})),n.d(r,"Mesh",(function(){return al})),n.d(r,"MeshBasicMaterial",(function(){return _s})),n.d(r,"MeshDepthMaterial",(function(){return xc})),n.d(r,"MeshDistanceMaterial",(function(){return bc})),n.d(r,"MeshFaceMaterial",(function(){return kv})),n.d(r,"MeshLambertMaterial",(function(){return Kd})),n.d(r,"MeshMatcapMaterial",(function(){return ep})),n.d(r,"MeshNormalMaterial",(function(){return $d})),n.d(r,"MeshPhongMaterial",(function(){return Qd})),n.d(r,"MeshPhysicalMaterial",(function(){return Jd})),n.d(r,"MeshStandardMaterial",(function(){return qd})),n.d(r,"MeshToonMaterial",(function(){return Zd})),n.d(r,"MinEquation",(function(){return Yn})),n.d(r,"MirroredRepeatWrapping",(function(){return Nr})),n.d(r,"MixOperation",(function(){return mr})),n.d(r,"MultiMaterial",(function(){return Dv})),n.d(r,"MultiplyBlending",(function(){return Gn})),n.d(r,"MultiplyOperation",(function(){return fr})),n.d(r,"NearestFilter",(function(){return Fr})),n.d(r,"NearestMipMapLinearFilter",(function(){return zr})),n.d(r,"NearestMipMapNearestFilter",(function(){return kr})),n.d(r,"NearestMipmapLinearFilter",(function(){return Dr})),n.d(r,"NearestMipmapNearestFilter",(function(){return Ir})),n.d(r,"NeverDepth",(function(){return ar})),n.d(r,"NeverStencilFunc",(function(){return yo})),n.d(r,"NoBlending",(function(){return zn})),n.d(r,"NoColors",(function(){return In})),n.d(r,"NoToneMapping",(function(){return gr})),n.d(r,"NormalBlending",(function(){return Un})),n.d(r,"NotEqualDepth",(function(){return pr})),n.d(r,"NotEqualStencilFunc",(function(){return So})),n.d(r,"NumberKeyframeTrack",(function(){return hp})),n.d(r,"Object3D",(function(){return Sa})),n.d(r,"ObjectLoader",(function(){return yf})),n.d(r,"ObjectSpaceNormalMap",(function(){return lo})),n.d(r,"OctahedronBufferGeometry",(function(){return Bh})),n.d(r,"OctahedronGeometry",(function(){return jh})),n.d(r,"OneFactor",(function(){return Qn})),n.d(r,"OneMinusDstAlphaFactor",(function(){return nr})),n.d(r,"OneMinusDstColorFactor",(function(){return ir})),n.d(r,"OneMinusSrcAlphaFactor",(function(){return er})),n.d(r,"OneMinusSrcColorFactor",(function(){return $n})),n.d(r,"OrthographicCamera",(function(){return sf})),n.d(r,"PCFShadowMap",(function(){return An})),n.d(r,"PCFSoftShadowMap",(function(){return Pn})),n.d(r,"PMREMGenerator",(function(){return bv})),n.d(r,"ParametricBufferGeometry",(function(){return Ih})),n.d(r,"ParametricGeometry",(function(){return Fh})),n.d(r,"Particle",(function(){return Uv})),n.d(r,"ParticleBasicMaterial",(function(){return Gv})),n.d(r,"ParticleSystem",(function(){return jv})),n.d(r,"ParticleSystemMaterial",(function(){return Hv})),n.d(r,"Path",(function(){return Zp})),n.d(r,"PerspectiveCamera",(function(){return _l})),n.d(r,"Plane",(function(){return Ka})),n.d(r,"PlaneBufferGeometry",(function(){return Rl})),n.d(r,"PlaneGeometry",(function(){return Ol})),n.d(r,"PlaneHelper",(function(){return Ym})),n.d(r,"PointCloud",(function(){return zv})),n.d(r,"PointCloudMaterial",(function(){return Bv})),n.d(r,"PointLight",(function(){return af})),n.d(r,"PointLightHelper",(function(){return Lm})),n.d(r,"Points",(function(){return Ah})),n.d(r,"PointsMaterial",(function(){return wh})),n.d(r,"PolarGridHelper",(function(){return Im})),n.d(r,"PolyhedronBufferGeometry",(function(){return Dh})),n.d(r,"PolyhedronGeometry",(function(){return kh})),n.d(r,"PositionalAudio",(function(){return qf})),n.d(r,"PropertyBinding",(function(){return am})),n.d(r,"PropertyMixer",(function(){return Qf})),n.d(r,"QuadraticBezierCurve",(function(){return Xp})),n.d(r,"QuadraticBezierCurve3",(function(){return Yp})),n.d(r,"Quaternion",(function(){return qo})),n.d(r,"QuaternionKeyframeTrack",(function(){return pp})),n.d(r,"QuaternionLinearInterpolant",(function(){return dp})),n.d(r,"REVISION",(function(){return gn})),n.d(r,"RGBADepthPacking",(function(){return ao})),n.d(r,"RGBAFormat",(function(){return ii})),n.d(r,"RGBAIntegerFormat",(function(){return mi})),n.d(r,"RGBA_ASTC_10x10_Format",(function(){return ki})),n.d(r,"RGBA_ASTC_10x5_Format",(function(){return Ni})),n.d(r,"RGBA_ASTC_10x6_Format",(function(){return Fi})),n.d(r,"RGBA_ASTC_10x8_Format",(function(){return Ii})),n.d(r,"RGBA_ASTC_12x10_Format",(function(){return Di})),n.d(r,"RGBA_ASTC_12x12_Format",(function(){return zi})),n.d(r,"RGBA_ASTC_4x4_Format",(function(){return Ei})),n.d(r,"RGBA_ASTC_5x4_Format",(function(){return Mi})),n.d(r,"RGBA_ASTC_5x5_Format",(function(){return Ai})),n.d(r,"RGBA_ASTC_6x5_Format",(function(){return Pi})),n.d(r,"RGBA_ASTC_6x6_Format",(function(){return Li})),n.d(r,"RGBA_ASTC_8x5_Format",(function(){return Ci})),n.d(r,"RGBA_ASTC_8x6_Format",(function(){return Oi})),n.d(r,"RGBA_ASTC_8x8_Format",(function(){return Ri})),n.d(r,"RGBA_PVRTC_2BPPV1_Format",(function(){return Si})),n.d(r,"RGBA_PVRTC_4BPPV1_Format",(function(){return wi})),n.d(r,"RGBA_S3TC_DXT1_Format",(function(){return gi})),n.d(r,"RGBA_S3TC_DXT3_Format",(function(){return yi})),n.d(r,"RGBA_S3TC_DXT5_Format",(function(){return xi})),n.d(r,"RGBDEncoding",(function(){return io})),n.d(r,"RGBEEncoding",(function(){return eo})),n.d(r,"RGBEFormat",(function(){return si})),n.d(r,"RGBFormat",(function(){return ri})),n.d(r,"RGBIntegerFormat",(function(){return fi})),n.d(r,"RGBM16Encoding",(function(){return ro})),n.d(r,"RGBM7Encoding",(function(){return no})),n.d(r,"RGB_ETC1_Format",(function(){return Ti})),n.d(r,"RGB_PVRTC_2BPPV1_Format",(function(){return _i})),n.d(r,"RGB_PVRTC_4BPPV1_Format",(function(){return bi})),n.d(r,"RGB_S3TC_DXT1_Format",(function(){return vi})),n.d(r,"RGFormat",(function(){return di})),n.d(r,"RGIntegerFormat",(function(){return pi})),n.d(r,"RawShaderMaterial",(function(){return Yd})),n.d(r,"Ray",(function(){return Ja})),n.d(r,"Raycaster",(function(){return dm})),n.d(r,"RectAreaLight",(function(){return hf})),n.d(r,"RedFormat",(function(){return ci})),n.d(r,"RedIntegerFormat",(function(){return hi})),n.d(r,"ReinhardToneMapping",(function(){return xr})),n.d(r,"RepeatWrapping",(function(){return Or})),n.d(r,"ReplaceStencilOp",(function(){return ho})),n.d(r,"ReverseSubtractEquation",(function(){return Xn})),n.d(r,"RingBufferGeometry",(function(){return Rd})),n.d(r,"RingGeometry",(function(){return Od})),n.d(r,"Scene",(function(){return Ta})),n.d(r,"SceneUtils",(function(){return fg})),n.d(r,"ShaderChunk",(function(){return Nl})),n.d(r,"ShaderLib",(function(){return Fl})),n.d(r,"ShaderMaterial",(function(){return xl})),n.d(r,"ShadowMaterial",(function(){return Xd})),n.d(r,"Shape",(function(){return $p})),n.d(r,"ShapeBufferGeometry",(function(){return kd})),n.d(r,"ShapeGeometry",(function(){return Id})),n.d(r,"ShapePath",(function(){return Tf})),n.d(r,"ShapeUtils",(function(){return bd})),n.d(r,"ShortType",(function(){return Xr})),n.d(r,"Skeleton",(function(){return ih})),n.d(r,"SkeletonHelper",(function(){return Pm})),n.d(r,"SkinnedMesh",(function(){return th})),n.d(r,"SmoothShading",(function(){return Fn})),n.d(r,"Sphere",(function(){return Ba})),n.d(r,"SphereBufferGeometry",(function(){return Cd})),n.d(r,"SphereGeometry",(function(){return Ld})),n.d(r,"Spherical",(function(){return mm})),n.d(r,"SphericalHarmonics3",(function(){return Cf})),n.d(r,"SphericalReflectionMapping",(function(){return Pr})),n.d(r,"Spline",(function(){return rg})),n.d(r,"SplineCurve",(function(){return qp})),n.d(r,"SplineCurve3",(function(){return ng})),n.d(r,"SpotLight",(function(){return rf})),n.d(r,"SpotLightHelper",(function(){return Tm})),n.d(r,"SpotLightShadow",(function(){return nf})),n.d(r,"Sprite",(function(){return Qc})),n.d(r,"SpriteMaterial",(function(){return Dc})),n.d(r,"SrcAlphaFactor",(function(){return Kn})),n.d(r,"SrcAlphaSaturateFactor",(function(){return or})),n.d(r,"SrcColorFactor",(function(){return Zn})),n.d(r,"StaticCopyUsage",(function(){return Ro})),n.d(r,"StaticDrawUsage",(function(){return Mo})),n.d(r,"StaticReadUsage",(function(){return Lo})),n.d(r,"StereoCamera",(function(){return kf})),n.d(r,"StreamCopyUsage",(function(){return Fo})),n.d(r,"StreamDrawUsage",(function(){return Po})),n.d(r,"StreamReadUsage",(function(){return Oo})),n.d(r,"StringKeyframeTrack",(function(){return fp})),n.d(r,"SubtractEquation",(function(){return Wn})),n.d(r,"SubtractiveBlending",(function(){return Bn})),n.d(r,"TOUCH",(function(){return xn})),n.d(r,"TangentSpaceNormalMap",(function(){return so})),n.d(r,"TetrahedronBufferGeometry",(function(){return Uh})),n.d(r,"TetrahedronGeometry",(function(){return zh})),n.d(r,"TextBufferGeometry",(function(){return Pd})),n.d(r,"TextGeometry",(function(){return Ad})),n.d(r,"Texture",(function(){return Vo})),n.d(r,"TextureLoader",(function(){return Lp})),n.d(r,"TorusBufferGeometry",(function(){return Zh})),n.d(r,"TorusGeometry",(function(){return Qh})),n.d(r,"TorusKnotBufferGeometry",(function(){return Jh})),n.d(r,"TorusKnotGeometry",(function(){return qh})),n.d(r,"Triangle",(function(){return cs})),n.d(r,"TriangleFanDrawMode",(function(){return Qi})),n.d(r,"TriangleStripDrawMode",(function(){return Ji})),n.d(r,"TrianglesDrawMode",(function(){return qi})),n.d(r,"TubeBufferGeometry",(function(){return Yh})),n.d(r,"TubeGeometry",(function(){return Xh})),n.d(r,"UVMapping",(function(){return Sr})),n.d(r,"Uint16Attribute",(function(){return Qv})),n.d(r,"Uint16BufferAttribute",(function(){return Ps})),n.d(r,"Uint32Attribute",(function(){return $v})),n.d(r,"Uint32BufferAttribute",(function(){return Cs})),n.d(r,"Uint8Attribute",(function(){return Yv})),n.d(r,"Uint8BufferAttribute",(function(){return Es})),n.d(r,"Uint8ClampedAttribute",(function(){return qv})),n.d(r,"Uint8ClampedBufferAttribute",(function(){return Ms})),n.d(r,"Uncharted2ToneMapping",(function(){return br})),n.d(r,"Uniform",(function(){return cm})),n.d(r,"UniformsLib",(function(){return Pl})),n.d(r,"UniformsUtils",(function(){return yl})),n.d(r,"UnsignedByteType",(function(){return Vr})),n.d(r,"UnsignedInt248Type",(function(){return ti})),n.d(r,"UnsignedIntType",(function(){return Jr})),n.d(r,"UnsignedShort4444Type",(function(){return $r})),n.d(r,"UnsignedShort5551Type",(function(){return Kr})),n.d(r,"UnsignedShort565Type",(function(){return ei})),n.d(r,"UnsignedShortType",(function(){return Yr})),n.d(r,"VSMShadowMap",(function(){return Ln})),n.d(r,"Vector2",(function(){return jo})),n.d(r,"Vector3",(function(){return Zo})),n.d(r,"Vector4",(function(){return Wo})),n.d(r,"VectorKeyframeTrack",(function(){return mp})),n.d(r,"Vertex",(function(){return Vv})),n.d(r,"VertexColors",(function(){return Dn})),n.d(r,"VideoTexture",(function(){return Lh})),n.d(r,"WebGLCubeRenderTarget",(function(){return Sl})),n.d(r,"WebGLMultisampleRenderTarget",(function(){return Yo})),n.d(r,"WebGLRenderTarget",(function(){return Xo})),n.d(r,"WebGLRenderTargetCube",(function(){return cg})),n.d(r,"WebGLRenderer",(function(){return Cc})),n.d(r,"WebGLUtils",(function(){return Tc})),n.d(r,"WireframeGeometry",(function(){return Nh})),n.d(r,"WireframeHelper",(function(){return sg})),n.d(r,"WrapAroundEnding",(function(){return Yi})),n.d(r,"XHRLoader",(function(){return lg})),n.d(r,"ZeroCurvatureEnding",(function(){return Wi})),n.d(r,"ZeroFactor",(function(){return Jn})),n.d(r,"ZeroSlopeEnding",(function(){return Xi})),n.d(r,"ZeroStencilOp",(function(){return uo})),n.d(r,"sRGBEncoding",(function(){return $i}));var i=n(7),o=n.n(i),a=n(0),s=n.n(a),l=n(5),u=n.n(l),c=n(2),h=n.n(c),d=n(4),p=n.n(d),f=n(8),m=n.n(f);function v(e){return"/"===e.charAt(0)}function g(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],i=e&&v(e),o=t&&v(t),a=i||o;if(e&&v(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var l=r[r.length-1];s="."===l||".."===l||""===l}else s=!1;for(var u=0,c=r.length;c>=0;c--){var h=r[c];"."===h?g(r,c):".."===h?(g(r,c),u++):u&&(g(r,c),u--)}if(!a)for(;u--;u)r.unshift("..");!a||""===r[0]||r[0]&&v(r[0])||r.unshift("");var d=r.join("/");return s&&"/"!==d.substr(-1)&&(d+="/"),d},x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var b=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));var r=void 0===t?"undefined":x(t);if(r!==(void 0===n?"undefined":x(n)))return!1;if("object"===r){var i=t.valueOf(),o=n.valueOf();if(i!==t||o!==n)return e(i,o);var a=Object.keys(t),s=Object.keys(n);return a.length===s.length&&a.every((function(r){return e(t[r],n[r])}))}return!1},_=function(e){return"/"===e.charAt(0)?e:"/"+e},w=function(e){return"/"===e.charAt(0)?e.substr(1):e},S=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},T=function(e,t){return S(e,t)?e.substr(t.length):e},E=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},M=function(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i},A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P=function(e,t,n,r){var i=void 0;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=A({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=y(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},L=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&b(e.state,t.state)},C=function(){var e=null,t=[];return{setPrompt:function(t){return p()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):(p()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}},O=!("undefined"==typeof window||!window.document||!window.document.createElement),R=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},N=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},F=function(e,t){return t(window.confirm(e))},I=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},k=("function"==typeof Symbol&&Symbol.iterator,Object.assign,Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),D={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+w(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:w,decodePath:_},slash:{encodePath:_,decodePath:_}},z=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},U=function(e){return window.location.hash=e},j=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(O,"Hash history needs a DOM");var t=window.history,n=I(),r=e.getUserConfirmation,i=void 0===r?F:r,o=e.hashType,a=void 0===o?"slash":o,s=e.basename?E(_(e.basename)):"",l=D[a],u=l.encodePath,c=l.decodePath,h=function(){var e=c(z());return p()(!s||S(e,s),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+s+'".'),s&&(e=T(e,s)),P(e)},d=C(),f=function(e){k(ee,e),ee.length=t.length,d.notifyListeners(ee.location,ee.action)},v=!1,g=null,y=function(){var e=z(),t=u(e);if(e!==t)j(t);else{var n=h(),r=ee.location;if(!v&&L(r,n))return;if(g===M(n))return;g=null,x(n)}},x=function(e){if(v)v=!1,f();else{d.confirmTransitionTo(e,"POP",i,(function(t){t?f({action:"POP",location:e}):b(e)}))}},b=function(e){var t=ee.location,n=G.lastIndexOf(M(t));-1===n&&(n=0);var r=G.lastIndexOf(M(e));-1===r&&(r=0);var i=n-r;i&&(v=!0,X(i))},w=z(),A=u(w);w!==A&&j(A);var B=h(),G=[M(B)],H=function(e){return"#"+u(s+M(e))},V=function(e,t){p()(void 0===t,"Hash history cannot push state; it is ignored");var n=P(e,void 0,void 0,ee.location);d.confirmTransitionTo(n,"PUSH",i,(function(e){if(e){var t=M(n),r=u(s+t);if(z()!==r){g=t,U(r);var i=G.lastIndexOf(M(ee.location)),o=G.slice(0,-1===i?0:i+1);o.push(t),G=o,f({action:"PUSH",location:n})}else p()(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),f()}}))},W=function(e,t){p()(void 0===t,"Hash history cannot replace state; it is ignored");var n=P(e,void 0,void 0,ee.location);d.confirmTransitionTo(n,"REPLACE",i,(function(e){if(e){var t=M(n),r=u(s+t);z()!==r&&(g=t,j(r));var i=G.indexOf(M(ee.location));-1!==i&&(G[i]=t),f({action:"REPLACE",location:n})}}))},X=function(e){p()(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},Y=function(){return X(-1)},q=function(){return X(1)},J=0,Q=function(e){1===(J+=e)?R(window,"hashchange",y):0===J&&N(window,"hashchange",y)},Z=!1,$=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=d.setPrompt(e);return Z||(Q(1),Z=!0),function(){return Z&&(Z=!1,Q(-1)),t()}},K=function(e){var t=d.appendListener(e);return Q(1),function(){Q(-1),t()}},ee={length:t.length,action:"POP",location:B,createHref:H,push:V,replace:W,go:X,goBack:Y,goForward:q,block:$,listen:K};return ee},G=("function"==typeof Symbol&&Symbol.iterator,Object.assign,n(6)),H=n.n(G),V=n(3),W=n.n(V),X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var J=function(e){function t(){var n,r;Y(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=q(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},q(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:X({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;H()(null==n||1===s.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen((function(){e.setState({match:e.computeMatch(r.location.pathname)})}))},t.prototype.componentWillReceiveProps=function(e){u()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?s.a.Children.only(e):null},t}(s.a.Component);J.propTypes={history:W.a.object.isRequired,children:W.a.node},J.contextTypes={router:W.a.object},J.childContextTypes={router:W.a.object.isRequired};var Q=J;function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var K=function(e){function t(){var n,r;Z(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=$(this,e.call.apply(e,[this].concat(o))),r.history=B(r.props),$(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){u()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return s.a.createElement(Q,{history:this.history,children:this.props.children})},t}(s.a.Component);K.propTypes={basename:h.a.string,getUserConfirmation:h.a.func,hashType:h.a.oneOf(["hashbang","noslash","slash"]),children:h.a.node};var ee=K,te=n(20),ne=n.n(te),re={},ie=0,oe=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=re[n]||(re[n]={});if(r[e])return r[e];var i=[],o={re:ne()(e,i,t),keys:i};return ie<1e4&&(r[e]=o,ie++),o},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,a=void 0!==o&&o,s=r.strict,l=void 0!==s&&s,u=r.sensitive,c=void 0!==u&&u;if(null==i)return n;var h=oe(i,{end:a,strict:l,sensitive:c}),d=h.re,p=h.keys,f=d.exec(e);if(!f)return null;var m=f[0],v=f.slice(1),g=e===m;return a&&!g?null:{path:i,url:"/"===i&&""===m?"/":m,isExact:g,params:p.reduce((function(e,t,n){return e[t.name]=v[n],e}),{})}};function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ue=function(e){function t(){return se(this,t),le(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){H()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){u()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),u()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return s.a.Children.forEach(t,(function(t){if(null==r&&s.a.isValidElement(t)){var o=t.props,a=o.path,l=o.exact,u=o.strict,c=o.sensitive,h=o.from,d=a||h;i=t,r=ae(n.pathname,{path:d,exact:l,strict:u,sensitive:c},e.match)}})),r?s.a.cloneElement(i,{location:n,computedMatch:r}):null},t}(s.a.Component);ue.contextTypes={router:W.a.shape({route:W.a.object.isRequired}).isRequired},ue.propTypes={children:W.a.node,location:W.a.object};var ce=ue,he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var fe=function(e){return 0===s.a.Children.count(e)},me=function(e){function t(){var n,r;de(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=pe(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},pe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:he({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,a=e.exact,s=e.sensitive;if(n)return n;H()(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,u=(r||l.location).pathname;return ae(u,{path:i,strict:o,exact:a,sensitive:s},l.match)},t.prototype.componentWillMount=function(){u()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),u()(!(this.props.component&&this.props.children&&!fe(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),u()(!(this.props.render&&this.props.children&&!fe(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){u()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),u()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,a=o.history,l=o.route,u=o.staticContext,c={match:e,location:this.props.location||l.location,history:a,staticContext:u};return r?e?s.a.createElement(r,c):null:i?e?i(c):null:"function"==typeof n?n(c):n&&!fe(n)?s.a.Children.only(n):null},t}(s.a.Component);me.propTypes={computedMatch:W.a.object,path:W.a.string,exact:W.a.bool,strict:W.a.bool,sensitive:W.a.bool,component:W.a.func,render:W.a.func,children:W.a.oneOfType([W.a.func,W.a.node]),location:W.a.object},me.contextTypes={router:W.a.shape({history:W.a.object.isRequired,route:W.a.object.isRequired,staticContext:W.a.object})},me.childContextTypes={router:W.a.object.isRequired};var ve=me,ge=ve,ye=n(1),xe="https://raw.githubusercontent.com/misspia/assets/master/audio/",be={elemId:"audio",tester:n(69),S008:"".concat(xe,"nurko-right-now.mp3"),S014:"".concat(xe,"kda-popstars.mp3"),S015:"".concat(xe,"blue-d-nobody.mp3"),S016:"".concat(xe,"max-wrong.mp3")},_e={shadow:"rgba(0,0,0,0.26)",whiteTranslucent:"rgba(255, 255, 255, 0.6)",white:"#fff",black:"#22313F",grey:"#6C7A89",greyDark:"#343a39",cream:"#eeeeee",pink:"#fe9bba",jasmine:"#eacbf7",blue:"#a1bce7",thistle:"#c9bbc8"},we={familyTitle:"'Fjalla One', sans-serif",familyBody:"'Nunito', sans-serif",weightLight:100},Se={close:"close",github:"logo-github",audio:"musical-note"},Te={S000:n(70),S001:n(71),S002:n(72),S003:n(73),S004:n(74),S005:n(75),S006:n(76),S007:n(77),S008:n(78),S009:n(79),S010:n(80),S011:n(81),S012:n(82),S013:n(83),S014:n(84),S015:n(85),S016:n(86),T005a:n(87),T005b:n(88),T007:n(89),T009:n(90),T011a:n(91),T011b:n(92),T012a:n(93),T012b:n(94),T015:n(95)},Ee={previewSize:256,previewMargin:16},Me={SectionContainer:ye.b.section.withConfig({displayName:"styles__SectionContainer",componentId:"sc-189e01y-0"})(["width:100%;min-height:100vh;"]),anchorReset:Object(ye.a)(["text-decoration:none;&:visited,&:active{outline:none;}"])},Ae=ye.b.main.withConfig({displayName:"routerstyles__Container",componentId:"kmowqy-0"})(["font-family:",";font-size:1em;"],we.familyBody),Pe=(ye.b.nav.withConfig({displayName:"routerstyles__Nav",componentId:"kmowqy-1"})(["position:fixed;display:flex;justify-content:space-around;width:100%;"]),{home:"/",sketch:"".concat("/sketch/",":index"),toSketch:function(e){return"".concat("/sketch/").concat(e)}}),Le=Object(ye.b)(Me.SectionContainer).withConfig({displayName:"homestyles__Container",componentId:"sc-1pcqj2j-0"})(["display:flex;flex-direction:column;align-items:center;background-color:",";"],_e.cream),Ce=ye.b.header.withConfig({displayName:"homestyles__Header",componentId:"sc-1pcqj2j-1"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0.5em;box-sizing:border-box;width:100%;font-family:",";"],we.familyTitle),Oe=ye.b.h1.withConfig({displayName:"homestyles__Title",componentId:"sc-1pcqj2j-2"})(["font-size:2.5em;margin:0;"]),Re=ye.b.h2.withConfig({displayName:"homestyles__Subtitle",componentId:"sc-1pcqj2j-3"})(["margin:0 0 0.2em 0;font-size:1.1em;font-style:italic;font-weight:",";font-family:",";"],we.weightLight,we.familyBody),Ne=ye.b.div.withConfig({displayName:"homestyles__SocialContainer",componentId:"sc-1pcqj2j-4"})(["display:flex;font-size:1.1em;"]),Fe=ye.b.a.withConfig({displayName:"homestyles__SocialLink",componentId:"sc-1pcqj2j-5"})(["color:",";transition:0.2s all;&:hover{color:",";}"],_e.black,_e.pink),Ie=ye.b.div.withConfig({displayName:"iconstyles__Wrapper",componentId:"sc-6vawap-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;height:",";width:",";color:",";&:hover{","}",""],(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.color}),(function(e){return e.hover}),(function(e){return e.customStyles}));var ke=function(e){var t=e.name,n=void 0===t?"":t,r=e.size,i=void 0===r?"1em":r,o=e.color,a=void 0===o?"":o,l=e.customStyle,u=void 0===l?"":l,c=e.hover,h=void 0===c?"":c;return s.a.createElement(Ie,{size:i,color:a,customStyles:u,hover:h},s.a.createElement("ion-icon",{name:n}))},De=ye.b.div.withConfig({displayName:"loaderstyles__Wrapper",componentId:"i44wr3-0"})(["z-index:999;position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:",";"],_e.cream),ze=ye.b.div.withConfig({displayName:"loaderstyles__Text",componentId:"i44wr3-1"})(["color:",";margin-bottom:1.5em;letter-spacing:2px;"],_e.grey),Ue=ye.b.div.withConfig({displayName:"loaderstyles__Bar",componentId:"i44wr3-2"})(["height:1px;width:","%;background-color:",";transition:width 0.3s;"],(function(e){return e.width}),_e.grey);var je=function(e){var t=e.progress,n=void 0===t?0:t;return s.a.createElement(De,null,s.a.createElement(ze,null,"Loading..."),s.a.createElement(Ue,{width:n}))},Be=n(14),Ge=n.n(Be),He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Xe=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},Ye=function(e){function t(){var n,r;Ve(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=We(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!Xe(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},We(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);Ge()(this.context.router,"You should not use <Link> outside a <Router>"),Ge()(void 0!==t,'You must specify the "to" property');var i=this.context.router.history,o="string"==typeof t?P(t,null,null,i.location):t,a=i.createHref(o);return s.a.createElement("a",He({},r,{onClick:this.handleClick,href:a,ref:n}))},t}(s.a.Component);Ye.propTypes={onClick:h.a.func,target:h.a.string,replace:h.a.bool,to:h.a.oneOfType([h.a.string,h.a.object]).isRequired,innerRef:h.a.oneOfType([h.a.string,h.a.func])},Ye.defaultProps={replace:!1},Ye.contextTypes={router:h.a.shape({history:h.a.shape({push:h.a.func.isRequired,replace:h.a.func.isRequired,createHref:h.a.func.isRequired}).isRequired}).isRequired};var qe=Ye,Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Ze=function(e){var t=e.to,n=e.exact,r=e.strict,i=e.location,o=e.activeClassName,a=e.className,l=e.activeStyle,u=e.style,c=e.isActive,h=e["aria-current"],d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),p="object"===(void 0===t?"undefined":Qe(t))?t.pathname:t,f=p&&p.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return s.a.createElement(ge,{path:f,exact:n,strict:r,location:i,children:function(e){var n=e.location,r=e.match,i=!!(c?c(r,n):r);return s.a.createElement(qe,Je({to:t,className:i?[a,o].filter((function(e){return e})).join(" "):a,style:i?Je({},u,l):u,"aria-current":i&&h||null},d))}})};Ze.propTypes={to:qe.propTypes.to,exact:h.a.bool,strict:h.a.bool,location:h.a.object,activeClassName:h.a.string,className:h.a.string,activeStyle:h.a.object,style:h.a.object,isActive:h.a.func,"aria-current":h.a.oneOf(["page","step","location","date","time","true"])},Ze.defaultProps={activeClassName:"active","aria-current":"page"};var $e=Ze,Ke=ye.b.div.withConfig({displayName:"previewstyles__Container",componentId:"sc-937doj-0"})(["margin:","px;position:relative;display:flex;flex-direction:column;align-items:center;width:","px;height:","px;overflow:hidden;a{z-index:2;position:absolute;width:100%;height:100%;","}"],Ee.previewMargin,Ee.previewSize,Ee.previewSize,Me.anchorReset),et=ye.b.img.withConfig({displayName:"previewstyles__Image",componentId:"sc-937doj-1"})(["z-index:0;position:absolute;top:0;left:0;bottom:0;right:0;margin:auto;width:auto;height:100%;filter:grayscale(60%);transition:0.2s all;",":hover &{filter:grayscale(0%);transform:scale(1.1);}"],Ke),tt=ye.b.div.withConfig({displayName:"previewstyles__HiddenContainer",componentId:"sc-937doj-2"})(["z-index:1;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all 0.5s;opacity:0;",":hover &{background-color:",";opacity:1;}"],Ke,_e.whiteTranslucent),nt=(ye.b.h2.withConfig({displayName:"previewstyles__Title",componentId:"sc-937doj-3"})(["font-size:1.2em;letter-spacing:0.1em;text-align:center;color:",";"],_e.greyDark),ye.b.div.withConfig({displayName:"previewstyles__IconWrapper",componentId:"sc-937doj-4"})(["margin:0.5em;padding:0.2em;position:absolute;bottom:0;right:0;background-color:",";border-radius:0.2em;box-sizing:border-box;"],_e.thistle));function rt(e){var t=e.to,n=void 0===t?"":t,r=(e.title,e.image),i=void 0===r?"":r,o=e.isAudio,a=void 0!==o&&o,l=e.onLoad,u=void 0===l?function(){}:l;return s.a.createElement(Ke,null,s.a.createElement(et,{src:i,onLoad:u}),s.a.createElement($e,{to:n}),s.a.createElement(tt,null),a&&s.a.createElement(nt,null,s.a.createElement(ke,{size:"1.5em",color:_e.grey,name:Se.audio})))}var it=3*(Ee.previewSize+2*Ee.previewMargin)+3*Ee.previewMargin,ot=ye.b.div.withConfig({displayName:"sketchListstyles__Container",componentId:"sc-11uf565-0"})(["display:flex;justify-content:flex-start;align-items:center;flex-wrap:wrap;width:","px;@media (max-width:800px){justify-content:center;width:100%;}"],it);function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function st(){var e=at(Object(a.useState)(0),2),t=e[0],n=e[1],r=at(Object(a.useState)(0),2),i=r[0],o=r[1];return Object(a.useEffect)((function(){var e=function(){var e=window,t=e.innerWidth,r=e.innerHeight;n(t),o(r)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),{width:t,height:i}}var lt=n(21),ut=n.n(lt),ct=n(22),ht=n.n(ct);function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t;try{this.gl=t.getContext("webgl")}catch(e){throw alert("Sorry, WebGL has not been enabled on your browser :("),e}this.program={},this.vertShader={},this.fragShader={},this.mouse={},this.images=[]}var t,n,r;return t=e,(n=[{key:"unmount",value:function(){}},{key:"init",value:function(){}},{key:"draw",value:function(){}},{key:"render",value:function(){this.init(),this.draw()}},{key:"clear",value:function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},{key:"resize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"getRandomRange",value:function(e,t){return Math.random()*(t-e)+e}},{key:"getSmallestDimmension",value:function(){return this.canvas.width>this.canvas.height?this.canvas.width:this.canvas.height}},{key:"setMouseMoveListener",value:function(){var e=this;this.canvas.addEventListener("mousemove",(function(t){e.mouse={x:t.clientX?t.clientX:0,y:t.clientY?t.clientY:0}}))}},{key:"addMouseListener",value:function(e){}},{key:"initFragPlayground",value:function(e,t){this.vertShader=this.compileShader(e,this.gl.VERTEX_SHADER),this.fragShader=this.compileShader(t,this.gl.FRAGMENT_SHADER),this.program=this.createProgram(this.vertShader,this.fragShader);var n=new Float32Array([-1,1,-1,-1,1,1,1,-1]),r=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.STATIC_DRAW)}},{key:"createProgram",value:function(e,t){var n=this.gl.createProgram();return this.gl.attachShader(n,e),this.gl.attachShader(n,t),this.gl.linkProgram(n),this.gl.useProgram(n),n}},{key:"compileShader",value:function(e,t){var n=this.gl.createShader(t);if(this.gl.shaderSource(n,e),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))throw"Failed to compile shader: ".concat(this.gl.getShaderInfoLog(n));return n}},{key:"getAttribLocation",value:function(e,t){var n=this.gl.getAttribLocation(e,t);if(-1===n)throw"Cannot find attribute ".concat(t);return n}},{key:"getUniformLocation",value:function(e,t){var n=this.gl.getUniformLocation(e,t);if(-1===n)throw"Cannot find uniform ".concat(t);return n}},{key:"getAPosition",value:function(){var e=this.getAttribLocation(this.program,"a_position");this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,this.gl.FALSE,8,0)}},{key:"getUResolution",value:function(){var e=this.getUniformLocation(this.program,"u_resolution");this.gl.uniform2f(e,this.canvas.width,this.canvas.height)}},{key:"getUTime",value:function(){var e=(Date.now()-this.startTime)/1e3,t=this.getUniformLocation(this.program,"u_time");this.gl.uniform1f(t,e)}},{key:"getUMouse",value:function(){var e=this.getUniformLocation(this.program,"u_mouse");this.gl.uniform2f(e,this.mouse.x,this.mouse.y)}},{key:"loadImage",value:function(e,t){var n=new Image;return n.src=e,n.onload=t,n}},{key:"loadImages",value:function(e,t){var n=this,r=e.length,i=function(){0==--r&&t()};e.forEach((function(e){var t=n.loadImage(e,i);n.images.push(t)}))}}])&&dt(t.prototype,n),r&&dt(t,r),e}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=vt(this,gt(t).call(this,e))).metaballs=[],n.numMetaballs=10,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){this.initFragPlayground(ut.a,ht.a),this.getUResolution("u_resolution"),this.getAPosition("a_position"),this.generateMetaballs()}},{key:"generateMetaballs",value:function(){for(var e=this.getSmallestDimmension(),t=.1*e,n=.02*e,r=0;r<this.numMetaballs;r++){var i=this.getRandomRange(n,t);this.metaballs.push({x:this.getRandomRange(i,this.canvas.width-2),y:this.getRandomRange(i,this.canvas.height-2),velX:this.getRandomRange(2,8),velY:this.getRandomRange(2,8),r:i})}}},{key:"draw",value:function(){var e=this;this.updateMetaballs();var t=new Float32Array(3*this.numMetaballs);this.metaballs.forEach((function(e,n){var r=3*n;t[r+0]=e.x,t[r+1]=e.y,t[r+2]=e.r}));var n=this.getUniformLocation(this.program,"u_metaballs");this.gl.uniform3fv(n,t),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),requestAnimationFrame((function(){return e.draw()}))}},{key:"updateMetaballs",value:function(){var e=this;this.metaballs.map((function(t){t.x+=t.velX,t.y+=t.velY,t.x-t.r<0?(t.x=t.r+1,t.velX=Math.abs(t.velX)):t.x+t.r>e.canvas.width&&(t.x=e.canvas.width-t.r,t.velX=-Math.abs(t.velX)),t.y-t.r<0?(t.y=t.r+1,t.velY=Math.abs(t.velY)):t.y+t.r>e.canvas.height&&(t.y=e.canvas.height-t.r,t.velY=-Math.abs(t.velY))}))}}])&&mt(n.prototype,r),i&&mt(n,i),t}(pt);var bt=n(23),_t=n.n(bt),wt=n(24),St=n.n(wt);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Mt(this,At(t).call(this,e))).numParticles=3e4,n.particleVert=new Float32Array(2*n.numParticles),n.particleVertBuffer={},n.startTime=Date.now(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){this.generateParticles(),this.particleVertBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.particleVertBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.particleVert,this.gl.STATIC_DRAW),this.vertShader=this.compileShader(_t.a,this.gl.VERTEX_SHADER),this.fragShader=this.compileShader(St.a,this.gl.FRAGMENT_SHADER),this.program=this.createProgram(this.vertShader,this.fragShader),this.setStaticAttributes(),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.disable(this.gl.DEPTH_TEST),this.gl.clearColor(.1,.1,.12,1)}},{key:"generateParticles",value:function(){for(var e=this.particleVert.length;e--;)for(this.particleVert[e]=0;Math.pow(this.particleVert[e],2)<.3;)this.particleVert[e]=this.getRandomRange(-1,1)}},{key:"setStaticAttributes",value:function(){var e=this.gl.getAttribLocation(this.program,"a_position");this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(this.particleVertBuffer,2,this.gl.FLOAT,!1,4,0)}},{key:"draw",value:function(){var e=this,t=(Date.now()-this.startTime)/3e3;this.gl.clear(this.gl.COLOR_BUFFER_BIT);var n=this.gl.getUniformLocation(this.program,"u_time");this.gl.uniform1f(n,t),this.gl.drawArrays(this.gl.POINTS,0,this.numParticles),requestAnimationFrame((function(){return e.draw()}))}}])&&Et(n.prototype,r),i&&Et(n,i),t}(pt);var Ct=n(25),Ot=n.n(Ct),Rt=n(26),Nt=n.n(Rt);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ut=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=kt(this,Dt(t).call(this,e))).startTime=Date.now(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){this.initFragPlayground(Ot.a,Nt.a),this.getAPosition("a_position"),this.getUResolution("u_resolution"),this.setMouseMoveListener()}},{key:"draw",value:function(){var e=this;this.getUTime("u_time"),this.getUMouse("u_mouse"),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),requestAnimationFrame((function(){return e.draw()}))}}])&&It(n.prototype,r),i&&It(n,i),t}(pt);var jt=n(27),Bt=n.n(jt),Gt=n(28),Ht=n.n(Gt);function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return!t||"object"!==Vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xt(this,Yt(t).call(this,e))).startTime=Date.now(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){this.initFragPlayground(Bt.a,Ht.a),this.getAPosition("a_position"),this.getUResolution("u_resolution")}},{key:"draw",value:function(){var e=this;this.getUTime("u_time"),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),requestAnimationFrame((function(){return e.draw()}))}}])&&Wt(n.prototype,r),i&&Wt(n,i),t}(pt);var Qt=n(29),Zt=n.n(Qt),$t=n(30),Kt=n.n($t);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var an=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=nn(this,rn(t).call(this,e))).startTime=Date.now(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){this.initFragPlayground(Zt.a,Kt.a),this.getAPosition("a_position"),this.getUResolution("u_resolution")}},{key:"draw",value:function(){var e=this;this.getUTime("u_time"),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),requestAnimationFrame((function(){return e.draw()}))}}])&&tn(n.prototype,r),i&&tn(n,i),t}(pt);var sn=n(31),ln=n.n(sn),un=n(32),cn=n.n(un);function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return!t||"object"!==hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pn(this,fn(t).call(this,e))).startTime=Date.now(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){var e=this,t=[Te.T005a,Te.T005b];this.loadImages(t,(function(){return e.renderImages()}))}},{key:"renderImages",value:function(){this.vertShader=this.compileShader(ln.a,this.gl.VERTEX_SHADER),this.fragShader=this.compileShader(cn.a,this.gl.FRAGMENT_SHADER),this.program=this.createProgram(this.vertShader,this.fragShader);var e=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.setRectangle(0,0,this.canvas.width,this.canvas.height),this.getAPosition("a_position"),this.getATexCoord("a_texCoord"),this.getUResolution("u_resolution"),this.getUImages(["u_image0","u_image1"]),this.setMouseMoveListener(),this.draw()}},{key:"setRectangle",value:function(e,t,n,r){var i=e+n,o=t+r,a=new Float32Array([e,t,i,t,e,o,e,o,i,t,i,o]);this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW)}},{key:"getATexCoord",value:function(e){var t=this.getAttribLocation(this.program,e),n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n);var r=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);this.gl.bufferData(this.gl.ARRAY_BUFFER,r,this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)}},{key:"getUImages",value:function(e){var t=this,n=[];this.images.forEach((function(e){var r=t.createTexture(e);n.push(r)}));var r=this.getUniformLocation(this.program,e[0]),i=this.getUniformLocation(this.program,e[1]);this.gl.uniform1i(r,0),this.gl.uniform1i(i,1),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,n[0]),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,n[1])}},{key:"createTexture",value:function(e){var t=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),t}},{key:"draw",value:function(){var e=this;this.getUMouse("u_mouse"),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),requestAnimationFrame((function(){return e.draw()}))}},{key:"render",value:function(){this.init()}}])&&dn(n.prototype,r),i&&dn(n,i),t}(pt);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});var gn="113",yn={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},xn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bn=0,_n=1,wn=2,Sn=3,Tn=0,En=1,Mn=0,An=1,Pn=2,Ln=3,Cn=0,On=1,Rn=2,Nn=1,Fn=2,In=0,kn=1,Dn=2,zn=0,Un=1,jn=2,Bn=3,Gn=4,Hn=5,Vn=100,Wn=101,Xn=102,Yn=103,qn=104,Jn=200,Qn=201,Zn=202,$n=203,Kn=204,er=205,tr=206,nr=207,rr=208,ir=209,or=210,ar=0,sr=1,lr=2,ur=3,cr=4,hr=5,dr=6,pr=7,fr=0,mr=1,vr=2,gr=0,yr=1,xr=2,br=3,_r=4,wr=5,Sr=300,Tr=301,Er=302,Mr=303,Ar=304,Pr=305,Lr=306,Cr=307,Or=1e3,Rr=1001,Nr=1002,Fr=1003,Ir=1004,kr=1004,Dr=1005,zr=1005,Ur=1006,jr=1007,Br=1007,Gr=1008,Hr=1008,Vr=1009,Wr=1010,Xr=1011,Yr=1012,qr=1013,Jr=1014,Qr=1015,Zr=1016,$r=1017,Kr=1018,ei=1019,ti=1020,ni=1021,ri=1022,ii=1023,oi=1024,ai=1025,si=ii,li=1026,ui=1027,ci=1028,hi=1029,di=1030,pi=1031,fi=1032,mi=1033,vi=33776,gi=33777,yi=33778,xi=33779,bi=35840,_i=35841,wi=35842,Si=35843,Ti=36196,Ei=37808,Mi=37809,Ai=37810,Pi=37811,Li=37812,Ci=37813,Oi=37814,Ri=37815,Ni=37816,Fi=37817,Ii=37818,ki=37819,Di=37820,zi=37821,Ui=2200,ji=2201,Bi=2202,Gi=2300,Hi=2301,Vi=2302,Wi=2400,Xi=2401,Yi=2402,qi=0,Ji=1,Qi=2,Zi=3e3,$i=3001,Ki=3007,eo=3002,to=3003,no=3004,ro=3005,io=3006,oo=3200,ao=3201,so=0,lo=1,uo=0,co=7680,ho=7681,po=7682,fo=7683,mo=34055,vo=34056,go=5386,yo=512,xo=513,bo=514,_o=515,wo=516,So=517,To=518,Eo=519,Mo=35044,Ao=35048,Po=35040,Lo=35045,Co=35049,Oo=35041,Ro=35046,No=35050,Fo=35042;function Io(){}Object.assign(Io.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});for(var ko=[],Do=0;Do<256;Do++)ko[Do]=(Do<16?"0":"")+Do.toString(16);var zo,Uo={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ko[255&e]+ko[e>>8&255]+ko[e>>16&255]+ko[e>>24&255]+"-"+ko[255&t]+ko[t>>8&255]+"-"+ko[t>>16&15|64]+ko[t>>24&255]+"-"+ko[63&n|128]+ko[n>>8&255]+"-"+ko[n>>16&255]+ko[n>>24&255]+ko[255&r]+ko[r>>8&255]+ko[r>>16&255]+ko[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Uo.DEG2RAD},radToDeg:function(e){return e*Uo.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),u=o((t+r)/2),c=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),p=o((r-t)/2),f=a((r-t)/2);"XYX"===i?e.set(s*c,l*h,l*d,s*u):"YZY"===i?e.set(l*d,s*c,l*h,s*u):"ZXZ"===i?e.set(l*h,l*d,s*c,s*u):"XZX"===i?e.set(s*c,l*f,l*p,s*u):"YXY"===i?e.set(l*p,s*c,l*f,s*u):"ZYZ"===i?e.set(l*f,l*p,s*c,s*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function jo(e,t){this.x=e||0,this.y=t||0}function Bo(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(jo.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(jo.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(Bo.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],x=r[7],b=r[2],_=r[5],w=r[8];return i[0]=o*f+a*g+s*b,i[3]=o*m+a*y+s*_,i[6]=o*v+a*x+s*w,i[1]=l*f+u*g+c*b,i[4]=l*m+u*y+c*_,i[7]=l*v+u*x+c*w,i[2]=h*f+d*g+p*b,i[5]=h*m+d*y+p*_,i[8]=h*v+d*x+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-n*i*u+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],p=d*l-u*h,f=u*c-d*s,m=h*s-l*c,v=i*p+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=p*y,r[1]=(a*h-d*o)*y,r[2]=(u*o-a*l)*y,r[3]=f*y,r[4]=(d*i-a*c)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(l*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Go={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===zo&&(zo=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),zo.width=e.width,zo.height=e.height;var n=zo.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=zo}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Ho=0;function Vo(e,t,n,r,i,o,a,s,l,u){Object.defineProperty(this,"id",{value:Ho++}),this.uuid=Uo.generateUUID(),this.name="",this.image=void 0!==e?e:Vo.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Vo.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Rr,this.wrapT=void 0!==r?r:Rr,this.magFilter=void 0!==i?i:Ur,this.minFilter=void 0!==o?o:Gr,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:ii,this.internalFormat=null,this.type=void 0!==s?s:Vr,this.offset=new jo(0,0),this.repeat=new jo(1,1),this.center=new jo(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Zi,this.version=0,this.onUpdate=null}function Wo(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function Xo(e,t,n){this.width=e,this.height=t,this.scissor=new Wo(0,0,e,t),this.scissorTest=!1,this.viewport=new Wo(0,0,e,t),n=n||{},this.texture=new Vo(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ur,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Yo(e,t,n){Xo.call(this,e,t,n),this.samples=4}function qo(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}Vo.DEFAULT_IMAGE=void 0,Vo.DEFAULT_MAPPING=Sr,Vo.prototype=Object.assign(Object.create(Io.prototype),{constructor:Vo,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Uo.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(Go.getDataURL(r[o]))}else i=Go.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==Sr)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Or:e.x=e.x-Math.floor(e.x);break;case Rr:e.x=e.x<0?0:1;break;case Nr:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Or:e.y=e.y-Math.floor(e.y);break;case Rr:e.y=e.y<0?0:1;break;case Nr:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Vo.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Wo.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Wo.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],l=o[8],u=o[1],c=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+c+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(f+1)/2,y=(s+u)/4,x=(l+d)/4,b=(h+p)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=x/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=b/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(g)),r=b/i),this.set(n,r,i,t),this}var _=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(_)<.001&&(_=1),this.x=(p-h)/_,this.y=(l-d)/_,this.z=(u-s)/_,this.w=Math.acos((a+c+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Xo.prototype=Object.assign(Object.create(Io.prototype),{constructor:Xo,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Yo.prototype=Object.assign(Object.create(Xo.prototype),{constructor:Yo,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Xo.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(qo,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(c!==f||s!==h||l!==d||u!==p){var m=1-a,v=s*h+l*d+u*p+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,v*g);m=Math.sin(m*b)/x,a=Math.sin(a*b)/x}var _=a*g;if(s=s*m+h*_,l=l*m+d*_,u=u*m+p*_,c=c*m+f*_,m===1-a){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(qo.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(qo.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p):"YXZ"===o?(this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p):"ZXY"===o?(this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p):"ZYX"===o?(this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p):"YZX"===o?(this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p):"XZY"===o&&(this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],d=r+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(l+c)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Uo.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-t;return this._w=l*o+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Jo=new Zo,Qo=new qo;function Zo(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(Zo.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Qo.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Qo.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,u=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+u*-a-c*-o,this.y=u*s+h*-o+c*-i-l*-a,this.z=c*s+h*-a+l*-o-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)},projectOnPlane:function(e){return Jo.copy(this).projectOnVector(e),this.sub(Jo)},reflect:function(e){return this.sub(Jo.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Uo.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var $o=new Zo,Ko=new oa,ea=new Zo(0,0,0),ta=new Zo(1,1,1),na=new Zo,ra=new Zo,ia=new Zo;function oa(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(oa.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,l,u,c,h,d,p,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new oa).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,r=1/$o.setFromMatrixColumn(e,0).length(),i=1/$o.setFromMatrixColumn(e,1).length(),o=1/$o.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*u,d=o*c,p=a*u,f=a*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+p*l,t[5]=h-f*l,t[9]=-a*s,t[2]=f-h*l,t[6]=p+d*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m-y*a,t[4]=-o*c,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*u,d=o*c,p=a*u,f=a*c;t[0]=s*u,t[4]=p*l-d,t[8]=h*l+f,t[1]=s*c,t[5]=f*l+h,t[9]=d*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var x=o*s,b=o*l,_=a*s,w=a*l;t[0]=s*u,t[4]=w-x*c,t[8]=_*c+b,t[1]=c,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=b*c+_,t[10]=x-w*c}else if("XZY"===e.order){x=o*s,b=o*l,_=a*s,w=a*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=x*c+w,t[5]=o*u,t[9]=b*c-_,t[2]=_*c-b,t[6]=a*u,t[10]=w*c+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(ea,e,ta)},lookAt:function(e,t,n){var r=this.elements;return ia.subVectors(e,t),0===ia.lengthSq()&&(ia.z=1),ia.normalize(),na.crossVectors(n,ia),0===na.lengthSq()&&(1===Math.abs(n.z)?ia.x+=1e-4:ia.z+=1e-4,ia.normalize(),na.crossVectors(n,ia)),na.normalize(),ra.crossVectors(ia,na),r[0]=na.x,r[4]=ra.x,r[8]=ia.x,r[1]=na.y,r[5]=ra.y,r[9]=ia.y,r[2]=na.z,r[6]=ra.z,r[10]=ia.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],x=n[11],b=n[15],_=r[0],w=r[4],S=r[8],T=r[12],E=r[1],M=r[5],A=r[9],P=r[13],L=r[2],C=r[6],O=r[10],R=r[14],N=r[3],F=r[7],I=r[11],k=r[15];return i[0]=o*_+a*E+s*L+l*N,i[4]=o*w+a*M+s*C+l*F,i[8]=o*S+a*A+s*O+l*I,i[12]=o*T+a*P+s*R+l*k,i[1]=u*_+c*E+h*L+d*N,i[5]=u*w+c*M+h*C+d*F,i[9]=u*S+c*A+h*O+d*I,i[13]=u*T+c*P+h*R+d*k,i[2]=p*_+f*E+m*L+v*N,i[6]=p*w+f*M+m*C+v*F,i[10]=p*S+f*A+m*O+v*I,i[14]=p*T+f*P+m*R+v*k,i[3]=g*_+y*E+x*L+b*N,i[7]=g*w+y*M+x*C+b*F,i[11]=g*S+y*A+x*O+b*I,i[15]=g*T+y*P+x*R+b*k,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*u-i*s*u)+e[11]*(+t*l*c-t*a*d-i*o*c+n*o*d+i*a*u-n*l*u)+e[15]*(-r*a*u-t*s*c+t*a*h+r*o*c-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],x=r[15],b=p*y*h-g*f*h+g*c*m-u*y*m-p*c*x+u*f*x,_=v*f*h-d*y*h-v*c*m+l*y*m+d*c*x-l*f*x,w=d*g*h-v*p*h+v*u*m-l*g*m-d*u*x+l*p*x,S=v*p*c-d*g*c-v*u*f+l*g*f+d*u*y-l*p*y,T=i*b+o*_+a*w+s*S;if(0===T){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var M=1/T;return n[0]=b*M,n[1]=(g*f*s-p*y*s-g*a*m+o*y*m+p*a*x-o*f*x)*M,n[2]=(u*y*s-g*c*s+g*a*h-o*y*h-u*a*x+o*c*x)*M,n[3]=(p*c*s-u*f*s-p*a*h+o*f*h+u*a*m-o*c*m)*M,n[4]=_*M,n[5]=(d*y*s-v*f*s+v*a*m-i*y*m-d*a*x+i*f*x)*M,n[6]=(v*c*s-l*y*s-v*a*h+i*y*h+l*a*x-i*c*x)*M,n[7]=(l*f*s-d*c*s+d*a*h-i*f*h-l*a*m+i*c*m)*M,n[8]=w*M,n[9]=(v*p*s-d*g*s-v*o*m+i*g*m+d*o*x-i*p*x)*M,n[10]=(l*g*s-v*u*s+v*o*h-i*g*h-l*o*x+i*u*x)*M,n[11]=(d*u*s-l*p*s-d*o*h+i*p*h+l*o*m-i*u*m)*M,n[12]=S*M,n[13]=(d*g*a-v*p*a+v*o*f-i*g*f-d*o*y+i*p*y)*M,n[14]=(v*u*a-l*g*a-v*o*c+i*g*c+l*o*y-i*u*y)*M,n[15]=(l*p*a-d*u*a+d*o*c-i*p*c-l*o*f+i*u*f)*M,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,u=o+o,c=a+a,h=i*l,d=i*u,p=i*c,f=o*u,m=o*c,v=a*c,g=s*l,y=s*u,x=s*c,b=n.x,_=n.y,w=n.z;return r[0]=(1-(f+v))*b,r[1]=(d+x)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(d-x)*_,r[5]=(1-(h+v))*_,r[6]=(m+g)*_,r[7]=0,r[8]=(p+y)*w,r[9]=(m-g)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var r=this.elements,i=$o.set(r[0],r[1],r[2]).length(),o=$o.set(r[4],r[5],r[6]).length(),a=$o.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Ko.copy(this);var s=1/i,l=1/o,u=1/a;return Ko.elements[0]*=s,Ko.elements[1]*=s,Ko.elements[2]*=s,Ko.elements[4]*=l,Ko.elements[5]*=l,Ko.elements[6]*=l,Ko.elements[8]*=u,Ko.elements[9]*=u,Ko.elements[10]*=u,t.setFromRotationMatrix(Ko),n.x=i,n.y=o,n.z=a,this},makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),l=1/(n-r),u=1/(o-i),c=(t+e)*s,h=(n+r)*l,d=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var aa=new oa,sa=new qo;function la(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||la.DefaultOrder}function ua(){this.mask=1}la.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],la.DefaultOrder="XYZ",Object.defineProperties(la.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(la.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Uo.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return aa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aa,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return sa.setFromEuler(this),this.setFromQuaternion(sa,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Zo(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(ua.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var ca=0,ha=new Zo,da=new qo,pa=new oa,fa=new Zo,ma=new Zo,va=new Zo,ga=new qo,ya=new Zo(1,0,0),xa=new Zo(0,1,0),ba=new Zo(0,0,1),_a={type:"added"},wa={type:"removed"};function Sa(){Object.defineProperty(this,"id",{value:ca++}),this.uuid=Uo.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sa.DefaultUp.clone();var e=new Zo,t=new la,n=new qo,r=new Zo(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new oa},normalMatrix:{value:new Bo}}),this.matrix=new oa,this.matrixWorld=new oa,this.matrixAutoUpdate=Sa.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ua,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Ta(){Sa.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Sa.DefaultUp=new Zo(0,1,0),Sa.DefaultMatrixAutoUpdate=!0,Sa.prototype=Object.assign(Object.create(Io.prototype),{constructor:Sa,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return da.setFromAxisAngle(e,t),this.quaternion.multiply(da),this},rotateOnWorldAxis:function(e,t){return da.setFromAxisAngle(e,t),this.quaternion.premultiply(da),this},rotateX:function(e){return this.rotateOnAxis(ya,e)},rotateY:function(e){return this.rotateOnAxis(xa,e)},rotateZ:function(e){return this.rotateOnAxis(ba,e)},translateOnAxis:function(e,t){return ha.copy(e).applyQuaternion(this.quaternion),this.position.add(ha.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(ya,e)},translateY:function(e){return this.translateOnAxis(xa,e)},translateZ:function(e){return this.translateOnAxis(ba,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(pa.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?fa.copy(e):fa.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),ma.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pa.lookAt(ma,fa,this.up):pa.lookAt(fa,ma,this.up),this.quaternion.setFromRotationMatrix(pa),r&&(pa.extractRotation(r.matrixWorld),da.setFromRotationMatrix(pa),this.quaternion.premultiply(da.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(wa)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),pa.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),pa.multiply(e.parent.matrixWorld)),e.applyMatrix4(pa),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Zo),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new qo),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ma,e,va),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Zo),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ma,ga,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Zo),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var u=a[s];i(e.shapes,u)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,l=this.material.length;s<l;s++)c.push(i(e.materials,this.material[s]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),d=m(e.materials),p=m(e.textures),f=m(e.images);a=m(e.shapes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),Ta.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Ta,isScene:!0,copy:function(e,t){return Sa.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Sa.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ea=[new Zo,new Zo,new Zo,new Zo,new Zo,new Zo,new Zo,new Zo],Ma=new Zo,Aa=new za,Pa=new Zo,La=new Zo,Ca=new Zo,Oa=new Zo,Ra=new Zo,Na=new Zo,Fa=new Zo,Ia=new Zo,ka=new Zo,Da=new Zo;function za(e,t){this.min=void 0!==e?e:new Zo(1/0,1/0,1/0),this.max=void 0!==t?t:new Zo(-1/0,-1/0,-1/0)}function Ua(e,t,n,r,i){var o,a;for(o=0,a=e.length-3;o<=a;o+=3){Da.fromArray(e,o);var s=i.x*Math.abs(Da.x)+i.y*Math.abs(Da.y)+i.z*Math.abs(Da.z),l=t.dot(Da),u=n.dot(Da),c=r.dot(Da);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}Object.assign(za.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Ma.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Zo),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Zo),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Aa.copy(t.boundingBox),Aa.applyMatrix4(e.matrixWorld),this.expandByPoint(Aa.min),this.expandByPoint(Aa.max));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Zo),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Ma),Ma.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(Fa),Ia.subVectors(this.max,Fa),Pa.subVectors(e.a,Fa),La.subVectors(e.b,Fa),Ca.subVectors(e.c,Fa),Oa.subVectors(La,Pa),Ra.subVectors(Ca,La),Na.subVectors(Pa,Ca);var t=[0,-Oa.z,Oa.y,0,-Ra.z,Ra.y,0,-Na.z,Na.y,Oa.z,0,-Oa.x,Ra.z,0,-Ra.x,Na.z,0,-Na.x,-Oa.y,Oa.x,0,-Ra.y,Ra.x,0,-Na.y,Na.x,0];return!!Ua(t,Pa,La,Ca,Ia)&&(!!Ua(t=[1,0,0,0,1,0,0,0,1],Pa,La,Ca,Ia)&&(ka.crossVectors(Oa,Ra),Ua(t=[ka.x,ka.y,ka.z],Pa,La,Ca,Ia)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Zo),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Ma.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(Ma).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(Ea[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ea[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ea[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ea[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ea[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ea[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ea[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ea[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ea)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var ja=new za;function Ba(e,t){this.center=void 0!==e?e:new Zo,this.radius=void 0!==t?t:0}Object.assign(Ba.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):ja.setFromPoints(e).getCenter(n);for(var r=0,i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Zo),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new za),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Ga=new Zo,Ha=new Zo,Va=new Zo,Wa=new Zo,Xa=new Zo,Ya=new Zo,qa=new Zo;function Ja(e,t){this.origin=void 0!==e?e:new Zo,this.direction=void 0!==t?t:new Zo(0,0,-1)}Object.assign(Ja.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Zo),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Ga)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Zo),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=Ga.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ga.copy(this.direction).multiplyScalar(t).add(this.origin),Ga.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){Ha.copy(e).add(t).multiplyScalar(.5),Va.copy(t).sub(e).normalize(),Wa.copy(this.origin).sub(Ha);var i,o,a,s,l=.5*e.distanceTo(t),u=-this.direction.dot(Va),c=Wa.dot(this.direction),h=-Wa.dot(Va),d=Wa.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(o=u*c-h,s=l*p,(i=u*h-c)>=0)if(o>=-s)if(o<=s){var f=1/p;a=(i*=f)*(i+u*(o*=f)+2*c)+o*(u*i+o+2*h)+d}else o=l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+d;else o=-l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+d;else o<=-s?a=-(i=Math.max(0,-(-u*l+c)))*i+(o=i>0?-l:Math.min(Math.max(-l,-h),l))*(o+2*h)+d:o<=s?(i=0,a=(o=Math.min(Math.max(-l,-h),l))*(o+2*h)+d):a=-(i=Math.max(0,-(u*l+c)))*i+(o=i>0?l:Math.min(Math.max(-l,-h),l))*(o+2*h)+d;else o=u>0?-l:l,a=-(i=Math.max(0,-(u*o+c)))*i+o*(o+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Va).multiplyScalar(o).add(Ha),a},intersectSphere:function(e,t){Ga.subVectors(e.center,this.origin);var n=Ga.dot(this.direction),r=Ga.dot(Ga)-n*n,i=e.radius*e.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Ga)},intersectTriangle:function(e,t,n,r,i){Xa.subVectors(t,e),Ya.subVectors(n,e),qa.crossVectors(Xa,Ya);var o,a=this.direction.dot(qa);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Wa.subVectors(this.origin,e);var s=o*this.direction.dot(Ya.crossVectors(Wa,Ya));if(s<0)return null;var l=o*this.direction.dot(Xa.cross(Wa));if(l<0)return null;if(s+l>a)return null;var u=-o*Wa.dot(qa);return u<0?null:this.at(u/a,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Qa=new Zo,Za=new Zo,$a=new Bo;function Ka(e,t){this.normal=void 0!==e?e:new Zo(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Ka.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var r=Qa.subVectors(n,t).cross(Za.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Zo),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Zo);var n=e.delta(Qa),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Zo),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||$a.getNormalMatrix(e),r=this.coplanarPoint(Qa).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var es=new Zo,ts=new Zo,ns=new Zo,rs=new Zo,is=new Zo,os=new Zo,as=new Zo,ss=new Zo,ls=new Zo,us=new Zo;function cs(e,t,n){this.a=void 0!==e?e:new Zo,this.b=void 0!==t?t:new Zo,this.c=void 0!==n?n:new Zo}Object.assign(cs,{getNormal:function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Zo),r.subVectors(n,t),es.subVectors(e,t),r.cross(es);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){es.subVectors(r,t),ts.subVectors(n,t),ns.subVectors(e,t);var o=es.dot(es),a=es.dot(ts),s=es.dot(ns),l=ts.dot(ts),u=ts.dot(ns),c=o*l-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Zo),0===c)return i.set(-2,-1,-1);var h=1/c,d=(l*s-a*u)*h,p=(o*u-a*s)*h;return i.set(1-d-p,p,d)},containsPoint:function(e,t,n,r){return cs.getBarycoord(e,t,n,r,rs),rs.x>=0&&rs.y>=0&&rs.x+rs.y<=1},getUV:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,rs),s.set(0,0),s.addScaledVector(i,rs.x),s.addScaledVector(o,rs.y),s.addScaledVector(a,rs.z),s},isFrontFacing:function(e,t,n,r){return es.subVectors(n,t),ts.subVectors(e,t),es.cross(ts).dot(r)<0}}),Object.assign(cs.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return es.subVectors(this.c,this.b),ts.subVectors(this.a,this.b),.5*es.cross(ts).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Zo),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return cs.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ka),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return cs.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return cs.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return cs.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return cs.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Zo);var n,r,i=this.a,o=this.b,a=this.c;is.subVectors(o,i),os.subVectors(a,i),ss.subVectors(e,i);var s=is.dot(ss),l=os.dot(ss);if(s<=0&&l<=0)return t.copy(i);ls.subVectors(e,o);var u=is.dot(ls),c=os.dot(ls);if(u>=0&&c<=u)return t.copy(o);var h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(i).addScaledVector(is,n);us.subVectors(e,a);var d=is.dot(us),p=os.dot(us);if(p>=0&&d<=p)return t.copy(a);var f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return r=l/(l-p),t.copy(i).addScaledVector(os,r);var m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return as.subVectors(a,o),r=(c-u)/(c-u+(d-p)),t.copy(o).addScaledVector(as,r);var v=1/(m+f+h);return n=f*v,r=h*v,t.copy(i).addScaledVector(is,n).addScaledVector(os,r)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var hs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ds={h:0,s:0,l:0},ps={h:0,s:0,l:0};function fs(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function ms(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function vs(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function gs(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function ys(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Zo,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new fs,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(fs.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=Uo.euclideanModulo(e,1),t=Uo.clamp(t,0,1),n=Uo.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=ms(i,r,e+1/3),this.g=ms(i,r,e),this.b=ms(i,r,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=hs[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=vs(e.r),this.g=vs(e.g),this.b=vs(e.b),this},copyLinearToSRGB:function(e){return this.r=gs(e.r),this.g=gs(e.g),this.b=gs(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),l=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=l<=.5?u/(a+s):u/(2-a-s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(ds),ds.h+=e,ds.s+=t,ds.l+=n,this.setHSL(ds.h,ds.s,ds.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(ds),e.getHSL(ps);var n=Uo.lerp(ds.h,ps.h,t),r=Uo.lerp(ds.s,ps.s,t),i=Uo.lerp(ds.l,ps.l,t);return this.setHSL(n,r,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),fs.NAMES=hs,Object.assign(ys.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var xs=0;function bs(){Object.defineProperty(this,"id",{value:xs++}),this.uuid=Uo.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Un,this.side=Cn,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=In,this.opacity=1,this.transparent=!1,this.blendSrc=Kn,this.blendDst=er,this.blendEquation=Vn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ur,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Eo,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=co,this.stencilZFail=co,this.stencilZPass=co,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function _s(e){bs.call(this),this.type="MeshBasicMaterial",this.color=new fs(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}bs.prototype=Object.assign(Object.create(Io.prototype),{constructor:bs,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Nn;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Un&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==Cn&&(n.side=this.side),this.vertexColors!==In&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(bs.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),_s.prototype=Object.create(bs.prototype),_s.prototype.constructor=_s,_s.prototype.isMeshBasicMaterial=!0,_s.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var ws=new Zo;function Ss(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Mo,this.updateRange={offset:0,count:-1},this.version=0}function Ts(e,t,n){Ss.call(this,new Int8Array(e),t,n)}function Es(e,t,n){Ss.call(this,new Uint8Array(e),t,n)}function Ms(e,t,n){Ss.call(this,new Uint8ClampedArray(e),t,n)}function As(e,t,n){Ss.call(this,new Int16Array(e),t,n)}function Ps(e,t,n){Ss.call(this,new Uint16Array(e),t,n)}function Ls(e,t,n){Ss.call(this,new Int32Array(e),t,n)}function Cs(e,t,n){Ss.call(this,new Uint32Array(e),t,n)}function Os(e,t,n){Ss.call(this,new Float32Array(e),t,n)}function Rs(e,t,n){Ss.call(this,new Float64Array(e),t,n)}function Ns(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Fs(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(Ss.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ss.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new fs),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new jo),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Zo),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Wo),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},applyMatrix3:function(e){for(var t=0,n=this.count;t<n;t++)ws.x=this.getX(t),ws.y=this.getY(t),ws.z=this.getZ(t),ws.applyMatrix3(e),this.setXYZ(t,ws.x,ws.y,ws.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)ws.x=this.getX(t),ws.y=this.getY(t),ws.z=this.getZ(t),ws.applyMatrix4(e),this.setXYZ(t,ws.x,ws.y,ws.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)ws.x=this.getX(t),ws.y=this.getY(t),ws.z=this.getZ(t),ws.applyNormalMatrix(e),this.setXYZ(t,ws.x,ws.y,ws.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)ws.x=this.getX(t),ws.y=this.getY(t),ws.z=this.getZ(t),ws.transformDirection(e),this.setXYZ(t,ws.x,ws.y,ws.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Ts.prototype=Object.create(Ss.prototype),Ts.prototype.constructor=Ts,Es.prototype=Object.create(Ss.prototype),Es.prototype.constructor=Es,Ms.prototype=Object.create(Ss.prototype),Ms.prototype.constructor=Ms,As.prototype=Object.create(Ss.prototype),As.prototype.constructor=As,Ps.prototype=Object.create(Ss.prototype),Ps.prototype.constructor=Ps,Ls.prototype=Object.create(Ss.prototype),Ls.prototype.constructor=Ls,Cs.prototype=Object.create(Ss.prototype),Cs.prototype.constructor=Cs,Os.prototype=Object.create(Ss.prototype),Os.prototype.constructor=Os,Rs.prototype=Object.create(Ss.prototype),Rs.prototype.constructor=Rs,Object.assign(Ns.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var c,h=e.morphNormals,d=h.length;if(d>0){c=[];for(u=0;u<d;u++)c[u]={name:h[u].name,data:[]};this.morphTargets.normal=c}var p=e.skinIndices,f=e.skinWeights,m=p.length===r.length,v=f.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var b,_=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===o)void 0!==(b=i[0][u])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new jo,new jo,new jo));if(!0===a)void 0!==(b=i[1][u])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new jo,new jo,new jo));for(var S=0;S<l;S++){var T=s[S].vertices;t[S].data.push(T[g.a],T[g.b],T[g.c])}for(S=0;S<d;S++){var E=h[S].vertexNormals[u];c[S].data.push(E.a,E.b,E.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var Is=1,ks=new oa,Ds=new Sa,zs=new Zo,Us=new za,js=new za,Bs=new Zo;function Gs(){Object.defineProperty(this,"id",{value:Is+=2}),this.uuid=Uo.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Gs.prototype=Object.assign(Object.create(Io.prototype),{constructor:Gs,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Fs(e)>65535?Cs:Ps)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Bo).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return ks.makeRotationX(e),this.applyMatrix4(ks),this},rotateY:function(e){return ks.makeRotationY(e),this.applyMatrix4(ks),this},rotateZ:function(e){return ks.makeRotationZ(e),this.applyMatrix4(ks),this},translate:function(e,t,n){return ks.makeTranslation(e,t,n),this.applyMatrix4(ks),this},scale:function(e,t,n){return ks.makeScale(e,t,n),this.applyMatrix4(ks),this},lookAt:function(e){return Ds.lookAt(e),Ds.updateMatrix(),this.applyMatrix4(Ds.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(zs).negate(),this.translate(zs.x,zs.y,zs.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Os(3*t.vertices.length,3),r=new Os(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Os(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Os(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ns).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new Ss(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new Ss(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.setAttribute("color",new Ss(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new Ss(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new Ss(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],u=0,c=l.length;u<c;u++){var h=l[u],d=new Os(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new Os(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new Os(4*e.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new za);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Us.setFromBufferAttribute(i),this.morphTargetsRelative?(Bs.addVectors(this.boundingBox.min,Us.min),this.boundingBox.expandByPoint(Bs),Bs.addVectors(this.boundingBox.max,Us.max),this.boundingBox.expandByPoint(Bs)):(this.boundingBox.expandByPoint(Us.min),this.boundingBox.expandByPoint(Us.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ba);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(Us.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var o=t[r];js.setFromBufferAttribute(o),this.morphTargetsRelative?(Bs.addVectors(Us.min,js.min),Us.expandByPoint(Bs),Bs.addVectors(Us.max,js.max),Us.expandByPoint(Bs)):(Us.expandByPoint(js.min),Us.expandByPoint(js.max))}Us.getCenter(n);var a=0;for(r=0,i=e.count;r<i;r++)Bs.fromBufferAttribute(e,r),a=Math.max(a,n.distanceToSquared(Bs));if(t)for(r=0,i=t.length;r<i;r++){o=t[r];for(var s=this.morphTargetsRelative,l=0,u=o.count;l<u;l++)Bs.fromBufferAttribute(o,l),s&&(zs.fromBufferAttribute(e,l),Bs.add(zs)),a=Math.max(a,n.distanceToSquared(Bs))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new Ss(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,l,u=t.normal.array,c=new Zo,h=new Zo,d=new Zo,p=new Zo,f=new Zo;if(e){var m=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],l=3*m[i+2],c.fromArray(n,a),h.fromArray(n,s),d.fromArray(n,l),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),u[a]+=p.x,u[a+1]+=p.y,u[a+2]+=p.z,u[s]+=p.x,u[s+1]+=p.y,u[s+2]+=p.z,u[l]+=p.x,u[l+1]+=p.y,u[l+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)c.fromArray(n,i),h.fromArray(n,i+3),d.fromArray(n,i+6),p.subVectors(d,h),f.subVectors(c,h),p.cross(f),u[i]=p.x,u[i+1]=p.y,u[i+2]=p.z,u[i+3]=p.x,u[i+4]=p.y,u[i+5]=p.z,u[i+6]=p.x,u[i+7]=p.y,u[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,l=Math.min(a.length,i.length-s),u=0,c=s;u<l;u++,c++)i[c]=a[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Bs.x=e.getX(t),Bs.y=e.getY(t),Bs.z=e.getZ(t),Bs.normalize(),e.setXYZ(t,Bs.x,Bs.y,Bs.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=new n.constructor(t.length*r),o=0,a=0,s=0,l=t.length;s<l;s++){o=t[s]*r;for(var u=0;u<r;u++)i[a++]=n[o++]}return new Ss(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Gs,n=this.index.array,r=this.attributes;for(var i in r){var o=e(r[i],n);t.setAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],l=a[i],u=0,c=l.length;u<c;u++){o=e(l[u],n);s.push(o)}t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var h=this.groups,d=(u=0,h.length);u<d;u++){var p=h[u];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=(d=i[n]).toJSON();""!==d.name&&(o.name=d.name),e.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],u=[],c=0,h=l.length;c<h;c++){var d;o=(d=l[c]).toJSON();""!==d.name&&(o.name=d.name),u.push(o)}u.length>0&&(a[n]=u,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new Gs).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.setAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(n=0,r=u.length;n<r;n++)l.push(u[n].clone());this.morphAttributes[t]=l}this.morphTargetsRelative=e.morphTargetsRelative;var c=e.groups;for(n=0,r=c.length;n<r;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Hs=new oa,Vs=new Ja,Ws=new Ba,Xs=new Zo,Ys=new Zo,qs=new Zo,Js=new Zo,Qs=new Zo,Zs=new Zo,$s=new Zo,Ks=new Zo,el=new Zo,tl=new jo,nl=new jo,rl=new jo,il=new Zo,ol=new Zo;function al(e,t){Sa.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Gs,this.material=void 0!==t?t:new _s,this.updateMorphTargets()}function sl(e,t,n,r,i,o,a,s){if(null===(t.side===On?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==Rn,s)))return null;ol.copy(s),ol.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(ol);return l<n.near||l>n.far?null:{distance:l,point:ol.clone(),object:e}}function ll(e,t,n,r,i,o,a,s,l,u,c,h){Xs.fromBufferAttribute(i,u),Ys.fromBufferAttribute(i,c),qs.fromBufferAttribute(i,h);var d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){$s.set(0,0,0),Ks.set(0,0,0),el.set(0,0,0);for(var p=0,f=o.length;p<f;p++){var m=d[p],v=o[p];0!==m&&(Js.fromBufferAttribute(v,u),Qs.fromBufferAttribute(v,c),Zs.fromBufferAttribute(v,h),a?($s.addScaledVector(Js,m),Ks.addScaledVector(Qs,m),el.addScaledVector(Zs,m)):($s.addScaledVector(Js.sub(Xs),m),Ks.addScaledVector(Qs.sub(Ys),m),el.addScaledVector(Zs.sub(qs),m)))}Xs.add($s),Ys.add(Ks),qs.add(el)}var g=sl(e,t,n,r,Xs,Ys,qs,il);if(g){s&&(tl.fromBufferAttribute(s,u),nl.fromBufferAttribute(s,c),rl.fromBufferAttribute(s,h),g.uv=cs.getUV(il,Xs,Ys,qs,tl,nl,rl,new jo)),l&&(tl.fromBufferAttribute(l,u),nl.fromBufferAttribute(l,c),rl.fromBufferAttribute(l,h),g.uv2=cs.getUV(il,Xs,Ys,qs,tl,nl,rl,new jo));var y=new ys(u,c,h);cs.getNormal(Xs,Ys,qs,y.normal),g.face=y}return g}al.prototype=Object.assign(Object.create(Sa.prototype),{constructor:al,isMesh:!0,copy:function(e){return Sa.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Ws.copy(r.boundingSphere),Ws.applyMatrix4(o),!1!==e.ray.intersectsSphere(Ws)&&(Hs.getInverse(o),Vs.copy(e.ray).applyMatrix4(Hs),null===r.boundingBox||!1!==Vs.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a,s,l,u,c,h,d,p,f,m=r.index,v=r.attributes.position,g=r.morphAttributes.position,y=r.morphTargetsRelative,x=r.attributes.uv,b=r.attributes.uv2,_=r.groups,w=r.drawRange;if(null!==m)if(Array.isArray(i))for(u=0,h=_.length;u<h;u++)for(f=i[(p=_[u]).materialIndex],c=Math.max(p.start,w.start),d=Math.min(p.start+p.count,w.start+w.count);c<d;c+=3)a=m.getX(c),s=m.getX(c+1),l=m.getX(c+2),(n=ll(this,f,e,Vs,v,g,y,x,b,a,s,l))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(u=Math.max(0,w.start),h=Math.min(m.count,w.start+w.count);u<h;u+=3)a=m.getX(u),s=m.getX(u+1),l=m.getX(u+2),(n=ll(this,i,e,Vs,v,g,y,x,b,a,s,l))&&(n.faceIndex=Math.floor(u/3),t.push(n));else if(void 0!==v)if(Array.isArray(i))for(u=0,h=_.length;u<h;u++)for(f=i[(p=_[u]).materialIndex],c=Math.max(p.start,w.start),d=Math.min(p.start+p.count,w.start+w.count);c<d;c+=3)(n=ll(this,f,e,Vs,v,g,y,x,b,a=c,s=c+1,l=c+2))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(u=Math.max(0,w.start),h=Math.min(v.count,w.start+w.count);u<h;u+=3)(n=ll(this,i,e,Vs,v,g,y,x,b,a=u,s=u+1,l=u+2))&&(n.faceIndex=Math.floor(u/3),t.push(n))}else if(r.isGeometry){var S,T,E,M,A=Array.isArray(i),P=r.vertices,L=r.faces,C=r.faceVertexUvs[0];C.length>0&&(M=C);for(var O=0,R=L.length;O<R;O++){var N=L[O],F=A?i[N.materialIndex]:i;if(void 0!==F&&(S=P[N.a],T=P[N.b],E=P[N.c],n=sl(this,F,e,Vs,S,T,E,il))){if(M&&M[O]){var I=M[O];tl.copy(I[0]),nl.copy(I[1]),rl.copy(I[2]),n.uv=cs.getUV(il,S,T,E,tl,nl,rl,new jo)}n.face=N,n.faceIndex=O,t.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ul=0,cl=new oa,hl=new Sa,dl=new Zo;function pl(){Object.defineProperty(this,"id",{value:ul+=2}),this.uuid=Uo.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}pl.prototype=Object.assign(Object.create(Io.prototype),{constructor:pl,isGeometry:!0,applyMatrix4:function(e){for(var t=(new Bo).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return cl.makeRotationX(e),this.applyMatrix4(cl),this},rotateY:function(e){return cl.makeRotationY(e),this.applyMatrix4(cl),this},rotateZ:function(e){return cl.makeRotationZ(e),this.applyMatrix4(cl),this},translate:function(e,t,n){return cl.makeTranslation(e,t,n),this.applyMatrix4(cl),this},scale:function(e,t,n){return cl.makeScale(e,t,n),this.applyMatrix4(cl),this},lookAt:function(e){return hl.lookAt(e),hl.updateMatrix(),this.applyMatrix4(hl.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<i.length;u+=3)t.vertices.push((new Zo).fromArray(i,u)),void 0!==a&&t.colors.push((new fs).fromArray(a,u));function c(e,n,r,i){var u=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],c=new ys(e,n,r,void 0===o?[]:[(new Zo).fromArray(o,3*e),(new Zo).fromArray(o,3*n),(new Zo).fromArray(o,3*r)],u,i);t.faces.push(c),void 0!==s&&t.faceVertexUvs[0].push([(new jo).fromArray(s,2*e),(new jo).fromArray(s,2*n),(new jo).fromArray(s,2*r)]),void 0!==l&&t.faceVertexUvs[1].push([(new jo).fromArray(l,2*e),(new jo).fromArray(l,2*n),(new jo).fromArray(l,2*r)])}var h=e.groups;if(h.length>0)for(u=0;u<h.length;u++)for(var d=h[u],p=d.start,f=p,m=p+d.count;f<m;f+=3)void 0!==n?c(n[f],n[f+1],n[f+2],d.materialIndex):c(f,f+1,f+2,d.materialIndex);else if(void 0!==n)for(u=0;u<n.length;u+=3)c(n[u],n[u+1],n[u+2]);else for(u=0;u<i.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(dl).negate(),this.translate(dl.x,dl.y,dl.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new oa;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var e=new Zo,t=new Zo,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Zo;if(e){var s,l,u,c=new Zo,h=new Zo;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var d=(o=this.faces[r]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new pl;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)l=new Zo,u={a:new Zo,b:new Zo,c:new Zo},a.push(l),s.push(u)}var l,u,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new za),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ba),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new Bo).getNormalMatrix(t));for(var h=0,d=a.length;h<d;h++){var p=a[h].clone();void 0!==t&&p.applyMatrix4(t),o.push(p)}for(h=0,d=c.length;h<d;h++)u.push(c[h].clone());for(h=0,d=l.length;h<d;h++){var f,m,v,g=l[h],y=g.vertexNormals,x=g.vertexColors;(f=new ys(g.a+i,g.b+i,g.c+i)).normal.copy(g.normal),void 0!==r&&f.normal.applyMatrix3(r).normalize();for(var b=0,_=y.length;b<_;b++)m=y[b].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),f.vertexNormals.push(m);f.color.copy(g.color);for(b=0,_=x.length;b<_;b++)v=x[b],f.vertexColors.push(v.clone());f.materialIndex=g.materialIndex+n,s.push(f)}for(h=0,d=e.faceVertexUvs.length;h<d;h++){var w=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(b=0,_=w.length;b<_;b++){for(var S=w[b],T=[],E=0,M=S.length;E<M;E++)T.push(S[E].clone());this.faceVertexUvs[h].push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var d=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Zo(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],l={},u=[],c={},h=[],d={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,x=0;if(x=S(x,0,0),x=S(x,1,!0),x=S(x,2,!1),x=S(x,3,f),x=S(x,4,m),x=S(x,5,v),x=S(x,6,g),x=S(x,7,y),a.push(x),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var b=this.faceVertexUvs[0][i];a.push(M(b[0]),M(b[1]),M(b[2]))}if(m&&a.push(T(p.normal)),v){var _=p.vertexNormals;a.push(T(_[0]),T(_[1]),T(_[2]))}if(g&&a.push(E(p.color)),y){var w=p.vertexColors;a.push(E(w[0]),E(w[1]),E(w[2]))}}function S(e,t,n){return n?e|1<<t:e&~(1<<t)}function T(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=s.length/3,s.push(e.x,e.y,e.z)),l[t]}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function M(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]||(d[t]=h.length/2,h.push(e.x,e.y)),d[t]}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new pl).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=c.length;r<i;r++){var h=c[r],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],r=0,i=f[t].vertices.length;r<i;r++)m.vertices.push(f[t].vertices[r].clone());if(void 0!==f[t].normals)for(m.normals=[],r=0,i=f[t].normals.length;r<i;r++)m.normals.push(f[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),g.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)this.skinIndices.push(_[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var S=e.boundingBox;null!==S&&(this.boundingBox=S.clone());var T=e.boundingSphere;return null!==T&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class fl extends pl{constructor(e,t,n,r,i,o){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new ml(e,t,n,r,i,o)),this.mergeVertices()}}class ml extends Gs{constructor(e,t,n,r,i,o){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],l=[],u=[],c=[],h=0,d=0;function p(e,t,n,r,i,o,p,f,m,v,g){var y,x,b=o/m,_=p/v,w=o/2,S=p/2,T=f/2,E=m+1,M=v+1,A=0,P=0,L=new Zo;for(x=0;x<M;x++){var C=x*_-S;for(y=0;y<E;y++){var O=y*b-w;L[e]=O*r,L[t]=C*i,L[n]=T,l.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[n]=f>0?1:-1,u.push(L.x,L.y,L.z),c.push(y/m),c.push(1-x/v),A+=1}}for(x=0;x<v;x++)for(y=0;y<m;y++){var R=h+y+E*x,N=h+y+E*(x+1),F=h+(y+1)+E*(x+1),I=h+(y+1)+E*x;s.push(R,N,I),s.push(N,F,I),P+=6}a.addGroup(d,P,g),d+=P,h+=A}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Os(l,3)),this.setAttribute("normal",new Os(u,3)),this.setAttribute("uv",new Os(c,2))}}function vl(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function gl(e){for(var t={},n=0;n<e.length;n++){var r=vl(e[n]);for(var i in r)t[i]=r[i]}return t}var yl={clone:vl,merge:gl};function xl(e){bs.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function bl(){Sa.call(this),this.type="Camera",this.matrixWorldInverse=new oa,this.projectionMatrix=new oa,this.projectionMatrixInverse=new oa}function _l(e,t,n,r){bl.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}xl.prototype=Object.create(bs.prototype),xl.prototype.constructor=xl,xl.prototype.isShaderMaterial=!0,xl.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vl(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},xl.prototype.toJSON=function(e){var t=bs.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},bl.prototype=Object.assign(Object.create(Sa.prototype),{constructor:bl,isCamera:!0,copy:function(e,t){return Sa.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Zo),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Sa.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){Sa.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),_l.prototype=Object.assign(Object.create(bl.prototype),{constructor:_l,isPerspectiveCamera:!0,copy:function(e,t){return bl.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Uo.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Uo.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Uo.RAD2DEG*Math.atan(Math.tan(.5*Uo.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Uo.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Sa.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function wl(e,t,n,r){Sa.call(this),this.type="CubeCamera";var i=new _l(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Zo(1,0,0)),this.add(i);var o=new _l(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new Zo(-1,0,0)),this.add(o);var a=new _l(90,1,e,t);a.up.set(0,0,1),a.lookAt(new Zo(0,1,0)),this.add(a);var s=new _l(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new Zo(0,-1,0)),this.add(s);var l=new _l(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Zo(0,0,1)),this.add(l);var u=new _l(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new Zo(0,0,-1)),this.add(u),r=r||{format:ri,magFilter:Ur,minFilter:Ur},this.renderTarget=new Sl(n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,c=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=c,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)}}function Sl(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),Xo.call(this,e,e,t)}function Tl(e,t,n,r,i,o,a,s,l,u,c,h){Vo.call(this,null,o,a,s,l,u,r,i,c,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:Fr,this.minFilter=void 0!==u?u:Fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}wl.prototype=Object.create(Sa.prototype),wl.prototype.constructor=wl,Sl.prototype=Object.create(Xo.prototype),Sl.prototype.constructor=Sl,Sl.prototype.isWebGLCubeRenderTarget=!0,Sl.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new Ta,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new xl({type:"CubemapFromEquirect",uniforms:vl(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:On,blending:zn});i.uniforms.tEquirect.value=t;var o=new al(new ml(5,5,5),i);n.add(o);var a=new wl(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(e,n),o.geometry.dispose(),o.material.dispose(),this},Tl.prototype=Object.create(Vo.prototype),Tl.prototype.constructor=Tl,Tl.prototype.isDataTexture=!0;var El=new Ba,Ml=new Zo;function Al(e,t,n,r,i,o){this.planes=[void 0!==e?e:new Ka,void 0!==t?t:new Ka,void 0!==n?n:new Ka,void 0!==r?r:new Ka,void 0!==i?i:new Ka,void 0!==o?o:new Ka]}Object.assign(Al.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,f-h,y-m).normalize(),t[1].setComponents(a+r,c+s,f+h,y+m).normalize(),t[2].setComponents(a+i,c+l,f+d,y+v).normalize(),t[3].setComponents(a-i,c-l,f-d,y-v).normalize(),t[4].setComponents(a-o,c-u,f-p,y-g).normalize(),t[5].setComponents(a+o,c+u,f+p,y+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),El.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(El)},intersectsSprite:function(e){return El.center.set(0,0,0),El.radius=.7071067811865476,El.applyMatrix4(e.matrixWorld),this.intersectsSphere(El)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Ml.x=r.normal.x>0?e.max.x:e.min.x,Ml.y=r.normal.y>0?e.max.y:e.min.y,Ml.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ml)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Pl={common:{diffuse:{value:new fs(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Bo},uv2Transform:{value:new Bo},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new jo(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fs(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new fs(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Bo}},sprite:{diffuse:{value:new fs(15658734)},opacity:{value:1},center:{value:new jo(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Bo}}};function Ll(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Cl(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,n){var r=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){var o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}function Ol(e,t,n,r){pl.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Rl(e,t,n,r)),this.mergeVertices()}function Rl(e,t,n,r){Gs.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,u=Math.floor(r)||1,c=l+1,h=u+1,d=e/l,p=t/u,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(i=0;i<c;i++){var x=i*d-a;m.push(x,-y,0),v.push(0,0,1),g.push(i/l),g.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<l;i++){var b=i+c*o,_=i+c*(o+1),w=i+1+c*(o+1),S=i+1+c*o;f.push(b,_,S),f.push(_,w,S)}this.setIndex(f),this.setAttribute("position",new Os(m,3)),this.setAttribute("normal",new Os(v,3)),this.setAttribute("uv",new Os(g,2))}Ol.prototype=Object.create(pl.prototype),Ol.prototype.constructor=Ol,Rl.prototype=Object.create(Gs.prototype),Rl.prototype.constructor=Rl;var Nl={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Fl={basic:{uniforms:gl([Pl.common,Pl.specularmap,Pl.envmap,Pl.aomap,Pl.lightmap,Pl.fog]),vertexShader:Nl.meshbasic_vert,fragmentShader:Nl.meshbasic_frag},lambert:{uniforms:gl([Pl.common,Pl.specularmap,Pl.envmap,Pl.aomap,Pl.lightmap,Pl.emissivemap,Pl.fog,Pl.lights,{emissive:{value:new fs(0)}}]),vertexShader:Nl.meshlambert_vert,fragmentShader:Nl.meshlambert_frag},phong:{uniforms:gl([Pl.common,Pl.specularmap,Pl.envmap,Pl.aomap,Pl.lightmap,Pl.emissivemap,Pl.bumpmap,Pl.normalmap,Pl.displacementmap,Pl.fog,Pl.lights,{emissive:{value:new fs(0)},specular:{value:new fs(1118481)},shininess:{value:30}}]),vertexShader:Nl.meshphong_vert,fragmentShader:Nl.meshphong_frag},standard:{uniforms:gl([Pl.common,Pl.envmap,Pl.aomap,Pl.lightmap,Pl.emissivemap,Pl.bumpmap,Pl.normalmap,Pl.displacementmap,Pl.roughnessmap,Pl.metalnessmap,Pl.fog,Pl.lights,{emissive:{value:new fs(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Nl.meshphysical_vert,fragmentShader:Nl.meshphysical_frag},toon:{uniforms:gl([Pl.common,Pl.specularmap,Pl.aomap,Pl.lightmap,Pl.emissivemap,Pl.bumpmap,Pl.normalmap,Pl.displacementmap,Pl.gradientmap,Pl.fog,Pl.lights,{emissive:{value:new fs(0)},specular:{value:new fs(1118481)},shininess:{value:30}}]),vertexShader:Nl.meshtoon_vert,fragmentShader:Nl.meshtoon_frag},matcap:{uniforms:gl([Pl.common,Pl.bumpmap,Pl.normalmap,Pl.displacementmap,Pl.fog,{matcap:{value:null}}]),vertexShader:Nl.meshmatcap_vert,fragmentShader:Nl.meshmatcap_frag},points:{uniforms:gl([Pl.points,Pl.fog]),vertexShader:Nl.points_vert,fragmentShader:Nl.points_frag},dashed:{uniforms:gl([Pl.common,Pl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nl.linedashed_vert,fragmentShader:Nl.linedashed_frag},depth:{uniforms:gl([Pl.common,Pl.displacementmap]),vertexShader:Nl.depth_vert,fragmentShader:Nl.depth_frag},normal:{uniforms:gl([Pl.common,Pl.bumpmap,Pl.normalmap,Pl.displacementmap,{opacity:{value:1}}]),vertexShader:Nl.normal_vert,fragmentShader:Nl.normal_frag},sprite:{uniforms:gl([Pl.sprite,Pl.fog]),vertexShader:Nl.sprite_vert,fragmentShader:Nl.sprite_frag},background:{uniforms:{uvTransform:{value:new Bo},t2D:{value:null}},vertexShader:Nl.background_vert,fragmentShader:Nl.background_frag},cube:{uniforms:gl([Pl.envmap,{opacity:{value:1}}]),vertexShader:Nl.cube_vert,fragmentShader:Nl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nl.equirect_vert,fragmentShader:Nl.equirect_frag},distanceRGBA:{uniforms:gl([Pl.common,Pl.displacementmap,{referencePosition:{value:new Zo},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nl.distanceRGBA_vert,fragmentShader:Nl.distanceRGBA_frag},shadow:{uniforms:gl([Pl.lights,Pl.fog,{color:{value:new fs(0)},opacity:{value:1}}]),vertexShader:Nl.shadow_vert,fragmentShader:Nl.shadow_frag}};function Il(e,t,n,r){var i,o,a=new fs(0),s=0,l=null,u=0,c=null;function h(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),h(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){h(a,s=e)},render:function(t,r,d,p){var f=r.background,m=e.xr,v=m.getSession&&m.getSession();if(v&&"additive"===v.environmentBlendMode&&(f=null),null===f?h(a,s):f&&f.isColor&&(h(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLCubeRenderTarget||f.mapping===Lr)){void 0===o&&((o=new al(new ml(1,1,1),new xl({type:"BackgroundCubeMaterial",uniforms:vl(Fl.cube.uniforms),vertexShader:Fl.cube.vertexShader,fragmentShader:Fl.cube.fragmentShader,side:On,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o));var g=f.isWebGLCubeRenderTarget?f.texture:f;o.material.uniforms.envMap.value=g,o.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,l===f&&u===g.version&&c===e.toneMapping||(o.material.needsUpdate=!0,l=f,u=g.version,c=e.toneMapping),t.unshift(o,o.geometry,o.material,0,0,null)}else f&&f.isTexture&&(void 0===i&&((i=new al(new Rl(2,2),new xl({type:"BackgroundMaterial",uniforms:vl(Fl.background.uniforms),vertexShader:Fl.background.vertexShader,fragmentShader:Fl.background.fragmentShader,side:Cn,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),i.material.uniforms.uvTransform.value.copy(f.matrix),l===f&&u===f.version&&c===e.toneMapping||(i.material.needsUpdate=!0,l=f,u=f.version,c=e.toneMapping),t.unshift(i,i.geometry,i.material,0,0,null))}}}function kl(e,t,n,r){var i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(r,a,s,l){if(0!==l){var u,c;if(o)u=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](i,a,s,l),n.update(s,i,l)}}}function Dl(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),c=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=c>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?e.getParameter(36183):0}}function zl(){var e=this,t=null,n=0,r=!1,i=!1,o=new Ka,a=new Bo,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=s.value,!0!==i||null===u){var c=r+4*l,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,p=r;d!==l;++d,p+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(u,p),u[p+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,l()},this.setState=function(e,o,a,c,h,d){if(!r||null===e||0===e.length||i&&!a)i?u(null):l();else{var p=i?0:n,f=4*p,m=h.clippingState||null;s.value=m,m=u(e,c,f,d);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function Ul(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function jl(e,t,n){var r=new WeakMap,i=new WeakMap;function o(e){var a=e.target,s=r.get(a);for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),r.delete(a);var u=i.get(s);u&&(t.remove(u),i.delete(s)),n.memory.geometries--}function a(e){var n=[],r=e.index,o=e.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],h=s[l+1],d=s[l+2];n.push(c,h,h,d,d,c)}}else{s=o.array;a=o.version;for(l=0,u=s.length/3-1;l<u;l+=3){c=l+0,h=l+1,d=l+2;n.push(c,h,h,d,d,c)}}var p=new(Fs(n)>65535?Cs:Ps)(n,1);p.version=a,t.update(p,34963);var f=i.get(e);f&&t.remove(f),i.set(e,p)}return{get:function(e,t){var i=r.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Gs).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,l=a.length;s<l;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return i.get(e)}}}function Bl(e,t,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(r,l,u,c){if(0!==c){var h,d;if(s)h=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(h=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[d](i,u,o,l*a,c),n.update(u,i,c)}}}function Gl(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Hl(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Vl(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,l=void 0===s?0:s.length,u=t[i.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[i.id]=u}var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<l;c++){0!==(f=u[c])[1]&&(h&&i.deleteAttribute("morphTarget"+c),d&&i.deleteAttribute("morphNormal"+c))}for(c=0;c<l;c++){(f=u[c])[0]=c,f[1]=s[c]}u.sort(Hl);var p=0;for(c=0;c<8;c++){var f;if(f=u[c]){var m=f[0],v=f[1];if(v){h&&i.setAttribute("morphTarget"+c,h[m]),d&&i.setAttribute("morphNormal"+c,d[m]),n[c]=v,p+=v;continue}}n[c]=0}var g=i.morphTargetsRelative?1:1-p;a.getUniforms().setValue(e,"morphTargetBaseInfluence",g),a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Wl(e,t,n,r){var i={};return{update:function(e){var o=r.render.frame,a=e.geometry,s=t.get(e,a);return i[s.id]!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),i[s.id]=o),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),s},dispose:function(){i={}}}}function Xl(e,t,n,r,i,o,a,s,l,u){e=void 0!==e?e:[],t=void 0!==t?t:Tr,a=void 0!==a?a:ri,Vo.call(this,e,t,n,r,i,o,a,s,l,u),this.flipY=!1}function Yl(e,t,n,r){Vo.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Fr,this.minFilter=Fr,this.wrapR=Rr,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function ql(e,t,n,r){Vo.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Fr,this.minFilter=Fr,this.wrapR=Rr,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Fl.physical={uniforms:gl([Fl.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new fs(0)},clearcoatNormalScale:{value:new jo(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Nl.meshphysical_vert,fragmentShader:Nl.meshphysical_frag},Xl.prototype=Object.create(Vo.prototype),Xl.prototype.constructor=Xl,Xl.prototype.isCubeTexture=!0,Object.defineProperty(Xl.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Yl.prototype=Object.create(Vo.prototype),Yl.prototype.constructor=Yl,Yl.prototype.isDataTexture2DArray=!0,ql.prototype=Object.create(Vo.prototype),ql.prototype.constructor=ql,ql.prototype.isDataTexture3D=!0;var Jl=new Vo,Ql=new Yl,Zl=new ql,$l=new Xl,Kl=[],eu=[],tu=new Float32Array(16),nu=new Float32Array(9),ru=new Float32Array(4);function iu(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Kl[i];if(void 0===o&&(o=new Float32Array(i),Kl[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function ou(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function au(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function su(e,t){var n=eu[t];void 0===n&&(n=new Int32Array(t),eu[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function lu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function uu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ou(n,t))return;e.uniform2fv(this.addr,t),au(n,t)}}function cu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ou(n,t))return;e.uniform3fv(this.addr,t),au(n,t)}}function hu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ou(n,t))return;e.uniform4fv(this.addr,t),au(n,t)}}function du(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ou(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),au(n,t)}else{if(ou(n,r))return;ru.set(r),e.uniformMatrix2fv(this.addr,!1,ru),au(n,r)}}function pu(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ou(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),au(n,t)}else{if(ou(n,r))return;nu.set(r),e.uniformMatrix3fv(this.addr,!1,nu),au(n,r)}}function fu(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(ou(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),au(n,t)}else{if(ou(n,r))return;tu.set(r),e.uniformMatrix4fv(this.addr,!1,tu),au(n,r)}}function mu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Jl,i)}function vu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Ql,i)}function gu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Zl,i)}function yu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||$l,i)}function xu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function bu(e,t){var n=this.cache;ou(n,t)||(e.uniform2iv(this.addr,t),au(n,t))}function _u(e,t){var n=this.cache;ou(n,t)||(e.uniform3iv(this.addr,t),au(n,t))}function wu(e,t){var n=this.cache;ou(n,t)||(e.uniform4iv(this.addr,t),au(n,t))}function Su(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Tu(e,t){e.uniform1fv(this.addr,t)}function Eu(e,t){e.uniform1iv(this.addr,t)}function Mu(e,t){e.uniform2iv(this.addr,t)}function Au(e,t){e.uniform3iv(this.addr,t)}function Pu(e,t){e.uniform4iv(this.addr,t)}function Lu(e,t){var n=iu(t,this.size,2);e.uniform2fv(this.addr,n)}function Cu(e,t){var n=iu(t,this.size,3);e.uniform3fv(this.addr,n)}function Ou(e,t){var n=iu(t,this.size,4);e.uniform4fv(this.addr,n)}function Ru(e,t){var n=iu(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Nu(e,t){var n=iu(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Fu(e,t){var n=iu(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Iu(e,t,n){var r=t.length,i=su(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Jl,i[o])}function ku(e,t,n){var r=t.length,i=su(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||$l,i[o])}function Du(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return lu;case 35664:return uu;case 35665:return cu;case 35666:return hu;case 35674:return du;case 35675:return pu;case 35676:return fu;case 5124:case 35670:return xu;case 35667:case 35671:return bu;case 35668:case 35672:return _u;case 35669:case 35673:return wu;case 5125:return Su;case 35678:case 36198:case 36298:case 36306:case 35682:return mu;case 35679:case 36299:case 36307:return gu;case 35680:case 36300:case 36308:case 36293:return yu;case 36289:case 36303:case 36311:case 36292:return vu}}(t.type)}function zu(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Tu;case 35664:return Lu;case 35665:return Cu;case 35666:return Ou;case 35674:return Ru;case 35675:return Nu;case 35676:return Fu;case 5124:case 35670:return Eu;case 35667:case 35671:return Mu;case 35668:case 35672:return Au;case 35669:case 35673:return Pu;case 35678:case 36198:case 36298:case 36306:case 35682:return Iu;case 35680:case 36300:case 36308:case 36293:return ku}}(t.type)}function Uu(e){this.id=e,this.seq=[],this.map={}}zu.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),au(t,e)},Uu.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var ju=/([\w\d_]+)(\])?(\[|\.)?/g;function Bu(e,t){e.seq.push(t),e.map[t.id]=t}function Gu(e,t,n){var r=e.name,i=r.length;for(ju.lastIndex=0;;){var o=ju.exec(r),a=ju.lastIndex,s=o[1],l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){Bu(n,void 0===u?new Du(s,e,t):new zu(s,e,t));break}var c=n.map[s];void 0===c&&Bu(n,c=new Uu(s)),n=c}}function Hu(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);Gu(i,e.getUniformLocation(t,i.name),this)}}function Vu(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Hu.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Hu.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Hu.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},Hu.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Wu=0;function Xu(e){switch(e){case Zi:return["Linear","( value )"];case $i:return["sRGB","( value )"];case eo:return["RGBE","( value )"];case no:return["RGBM","( value, 7.0 )"];case ro:return["RGBM","( value, 16.0 )"];case io:return["RGBD","( value, 256.0 )"];case Ki:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case to:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function Yu(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function qu(e,t){var n=Xu(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ju(e,t){var n;switch(t){case yr:n="Linear";break;case xr:n="Reinhard";break;case br:n="Uncharted2";break;case _r:n="OptimizedCineon";break;case wr:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Qu(e){return""!==e}function Zu(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function $u(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Ku=/^[ \t]*#include +<([\w\d./]+)>/gm;function ec(e){return e.replace(Ku,tc)}function tc(e,t){var n=Nl[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ec(n)}var nc=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function rc(e){return e.replace(nc,ic)}function ic(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function oc(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ac(e,t,n){var r,i,o,a,s,l=e.getContext(),u=n.defines,c=n.vertexShader,h=n.fragmentShader,d=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===An?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Pn?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Ln&&(t="SHADOWMAP_TYPE_VSM"),t}(n),p=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Tr:case Er:t="ENVMAP_TYPE_CUBE";break;case Lr:case Cr:t="ENVMAP_TYPE_CUBE_UV";break;case Mr:case Ar:t="ENVMAP_TYPE_EQUIREC";break;case Pr:t="ENVMAP_TYPE_SPHERE"}return t}(n),f=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Er:case Ar:t="ENVMAP_MODE_REFRACTION"}return t}(n),m=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case fr:t="ENVMAP_BLENDING_MULTIPLY";break;case mr:t="ENVMAP_BLENDING_MIX";break;case vr:t="ENVMAP_BLENDING_ADD"}return t}(n),v=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qu).join("\n")}(n),y=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(u),x=l.createProgram(),b=n.numMultiviewViews;if(n.isRawShaderMaterial?((r=[y].filter(Qu).join("\n")).length>0&&(r+="\n"),(i=[g,y].filter(Qu).join("\n")).length>0&&(i+="\n")):(r=[oc(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qu).join("\n"),i=[g,oc(n),"#define SHADER_NAME "+n.shaderName,y,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.envMap?"#define "+f:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==gr?"#define TONE_MAPPING":"",n.toneMapping!==gr?Nl.tonemapping_pars_fragment:"",n.toneMapping!==gr?Ju("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.matcapEncoding||n.envMapEncoding||n.emissiveMapEncoding||n.lightMapEncoding?Nl.encodings_pars_fragment:"",n.mapEncoding?qu("mapTexelToLinear",n.mapEncoding):"",n.matcapEncoding?qu("matcapTexelToLinear",n.matcapEncoding):"",n.envMapEncoding?qu("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?qu("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMapEncoding?qu("lightMapTexelToLinear",n.lightMapEncoding):"",n.outputEncoding?(o="linearToOutputTexel",a=n.outputEncoding,s=Xu(a),"vec4 "+o+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"):"",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Qu).join("\n")),c=$u(c=Zu(c=ec(c),n),n),h=$u(h=Zu(h=ec(h),n),n),c=rc(c),h=rc(h),n.isWebGL2&&!n.isRawShaderMaterial){var _=!1,w=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==c.match(w)&&null!==h.match(w)&&(_=!0,c=c.replace(w,""),h=h.replace(w,"")),r=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,i=["#version 300 es\n","#define varying in",_?"":"out highp vec4 pc_fragColor;",_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i,b>0&&(r=(r=r.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+b+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+b+"];","uniform mat4 projectionMatrices["+b+"];","uniform mat4 viewMatrices["+b+"];","uniform mat3 normalMatrices["+b+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),i=(i=i.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+b+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var S,T,E=i+h,M=Vu(l,35633,r+c),A=Vu(l,35632,E);if(l.attachShader(x,M),l.attachShader(x,A),void 0!==n.index0AttributeName?l.bindAttribLocation(x,0,n.index0AttributeName):!0===n.morphTargets&&l.bindAttribLocation(x,0,"position"),l.linkProgram(x),e.debug.checkShaderErrors){var P=l.getProgramInfoLog(x).trim(),L=l.getShaderInfoLog(M).trim(),C=l.getShaderInfoLog(A).trim(),O=!0,R=!0;if(!1===l.getProgramParameter(x,35714)){O=!1;var N=Yu(l,M,"vertex"),F=Yu(l,A,"fragment");console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(x,35715),"gl.getProgramInfoLog",P,N,F)}else""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==L&&""!==C||(R=!1);R&&(this.diagnostics={runnable:O,programLog:P,vertexShader:{log:L,prefix:r},fragmentShader:{log:C,prefix:i}})}return l.deleteShader(M),l.deleteShader(A),this.getUniforms=function(){return void 0===S&&(S=new Hu(l,x)),S},this.getAttributes=function(){return void 0===T&&(T=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(l,x)),T},this.destroy=function(){l.deleteProgram(x),this.program=void 0},this.name=n.shaderName,this.id=Wu++,this.cacheKey=t,this.usedTimes=1,this.program=x,this.vertexShader=M,this.fragmentShader=A,this.numMultiviewViews=b,this}function sc(e,t,n){var r=[],i=n.isWebGL2,o=n.logarithmicDepthBuffer,a=n.floatVertexTextures,s=n.precision,l=n.maxVertexUniforms,u=n.vertexTextures,c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function d(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Zi,t}this.getParameters=function(r,h,p,f,m,v,g){var y=f.fog,x=r.isMeshStandardMaterial?f.environment:null,b=r.envMap||x,_=c[r.type],w=g.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(a)return 1024;var n=l,r=Math.floor((n-20)/4),i=Math.min(r,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(g):0;null!==r.precision&&(s=n.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",s,"instead.");var S=function(e,t){var n;if(t){var r=Fl[t];n={name:e.type,uniforms:yl.clone(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}}else n={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};return n}(r,_);r.onBeforeCompile(S,e);var T=e.getRenderTarget(),E=T&&T.isWebGLMultiviewRenderTarget?T.numViews:0;return{isWebGL2:i,shaderID:_,shaderName:S.name,uniforms:S.uniforms,vertexShader:S.vertexShader,fragmentShader:S.fragmentShader,defines:r.defines,isRawShaderMaterial:r.isRawShaderMaterial,isShaderMaterial:r.isShaderMaterial,precision:s,instancing:!0===g.isInstancedMesh,supportsVertexTextures:u,numMultiviewViews:E,outputEncoding:null!==T?d(T.texture):e.outputEncoding,map:!!r.map,mapEncoding:d(r.map),matcap:!!r.matcap,matcapEncoding:d(r.matcap),envMap:!!b,envMapMode:b&&b.mapping,envMapEncoding:d(b),envMapCubeUV:!!b&&(b.mapping===Lr||b.mapping===Cr),lightMap:!!r.lightMap,lightMapEncoding:d(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:d(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===lo,tangentSpaceNormalMap:r.normalMapType===so,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.displacementMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||!r.displacementMap),fog:!!y,useFog:r.fog,fogExp2:y&&y.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:o,skinning:r.skinning&&w>0,maxBones:w,useVertexTexture:a,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:v,dithering:r.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:r.toneMapped?e.toneMapping:gr,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===Rn,flipSided:r.side===On,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.frawbuffers,extensionDrawbuffers:r.extensions&&r.extensions.drawbuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:i||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:i||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:i||null!==t.get("EXT_shader_texture_lod"),onBeforeCompile:r.onBeforeCompile}},this.getProgramCacheKey=function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(void 0===t.isRawShaderMaterial){for(var i=0;i<h.length;i++)n.push(t[h[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.onBeforeCompile.toString()),n.join()},this.acquireProgram=function(t,n){for(var i,o=0,a=r.length;o<a;o++){var s=r[o];if(s.cacheKey===n){++(i=s).usedTimes;break}}return void 0===i&&(i=new ac(e,n,t),r.push(i)),i},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function lc(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function uc(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function cc(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function hc(){var e=[],t=0,n=[],r=[],i={id:-1};function o(n,r,o,a,s,l){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:l},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=o,u.program=o.program||i,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=s,u.group=l),t++,u}return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(e,t,i,a,s,l){var u=o(e,t,i,a,s,l);(!0===i.transparent?r:n).push(u)},unshift:function(e,t,i,a,s,l){var u=o(e,t,i,a,s,l);(!0===i.transparent?r:n).unshift(u)},sort:function(e,t){n.length>1&&n.sort(e||uc),r.length>1&&r.sort(t||cc)}}}function dc(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i,o=e.get(n);return void 0===o?(i=new hc,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):void 0===(i=o.get(r))&&(i=new hc,o.set(r,i)),i},dispose:function(){e=new WeakMap}}}function pc(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Zo,color:new fs,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new jo};break;case"SpotLight":n={position:new Zo,direction:new Zo,color:new fs,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new jo};break;case"PointLight":n={position:new Zo,color:new fs,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new jo,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Zo,skyColor:new fs,groundColor:new fs};break;case"RectAreaLight":n={color:new fs,position:new Zo,halfWidth:new Zo,halfHeight:new Zo}}return e[t.id]=n,n}}}var fc=0;function mc(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function vc(){for(var e=new pc,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)t.probe.push(new Zo);var r=new Zo,i=new oa,o=new oa;return{setup:function(n,a,s){for(var l=0,u=0,c=0,h=0;h<9;h++)t.probe[h].set(0,0,0);var d=0,p=0,f=0,m=0,v=0,g=0,y=0,x=0,b=s.matrixWorldInverse;n.sort(mc),h=0;for(var _=n.length;h<_;h++){var w=n[h],S=w.color,T=w.intensity,E=w.distance,M=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=S.r*T,u+=S.g*T,c+=S.b*T;else if(w.isLightProbe)for(var A=0;A<9;A++)t.probe[A].addScaledVector(w.sh.coefficients[A],T);else if(w.isDirectionalLight){if((L=e.get(w)).color.copy(w.color).multiplyScalar(w.intensity),L.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(b),L.shadow=w.castShadow,w.castShadow){var P=w.shadow;L.shadowBias=P.bias,L.shadowRadius=P.radius,L.shadowMapSize=P.mapSize,t.directionalShadowMap[d]=M,t.directionalShadowMatrix[d]=w.shadow.matrix,g++}t.directional[d]=L,d++}else if(w.isSpotLight){if((L=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),L.color.copy(S).multiplyScalar(T),L.distance=E,L.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(b),L.coneCos=Math.cos(w.angle),L.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),L.decay=w.decay,L.shadow=w.castShadow,w.castShadow){P=w.shadow;L.shadowBias=P.bias,L.shadowRadius=P.radius,L.shadowMapSize=P.mapSize,t.spotShadowMap[f]=M,t.spotShadowMatrix[f]=w.shadow.matrix,x++}t.spot[f]=L,f++}else if(w.isRectAreaLight){(L=e.get(w)).color.copy(S).multiplyScalar(T),L.position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),o.identity(),i.copy(w.matrixWorld),i.premultiply(b),o.extractRotation(i),L.halfWidth.set(.5*w.width,0,0),L.halfHeight.set(0,.5*w.height,0),L.halfWidth.applyMatrix4(o),L.halfHeight.applyMatrix4(o),t.rectArea[m]=L,m++}else if(w.isPointLight){if((L=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),L.color.copy(w.color).multiplyScalar(w.intensity),L.distance=w.distance,L.decay=w.decay,L.shadow=w.castShadow,w.castShadow){P=w.shadow;L.shadowBias=P.bias,L.shadowRadius=P.radius,L.shadowMapSize=P.mapSize,L.shadowCameraNear=P.camera.near,L.shadowCameraFar=P.camera.far,t.pointShadowMap[p]=M,t.pointShadowMatrix[p]=w.shadow.matrix,y++}t.point[p]=L,p++}else if(w.isHemisphereLight){var L;(L=e.get(w)).direction.setFromMatrixPosition(w.matrixWorld),L.direction.transformDirection(b),L.direction.normalize(),L.skyColor.copy(w.color).multiplyScalar(T),L.groundColor.copy(w.groundColor).multiplyScalar(T),t.hemi[v]=L,v++}}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c;var C=t.hash;C.directionalLength===d&&C.pointLength===p&&C.spotLength===f&&C.rectAreaLength===m&&C.hemiLength===v&&C.numDirectionalShadows===g&&C.numPointShadows===y&&C.numSpotShadows===x||(t.directional.length=d,t.spot.length=f,t.rectArea.length=m,t.point.length=p,t.hemi.length=v,t.directionalShadowMap.length=g,t.pointShadowMap.length=y,t.spotShadowMap.length=x,t.directionalShadowMatrix.length=g,t.pointShadowMatrix.length=y,t.spotShadowMatrix.length=x,C.directionalLength=d,C.pointLength=p,C.spotLength=f,C.rectAreaLength=m,C.hemiLength=v,C.numDirectionalShadows=g,C.numPointShadows=y,C.numSpotShadows=x,t.version=fc++)},state:t}}function gc(){var e=new vc,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function yc(){var e=new WeakMap;function t(n){var r=n.target;r.removeEventListener("dispose",t),e.delete(r)}return{get:function(n,r){var i;return!1===e.has(n)?(i=new gc,e.set(n,new WeakMap),e.get(n).set(r,i),n.addEventListener("dispose",t)):!1===e.get(n).has(r)?(i=new gc,e.get(n).set(r,i)):i=e.get(n).get(r),i},dispose:function(){e=new WeakMap}}}function xc(e){bs.call(this),this.type="MeshDepthMaterial",this.depthPacking=oo,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function bc(e){bs.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Zo,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}xc.prototype=Object.create(bs.prototype),xc.prototype.constructor=xc,xc.prototype.isMeshDepthMaterial=!0,xc.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},bc.prototype=Object.create(bs.prototype),bc.prototype.constructor=bc,bc.prototype.isMeshDistanceMaterial=!0,bc.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function _c(e,t,n){var r=new Al,i=new jo,o=new jo,a=new Wo,s=[],l=[],u={},c={0:On,1:Cn,2:Rn},h=new xl({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new jo},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONAL_PASS=1;var p=new Gs;p.setAttribute("position",new Ss(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var f=new al(p,h),m=this;function v(n,r){var i=t.update(f);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,f,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,f,null)}function g(e,t,n){var r=e<<0|t<<1|n<<2,i=s[r];return void 0===i&&(i=new xc({depthPacking:ao,morphTargets:e,skinning:t}),s[r]=i),i}function y(e,t,n){var r=e<<0|t<<1|n<<2,i=l[r];return void 0===i&&(i=new bc({morphTargets:e,skinning:t}),l[r]=i),i}function x(t,n,r,i,o,a){var s=t.geometry,l=null,h=g,d=t.customDepthMaterial;if(!0===r.isPointLight&&(h=y,d=t.customDistanceMaterial),void 0===d){var p=!1;!0===n.morphTargets&&(!0===s.isBufferGeometry?p=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(p=s.morphTargets&&s.morphTargets.length>0));var f=!1;!0===t.isSkinnedMesh&&(!0===n.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),l=h(p,f,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var m=l.uuid,v=n.uuid,x=u[m];void 0===x&&(x={},u[m]=x);var b=x[v];void 0===b&&(b=l.clone(),x[v]=b),l=b}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=a===Ln?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:c[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=i,l.farDistance=o),l}function b(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Ln)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,h=0,d=c.length;h<d;h++){var p=c[h],f=u[p.materialIndex];if(f&&f.visible){var m=x(n,f,a,o.near,o.far,s);e.renderBufferDirect(o,null,l,m,n,p)}}else if(u.visible){m=x(n,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,l,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)b(v[g],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=An,this.render=function(t,s,l){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(zn),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var g=t[p],y=g.shadow;if(void 0!==y){i.copy(y.mapSize);var x=y.getFrameExtents();if(i.multiply(x),o.copy(y.mapSize),(i.x>n||i.y>n)&&(console.warn("THREE.WebGLShadowMap:",g,"has shadow exceeding max texture size, reducing"),i.x>n&&(o.x=Math.floor(n/x.x),i.x=o.x*x.x,y.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/x.y),i.y=o.y*x.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&this.type===Ln){var _={minFilter:Ur,magFilter:Ur,format:ii};y.map=new Xo(i.x,i.y,_),y.map.texture.name=g.name+".shadowMap",y.mapPass=new Xo(i.x,i.y,_),y.camera.updateProjectionMatrix()}if(null===y.map){_={minFilter:Fr,magFilter:Fr,format:ii};y.map=new Xo(i.x,i.y,_),y.map.texture.name=g.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var w=y.getViewportCount(),S=0;S<w;S++){var T=y.getViewport(S);a.set(o.x*T.x,o.y*T.y,o.x*T.z,o.y*T.w),d.viewport(a),y.updateMatrices(g,S),r=y.getFrustum(),b(s,l,y.camera,g,this.type)}y.isPointLightShadow||this.type!==Ln||v(y,l)}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,c,h)}}}function wc(e,t,n){var r=n.isWebGL2;var i=new function(){var t=!1,n=new Wo,r=null,i=new Wo(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?z(2929):U(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case ar:e.depthFunc(512);break;case sr:e.depthFunc(519);break;case lr:e.depthFunc(513);break;case ur:e.depthFunc(515);break;case cr:e.depthFunc(514);break;case hr:e.depthFunc(518);break;case dr:e.depthFunc(516);break;case pr:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?z(2960):U(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}},s=e.getParameter(34921),l=new Uint8Array(s),u=new Uint8Array(s),c=new Uint8Array(s),h={},d=null,p=null,f=null,m=null,v=null,g=null,y=null,x=null,b=null,_=!1,w=null,S=null,T=null,E=null,M=null,A=e.getParameter(35661),P=!1,L=0,C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(L=parseFloat(/^WebGL\ ([0-9])/.exec(C)[1]),P=L>=1):-1!==C.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(C)[1]),P=L>=2);var O=null,R={},N=new Wo,F=new Wo;function I(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var k={};function D(n,i){(l[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),c[n]!==i)&&((r?e:t.get("ANGLE_instanced_arrays"))[r?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),c[n]=i)}function z(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function U(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}k[3553]=I(3553,3553,1),k[34067]=I(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),z(2929),o.setFunc(ur),V(!1),W(_n),z(2884),H(zn);var j={[Vn]:32774,[Wn]:32778,[Xn]:32779};if(r)j[Yn]=32775,j[qn]=32776;else{var B=t.get("EXT_blend_minmax");null!==B&&(j[Yn]=B.MIN_EXT,j[qn]=B.MAX_EXT)}var G={[Jn]:0,[Qn]:1,[Zn]:768,[Kn]:770,[or]:776,[rr]:774,[tr]:772,[$n]:769,[er]:771,[ir]:775,[nr]:773};function H(t,n,r,i,o,a,s,l){if(t!==zn){if(p||(z(3042),p=!0),t===Hn)o=o||n,a=a||r,s=s||i,n===m&&o===y||(e.blendEquationSeparate(j[n],j[o]),m=n,y=o),r===v&&i===g&&a===x&&s===b||(e.blendFuncSeparate(G[r],G[i],G[a],G[s]),v=r,g=i,x=a,b=s),f=t,_=null;else if(t!==f||l!==_){if(m===Vn&&y===Vn||(e.blendEquation(32774),m=Vn,y=Vn),l)switch(t){case Un:e.blendFuncSeparate(1,771,1,771);break;case jn:e.blendFunc(1,1);break;case Bn:e.blendFuncSeparate(0,0,769,771);break;case Gn:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Un:e.blendFuncSeparate(770,771,1,771);break;case jn:e.blendFunc(770,1);break;case Bn:e.blendFunc(0,769);break;case Gn:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,g=null,x=null,b=null,f=t,_=l}}else p&&(U(3042),p=!1)}function V(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function W(t){t!==bn?(z(2884),t!==S&&(t===_n?e.cullFace(1029):t===wn?e.cullFace(1028):e.cullFace(1032))):U(2884),S=t}function X(t,n,r){t?(z(32823),E===n&&M===r||(e.polygonOffset(n,r),E=n,M=r)):U(32823)}function Y(t){void 0===t&&(t=33984+A-1),O!==t&&(e.activeTexture(t),O=t)}return{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){D(e,0)},enableAttributeAndDivisor:D,disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==l[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:z,disable:U,useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:H,setMaterial:function(e,t){e.side===Rn?U(2884):z(2884);var n=e.side===On;t&&(n=!n),V(n),e.blending===Un&&!1===e.transparent?H(zn):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);var r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:V,setCullFace:W,setLineWidth:function(t){t!==T&&(P&&e.lineWidth(t),T=t)},setPolygonOffset:X,setScissorTest:function(e){e?z(3089):U(3089)},activeTexture:Y,bindTexture:function(t,n){null===O&&Y();var r=R[O];void 0===r&&(r={type:void 0,texture:void 0},R[O]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||k[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=R[O];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);h={},O=null,R={},d=null,f=null,w=null,S=null,i.reset(),o.reset(),a.reset()}}}function Sc(e,t,n,r,i,o,a){var s,l=i.isWebGL2,u=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,p=new WeakMap,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?Uo.floorPowerOfTwo:Math.floor,a=o(i*e.width),l=o(i*e.height);void 0===s&&(s=m(a,l));var u=n?m(a,l):s;return u.width=a,u.height=l,u.getContext("2d").drawImage(e,0,0,a,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+l+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return Uo.isPowerOfTwo(e.width)&&Uo.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==Fr&&e.minFilter!==Ur}function x(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function b(n,r,i){if(!1===l)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325===o||33326===o||34842===o||34836===o?t.get("EXT_color_buffer_float"):34843!==o&&34837!==o||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),o}function _(e){return e===Fr||e===Ir||e===Dr?9728:9729}function w(t){var n=t.target;n.removeEventListener("dispose",w),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&p.delete(n),a.memory.textures--}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);if(t.isWebGLMultiviewRenderTarget){e.deleteTexture(n.__webglColorTexture),e.deleteTexture(n.__webglDepthStencilTexture),a.memory.textures-=2;o=0;for(var s=n.__webglViewFramebuffers.length;o<s;o++)e.deleteFramebuffer(n.__webglViewFramebuffers[o])}r.remove(t.texture),r.remove(t)}(n),a.memory.textures--}var T=0;function E(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=a.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void R(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function M(t,i){if(6===t.image.length){var a=r.get(t);if(t.version>0&&a.__version!==t.version){O(a,t),n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),u=t.image[0]&&t.image[0].isDataTexture,h=[],d=0;d<6;d++)h[d]=s||u?u?t.image[d].image:t.image[d]:v(t.image[d],!1,!0,c);var p,f=h[0],m=g(f)||l,_=o.convert(t.format),w=o.convert(t.type),S=b(t.internalFormat,_,w);if(C(34067,t,m),s){for(d=0;d<6;d++){p=h[d].mipmaps;for(var T=0;T<p.length;T++){var E=p[T];t.format!==ii&&t.format!==ri?null!==_?n.compressedTexImage2D(34069+d,T,S,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+d,T,S,E.width,E.height,0,_,w,E.data)}}a.__maxMipLevel=p.length-1}else{p=t.mipmaps;for(d=0;d<6;d++)if(u){n.texImage2D(34069+d,0,S,h[d].width,h[d].height,0,_,w,h[d].data);for(T=0;T<p.length;T++){var M=(E=p[T]).image[d].image;n.texImage2D(34069+d,T+1,S,M.width,M.height,0,_,w,M.data)}}else{n.texImage2D(34069+d,0,S,_,w,h[d]);for(T=0;T<p.length;T++){E=p[T];n.texImage2D(34069+d,T+1,S,_,w,E.image[d])}}a.__maxMipLevel=p.length}y(t,m)&&x(34067,t,f.width,f.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture)}}function A(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}var P={[Or]:10497,[Rr]:33071,[Nr]:33648},L={[Fr]:9728,[Ir]:9984,[Dr]:9986,[Ur]:9729,[jr]:9985,[Gr]:9987};function C(n,o,a){a?(e.texParameteri(n,10242,P[o.wrapS]),e.texParameteri(n,10243,P[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,P[o.wrapR]),e.texParameteri(n,10240,L[o.magFilter]),e.texParameteri(n,10241,L[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===Rr&&o.wrapT===Rr||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,_(o.magFilter)),e.texParameteri(n,10241,_(o.minFilter)),o.minFilter!==Fr&&o.minFilter!==Ur&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(o.type===Qr&&null===t.get("OES_texture_float_linear"))return;if(o.type===Zr&&null===(l||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function O(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),a.memory.textures++)}function R(t,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),O(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var s=function(e){return!l&&(e.wrapS!==Rr||e.wrapT!==Rr||e.minFilter!==Fr&&e.minFilter!==Ur)}(r)&&!1===g(r.image),u=v(r.image,s,!1,h),c=g(u)||l,d=o.convert(r.format),p=o.convert(r.type),f=b(r.internalFormat,d,p);C(a,r,c);var m,_=r.mipmaps;if(r.isDepthTexture){if(f=6402,r.type===Qr){if(!1===l)throw new Error("Float Depth Texture only supported in WebGL2.0");f=36012}else l&&(f=33189);r.format===li&&6402===f&&r.type!==Yr&&r.type!==Jr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Yr,p=o.convert(r.type)),r.format===ui&&(f=34041,r.type!==ti&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ti,p=o.convert(r.type))),n.texImage2D(3553,0,f,u.width,u.height,0,d,p,null)}else if(r.isDataTexture)if(_.length>0&&c){for(var w=0,S=_.length;w<S;w++)m=_[w],n.texImage2D(3553,w,f,m.width,m.height,0,d,p,m.data);r.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,f,u.width,u.height,0,d,p,u.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(w=0,S=_.length;w<S;w++)m=_[w],r.format!==ii&&r.format!==ri?null!==d?n.compressedTexImage2D(3553,w,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,w,f,m.width,m.height,0,d,p,m.data);t.__maxMipLevel=_.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,f,u.width,u.height,u.depth,0,d,p,u.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,f,u.width,u.height,u.depth,0,d,p,u.data),t.__maxMipLevel=0;else if(_.length>0&&c){for(w=0,S=_.length;w<S;w++)m=_[w],n.texImage2D(3553,w,f,d,p,m);r.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,f,d,p,u),t.__maxMipLevel=0;y(r,c)&&x(a,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function N(t,i,a,s){var l=o.convert(i.texture.format),u=o.convert(i.texture.type),c=b(i.texture.internalFormat,l,u);n.texImage2D(s,0,c,i.width,i.height,0,l,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function F(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(r){var i=k(n);e.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=k(n);e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var a=o.convert(n.texture.format),s=o.convert(n.texture.type),l=b(n.texture.internalFormat,a,s);if(r){i=k(n);e.renderbufferStorageMultisample(36161,i,l,n.width,n.height)}else e.renderbufferStorage(36161,l,n.width,n.height)}e.bindRenderbuffer(36161,null)}function I(t){var n=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),E(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===li)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==ui)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),F(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),F(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function k(e){return l&&e.isWebGLMultisampleRenderTarget?Math.min(d,e.samples):0}var D=!1,z=!1;this.allocateTextureUnit=function(){var e=T;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=M,this.setTextureCubeDynamic=A,this.setupRenderTarget=function(i){var s=r.get(i),u=r.get(i.texture);i.addEventListener("dispose",S),u.__webglTexture=e.createTexture(),a.memory.textures++;var c=!0===i.isWebGLCubeRenderTarget,h=!0===i.isWebGLMultisampleRenderTarget,d=!0===i.isWebGLMultiviewRenderTarget,p=g(i)||l;if(c){s.__webglFramebuffer=[];for(var f=0;f<6;f++)s.__webglFramebuffer[f]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),h)if(l){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var m=o.convert(i.texture.format),v=o.convert(i.texture.type),_=b(i.texture.internalFormat,m,v),w=k(i);e.renderbufferStorageMultisample(36161,w,_,i.width,i.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),i.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),F(s.__webglDepthRenderbuffer,i,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(d){var T=i.width,E=i.height,M=i.numViews;e.bindFramebuffer(36160,s.__webglFramebuffer);var A=t.get("OVR_multiview2");a.memory.textures+=2;var P=e.createTexture();e.bindTexture(35866,P),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,32856,T,E,M,0,6408,5121,null),A.framebufferTextureMultiviewOVR(36160,36064,P,0,0,M);var L=e.createTexture();e.bindTexture(35866,L),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,35056,T,E,M,0,34041,34042,null),A.framebufferTextureMultiviewOVR(36160,33306,L,0,0,M);var O=new Array(M);for(f=0;f<M;++f)O[f]=e.createFramebuffer(),e.bindFramebuffer(36160,O[f]),e.framebufferTextureLayer(36160,36064,P,0,f);s.__webglColorTexture=P,s.__webglDepthStencilTexture=L,s.__webglViewFramebuffers=O,e.bindFramebuffer(36160,null),e.bindTexture(35866,null)}if(c){n.bindTexture(34067,u.__webglTexture),C(34067,i.texture,p);for(f=0;f<6;f++)N(s.__webglFramebuffer[f],i,36064,34069+f);y(i.texture,p)&&x(34067,i.texture,i.width,i.height),n.bindTexture(34067,null)}else d||(n.bindTexture(3553,u.__webglTexture),C(3553,i.texture,p),N(s.__webglFramebuffer,i,36064,3553),y(i.texture,p)&&x(3553,i.texture,i.width,i.height),n.bindTexture(3553,null));i.depthBuffer&&I(i)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(y(t,g(e)||l)){var i=e.isWebGLCubeRenderTarget?34067:3553,o=r.get(t).__webglTexture;n.bindTexture(i,o),x(i,t,e.width,e.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(l){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var i=t.width,o=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?M(e,t):A(e,t)}}function Tc(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===Vr)return 5121;if(e===$r)return 32819;if(e===Kr)return 32820;if(e===ei)return 33635;if(e===Wr)return 5120;if(e===Xr)return 5122;if(e===Yr)return 5123;if(e===qr)return 5124;if(e===Jr)return 5125;if(e===Qr)return 5126;if(e===Zr)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===ni)return 6406;if(e===ri)return 6407;if(e===ii)return 6408;if(e===oi)return 6409;if(e===ai)return 6410;if(e===li)return 6402;if(e===ui)return 34041;if(e===ci)return 6403;if(e===hi)return 36244;if(e===di)return 33319;if(e===pi)return 33320;if(e===fi)return 36248;if(e===mi)return 36249;if(e===vi||e===gi||e===yi||e===xi){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===vi)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===gi)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===yi)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===xi)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===bi||e===_i||e===wi||e===Si){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===bi)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===_i)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===wi)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Si)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return e===Ti?null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null:e===Ei||e===Mi||e===Ai||e===Pi||e===Li||e===Ci||e===Oi||e===Ri||e===Ni||e===Fi||e===Ii||e===ki||e===Di||e===zi?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===ti?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Ec(e,t,n,r){Xo.call(this,e,t,r),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}function Mc(e,t){var n,r,i,o,a,s,l,u=e.extensions,c=e.properties,h=0;function d(e){return e.isArrayCamera?e.cameras:(a[0]=e,a)}this.isAvailable=function(){if(void 0===l){var e=u.get("OVR_multiview2");if(l=null!==e&&!1===t.getContextAttributes().antialias){h=t.getParameter(e.MAX_VIEWS_OVR),n=new Ec(0,0,2),s=new jo,o=[],i=[],a=[];for(var r=0;r<h;r++)o[r]=new oa,i[r]=new Bo}}return l},this.attachCamera=function(t){!1!==function(e){if(void 0===e.isArrayCamera)return!0;var t=e.cameras;if(t.length>h)return!1;for(var n=1,r=t.length;n<r;n++)if(t[0].viewport.z!==t[n].viewport.z||t[0].viewport.w!==t[n].viewport.w)return!1;return!0}(t)&&(r=e.getRenderTarget(),function(t){if(r?s.set(r.width,r.height):e.getDrawingBufferSize(s),t.isArrayCamera){var i=t.cameras[0].viewport;n.setSize(i.z,i.w),n.setNumViews(t.cameras.length)}else n.setSize(s.x,s.y),n.setNumViews(2)}(t),e.setRenderTarget(n))},this.detachCamera=function(i){n===e.getRenderTarget()&&(e.setRenderTarget(r),function(e){var r=n,i=r.numViews,o=c.get(r).__webglViewFramebuffers,a=r.width,l=r.height;if(e.isArrayCamera)for(var u=0;u<i;u++){var h=e.cameras[u].viewport,d=h.x,p=h.y,f=d+h.z,m=p+h.w;t.bindFramebuffer(36008,o[u]),t.blitFramebuffer(0,0,a,l,d,p,f,m,16384,9728)}else t.bindFramebuffer(36008,o[0]),t.blitFramebuffer(0,0,a,l,0,0,s.x,s.y,16384,9728)}(i))},this.updateCameraProjectionMatricesUniform=function(e,n){for(var r=d(e),i=0;i<r.length;i++)o[i].copy(r[i].projectionMatrix);n.setValue(t,"projectionMatrices",o)},this.updateCameraViewMatricesUniform=function(e,n){for(var r=d(e),i=0;i<r.length;i++)o[i].copy(r[i].matrixWorldInverse);n.setValue(t,"viewMatrices",o)},this.updateObjectMatricesUniforms=function(e,n,r){for(var a=d(n),s=0;s<a.length;s++)o[s].multiplyMatrices(a[s].matrixWorldInverse,e.matrixWorld),i[s].getNormalMatrix(o[s]);r.setValue(t,"modelViewMatrices",o),r.setValue(t,"normalMatrices",i)}}function Ac(e){_l.call(this),this.cameras=e||[]}function Pc(){Sa.call(this),this.type="Group"}function Lc(e,t){var n=this,r=null,i=null,o="local-floor",a=null,s=[],l=new Map,u=new _l;u.layers.enable(1),u.viewport=new Wo;var c=new _l;c.layers.enable(2),c.viewport=new Wo;var h=new Ac([u,c]);h.layers.enable(1),h.layers.enable(2);var d=null,p=null;function f(e){var t=l.get(e.inputSource);t&&(t.targetRay&&t.targetRay.dispatchEvent({type:e.type}),t.grip&&t.grip.dispatchEvent({type:e.type}))}function m(){l.forEach((function(e,t){e.targetRay&&(e.targetRay.dispatchEvent({type:"disconnected",data:t}),e.targetRay.visible=!1),e.grip&&(e.grip.dispatchEvent({type:"disconnected",data:t}),e.grip.visible=!1)})),l.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),w.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function v(e){i=e,w.setContext(r),w.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function g(e){for(var t=r.inputSources,n=0;n<s.length;n++)l.set(t[n],s[n]);for(n=0;n<e.removed.length;n++){var i=e.removed[n];(o=l.get(i))&&(o.targetRay&&o.targetRay.dispatchEvent({type:"disconnected",data:i}),o.grip&&o.grip.dispatchEvent({type:"disconnected",data:i}),l.delete(i))}for(n=0;n<e.added.length;n++){var o;i=e.added[n];(o=l.get(i))&&(o.targetRay&&o.targetRay.dispatchEvent({type:"connected",data:i}),o.grip&&o.grip.dispatchEvent({type:"connected",data:i}))}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=s[e];return void 0===t&&(t={},s[e]=t),void 0===t.targetRay&&(t.targetRay=new Pc,t.targetRay.matrixAutoUpdate=!1,t.targetRay.visible=!1),t.targetRay},this.getControllerGrip=function(e){var t=s[e];return void 0===t&&(t={},s[e]=t),void 0===t.grip&&(t.grip=new Pc,t.grip.matrixAutoUpdate=!1,t.grip.visible=!1),t.grip},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){o=e},this.getReferenceSpace=function(){return i},this.getSession=function(){return r},this.setSession=function(e){if(null!==(r=e)){r.addEventListener("select",f),r.addEventListener("selectstart",f),r.addEventListener("selectend",f),r.addEventListener("squeeze",f),r.addEventListener("squeezestart",f),r.addEventListener("squeezeend",f),r.addEventListener("end",m);var n=t.getContextAttributes(),i={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil},a=new XRWebGLLayer(r,t,i);r.updateRenderState({baseLayer:a}),r.requestReferenceSpace(o).then(v),r.addEventListener("inputsourceschange",g)}};var y=new Zo,x=new Zo;function b(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){h.near=c.near=u.near=e.near,h.far=c.far=u.far=e.far,d===h.near&&p===h.far||(r.updateRenderState({depthNear:h.near,depthFar:h.far}),d=h.near,p=h.far);var t=e.parent,n=h.cameras;b(h,t);for(var i=0;i<n.length;i++)b(n[i],t);e.matrixWorld.copy(h.matrixWorld);for(var o=e.children,a=(i=0,o.length);i<a;i++)o[i].updateMatrixWorld(!0);return function(e,t,n){y.setFromMatrixPosition(t.matrixWorld),x.setFromMatrixPosition(n.matrixWorld);var r=y.distanceTo(x),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*c,p=a*h,f=r/(-c+h),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=a+f,g=s+f,b=d-m,_=p+(r-m),w=l*s/g*v,S=u*s/g*v;e.projectionMatrix.makePerspective(b,_,w,S,v,g)}(h,u,c),h};var _=null;var w=new Ll;w.setAnimationLoop((function(t,n){if(null!==(a=n.getViewerPose(i))){var o=a.views,l=r.renderState.baseLayer;e.setFramebuffer(l.framebuffer);for(var u=0;u<o.length;u++){var c=o[u],d=l.getViewport(c),p=h.cameras[u];p.matrix.fromArray(c.transform.matrix),p.projectionMatrix.fromArray(c.projectionMatrix),p.viewport.set(d.x,d.y,d.width,d.height),0===u&&h.matrix.copy(p.matrix)}}var f=r.inputSources;for(u=0;u<s.length;u++){var m=s[u],v=f[u],g=null,y=null;v&&(m.targetRay&&null!==(g=n.getPose(v.targetRaySpace,i))&&(m.targetRay.matrix.fromArray(g.transform.matrix),m.targetRay.matrix.decompose(m.targetRay.position,m.targetRay.rotation,m.targetRay.scale)),m.grip&&v.gripSpace&&null!==(y=n.getPose(v.gripSpace,i))&&(m.grip.matrix.fromArray(y.transform.matrix),m.grip.matrix.decompose(m.grip.position,m.grip.rotation,m.grip.scale))),m.targetRay&&(m.targetRay.visible=null!==g),m.grip&&(m.grip.visible=null!==y)}_&&_(t,n)})),this.setAnimationLoop=function(e){_=e},this.dispose=function(){}}function Cc(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Zi,this.physicallyCorrectLights=!1,this.toneMapping=yr,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,f,m,v,g,y,x,b,_,w,S,T,E,M,A,P,L,C,O=this,R=!1,N=null,F=0,I=0,k=null,D=null,z=-1,U={geometry:null,program:null,wireframe:!1},j=null,B=null,G=new Wo,H=new Wo,V=null,W=t.width,X=t.height,Y=1,q=null,J=null,Q=new Wo(0,0,W,X),Z=new Wo(0,0,W,X),$=!1,K=new Al,ee=new zl,te=!1,ne=!1,re=new oa,ie=new Zo;function oe(){return null===k?Y:1}try{var ae={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(t.addEventListener("webglcontextlost",he,!1),t.addEventListener("webglcontextrestored",de,!1),null===(p=n||t.getContext("webgl",ae)||t.getContext("experimental-webgl",ae)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function se(){f=new Ul(p),!1===(m=new Dl(p,f,e)).isWebGL2&&(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),C=new Tc(p,f,m),(v=new wc(p,f,m)).scissor(H.copy(Z).multiplyScalar(Y).floor()),v.viewport(G.copy(Q).multiplyScalar(Y).floor()),g=new Gl(p),y=new lc,x=new Sc(p,f,v,y,m,C,g),b=new Cl(p,m),_=new jl(p,b,g),w=new Wl(p,_,b,g),A=new Vl(p),S=new sc(O,f,m),T=new dc,E=new yc,M=new Il(O,v,w,s),P=new kl(p,f,g,m),L=new Bl(p,f,g,m),g.programs=S.programs,O.capabilities=m,O.extensions=f,O.properties=y,O.renderLists=T,O.state=v,O.info=g}se();var le=new Lc(O,p);this.xr=le;var ue=new Mc(O,p),ce=new _c(O,w,m.maxTextureSize);function he(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function de(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1,se()}function pe(e){var t=e.target;t.removeEventListener("dispose",pe),function(e){fe(e),y.remove(e)}(t)}function fe(e){var t=y.get(e).program;e.program=void 0,void 0!==t&&S.releaseProgram(t)}this.shadowMap=ce,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(W,X,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new jo),e.set(W,X)},this.setSize=function(e,n,r){le.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=e,X=n,t.width=Math.floor(e*Y),t.height=Math.floor(n*Y),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new jo),e.set(W*Y,X*Y).floor()},this.setDrawingBufferSize=function(e,n,r){W=e,X=n,Y=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Wo),e.copy(G)},this.getViewport=function(e){return e.copy(Q)},this.setViewport=function(e,t,n,r){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,r),v.viewport(G.copy(Q).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(Z)},this.setScissor=function(e,t,n,r){e.isVector4?Z.set(e.x,e.y,e.z,e.w):Z.set(e,t,n,r),v.scissor(H.copy(Z).multiplyScalar(Y).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(e){v.setScissorTest($=e)},this.setOpaqueSort=function(e){q=e},this.setTransparentSort=function(e){J=e},this.getClearColor=function(){return M.getClearColor()},this.setClearColor=function(){M.setClearColor.apply(M,arguments)},this.getClearAlpha=function(){return M.getClearAlpha()},this.setClearAlpha=function(){M.setClearAlpha.apply(M,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",he,!1),t.removeEventListener("webglcontextrestored",de,!1),T.dispose(),E.dispose(),y.dispose(),w.dispose(),le.dispose(),ge.stop()},this.renderBufferImmediate=function(e,t){v.initAttributes();var n=y.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var r=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,e.positionArray,35048),v.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,e.normalArray,35048),v.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,e.uvArray,35048),v.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,e.colorArray,35048),v.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0};var me=new Ta;this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=me);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=we(e,t,r,i);v.setMaterial(r,a);var l=!1;U.geometry===n.id&&U.program===s.id&&U.wireframe===(!0===r.wireframe)||(U.geometry=n.id,U.program=s.id,U.wireframe=!0===r.wireframe,l=!0),(r.morphTargets||r.morphNormals)&&(A.update(i,n,r,s),l=!0);var u=n.index,c=n.attributes.position;if(null===u){if(void 0===c||0===c.count)return}else if(0===u.count)return;var h,d=1;!0===r.wireframe&&(u=_.getWireframeAttribute(n),d=2);var g=P;null!==u&&(h=b.get(u),(g=L).setIndex(h)),l&&(!function(e,t,n,r){if(!1===m.isWebGL2&&(e.isInstancedMesh||t.isInstancedBufferGeometry)&&null===f.get("ANGLE_instanced_arrays"))return;v.initAttributes();var i=t.attributes,o=r.getAttributes(),a=n.defaultAttributeValues;for(var s in o){var l=o[s];if(l>=0){var u=i[s];if(void 0!==u){var c=u.normalized,h=u.itemSize;if(void 0===(S=b.get(u)))continue;var d=S.buffer,g=S.type,y=S.bytesPerElement;if(u.isInterleavedBufferAttribute){var x=u.data,_=x.stride,w=u.offset;x&&x.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(l,x.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=x.meshPerAttribute*x.count)):v.enableAttribute(l),p.bindBuffer(34962,d),p.vertexAttribPointer(l,h,g,c,_*y,w*y)}else u.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(l,u.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=u.meshPerAttribute*u.count)):v.enableAttribute(l),p.bindBuffer(34962,d),p.vertexAttribPointer(l,h,g,c,0,0)}else if("instanceMatrix"===s){var S;if(void 0===(S=b.get(e.instanceMatrix)))continue;d=S.buffer,g=S.type;v.enableAttributeAndDivisor(l+0,1),v.enableAttributeAndDivisor(l+1,1),v.enableAttributeAndDivisor(l+2,1),v.enableAttributeAndDivisor(l+3,1),p.bindBuffer(34962,d),p.vertexAttribPointer(l+0,4,g,!1,64,0),p.vertexAttribPointer(l+1,4,g,!1,64,16),p.vertexAttribPointer(l+2,4,g,!1,64,32),p.vertexAttribPointer(l+3,4,g,!1,64,48)}else if(void 0!==a){var T=a[s];if(void 0!==T)switch(T.length){case 2:p.vertexAttrib2fv(l,T);break;case 3:p.vertexAttrib3fv(l,T);break;case 4:p.vertexAttrib4fv(l,T);break;default:p.vertexAttrib1fv(l,T)}}}}v.disableUnusedAttributes()}(i,n,r,s),null!==u&&p.bindBuffer(34963,h.buffer));var y=null!==u?u.count:c.count,x=n.drawRange.start*d,w=n.drawRange.count*d,S=null!==o?o.start*d:0,T=null!==o?o.count*d:1/0,E=Math.max(x,S),M=Math.min(y,x+w,S+T)-1,C=Math.max(0,M-E+1);if(0!==C){if(i.isMesh)!0===r.wireframe?(v.setLineWidth(r.wireframeLinewidth*oe()),g.setMode(1)):g.setMode(4);else if(i.isLine){var O=r.linewidth;void 0===O&&(O=1),v.setLineWidth(O*oe()),i.isLineSegments?g.setMode(1):i.isLineLoop?g.setMode(2):g.setMode(3)}else i.isPoints?g.setMode(0):i.isSprite&&g.setMode(4);i.isInstancedMesh?g.renderInstances(n,E,C,i.count):n.isInstancedBufferGeometry?g.renderInstances(n,E,C,n.maxInstancedCount):g.render(E,C)}},this.compile=function(e,t){(d=E.get(e,t)).init(),e.traverse((function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t);var n={};e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)t.material[r].uuid in n==!1&&(_e(t.material[r],e,t),n[t.material[r].uuid]=!0);else t.material.uuid in n==!1&&(_e(t.material,e,t),n[t.material.uuid]=!0)}))};var ve=null;var ge=new Ll;function ye(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||K.intersectsSprite(e)){r&&ie.setFromMatrixPosition(e.matrixWorld).applyMatrix4(re);var i=w.update(e);(o=e.material).visible&&h.push(e,i,o,n,ie.z,null)}}else if(e.isImmediateRenderObject)r&&ie.setFromMatrixPosition(e.matrixWorld).applyMatrix4(re),h.push(e,null,e.material,n,ie.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==g.render.frame&&(e.skeleton.update(),e.skeleton.frame=g.render.frame),!e.frustumCulled||K.intersectsObject(e))){r&&ie.setFromMatrixPosition(e.matrixWorld).applyMatrix4(re);i=w.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,l=a.length;s<l;s++){var u=a[s],c=o[u.materialIndex];c&&c.visible&&h.push(e,i,c,n,ie.z,u)}else o.visible&&h.push(e,i,o,n,ie.z,null)}var p=e.children;for(s=0,l=p.length;s<l;s++)ye(p[s],t,n,r)}}function xe(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,l=a.geometry,u=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera)if(B=n,le.enabled&&ue.isAvailable())be(s,t,n,l,u,c);else for(var h=n.cameras,p=0,f=h.length;p<f;p++){var m=h[p];s.layers.test(m.layers)&&(v.viewport(G.copy(m.viewport)),d.setupLights(m),be(s,t,m,l,u,c))}else B=null,be(s,t,n,l,u,c)}}function be(e,t,n,r,i,o){if(e.onBeforeRender(O,t,n,r,i,o),d=E.get(t,B||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=we(n,t,i,e);v.setMaterial(i),U.geometry=null,U.program=null,U.wireframe=!1,function(e,t){e.render((function(e){O.renderBufferImmediate(e,t)}))}(e,a)}else O.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(O,t,n,r,i,o),d=E.get(t,B||n)}function _e(e,t,n){var r=y.get(e),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=S.getParameters(e,i.state,o,t,ee.numPlanes,ee.numIntersection,n),l=S.getProgramCacheKey(s),u=r.program,c=!0;if(void 0===u)e.addEventListener("dispose",pe);else if(u.cacheKey!==l)fe(e);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,c=!1;else{if(void 0!==s.shaderID)return;c=!1}c&&(u=S.acquireProgram(s,l),r.program=u,r.uniforms=s.uniforms,r.environment=e.isMeshStandardMaterial?t.environment:null,r.outputEncoding=O.outputEncoding,e.program=u);var h=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<O.maxMorphTargets;p++)h["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(p=0;p<O.maxMorphNormals;p++)h["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var f=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ee.numPlanes,r.numIntersection=ee.numIntersection,f.clippingPlanes=ee.uniform),r.fog=t.fog,r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.spotLights.value=i.state.spot,f.rectAreaLights.value=i.state.rectArea,f.pointLights.value=i.state.point,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),v=Hu.seqWithValue(m.seq,f);r.uniformsList=v}function we(e,t,n,r){x.resetTextureUnits();var i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=y.get(n),s=d.state.lights;if(te&&(ne||e!==j)){var l=e===j&&n.id===z;ee.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,a,l)}n.version===a.__version?void 0===a.program||n.fog&&a.fog!==i||a.environment!==o||a.needsLights&&a.lightsStateVersion!==s.state.version?_e(n,t,r):void 0===a.numClippingPlanes||a.numClippingPlanes===ee.numPlanes&&a.numIntersection===ee.numIntersection?a.outputEncoding!==O.outputEncoding&&_e(n,t,r):_e(n,t,r):(_e(n,t,r),a.__version=n.version);var u,c,h=!1,f=!1,g=!1,b=a.program,_=b.getUniforms(),w=a.uniforms;if(v.useProgram(b.program)&&(h=!0,f=!0,g=!0),n.id!==z&&(z=n.id,f=!0),h||j!==e){if(b.numMultiviewViews>0?ue.updateCameraProjectionMatricesUniform(e,_):_.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&_.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),j!==e&&(j=e,f=!0,g=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var S=_.map.cameraPosition;void 0!==S&&S.setValue(p,ie.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&_.setValue(p,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&(b.numMultiviewViews>0?ue.updateCameraViewMatricesUniform(e,_):_.setValue(p,"viewMatrix",e.matrixWorldInverse))}if(n.skinning){_.setOptional(p,r,"bindMatrix"),_.setOptional(p,r,"bindMatrixInverse");var T=r.skeleton;if(T){var E=T.bones;if(m.floatVertexTextures){if(void 0===T.boneTexture){var M=Math.sqrt(4*E.length);M=Uo.ceilPowerOfTwo(M),M=Math.max(M,4);var A=new Float32Array(M*M*4);A.set(T.boneMatrices);var P=new Tl(A,M,M,ii,Qr);T.boneMatrices=A,T.boneTexture=P,T.boneTextureSize=M}_.setValue(p,"boneTexture",T.boneTexture,x),_.setValue(p,"boneTextureSize",T.boneTextureSize)}else _.setOptional(p,T,"boneMatrices")}}return(f||a.receiveShadow!==r.receiveShadow)&&(a.receiveShadow=r.receiveShadow,_.setValue(p,"receiveShadow",r.receiveShadow)),f&&(_.setValue(p,"toneMappingExposure",O.toneMappingExposure),_.setValue(p,"toneMappingWhitePoint",O.toneMappingWhitePoint),a.needsLights&&(c=g,(u=w).ambientLightColor.needsUpdate=c,u.lightProbe.needsUpdate=c,u.directionalLights.needsUpdate=c,u.pointLights.needsUpdate=c,u.spotLights.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),i&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(w,i),n.isMeshBasicMaterial?Se(w,n):n.isMeshLambertMaterial?(Se(w,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(w,n)):n.isMeshToonMaterial?(Se(w,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===On&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===On&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshPhongMaterial?(Se(w,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===On&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===On&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshStandardMaterial?(Se(w,n,o),n.isMeshPhysicalMaterial?function(e,t,n){Te(e,t,n),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===On&&e.clearcoatNormalScale.value.negate());e.transparency.value=t.transparency}(w,n,o):Te(w,n,o)):n.isMeshMatcapMaterial?(Se(w,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===On&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===On&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshDepthMaterial?(Se(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isMeshDistanceMaterial?(Se(w,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(w,n)):n.isMeshNormalMaterial?(Se(w,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===On&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===On&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(w,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(w,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(w,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Y,e.scale.value=.5*X,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(w,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(w,n):n.isShadowMaterial&&(w.color.value.copy(n.color),w.opacity.value=n.opacity),void 0!==w.ltc_1&&(w.ltc_1.value=Pl.LTC_1),void 0!==w.ltc_2&&(w.ltc_2.value=Pl.LTC_2),Hu.upload(p,a.uniformsList,w,x),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Hu.upload(p,a.uniformsList,w,x),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&_.setValue(p,"center",r.center),b.numMultiviewViews>0?ue.updateObjectMatricesUniforms(r,e,_):(_.setValue(p,"modelViewMatrix",r.modelViewMatrix),_.setValue(p,"normalMatrix",r.normalMatrix)),_.setValue(p,"modelMatrix",r.matrixWorld),b}function Se(e,t,n){e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap);var r,i,o=t.envMap||n;o&&(e.envMap.value=o,e.flipEnvMap.value=o.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=y.get(o).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),t.aoMap?i=t.aoMap:t.lightMap&&(i=t.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function Te(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===On&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===On&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}ge.setAnimationLoop((function(e){le.isPresenting||ve&&ve(e)})),"undefined"!=typeof window&&ge.setContext(window),this.setAnimationLoop=function(e){ve=e,le.setAnimationLoop(e),ge.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!R){U.geometry=null,U.program=null,U.wireframe=!1,z=-1,j=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),le.enabled&&le.isPresenting&&(t=le.getCamera(t)),(d=E.get(e,t)).init(),e.onBeforeRender(O,e,t,n||k),re.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),K.setFromProjectionMatrix(re),ne=this.localClippingEnabled,te=ee.init(this.clippingPlanes,ne,t),(h=T.get(e,t)).init(),ye(e,t,0,O.sortObjects),!0===O.sortObjects&&h.sort(q,J),te&&ee.beginShadows();var i=d.state.shadowsArray;ce.render(i,e,t),d.setupLights(t),te&&ee.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),le.enabled&&ue.isAvailable()&&ue.attachCamera(t),M.render(h,e,t,r);var o=h.opaque,a=h.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&xe(o,e,t,s),a.length&&xe(a,e,t,s)}else o.length&&xe(o,e,t),a.length&&xe(a,e,t);e.onAfterRender(O,e,t),null!==k&&(x.updateRenderTargetMipmap(k),x.updateMultisampleRenderTarget(k)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),le.enabled&&ue.isAvailable()&&ue.detachCamera(t),h=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){N!==e&&null===k&&p.bindFramebuffer(36160,e),N=e},this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return k},this.setRenderTarget=function(e,t,n){k=e,F=t,I=n,e&&void 0===y.get(e).__webglFramebuffer&&x.setupRenderTarget(e);var r=N,i=!1;if(e){var o=y.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=o[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?y.get(e).__webglMultisampledFramebuffer:o,G.copy(e.viewport),H.copy(e.scissor),V=e.scissorTest}else G.copy(Q).multiplyScalar(Y).floor(),H.copy(Z).multiplyScalar(Y).floor(),V=$;if(D!==r&&(p.bindFramebuffer(36160,r),D=r),v.viewport(G),v.scissor(H),v.setScissorTest(V),i){var a=y.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=y.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var l=!1;s!==D&&(p.bindFramebuffer(36160,s),l=!0);try{var u=e.texture,c=u.format,h=u.type;if(c!==ii&&C.convert(c)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Vr||C.convert(h)===p.getParameter(35738)||h===Qr&&(m.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||h===Zr&&(m.isWebGL2?f.get("EXT_color_buffer_float"):f.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&p.readPixels(t,n,r,i,C.convert(c),C.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&p.bindFramebuffer(36160,D)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r),a=C.convert(t.format);x.setTexture2D(t,0),p.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),v.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=C.convert(n.format),s=C.convert(n.type);x.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(3553,r||0,e.x,e.y,i,o,a,s,t.image.data):p.texSubImage2D(3553,r||0,e.x,e.y,a,s,t.image),v.unbindTexture()},this.initTexture=function(e){x.setTexture2D(e,0),v.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Oc(e,t){this.name="",this.color=new fs(e),this.density=void 0!==t?t:25e-5}function Rc(e,t,n){this.name="",this.color=new fs(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Nc(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Mo,this.updateRange={offset:0,count:-1},this.version=0}Ec.prototype=Object.assign(Object.create(Xo.prototype),{constructor:Ec,isWebGLMultiviewRenderTarget:!0,copy:function(e){return Xo.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}}),Ac.prototype=Object.assign(Object.create(_l.prototype),{constructor:Ac,isArrayCamera:!0}),Pc.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Pc,isGroup:!0}),Object.assign(Lc.prototype,Io.prototype),Object.assign(Oc.prototype,{isFogExp2:!0,clone:function(){return new Oc(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Rc.prototype,{isFog:!0,clone:function(){return new Rc(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Nc.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Nc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var Fc,Ic=new Zo;function kc(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Dc(e){bs.call(this),this.type="SpriteMaterial",this.color=new fs(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(kc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(kc.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)Ic.x=this.getX(t),Ic.y=this.getY(t),Ic.z=this.getZ(t),Ic.applyMatrix4(e),this.setXYZ(t,Ic.x,Ic.y,Ic.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Dc.prototype=Object.create(bs.prototype),Dc.prototype.constructor=Dc,Dc.prototype.isSpriteMaterial=!0,Dc.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var zc=new Zo,Uc=new Zo,jc=new Zo,Bc=new jo,Gc=new jo,Hc=new oa,Vc=new Zo,Wc=new Zo,Xc=new Zo,Yc=new jo,qc=new jo,Jc=new jo;function Qc(e){if(Sa.call(this),this.type="Sprite",void 0===Fc){Fc=new Gs;var t=new Nc(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Fc.setIndex([0,1,2,0,2,3]),Fc.setAttribute("position",new kc(t,3,0,!1)),Fc.setAttribute("uv",new kc(t,2,3,!1))}this.geometry=Fc,this.material=void 0!==e?e:new Dc,this.center=new jo(.5,.5)}function Zc(e,t,n,r,i,o){Bc.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Gc.x=o*Bc.x-i*Bc.y,Gc.y=i*Bc.x+o*Bc.y):Gc.copy(Bc),e.copy(t),e.x+=Gc.x,e.y+=Gc.y,e.applyMatrix4(Hc)}Qc.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Qc,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Uc.setFromMatrixScale(this.matrixWorld),Hc.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Uc.multiplyScalar(-jc.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;Zc(Vc.set(-.5,-.5,0),jc,o,Uc,n,r),Zc(Wc.set(.5,-.5,0),jc,o,Uc,n,r),Zc(Xc.set(.5,.5,0),jc,o,Uc,n,r),Yc.set(0,0),qc.set(1,0),Jc.set(1,1);var a=e.ray.intersectTriangle(Vc,Wc,Xc,!1,zc);if(null!==a||(Zc(Wc.set(-.5,.5,0),jc,o,Uc,n,r),qc.set(0,1),null!==(a=e.ray.intersectTriangle(Vc,Xc,Wc,!1,zc)))){var s=e.ray.origin.distanceTo(zc);s<e.near||s>e.far||t.push({distance:s,point:zc.clone(),uv:cs.getUV(zc,Vc,Wc,Xc,Yc,qc,Jc,new jo),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Sa.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var $c=new Zo,Kc=new Zo;function eh(){Sa.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function th(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),al.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new oa,this.bindMatrixInverse=new oa}eh.prototype=Object.assign(Object.create(Sa.prototype),{constructor:eh,isLOD:!0,copy:function(e){Sa.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){for(var n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){$c.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo($c);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){$c.setFromMatrixPosition(e.matrixWorld),Kc.setFromMatrixPosition(this.matrixWorld);var n=$c.distanceTo(Kc);t[0].object.visible=!0;for(var r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){var t=Sa.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),th.prototype=Object.assign(Object.create(al.prototype),{constructor:th,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Wo,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){al.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var nh=new oa,rh=new oa;function ih(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new oa)}}function oh(){Sa.call(this),this.type="Bone"}Object.assign(ih.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new oa;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:rh;nh.multiplyMatrices(a,t[i]),nh.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new ih(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),oh.prototype=Object.assign(Object.create(Sa.prototype),{constructor:oh,isBone:!0});var ah=new oa,sh=new oa,lh=[],uh=new al;function ch(e,t,n){al.call(this,e,t),this.instanceMatrix=new Ss(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function hh(e){bs.call(this),this.type="LineBasicMaterial",this.color=new fs(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}ch.prototype=Object.assign(Object.create(al.prototype),{constructor:ch,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,r=this.count;if(uh.geometry=this.geometry,uh.material=this.material,void 0!==uh.material)for(var i=0;i<r;i++)this.getMatrixAt(i,ah),sh.multiplyMatrices(n,ah),uh.matrixWorld=sh,uh.raycast(e,lh),lh.length>0&&(lh[0].instanceId=i,lh[0].object=this,t.push(lh[0]),lh.length=0)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),hh.prototype=Object.create(bs.prototype),hh.prototype.constructor=hh,hh.prototype.isLineBasicMaterial=!0,hh.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var dh=new Zo,ph=new Zo,fh=new oa,mh=new Ja,vh=new Ba;function gh(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Sa.call(this),this.type="Line",this.geometry=void 0!==e?e:new Gs,this.material=void 0!==t?t:new hh}gh.prototype=Object.assign(Object.create(Sa.prototype),{constructor:gh,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)dh.fromBufferAttribute(t,r-1),ph.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=dh.distanceTo(ph);e.setAttribute("lineDistance",new Os(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;(n=e.lineDistances)[0]=0;for(r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(e,t){var n=e.linePrecision,r=this.geometry,i=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),vh.copy(r.boundingSphere),vh.applyMatrix4(i),vh.radius+=n,!1!==e.ray.intersectsSphere(vh)){fh.getInverse(i),mh.copy(e.ray).applyMatrix4(fh);var o=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Zo,l=new Zo,u=new Zo,c=new Zo,h=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var d=r.index,p=r.attributes.position.array;if(null!==d)for(var f=d.array,m=0,v=f.length-1;m<v;m+=h){var g=f[m],y=f[m+1];if(s.fromArray(p,3*g),l.fromArray(p,3*y),!(mh.distanceSqToSegment(s,l,c,u)>a))c.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(c))<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,v=p.length/3-1;m<v;m+=h){if(s.fromArray(p,3*m),l.fromArray(p,3*m+3),!(mh.distanceSqToSegment(s,l,c,u)>a))c.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(c))<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(r.isGeometry){var x=r.vertices,b=x.length;for(m=0;m<b-1;m+=h){var _;if(!(mh.distanceSqToSegment(x[m],x[m+1],c,u)>a))c.applyMatrix4(this.matrixWorld),(_=e.ray.origin.distanceTo(c))<e.near||_>e.far||t.push({distance:_,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var yh=new Zo,xh=new Zo;function bh(e,t){gh.call(this,e,t),this.type="LineSegments"}function _h(e,t){gh.call(this,e,t),this.type="LineLoop"}function wh(e){bs.call(this),this.type="PointsMaterial",this.color=new fs(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}bh.prototype=Object.assign(Object.create(gh.prototype),{constructor:bh,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)yh.fromBufferAttribute(t,r),xh.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+yh.distanceTo(xh);e.setAttribute("lineDistance",new Os(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for(n=e.lineDistances,r=0,i=o.length;r<i;r+=2)yh.copy(o[r]),xh.copy(o[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+yh.distanceTo(xh)}return this}}),_h.prototype=Object.assign(Object.create(gh.prototype),{constructor:_h,isLineLoop:!0}),wh.prototype=Object.create(bs.prototype),wh.prototype.constructor=wh,wh.prototype.isPointsMaterial=!0,wh.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Sh=new oa,Th=new Ja,Eh=new Ba,Mh=new Zo;function Ah(e,t){Sa.call(this),this.type="Points",this.geometry=void 0!==e?e:new Gs,this.material=void 0!==t?t:new wh,this.updateMorphTargets()}function Ph(e,t,n,r,i,o,a){var s=Th.distanceSqToPoint(e);if(s<n){var l=new Zo;Th.closestPointToPoint(e,l),l.applyMatrix4(r);var u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:a})}}function Lh(e,t,n,r,i,o,a,s,l){Vo.call(this,e,t,n,r,i,o,a,s,l),this.format=void 0!==a?a:ri,this.minFilter=void 0!==o?o:Ur,this.magFilter=void 0!==i?i:Ur,this.generateMipmaps=!1}function Ch(e,t,n,r,i,o,a,s,l,u,c,h){Vo.call(this,null,o,a,s,l,u,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Oh(e,t,n,r,i,o,a,s,l){Vo.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}function Rh(e,t,n,r,i,o,a,s,l,u){if((u=void 0!==u?u:li)!==li&&u!==ui)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===li&&(n=Yr),void 0===n&&u===ui&&(n=ti),Vo.call(this,null,r,i,o,a,s,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Fr,this.minFilter=void 0!==s?s:Fr,this.flipY=!1,this.generateMipmaps=!1}function Nh(e){Gs.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,l,u,c,h=[],d=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[f[n]],l=v[f[(n+1)%3]],d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===p[u=d[0]+","+d[1]]&&(p[u]={index1:d[0],index2:d[1]})}for(u in p)a=p[u],c=e.vertices[a.index1],h.push(c.x,c.y,c.z),c=e.vertices[a.index2],h.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var g,y,x,b,_,w,S;if(c=new Zo,null!==e.index){for(g=e.attributes.position,y=e.index,0===(x=e.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),i=0,o=x.length;i<o;++i)for(t=_=(b=x[i]).start,r=_+b.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),l=y.getX(t+(n+1)%3),d[0]=Math.min(s,l),d[1]=Math.max(s,l),void 0===p[u=d[0]+","+d[1]]&&(p[u]={index1:d[0],index2:d[1]});for(u in p)a=p[u],c.fromBufferAttribute(g,a.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)w=3*t+n,c.fromBufferAttribute(g,w),h.push(c.x,c.y,c.z),S=3*t+(n+1)%3,c.fromBufferAttribute(g,S),h.push(c.x,c.y,c.z)}this.setAttribute("position",new Os(h,3))}function Fh(e,t,n){pl.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Ih(e,t,n)),this.mergeVertices()}function Ih(e,t,n){Gs.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],l=[],u=1e-5,c=new Zo,h=new Zo,d=new Zo,p=new Zo,f=new Zo;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,h),a.push(h.x,h.y,h.z),g-u>=0?(e(g-u,v,d),p.subVectors(h,d)):(e(g+u,v,d),p.subVectors(d,h)),v-u>=0?(e(g,v-u,d),f.subVectors(h,d)):(e(g,v+u,d),f.subVectors(d,h)),c.crossVectors(p,f).normalize(),s.push(c.x,c.y,c.z),l.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,x=r*m+i+1,b=(r+1)*m+i+1,_=(r+1)*m+i;o.push(y,x,_),o.push(x,b,_)}this.setIndex(o),this.setAttribute("position",new Os(a,3)),this.setAttribute("normal",new Os(s,3)),this.setAttribute("uv",new Os(l,2))}function kh(e,t,n,r){pl.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Dh(e,t,n,r)),this.mergeVertices()}function Dh(e,t,n,r){Gs.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),l=[];for(i=0;i<=a;i++){l[i]=[];var u=e.clone().lerp(n,i/a),c=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)l[i][o]=0===o&&i===a?u:u.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2==0?(s(l[i][d+1]),s(l[i+1][d]),s(l[i][d])):(s(l[i][d+1]),s(l[i+1][d+1]),s(l[i+1][d]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Zo,r=new Zo,i=new Zo,o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new Zo,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new Zo,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=c(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new Zo,t=new Zo,n=new Zo,r=new Zo,a=new jo,s=new jo,l=new jo,h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);var p=c(r);u(a,d+0,e,p),u(s,d+2,t,p),u(l,d+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Os(i,3)),this.setAttribute("normal",new Os(i.slice(),3)),this.setAttribute("uv",new Os(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function zh(e,t){pl.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Uh(e,t)),this.mergeVertices()}function Uh(e,t){Dh.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function jh(e,t){pl.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Bh(e,t)),this.mergeVertices()}function Bh(e,t){Dh.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Gh(e,t){pl.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Hh(e,t)),this.mergeVertices()}function Hh(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Dh.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Vh(e,t){pl.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Wh(e,t)),this.mergeVertices()}function Wh(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Dh.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xh(e,t,n,r,i,o){pl.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Yh(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Yh(e,t,n,r,i){Gs.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new Zo,u=new Zo,c=new jo,h=new Zo,d=[],p=[],f=[],m=[];function v(i){h=e.getPointAt(i/t,h);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var f=s/r*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);u.x=v*a.x+m*c.x,u.y=v*a.y+m*c.y,u.z=v*a.z+m*c.z,u.normalize(),p.push(u.x,u.y,u.z),l.x=h.x+n*u.x,l.y=h.y+n*u.y,l.z=h.z+n*u.z,d.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)v(a);v(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)c.x=a/t,c.y=s/r,f.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(e,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.setAttribute("position",new Os(d,3)),this.setAttribute("normal",new Os(p,3)),this.setAttribute("uv",new Os(f,2))}function qh(e,t,n,r,i,o,a){pl.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Jh(e,t,n,r,i,o)),this.mergeVertices()}function Jh(e,t,n,r,i,o){Gs.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,l=[],u=[],c=[],h=[],d=new Zo,p=new Zo,f=new Zo,m=new Zo,v=new Zo,g=new Zo,y=new Zo;for(a=0;a<=n;++a){var x=a/n*i*Math.PI*2;for(A(x,i,o,e,f),A(x+.01,i,o,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var b=s/r*Math.PI*2,_=-t*Math.cos(b),w=t*Math.sin(b);d.x=f.x+(_*y.x+w*v.x),d.y=f.y+(_*y.y+w*v.y),d.z=f.z+(_*y.z+w*v.z),u.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),c.push(p.x,p.y,p.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var S=(r+1)*(s-1)+(a-1),T=(r+1)*s+(a-1),E=(r+1)*s+a,M=(r+1)*(s-1)+a;l.push(S,T,M),l.push(T,E,M)}function A(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(l),this.setAttribute("position",new Os(u,3)),this.setAttribute("normal",new Os(c,3)),this.setAttribute("uv",new Os(h,2))}function Qh(e,t,n,r,i){pl.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Zh(e,t,n,r,i)),this.mergeVertices()}function Zh(e,t,n,r,i){Gs.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],l=[],u=[],c=[],h=new Zo,d=new Zo,p=new Zo;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var f=a/r*i,m=o/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),l.push(d.x,d.y,d.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),p.subVectors(d,h).normalize(),u.push(p.x,p.y,p.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,x=(r+1)*o+a;s.push(v,g,x),s.push(g,y,x)}this.setIndex(s),this.setAttribute("position",new Os(l,3)),this.setAttribute("normal",new Os(u,3)),this.setAttribute("uv",new Os(c,2))}Ah.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Ah,isPoints:!0,raycast:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Eh.copy(n.boundingSphere),Eh.applyMatrix4(r),Eh.radius+=i,!1!==e.ray.intersectsSphere(Eh)){Sh.getInverse(r),Th.copy(e.ray).applyMatrix4(Sh);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,l=n.attributes.position.array;if(null!==s)for(var u=s.array,c=0,h=u.length;c<h;c++){var d=u[c];Mh.fromArray(l,3*d),Ph(Mh,d,a,r,e,t,this)}else{c=0;for(var p=l.length/3;c<p;c++)Mh.fromArray(l,3*c),Ph(Mh,c,a,r,e,t,this)}}else{var f=n.vertices;for(c=0,p=f.length;c<p;c++)Ph(f[c],c,a,r,e,t,this)}}},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Lh.prototype=Object.assign(Object.create(Vo.prototype),{constructor:Lh,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ch.prototype=Object.create(Vo.prototype),Ch.prototype.constructor=Ch,Ch.prototype.isCompressedTexture=!0,Oh.prototype=Object.create(Vo.prototype),Oh.prototype.constructor=Oh,Oh.prototype.isCanvasTexture=!0,Rh.prototype=Object.create(Vo.prototype),Rh.prototype.constructor=Rh,Rh.prototype.isDepthTexture=!0,Nh.prototype=Object.create(Gs.prototype),Nh.prototype.constructor=Nh,Fh.prototype=Object.create(pl.prototype),Fh.prototype.constructor=Fh,Ih.prototype=Object.create(Gs.prototype),Ih.prototype.constructor=Ih,kh.prototype=Object.create(pl.prototype),kh.prototype.constructor=kh,Dh.prototype=Object.create(Gs.prototype),Dh.prototype.constructor=Dh,zh.prototype=Object.create(pl.prototype),zh.prototype.constructor=zh,Uh.prototype=Object.create(Dh.prototype),Uh.prototype.constructor=Uh,jh.prototype=Object.create(pl.prototype),jh.prototype.constructor=jh,Bh.prototype=Object.create(Dh.prototype),Bh.prototype.constructor=Bh,Gh.prototype=Object.create(pl.prototype),Gh.prototype.constructor=Gh,Hh.prototype=Object.create(Dh.prototype),Hh.prototype.constructor=Hh,Vh.prototype=Object.create(pl.prototype),Vh.prototype.constructor=Vh,Wh.prototype=Object.create(Dh.prototype),Wh.prototype.constructor=Wh,Xh.prototype=Object.create(pl.prototype),Xh.prototype.constructor=Xh,Yh.prototype=Object.create(Gs.prototype),Yh.prototype.constructor=Yh,Yh.prototype.toJSON=function(){var e=Gs.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},qh.prototype=Object.create(pl.prototype),qh.prototype.constructor=qh,Jh.prototype=Object.create(Gs.prototype),Jh.prototype.constructor=Jh,Qh.prototype=Object.create(pl.prototype),Qh.prototype.constructor=Qh,Zh.prototype=Object.create(Gs.prototype),Zh.prototype.constructor=Zh;var $h=function(e,t,n){n=n||2;var r,i,o,a,s,l,u,c=t&&t.length,h=c?t[0]*n:e.length,d=Kh(e,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function(e,t,n,r){var i,o,a,s,l,u=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,(l=Kh(e,a,s,r,!1))===l.next&&(l.steiner=!0),u.push(ud(l));for(u.sort(ad),i=0;i<u.length;i++)sd(u[i],n),n=ed(n,n.next);return n}(e,t,d,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var f=n;f<h;f+=n)(s=e[f])<r&&(r=s),(l=e[f+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return td(d,p,n,r,i,u),p};function Kh(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=gd(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=gd(o,e[o],e[o+1],a);return a&&pd(a,a.next)&&(yd(a),a=a.next),a}function ed(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!pd(r,r.next)&&0!==dd(r.prev,r,r.next))r=r.next;else{if(yd(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function td(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=ld(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?rd(e,r,i,o):nd(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),yd(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?td(e=id(e,t,n),t,n,r,i,o,2):2===a&&od(e,t,n,r,i,o):td(ed(e),t,n,r,i,o,1);break}}}function nd(e){var t=e.prev,n=e,r=e.next;if(dd(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(cd(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&dd(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function rd(e,t,n,r){var i=e.prev,o=e,a=e.next;if(dd(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=ld(s,l,t,n,r),d=ld(u,c,t,n,r),p=e.prevZ,f=e.nextZ;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&cd(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&dd(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&cd(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&dd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&cd(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&dd(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&cd(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&dd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function id(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!pd(i,o)&&fd(i,r,r.next,o)&&md(i,o)&&md(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),yd(r),yd(r.next),r=e=o),r=r.next}while(r!==e);return r}function od(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&hd(a,s)){var l=vd(a,s);return a=ed(a,a.next),l=ed(l,l.next),td(a,t,n,r,i,o),void td(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function ad(e,t){return e.x-t.x}function sd(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,d=1/0;r=n.next;for(;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&cd(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<d||l===d&&r.x>n.x)&&md(r,e)&&(n=r,d=l),r=r.next;return n}(e,t)){var n=vd(t,e);ed(n,n.next)}}function ld(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ud(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function cd(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function hd(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&fd(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&md(e,t)&&md(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function dd(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function pd(e,t){return e.x===t.x&&e.y===t.y}function fd(e,t,n,r){return!!(pd(e,n)&&pd(t,r)||pd(e,r)&&pd(n,t))||dd(e,t,n)>0!=dd(e,t,r)>0&&dd(n,r,e)>0!=dd(n,r,t)>0}function md(e,t){return dd(e.prev,e,e.next)<0?dd(e,t,e.next)>=0&&dd(e,e.prev,t)>=0:dd(e,t,e.prev)<0||dd(e,e.next,t)<0}function vd(e,t){var n=new xd(e.i,e.x,e.y),r=new xd(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function gd(e,t,n,r){var i=new xd(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function yd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xd(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var bd={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return bd.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];_d(e),wd(n,e);var o=e.length;t.forEach(_d);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,wd(n,t[a]);var s=$h(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function _d(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function wd(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Sd(e,t){pl.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Td(e,t)),this.mergeVertices()}function Td(e,t){Gs.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:c-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Ed;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var v,g,y,x,b,_,w,S,T=!1;f&&(v=f.getSpacedPoints(s),T=!0,u=!1,g=f.computeFrenetFrames(s,!1),y=new Zo,x=new Zo,b=new Zo),u||(p=0,c=0,h=0,d=0);var E=e.extractPoints(a),M=E.shape,A=E.holes;if(!bd.isClockWise(M))for(M=M.reverse(),w=0,S=A.length;w<S;w++)_=A[w],bd.isClockWise(_)&&(A[w]=_.reverse());var P=bd.triangulateShape(M,A),L=M;for(w=0,S=A.length;w<S;w++)_=A[w],M=M.concat(_);function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var O,R,N,F,I,k,D=M.length,z=P.length;function U(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=a*a+s*s,h=a*u-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),p=Math.sqrt(l*l+u*u),f=t.x-s/d,m=t.y+a/d,v=((n.x-u/p-f)*u-(n.y+l/p-m)*l)/(a*u-s*l),g=(r=f+a*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new jo(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new jo(r/o,i/o)}for(var j=[],B=0,G=L.length,H=G-1,V=B+1;B<G;B++,H++,V++)H===G&&(H=0),V===G&&(V=0),j[B]=U(L[B],L[H],L[V]);var W,X,Y=[],q=j.concat();for(w=0,S=A.length;w<S;w++){for(_=A[w],W=[],B=0,H=(G=_.length)-1,V=B+1;B<G;B++,H++,V++)H===G&&(H=0),V===G&&(V=0),W[B]=U(_[B],_[H],_[V]);Y.push(W),q=q.concat(W)}for(O=0;O<p;O++){for(N=O/p,F=c*Math.cos(N*Math.PI/2),R=h*Math.sin(N*Math.PI/2)+d,B=0,G=L.length;B<G;B++)Q((I=C(L[B],j[B],R)).x,I.y,-F);for(w=0,S=A.length;w<S;w++)for(_=A[w],W=Y[w],B=0,G=_.length;B<G;B++)Q((I=C(_[B],W[B],R)).x,I.y,-F)}for(R=h+d,B=0;B<D;B++)I=u?C(M[B],q[B],R):M[B],T?(x.copy(g.normals[0]).multiplyScalar(I.x),y.copy(g.binormals[0]).multiplyScalar(I.y),b.copy(v[0]).add(x).add(y),Q(b.x,b.y,b.z)):Q(I.x,I.y,0);for(X=1;X<=s;X++)for(B=0;B<D;B++)I=u?C(M[B],q[B],R):M[B],T?(x.copy(g.normals[X]).multiplyScalar(I.x),y.copy(g.binormals[X]).multiplyScalar(I.y),b.copy(v[X]).add(x).add(y),Q(b.x,b.y,b.z)):Q(I.x,I.y,l/s*X);for(O=p-1;O>=0;O--){for(N=O/p,F=c*Math.cos(N*Math.PI/2),R=h*Math.sin(N*Math.PI/2)+d,B=0,G=L.length;B<G;B++)Q((I=C(L[B],j[B],R)).x,I.y,l+F);for(w=0,S=A.length;w<S;w++)for(_=A[w],W=Y[w],B=0,G=_.length;B<G;B++)I=C(_[B],W[B],R),T?Q(I.x,I.y+v[s-1].y,v[s-1].x+F):Q(I.x,I.y,l+F)}function J(e,t){var n,r;for(B=e.length;--B>=0;){n=B,(r=B-1)<0&&(r=e.length-1);var i=0,o=s+2*p;for(i=0;i<o;i++){var a=D*i,l=D*(i+1);$(t+n+a,t+r+a,t+r+l,t+n+l)}}}function Q(e,t,n){o.push(e),o.push(t),o.push(n)}function Z(e,t,i){K(e),K(t),K(i);var o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);ee(a[0]),ee(a[1]),ee(a[2])}function $(e,t,i,o){K(e),K(t),K(o),K(t),K(i),K(o);var a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);ee(s[0]),ee(s[1]),ee(s[3]),ee(s[1]),ee(s[2]),ee(s[3])}function K(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function ee(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(u){var t=0,i=D*t;for(B=0;B<z;B++)Z((k=P[B])[2]+i,k[1]+i,k[0]+i);for(i=D*(t=s+2*p),B=0;B<z;B++)Z((k=P[B])[0]+i,k[1]+i,k[2]+i)}else{for(B=0;B<z;B++)Z((k=P[B])[2],k[1],k[0]);for(B=0;B<z;B++)Z((k=P[B])[0]+D*s,k[1]+D*s,k[2]+D*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(J(L,t),t+=L.length,w=0,S=A.length;w<S;w++)J(_=A[w],t),t+=_.length;n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Os(r,3)),this.setAttribute("uv",new Os(i,2)),this.computeVertexNormals()}Sd.prototype=Object.create(pl.prototype),Sd.prototype.constructor=Sd,Sd.prototype.toJSON=function(){var e=pl.prototype.toJSON.call(this);return Md(this.parameters.shapes,this.parameters.options,e)},Td.prototype=Object.create(Gs.prototype),Td.prototype.constructor=Td,Td.prototype.toJSON=function(){var e=Gs.prototype.toJSON.call(this);return Md(this.parameters.shapes,this.parameters.options,e)};var Ed={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new jo(o,a),new jo(s,l),new jo(u,c)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-c)<.01?[new jo(a,1-l),new jo(u,1-h),new jo(d,1-f),new jo(m,1-g)]:[new jo(s,1-l),new jo(c,1-h),new jo(p,1-f),new jo(v,1-g)]}};function Md(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Ad(e,t){pl.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Pd(e,t)),this.mergeVertices()}function Pd(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new pl;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Td.call(this,r,t),this.type="TextBufferGeometry"}function Ld(e,t,n,r,i,o,a){pl.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Cd(e,t,n,r,i,o,a)),this.mergeVertices()}function Cd(e,t,n,r,i,o,a){Gs.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,l,u=Math.min(o+a,Math.PI),c=0,h=[],d=new Zo,p=new Zo,f=[],m=[],v=[],g=[];for(l=0;l<=n;l++){var y=[],x=l/n,b=0;for(0==l&&0==o?b=.5/t:l==n&&u==Math.PI&&(b=-.5/t),s=0;s<=t;s++){var _=s/t;d.x=-e*Math.cos(r+_*i)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(r+_*i)*Math.sin(o+x*a),m.push(d.x,d.y,d.z),p.copy(d).normalize(),v.push(p.x,p.y,p.z),g.push(_+b,1-x),y.push(c++)}h.push(y)}for(l=0;l<n;l++)for(s=0;s<t;s++){var w=h[l][s+1],S=h[l][s],T=h[l+1][s],E=h[l+1][s+1];(0!==l||o>0)&&f.push(w,S,E),(l!==n-1||u<Math.PI)&&f.push(S,T,E)}this.setIndex(f),this.setAttribute("position",new Os(m,3)),this.setAttribute("normal",new Os(v,3)),this.setAttribute("uv",new Os(g,2))}function Od(e,t,n,r,i,o){pl.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Rd(e,t,n,r,i,o)),this.mergeVertices()}function Rd(e,t,n,r,i,o){Gs.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,l,u=[],c=[],h=[],d=[],p=e,f=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new Zo,v=new jo;for(s=0;s<=r;s++){for(l=0;l<=n;l++)a=i+l/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y);p+=f}for(s=0;s<r;s++){var g=s*(n+1);for(l=0;l<n;l++){var y=a=l+g,x=a+n+1,b=a+n+2,_=a+1;u.push(y,x,_),u.push(x,b,_)}}this.setIndex(u),this.setAttribute("position",new Os(c,3)),this.setAttribute("normal",new Os(h,3)),this.setAttribute("uv",new Os(d,2))}function Nd(e,t,n,r){pl.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Fd(e,t,n,r)),this.mergeVertices()}function Fd(e,t,n,r){Gs.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Uo.clamp(r,0,2*Math.PI);var i,o,a,s=[],l=[],u=[],c=1/t,h=new Zo,d=new jo;for(o=0;o<=t;o++){var p=n+o*c*r,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)h.x=e[a].x*f,h.y=e[a].y,h.z=e[a].x*m,l.push(h.x,h.y,h.z),d.x=o/t,d.y=a/(e.length-1),u.push(d.x,d.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=i=a+o*e.length,g=i+e.length,y=i+e.length+1,x=i+1;s.push(v,g,x),s.push(g,y,x)}if(this.setIndex(s),this.setAttribute("position",new Os(l,3)),this.setAttribute("uv",new Os(u,2)),this.computeVertexNormals(),r===2*Math.PI){var b=this.attributes.normal.array,_=new Zo,w=new Zo,S=new Zo;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)_.x=b[a+0],_.y=b[a+1],_.z=b[a+2],w.x=b[i+a+0],w.y=b[i+a+1],w.z=b[i+a+2],S.addVectors(_,w).normalize(),b[a+0]=b[i+a+0]=S.x,b[a+1]=b[i+a+1]=S.y,b[a+2]=b[i+a+2]=S.z}}function Id(e,t){pl.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new kd(e,t)),this.mergeVertices()}function kd(e,t){Gs.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(a,s,l),a+=s,s=0;function u(e){var a,l,u,c=r.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;for(!1===bd.isClockWise(d)&&(d=d.reverse()),a=0,l=p.length;a<l;a++)u=p[a],!0===bd.isClockWise(u)&&(p[a]=u.reverse());var f=bd.triangulateShape(d,p);for(a=0,l=p.length;a<l;a++)u=p[a],d=d.concat(u);for(a=0,l=d.length;a<l;a++){var m=d[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=f.length;a<l;a++){var v=f[a],g=v[0]+c,y=v[1]+c,x=v[2]+c;n.push(g,y,x),s+=3}}this.setIndex(n),this.setAttribute("position",new Os(r,3)),this.setAttribute("normal",new Os(i,3)),this.setAttribute("uv",new Os(o,2))}function Dd(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function zd(e,t){Gs.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Uo.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(o=new pl).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],l[0]=Math.min(n,r),l[1]=Math.max(n,r),void 0===u[i=l[0]+","+l[1]]?u[i]={index1:l[0],index2:l[1],face1:p,face2:void 0}:u[i].face2=p;for(i in u){var g=u[i];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new Os(a,3))}function Ud(e,t,n,r,i,o,a,s){pl.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new jd(e,t,n,r,i,o,a,s)),this.mergeVertices()}function jd(e,t,n,r,i,o,a,s){Gs.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=[],c=[],h=[],d=[],p=0,f=[],m=n/2,v=0;function g(n){var i,o,f,g=new jo,y=new Zo,x=0,b=!0===n?e:t,_=!0===n?1:-1;for(o=p,i=1;i<=r;i++)c.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),p++;for(f=p,i=0;i<=r;i++){var w=i/r*s+a,S=Math.cos(w),T=Math.sin(w);y.x=b*T,y.y=m*_,y.z=b*S,c.push(y.x,y.y,y.z),h.push(0,_,0),g.x=.5*S+.5,g.y=.5*T*_+.5,d.push(g.x,g.y),p++}for(i=0;i<r;i++){var E=o+i,M=f+i;!0===n?u.push(M,M+1,E):u.push(M+1,M,E),x+=3}l.addGroup(v,x,!0===n?1:2),v+=x}!function(){var o,g,y=new Zo,x=new Zo,b=0,_=(t-e)/n;for(g=0;g<=i;g++){var w=[],S=g/i,T=S*(t-e)+e;for(o=0;o<=r;o++){var E=o/r,M=E*s+a,A=Math.sin(M),P=Math.cos(M);x.x=T*A,x.y=-S*n+m,x.z=T*P,c.push(x.x,x.y,x.z),y.set(A,_,P).normalize(),h.push(y.x,y.y,y.z),d.push(E,1-S),w.push(p++)}f.push(w)}for(o=0;o<r;o++)for(g=0;g<i;g++){var L=f[g][o],C=f[g+1][o],O=f[g+1][o+1],R=f[g][o+1];u.push(L,C,R),u.push(C,O,R),b+=6}l.addGroup(v,b,0),v+=b}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.setAttribute("position",new Os(c,3)),this.setAttribute("normal",new Os(h,3)),this.setAttribute("uv",new Os(d,2))}function Bd(e,t,n,r,i,o,a){Ud.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Gd(e,t,n,r,i,o,a){jd.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Hd(e,t,n,r){pl.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Vd(e,t,n,r)),this.mergeVertices()}function Vd(e,t,n,r){Gs.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],l=[],u=[],c=new Zo,h=new jo;for(s.push(0,0,0),l.push(0,0,1),u.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var d=n+o/t*r;c.x=e*Math.cos(d),c.y=e*Math.sin(d),s.push(c.x,c.y,c.z),l.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,u.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.setAttribute("position",new Os(s,3)),this.setAttribute("normal",new Os(l,3)),this.setAttribute("uv",new Os(u,2))}Ad.prototype=Object.create(pl.prototype),Ad.prototype.constructor=Ad,Pd.prototype=Object.create(Td.prototype),Pd.prototype.constructor=Pd,Ld.prototype=Object.create(pl.prototype),Ld.prototype.constructor=Ld,Cd.prototype=Object.create(Gs.prototype),Cd.prototype.constructor=Cd,Od.prototype=Object.create(pl.prototype),Od.prototype.constructor=Od,Rd.prototype=Object.create(Gs.prototype),Rd.prototype.constructor=Rd,Nd.prototype=Object.create(pl.prototype),Nd.prototype.constructor=Nd,Fd.prototype=Object.create(Gs.prototype),Fd.prototype.constructor=Fd,Id.prototype=Object.create(pl.prototype),Id.prototype.constructor=Id,Id.prototype.toJSON=function(){var e=pl.prototype.toJSON.call(this);return Dd(this.parameters.shapes,e)},kd.prototype=Object.create(Gs.prototype),kd.prototype.constructor=kd,kd.prototype.toJSON=function(){var e=Gs.prototype.toJSON.call(this);return Dd(this.parameters.shapes,e)},zd.prototype=Object.create(Gs.prototype),zd.prototype.constructor=zd,Ud.prototype=Object.create(pl.prototype),Ud.prototype.constructor=Ud,jd.prototype=Object.create(Gs.prototype),jd.prototype.constructor=jd,Bd.prototype=Object.create(Ud.prototype),Bd.prototype.constructor=Bd,Gd.prototype=Object.create(jd.prototype),Gd.prototype.constructor=Gd,Hd.prototype=Object.create(pl.prototype),Hd.prototype.constructor=Hd,Vd.prototype=Object.create(Gs.prototype),Vd.prototype.constructor=Vd;var Wd=Object.freeze({__proto__:null,WireframeGeometry:Nh,ParametricGeometry:Fh,ParametricBufferGeometry:Ih,TetrahedronGeometry:zh,TetrahedronBufferGeometry:Uh,OctahedronGeometry:jh,OctahedronBufferGeometry:Bh,IcosahedronGeometry:Gh,IcosahedronBufferGeometry:Hh,DodecahedronGeometry:Vh,DodecahedronBufferGeometry:Wh,PolyhedronGeometry:kh,PolyhedronBufferGeometry:Dh,TubeGeometry:Xh,TubeBufferGeometry:Yh,TorusKnotGeometry:qh,TorusKnotBufferGeometry:Jh,TorusGeometry:Qh,TorusBufferGeometry:Zh,TextGeometry:Ad,TextBufferGeometry:Pd,SphereGeometry:Ld,SphereBufferGeometry:Cd,RingGeometry:Od,RingBufferGeometry:Rd,PlaneGeometry:Ol,PlaneBufferGeometry:Rl,LatheGeometry:Nd,LatheBufferGeometry:Fd,ShapeGeometry:Id,ShapeBufferGeometry:kd,ExtrudeGeometry:Sd,ExtrudeBufferGeometry:Td,EdgesGeometry:zd,ConeGeometry:Bd,ConeBufferGeometry:Gd,CylinderGeometry:Ud,CylinderBufferGeometry:jd,CircleGeometry:Hd,CircleBufferGeometry:Vd,BoxGeometry:fl,BoxBufferGeometry:ml});function Xd(e){bs.call(this),this.type="ShadowMaterial",this.color=new fs(0),this.transparent=!0,this.setValues(e)}function Yd(e){xl.call(this,e),this.type="RawShaderMaterial"}function qd(e){bs.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new fs(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new jo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Jd(e){qd.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new jo(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function Qd(e){bs.call(this),this.type="MeshPhongMaterial",this.color=new fs(16777215),this.specular=new fs(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new jo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Zd(e){bs.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new fs(16777215),this.specular=new fs(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new jo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function $d(e){bs.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new jo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Kd(e){bs.call(this),this.type="MeshLambertMaterial",this.color=new fs(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fs(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ep(e){bs.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new fs(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=so,this.normalScale=new jo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function tp(e){hh.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Xd.prototype=Object.create(bs.prototype),Xd.prototype.constructor=Xd,Xd.prototype.isShadowMaterial=!0,Xd.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.color.copy(e.color),this},Yd.prototype=Object.create(xl.prototype),Yd.prototype.constructor=Yd,Yd.prototype.isRawShaderMaterial=!0,qd.prototype=Object.create(bs.prototype),qd.prototype.constructor=qd,qd.prototype.isMeshStandardMaterial=!0,qd.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Jd.prototype=Object.create(qd.prototype),Jd.prototype.constructor=Jd,Jd.prototype.isMeshPhysicalMaterial=!0,Jd.prototype.copy=function(e){return qd.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new fs).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},Qd.prototype=Object.create(bs.prototype),Qd.prototype.constructor=Qd,Qd.prototype.isMeshPhongMaterial=!0,Qd.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Zd.prototype=Object.create(bs.prototype),Zd.prototype.constructor=Zd,Zd.prototype.isMeshToonMaterial=!0,Zd.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},$d.prototype=Object.create(bs.prototype),$d.prototype.constructor=$d,$d.prototype.isMeshNormalMaterial=!0,$d.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Kd.prototype=Object.create(bs.prototype),Kd.prototype.constructor=Kd,Kd.prototype.isMeshLambertMaterial=!0,Kd.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ep.prototype=Object.create(bs.prototype),ep.prototype.constructor=ep,ep.prototype.isMeshMatcapMaterial=!0,ep.prototype.copy=function(e){return bs.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},tp.prototype=Object.create(hh.prototype),tp.prototype.constructor=tp,tp.prototype.isLineDashedMaterial=!0,tp.prototype.copy=function(e){return hh.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var np=Object.freeze({__proto__:null,ShadowMaterial:Xd,SpriteMaterial:Dc,RawShaderMaterial:Yd,ShaderMaterial:xl,PointsMaterial:wh,MeshPhysicalMaterial:Jd,MeshStandardMaterial:qd,MeshPhongMaterial:Qd,MeshToonMaterial:Zd,MeshNormalMaterial:$d,MeshLambertMaterial:Kd,MeshDepthMaterial:xc,MeshDistanceMaterial:bc,MeshBasicMaterial:_s,MeshMatcapMaterial:ep,LineDashedMaterial:tp,LineBasicMaterial:hh,Material:bs}),rp={arraySlice:function(e,t,n){return rp.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,l=0;l!==t;++l)i[a++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,n,r,i){i=i||30;var o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var l=o.tracks[s],u=l.getValueSize(),c=[],h=[],d=0;d<l.times.length;++d){var p=l.times[d]*i;if(!(p<n||p>=r)){c.push(l.times[d]);for(var f=0;f<u;++f)h.push(l.values[d*u+f])}}0!==c.length&&(l.times=rp.convertArray(c,l.times.constructor),l.values=rp.convertArray(h,l.values.constructor),a.push(l))}o.tracks=a;var m=1/0;for(s=0;s<o.tracks.length;++s)m>o.tracks[s].times[0]&&(m=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*m);return o.resetDuration(),o}};function ip(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function op(e,t,n,r){ip.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ap(e,t,n,r){ip.call(this,e,t,n,r)}function sp(e,t,n,r){ip.call(this,e,t,n,r)}function lp(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rp.convertArray(t,this.TimeBufferType),this.values=rp.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function up(e,t,n){lp.call(this,e,t,n)}function cp(e,t,n,r){lp.call(this,e,t,n,r)}function hp(e,t,n,r){lp.call(this,e,t,n,r)}function dp(e,t,n,r){ip.call(this,e,t,n,r)}function pp(e,t,n,r){lp.call(this,e,t,n,r)}function fp(e,t,n,r){lp.call(this,e,t,n,r)}function mp(e,t,n,r){lp.call(this,e,t,n,r)}function vp(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Uo.generateUUID(),this.duration<0&&this.resetDuration()}function gp(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hp;case"vector":case"vector2":case"vector3":case"vector4":return mp;case"color":return cp;case"quaternion":return pp;case"bool":case"boolean":return up;case"string":return fp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];rp.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(ip.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(ip.prototype,{beforeStart_:ip.prototype.copySampleValue_,afterEnd_:ip.prototype.copySampleValue_}),op.prototype=Object.assign(Object.create(ip.prototype),{constructor:op,DefaultSettings_:{endingStart:Wi,endingEnd:Wi},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Xi:i=e,a=2*t-n;break;case Yi:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Xi:o=e,s=2*n-t;break;case Yi:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f,b=0;b!==a;++b)i[b]=v*o[u+b]+g*o[l+b]+y*o[s+b]+x*o[c+b];return i}}),ap.prototype=Object.assign(Object.create(ip.prototype),{constructor:ap,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=(n-t)/(r-t),c=1-u,h=0;h!==a;++h)i[h]=o[l+h]*c+o[s+h]*u;return i}}),sp.prototype=Object.assign(Object.create(ip.prototype),{constructor:sp,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(lp,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:rp.convertArray(e.times,Array),values:rp.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(lp.prototype,{constructor:lp,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Hi,InterpolantFactoryMethodDiscrete:function(e){return new sp(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ap(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new op(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Gi:t=this.InterpolantFactoryMethodDiscrete;break;case Hi:t=this.InterpolantFactoryMethodLinear;break;case Vi:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gi;case this.InterpolantFactoryMethodLinear:return Hi;case this.InterpolantFactoryMethodSmooth:return Vi}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=rp.arraySlice(n,i,o),this.values=rp.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&rp.isTypedArray(r)){a=0;for(var l=r.length;a!==l;++a){var u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=rp.arraySlice(this.times),t=rp.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Vi,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(r)s=!0;else for(var u=a*n,c=u-n,h=u+n,d=0;d!==n;++d){var p=t[u+d];if(p!==t[c+d]||p!==t[h+d]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var f=a*n,m=i*n;for(d=0;d!==n;++d)t[m+d]=t[f+d]}++i}}if(o>0){e[i]=e[o];for(f=o*n,m=i*n,d=0;d!==n;++d)t[m+d]=t[f+d];++i}return i!==e.length?(this.times=rp.arraySlice(e,0,i),this.values=rp.arraySlice(t,0,i*n)):(this.times=e,this.values=t),this},clone:function(){var e=rp.arraySlice(this.times,0),t=rp.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),up.prototype=Object.assign(Object.create(lp.prototype),{constructor:up,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Gi,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),cp.prototype=Object.assign(Object.create(lp.prototype),{constructor:cp,ValueTypeName:"color"}),hp.prototype=Object.assign(Object.create(lp.prototype),{constructor:hp,ValueTypeName:"number"}),dp.prototype=Object.assign(Object.create(ip.prototype),{constructor:dp,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(n-t)/(r-t),u=s+a;s!==u;s+=4)qo.slerpFlat(i,0,o,s-a,o,s,l);return i}}),pp.prototype=Object.assign(Object.create(lp.prototype),{constructor:pp,ValueTypeName:"quaternion",DefaultInterpolation:Hi,InterpolantFactoryMethodLinear:function(e){return new dp(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),fp.prototype=Object.assign(Object.create(lp.prototype),{constructor:fp,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Gi,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),mp.prototype=Object.assign(Object.create(lp.prototype),{constructor:mp,ValueTypeName:"vector"}),Object.assign(vp,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(gp(n[i]).scale(r));return new vp(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(lp.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);var u=rp.getKeyframeOrder(s);s=rp.sortedArray(s,1,u),l=rp.sortedArray(l,1,u),r||0!==s[0]||(s.push(i),l.push(l[0])),o.push(new hp(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new vp(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(i);if(l&&l.length>1){var u=r[h=l[1]];u||(r[h]=u=[]),u.push(s)}}var c=[];for(var h in r)c.push(vp.CreateFromMorphTargetSequence(h,r[h],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];rp.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)c[u[h].morphTargets[d]]=-1;for(var p in c){var f=[],m=[];for(d=0;d!==u[h].morphTargets.length;++d){var v=u[h];f.push(v.time),m.push(v.morphTarget===p?1:0)}r.push(new hp(".morphTargetInfluence["+p+"]",f,m))}o=c.length*(a||1)}else{var g=".bones["+t[l].name+"]";n(mp,g+".position",u,"pos",r),n(pp,g+".quaternion",u,"rot",r),n(mp,g+".scale",u,"scl",r)}}return 0===r.length?null:new vp(i,o,r)}}),Object.assign(vp.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new vp(this.name,this.duration,e)}});var yp={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function xp(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}}var bp=new xp;function _p(e){this.manager=void 0!==e?e:bp,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(_p.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var wp={};function Sp(e){_p.call(this,e)}function Tp(e){_p.call(this,e)}function Ep(e){_p.call(this,e)}function Mp(e){_p.call(this,e)}function Ap(e){_p.call(this,e)}function Pp(e){_p.call(this,e)}function Lp(e){_p.call(this,e)}function Cp(){this.type="Curve",this.arcLengthDivisions=200}function Op(e,t,n,r,i,o,a,s){Cp.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Rp(e,t,n,r,i,o){Op.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Np(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,l*=a,u*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Sp.prototype=Object.assign(Object.create(_p.prototype),{constructor:Sp,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yp.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===wp[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],u=a[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(u.length),p=0;p<u.length;p++)d[p]=u.charCodeAt(p);c="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var f=new DOMParser;c=f.parseFromString(u,s);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout((function(){t&&t(c),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{wp[e]=[],wp[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response,r=wp[e];if(delete wp[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),yp.add(e,n);for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=wp[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=wp[e];delete wp[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var n=wp[e];delete wp[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}wp[e].push({onLoad:t,onProgress:n,onError:r})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Tp.prototype=Object.assign(Object.create(_p.prototype),{constructor:Tp,load:function(e,t,n,r){var i=this,o=new Sp(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=vp.parse(e[n]);t.push(r)}return t}}),Ep.prototype=Object.assign(Object.create(_p.prototype),{constructor:Ep,load:function(e,t,n,r){var i=this,o=[],a=new Ch;a.image=o;var s=new Sp(this.manager);function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=Ur),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Ur),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}),Mp.prototype=Object.assign(Object.create(_p.prototype),{constructor:Mp,load:function(e,t,n,r){var i=this,o=new Tl,a=new Sp(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Rr,o.wrapT=void 0!==n.wrapT?n.wrapT:Rr,o.magFilter=void 0!==n.magFilter?n.magFilter:Ur,o.minFilter=void 0!==n.minFilter?n.minFilter:Ur,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Gr),1===n.mipmapCount&&(o.minFilter=Ur),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}),Ap.prototype=Object.assign(Object.create(_p.prototype),{constructor:Ap,load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yp.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),yp.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}),Pp.prototype=Object.assign(Object.create(_p.prototype),{constructor:Pp,load:function(e,t,n,r){var i=new Xl,o=new Ap(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return i}}),Lp.prototype=Object.assign(Object.create(_p.prototype),{constructor:Lp,load:function(e,t,n,r){var i=new Vo,o=new Ap(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?ri:ii,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(Cp.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=r[i=Math.floor(s+(l-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(r[i=l]===n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new Zo,a=[],s=[],l=[],u=new Zo,c=new oa;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new Zo,l[0]=new Zo;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),f<=h&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),l[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(a[n-1],a[n]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(Uo.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(u,i))),l[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(Uo.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(c.makeRotationAxis(a[n],i*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Op.prototype=Object.create(Cp.prototype),Op.prototype.constructor=Op,Op.prototype.isEllipseCurve=!0,Op.prototype.getPoint=function(e,t){for(var n=t||new jo,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*u-d*c+this.aX,l=h*c+d*u+this.aY}return n.set(s,l)},Op.prototype.copy=function(e){return Cp.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Op.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Op.prototype.fromJSON=function(e){return Cp.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Rp.prototype=Object.create(Op.prototype),Rp.prototype.constructor=Rp,Rp.prototype.isArcCurve=!0;var Fp=new Zo,Ip=new Np,kp=new Np,Dp=new Np;function zp(e,t,n,r){Cp.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Up(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function jp(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Bp(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Gp(e,t,n,r){Cp.call(this),this.type="CubicBezierCurve",this.v0=e||new jo,this.v1=t||new jo,this.v2=n||new jo,this.v3=r||new jo}function Hp(e,t,n,r){Cp.call(this),this.type="CubicBezierCurve3",this.v0=e||new Zo,this.v1=t||new Zo,this.v2=n||new Zo,this.v3=r||new Zo}function Vp(e,t){Cp.call(this),this.type="LineCurve",this.v1=e||new jo,this.v2=t||new jo}function Wp(e,t){Cp.call(this),this.type="LineCurve3",this.v1=e||new Zo,this.v2=t||new Zo}function Xp(e,t,n){Cp.call(this),this.type="QuadraticBezierCurve",this.v0=e||new jo,this.v1=t||new jo,this.v2=n||new jo}function Yp(e,t,n){Cp.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Zo,this.v1=t||new Zo,this.v2=n||new Zo}function qp(e){Cp.call(this),this.type="SplineCurve",this.points=e||[]}zp.prototype=Object.create(Cp.prototype),zp.prototype.constructor=zp,zp.prototype.isCatmullRomCurve3=!0,zp.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new Zo,s=this.points,l=s.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),h=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===h&&c===l-1&&(c=l-2,h=1),this.closed||c>0?n=s[(c-1)%l]:(Fp.subVectors(s[0],s[1]).add(s[0]),n=Fp),r=s[c%l],i=s[(c+1)%l],this.closed||c+2<l?o=s[(c+2)%l]:(Fp.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=Fp),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),d),f=Math.pow(r.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Ip.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,f,m),kp.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,f,m),Dp.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(Ip.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),kp.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Dp.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Ip.calc(h),kp.calc(h),Dp.calc(h)),a},zp.prototype.copy=function(e){Cp.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},zp.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},zp.prototype.fromJSON=function(e){Cp.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Zo).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Gp.prototype=Object.create(Cp.prototype),Gp.prototype.constructor=Gp,Gp.prototype.isCubicBezierCurve=!0,Gp.prototype.getPoint=function(e,t){var n=t||new jo,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Bp(e,r.x,i.x,o.x,a.x),Bp(e,r.y,i.y,o.y,a.y)),n},Gp.prototype.copy=function(e){return Cp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Gp.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Gp.prototype.fromJSON=function(e){return Cp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Hp.prototype=Object.create(Cp.prototype),Hp.prototype.constructor=Hp,Hp.prototype.isCubicBezierCurve3=!0,Hp.prototype.getPoint=function(e,t){var n=t||new Zo,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Bp(e,r.x,i.x,o.x,a.x),Bp(e,r.y,i.y,o.y,a.y),Bp(e,r.z,i.z,o.z,a.z)),n},Hp.prototype.copy=function(e){return Cp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Hp.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Hp.prototype.fromJSON=function(e){return Cp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Vp.prototype=Object.create(Cp.prototype),Vp.prototype.constructor=Vp,Vp.prototype.isLineCurve=!0,Vp.prototype.getPoint=function(e,t){var n=t||new jo;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Vp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Vp.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Vp.prototype.copy=function(e){return Cp.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Vp.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Vp.prototype.fromJSON=function(e){return Cp.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Wp.prototype=Object.create(Cp.prototype),Wp.prototype.constructor=Wp,Wp.prototype.isLineCurve3=!0,Wp.prototype.getPoint=function(e,t){var n=t||new Zo;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Wp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Wp.prototype.copy=function(e){return Cp.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Wp.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Wp.prototype.fromJSON=function(e){return Cp.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Xp.prototype=Object.create(Cp.prototype),Xp.prototype.constructor=Xp,Xp.prototype.isQuadraticBezierCurve=!0,Xp.prototype.getPoint=function(e,t){var n=t||new jo,r=this.v0,i=this.v1,o=this.v2;return n.set(jp(e,r.x,i.x,o.x),jp(e,r.y,i.y,o.y)),n},Xp.prototype.copy=function(e){return Cp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Xp.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Xp.prototype.fromJSON=function(e){return Cp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Yp.prototype=Object.create(Cp.prototype),Yp.prototype.constructor=Yp,Yp.prototype.isQuadraticBezierCurve3=!0,Yp.prototype.getPoint=function(e,t){var n=t||new Zo,r=this.v0,i=this.v1,o=this.v2;return n.set(jp(e,r.x,i.x,o.x),jp(e,r.y,i.y,o.y),jp(e,r.z,i.z,o.z)),n},Yp.prototype.copy=function(e){return Cp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Yp.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Yp.prototype.fromJSON=function(e){return Cp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},qp.prototype=Object.create(Cp.prototype),qp.prototype.constructor=qp,qp.prototype.isSplineCurve=!0,qp.prototype.getPoint=function(e,t){var n=t||new jo,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Up(a,s.x,l.x,u.x,c.x),Up(a,s.y,l.y,u.y,c.y)),n},qp.prototype.copy=function(e){Cp.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},qp.prototype.toJSON=function(){var e=Cp.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},qp.prototype.fromJSON=function(e){Cp.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new jo).fromArray(r))}return this};var Jp=Object.freeze({__proto__:null,ArcCurve:Rp,CatmullRomCurve3:zp,CubicBezierCurve:Gp,CubicBezierCurve3:Hp,EllipseCurve:Op,LineCurve:Vp,LineCurve3:Wp,QuadraticBezierCurve:Xp,QuadraticBezierCurve3:Yp,SplineCurve:qp});function Qp(){Cp.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Zp(e){Qp.call(this),this.type="Path",this.currentPoint=new jo,e&&this.setFromPoints(e)}function $p(e){Zp.call(this,e),this.uuid=Uo.generateUUID(),this.type="Shape",this.holes=[]}function Kp(e,t){Sa.call(this),this.type="Light",this.color=new fs(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ef(e,t,n){Kp.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Sa.DefaultUp),this.updateMatrix(),this.groundColor=new fs(t)}function tf(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new jo(512,512),this.map=null,this.mapPass=null,this.matrix=new oa,this._frustum=new Al,this._frameExtents=new jo(1,1),this._viewportCount=1,this._viewports=[new Wo(0,0,1,1)]}function nf(){tf.call(this,new _l(50,1,.5,500))}function rf(e,t,n,r,i,o){Kp.call(this,e,t),this.type="SpotLight",this.position.copy(Sa.DefaultUp),this.updateMatrix(),this.target=new Sa,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new nf}function of(){tf.call(this,new _l(90,1,.5,500)),this._frameExtents=new jo(4,2),this._viewportCount=6,this._viewports=[new Wo(2,1,1,1),new Wo(0,1,1,1),new Wo(3,1,1,1),new Wo(1,1,1,1),new Wo(3,0,1,1),new Wo(1,0,1,1)],this._cubeDirections=[new Zo(1,0,0),new Zo(-1,0,0),new Zo(0,0,1),new Zo(0,0,-1),new Zo(0,1,0),new Zo(0,-1,0)],this._cubeUps=[new Zo(0,1,0),new Zo(0,1,0),new Zo(0,1,0),new Zo(0,1,0),new Zo(0,0,1),new Zo(0,0,-1)]}function af(e,t,n,r){Kp.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new of}function sf(e,t,n,r,i,o){bl.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function lf(){tf.call(this,new sf(-5,5,5,-5,.5,500))}function uf(e,t){Kp.call(this,e,t),this.type="DirectionalLight",this.position.copy(Sa.DefaultUp),this.updateMatrix(),this.target=new Sa,this.shadow=new lf}function cf(e,t){Kp.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function hf(e,t,n,r){Kp.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function df(e){_p.call(this,e),this.textures={}}Qp.prototype=Object.assign(Object.create(Cp.prototype),{constructor:Qp,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Vp(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Cp.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Cp.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Cp.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Jp[r.type]).fromJSON(r))}return this}}),Zp.prototype=Object.assign(Object.create(Qp.prototype),{constructor:Zp,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Vp(this.currentPoint.clone(),new jo(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){var i=new Xp(this.currentPoint.clone(),new jo(e,t),new jo(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,o){var a=new Gp(this.currentPoint.clone(),new jo(e,t),new jo(n,r),new jo(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(e){var t=new qp([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this},absarc:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this},ellipse:function(e,t,n,r,i,o,a,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,o,a,s),this},absellipse:function(e,t,n,r,i,o,a,s){var l=new Op(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return Qp.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Qp.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Qp.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),$p.prototype=Object.assign(Object.create(Zp.prototype),{constructor:$p,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Zp.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Zp.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Zp.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Zp).fromJSON(r))}return this}}),Kp.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Kp,isLight:!0,copy:function(e){return Sa.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Sa.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ef.prototype=Object.assign(Object.create(Kp.prototype),{constructor:ef,isHemisphereLight:!0,copy:function(e){return Kp.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(tf.prototype,{_projScreenMatrix:new oa,_lightPositionWorld:new Zo,_lookTarget:new Zo,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),nf.prototype=Object.assign(Object.create(tf.prototype),{constructor:nf,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Uo.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),tf.prototype.updateMatrices.call(this,e)}}),rf.prototype=Object.assign(Object.create(Kp.prototype),{constructor:rf,isSpotLight:!0,copy:function(e){return Kp.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),of.prototype=Object.assign(Object.create(tf.prototype),{constructor:of,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),af.prototype=Object.assign(Object.create(Kp.prototype),{constructor:af,isPointLight:!0,copy:function(e){return Kp.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),sf.prototype=Object.assign(Object.create(bl.prototype),{constructor:sf,isOrthographicCamera:!0,copy:function(e,t){return bl.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=l*this.view.offsetX)+l*this.view.width,s=(a-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Sa.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),lf.prototype=Object.assign(Object.create(tf.prototype),{constructor:lf,isDirectionalLightShadow:!0,updateMatrices:function(e){tf.prototype.updateMatrices.call(this,e)}}),uf.prototype=Object.assign(Object.create(Kp.prototype),{constructor:uf,isDirectionalLight:!0,copy:function(e){return Kp.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),cf.prototype=Object.assign(Object.create(Kp.prototype),{constructor:cf,isAmbientLight:!0}),hf.prototype=Object.assign(Object.create(Kp.prototype),{constructor:hf,isRectAreaLight:!0,copy:function(e){return Kp.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Kp.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),df.prototype=Object.assign(Object.create(_p.prototype),{constructor:df,load:function(e,t,n,r){var i=this,o=new Sp(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new np[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new fs).setHex(e.sheen)),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new fs).setHex(o.value);break;case"v2":r.uniforms[i].value=(new jo).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new Zo).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new Wo).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new Bo).fromArray(o.value);case"m4":r.uniforms[i].value=(new oa).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)r.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new jo).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new jo).fromArray(e.clearcoatNormalScale)),r},setTextures:function(e){return this.textures=e,this}});var pf={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function ff(){Gs.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function mf(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ss.call(this,e,t,n),this.meshPerAttribute=r||1}function vf(e){_p.call(this,e)}ff.prototype=Object.assign(Object.create(Gs.prototype),{constructor:ff,isInstancedBufferGeometry:!0,copy:function(e){return Gs.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Gs.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),mf.prototype=Object.assign(Object.create(Ss.prototype),{constructor:mf,isInstancedBufferAttribute:!0,copy:function(e){return Ss.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=Ss.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),vf.prototype=Object.assign(Object.create(_p.prototype),{constructor:vf,load:function(e,t,n,r){var i=this,o=new Sp(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=e.isInstancedBufferGeometry?new ff:new Gs,n=e.data.index;if(void 0!==n){var r=new gf[n.type](n.array);t.setIndex(new Ss(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o],s=(r=new gf[a.type](a.array),new(a.isInstancedBufferAttribute?mf:Ss)(r,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.setAttribute(o,s)}var l=e.data.morphAttributes;if(l)for(var o in l){for(var u=l[o],c=[],h=0,d=u.length;h<d;h++){a=u[h],s=new Ss(r=new gf[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(s.name=a.name),c.push(s)}t.morphAttributes[o]=c}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){h=0;for(var f=p.length;h!==f;++h){var m=p[h];t.addGroup(m.start,m.count,m.materialIndex)}}var v=e.data.boundingSphere;if(void 0!==v){var g=new Zo;void 0!==v.center&&g.fromArray(v.center),t.boundingSphere=new Ba(g,v.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var gf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function yf(e){_p.call(this,e)}yf.prototype=Object.assign(Object.create(_p.prototype),{constructor:yf,load:function(e,t,n,r){var i=this,o=""===this.path?pf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new Sp(i.manager);a.setPath(this.path),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new $p).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new vf,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Wd[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Wd[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Wd[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Wd[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Wd[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Wd[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Wd[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Wd[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Wd[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Wd[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Wd[s.type]((new Jp[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Wd[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Wd[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=s.shapes.length;u<c;u++){var h=t[s.shapes[u]];l.push(h)}a=new Wd[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=s.shapes.length;u<c;u++){h=t[s.shapes[u]];l.push(h)}var d=s.options.extrudePath;void 0!==d&&(s.options.extrudePath=(new Jp[d.type]).fromJSON(d)),a=new Wd[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new df;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var l=[],u=0;u<s.materials.length;u++){var c=s.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),l.push(n[c.uuid])}r[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=vp.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new Ap(new xp(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],u=l.url;if(Array.isArray(u)){r[l.uuid]=[];for(var c=0,h=u.length;c<h;c++){var d=u[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;r[l.uuid].push(i(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;r[l.uuid]=i(p)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Xl(t[s.image]):new Vo(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,bf)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],_f),a.wrapT=n(s.wrap[1],_f)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,wf)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,wf)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Ta,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new fs(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new Rc(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Oc(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new _l(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new sf(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new cf(e.color,e.intensity);break;case"DirectionalLight":r=new uf(e.color,e.intensity);break;case"PointLight":r=new af(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new hf(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new rf(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new ef(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new th(a,s):new al(a,s);break;case"InstancedMesh":a=i(e.geometry),s=o(e.material);var l=e.count,u=e.instanceMatrix;(r=new ch(a,s,l)).instanceMatrix=new Ss(new Float32Array(u.array),16);break;case"LOD":r=new eh;break;case"Line":r=new gh(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new _h(i(e.geometry),o(e.material));break;case"LineSegments":r=new bh(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Ah(i(e.geometry),o(e.material));break;case"Sprite":r=new Qc(o(e.material));break;case"Group":r=new Pc;break;default:r=new Sa}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,h=0;h<c.length;h++)r.add(this.parseObject(c[h],t,n));if("LOD"===e.type){void 0!==e.autoUpdate&&(r.autoUpdate=e.autoUpdate);for(var d=e.levels,p=0;p<d.length;p++){var f=d[p],m=r.getObjectByProperty("uuid",f.object);void 0!==m&&r.addLevel(m,f.distance)}}return r}});var xf,bf={UVMapping:Sr,CubeReflectionMapping:Tr,CubeRefractionMapping:Er,EquirectangularReflectionMapping:Mr,EquirectangularRefractionMapping:Ar,SphericalReflectionMapping:Pr,CubeUVReflectionMapping:Lr,CubeUVRefractionMapping:Cr},_f={RepeatWrapping:Or,ClampToEdgeWrapping:Rr,MirroredRepeatWrapping:Nr},wf={NearestFilter:Fr,NearestMipmapNearestFilter:Ir,NearestMipmapLinearFilter:Dr,LinearFilter:Ur,LinearMipmapNearestFilter:jr,LinearMipmapLinearFilter:Gr};function Sf(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),_p.call(this,e),this.options=void 0}function Tf(){this.type="ShapePath",this.color=new fs,this.subPaths=[],this.currentPath=null}function Ef(e){this.type="Font",this.data=e}function Mf(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,l,u,c,h,d,p,f=new Tf;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+r,f.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,f.lineTo(a,s);break;case"q":l=m[v++]*t+n,u=m[v++]*t+r,c=m[v++]*t+n,h=m[v++]*t+r,f.quadraticCurveTo(c,h,l,u);break;case"b":l=m[v++]*t+n,u=m[v++]*t+r,c=m[v++]*t+n,h=m[v++]*t+r,d=m[v++]*t+n,p=m[v++]*t+r,f.bezierCurveTo(c,h,d,p,l,u)}}return{offsetX:o.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function Af(e){_p.call(this,e)}Sf.prototype=Object.assign(Object.create(_p.prototype),{constructor:Sf,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=yp.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)})).then((function(n){yp.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(Tf.prototype,{moveTo:function(e,t){return this.currentPath=new Zp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new $p;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],l=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],l=-l,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=u*(e.x-a.x)-l*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=bd.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,l,u=[];if(1===o.length)return s=o[0],(l=new $p).curves=s.curves,u.push(l),u;var c=!i(o[0].getPoints());c=e?!c:c;var h,d,p=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!c&&f[v]&&v++,f[v]={s:new $p,p:h},f[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var x=!1,b=[],_=0,w=f.length;_<w;_++)p[_]=[];for(_=0,w=f.length;_<w;_++)for(var S=m[_],T=0;T<S.length;T++){for(var E=S[T],M=!0,A=0;A<f.length;A++)r(E.p,f[A].p)&&(_!==A&&b.push({froms:_,tos:A,hole:T}),M?(M=!1,p[A].push(E)):x=!0);M&&p[_].push(E)}b.length>0&&(x||(m=p))}g=0;for(var P=f.length;g<P;g++){l=f[g].s,u.push(l);for(var L=0,C=(d=m[g]).length;L<C;L++)l.holes.push(d[L].h)}return u}}),Object.assign(Ef.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,l=0,u=0;u<r.length;u++){var c=r[u];if("\n"===c)s=0,l-=o;else{var h=Mf(c,i,s,l,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Af.prototype=Object.assign(Object.create(_p.prototype),{constructor:Af,load:function(e,t,n,r){var i=this,o=new Sp(this.manager);o.setPath(this.path),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new Ef(e)}});var Pf={getContext:function(){return void 0===xf&&(xf=new(window.AudioContext||window.webkitAudioContext)),xf},setContext:function(e){xf=e}};function Lf(e){_p.call(this,e)}function Cf(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Zo)}function Of(e,t){Kp.call(this,void 0,t),this.sh=void 0!==e?e:new Cf}function Rf(e,t,n){Of.call(this,void 0,n);var r=(new fs).set(e),i=(new fs).set(t),o=new Zo(r.r,r.g,r.b),a=new Zo(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}function Nf(e,t){Of.call(this,void 0,t);var n=(new fs).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Lf.prototype=Object.assign(Object.create(_p.prototype),{constructor:Lf,load:function(e,t,n,r){var i=new Sp(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,(function(e){var n=e.slice(0);Pf.getContext().decodeAudioData(n,(function(e){t(e)}))}),n,r)}}),Object.assign(Cf.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScale(o[1],.488603*r),t.addScale(o[2],.488603*i),t.addScale(o[3],.488603*n),t.addScale(o[4],n*r*1.092548),t.addScale(o[5],r*i*1.092548),t.addScale(o[6],.315392*(3*i*i-1)),t.addScale(o[7],n*i*1.092548),t.addScale(o[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScale(o[1],1.023328*r),t.addScale(o[2],1.023328*i),t.addScale(o[3],1.023328*n),t.addScale(o[4],.858086*n*r),t.addScale(o[5],.858086*r*i),t.addScale(o[6],.743125*i*i-.247708),t.addScale(o[7],.858086*n*i),t.addScale(o[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}),Object.assign(Cf,{getBasisAt:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}),Of.prototype=Object.assign(Object.create(Kp.prototype),{constructor:Of,isLightProbe:!0,copy:function(e){return Kp.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Kp.prototype.toJSON.call(this,e)}}),Rf.prototype=Object.assign(Object.create(Of.prototype),{constructor:Rf,isHemisphereLightProbe:!0,copy:function(e){return Of.prototype.copy.call(this,e),this},toJSON:function(e){return Of.prototype.toJSON.call(this,e)}}),Nf.prototype=Object.assign(Object.create(Of.prototype),{constructor:Nf,isAmbientLightProbe:!0,copy:function(e){return Of.prototype.copy.call(this,e),this},toJSON:function(e){return Of.prototype.toJSON.call(this,e)}});var Ff=new oa,If=new oa;function kf(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _l,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _l,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Df(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(kf.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,r,i=e.projectionMatrix.clone(),o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(Uo.DEG2RAD*t.fov*.5)/t.zoom;If.elements[12]=-o,Ff.elements[12]=o,n=-s*t.aspect+a,r=s*t.aspect+a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*t.aspect-a,r=s*t.aspect-a,i.elements[0]=2*t.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(If),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ff)}}),Object.assign(Df.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var zf=new Zo,Uf=new qo,jf=new Zo,Bf=new Zo;function Gf(){Sa.call(this),this.type="AudioListener",this.context=Pf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Df}function Hf(e){Sa.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Gf.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Gf,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){Sa.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(zf,Uf,jf),Bf.set(0,0,-1).applyQuaternion(Uf),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(zf.x,r),t.positionY.linearRampToValueAtTime(zf.y,r),t.positionZ.linearRampToValueAtTime(zf.z,r),t.forwardX.linearRampToValueAtTime(Bf.x,r),t.forwardY.linearRampToValueAtTime(Bf.y,r),t.forwardZ.linearRampToValueAtTime(Bf.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(zf.x,zf.y,zf.z),t.setOrientation(Bf.x,Bf.y,Bf.z,n.x,n.y,n.z)}}),Hf.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Hf,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Vf=new Zo,Wf=new qo,Xf=new Zo,Yf=new Zo;function qf(e){Hf.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Jf(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Qf(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}qf.prototype=Object.assign(Object.create(Hf.prototype),{constructor:qf,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(Sa.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Vf,Wf,Xf),Yf.set(0,0,1).applyQuaternion(Wf);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Vf.x,n),t.positionY.linearRampToValueAtTime(Vf.y,n),t.positionZ.linearRampToValueAtTime(Vf.z,n),t.orientationX.linearRampToValueAtTime(Yf.x,n),t.orientationY.linearRampToValueAtTime(Yf.y,n),t.orientationZ.linearRampToValueAtTime(Yf.z,n)}else t.setPosition(Vf.x,Vf.y,Vf.z),t.setOrientation(Yf.x,Yf.y,Yf.z)}}}),Object.assign(Jf.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Qf.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){qo.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var Zf=new RegExp("[\\[\\]\\.:\\/]","g"),$f="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Kf=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),em=/(WCOD+)?/.source.replace("WCOD",$f),tm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),nm=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),rm=new RegExp("^"+Kf+em+tm+nm+"$"),im=["material","materials","bones"];function om(e,t,n){var r=n||am.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function am(e,t,n){this.path=t,this.parsedPath=n||am.parseTrackName(t),this.node=am.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function sm(){this.uuid=Uo.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function lm(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:Wi,endingEnd:Wi},s=0;s!==i;++s){var l=r[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ji,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function um(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function cm(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function hm(e,t,n){Nc.call(this,e,t),this.meshPerAttribute=n||1}function dm(e,t,n,r){this.ray=new Ja(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function pm(e,t){return e.distance-t.distance}function fm(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)fm(i[o],t,n,!0)}function mm(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function vm(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}Object.assign(om.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(am,{Composite:om,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new am.Composite(e,t,n):new am(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Zf,"")},parseTrackName:function(e){var t=rm.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==im.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(am.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=am.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(am.prototype,{_getValue_unbound:am.prototype.getValue,_setValue_unbound:am.prototype.setValue}),Object.assign(sm.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,p=r[d];if(void 0===p){p=t++,r[d]=p,e.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new am(h,i[f],o[f]))}else if(p<n){l=e[p];var v=--n,g=e[v];r[g.uuid]=p,e[p]=g,r[d]=v,e[v]=h;for(f=0,m=s;f!==m;++f){var y=a[f],x=y[v],b=y[p];y[p]=x,void 0===b&&(b=new am(h,i[f],o[f])),y[v]=b}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,u=n[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];n[h.uuid]=u,e[u]=h,n[l]=c,e[c]=s;for(var d=0,p=i;d!==p;++d){var f=r[d],m=f[c],v=f[u];f[u]=m,f[c]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a],u=l.uuid,c=r[u];if(void 0!==c)if(delete r[u],c<n){var h=--n,d=e[h],p=e[y=--t];r[d.uuid]=c,e[c]=d,r[p.uuid]=h,e[h]=p,e.pop();for(var f=0,m=o;f!==m;++f){var v=(x=i[f])[h],g=x[y];x[c]=v,x[h]=g,x.pop()}}else{var y;r[(p=e[y=--t]).uuid]=c,e[c]=p,e.pop();for(f=0,m=o;f!==m;++f){var x;(x=i[f])[c]=x[y],x.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(c);for(var h=u,d=s.length;h!==d;++h){var p=s[h];c[h]=new am(p,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(lm.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===Bi;if(0===e)return-1===i?t:o&&1==(1&i)?n-t:t;if(r===Ui){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1==(1&i))return n-t}return t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Xi,r.endingEnd=Xi):(r.endingStart=e?this.zeroSlopeAtStart?Xi:Wi:Yi,r.endingEnd=t?this.zeroSlopeAtEnd?Xi:Wi:Yi)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),um.prototype=Object.assign(Object.create(Io.prototype),{constructor:um,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var h=r[c],d=h.name,p=u[d];if(void 0!==p)o[c]=p;else{if(void 0!==(p=o[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=t&&t._propertyBindings[c].binding.parsedPath;++(p=new Qf(am.create(n,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),o[c]=p}a[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new ap(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?vp.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[r];if(void 0!==l)return l;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new lm(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?vp.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),cm.prototype.clone=function(){return new cm(void 0===this.value.clone?this.value:this.value.clone())},hm.prototype=Object.assign(Object.create(Nc.prototype),{constructor:hm,isInstancedInterleavedBuffer:!0,copy:function(e){return Nc.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(dm.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return fm(e,this,r,t),r.sort(pm),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)fm(e[i],this,r,t);return r.sort(pm),r}}),Object.assign(mm.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Uo.clamp(t/this.radius,-1,1))),this}}),Object.assign(vm.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var gm=new jo;function ym(e,t){this.min=void 0!==e?e:new jo(1/0,1/0),this.max=void 0!==t?t:new jo(-1/0,-1/0)}Object.assign(ym.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=gm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new jo),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new jo),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new jo),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new jo),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return gm.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var xm=new Zo,bm=new Zo;function _m(e,t){this.start=void 0!==e?e:new Zo,this.end=void 0!==t?t:new Zo}function wm(e){Sa.call(this),this.material=e,this.render=function(){}}Object.assign(_m.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Zo),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Zo),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Zo),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){xm.subVectors(e,this.start),bm.subVectors(this.end,this.start);var n=bm.dot(bm),r=bm.dot(xm)/n;return t&&(r=Uo.clamp(r,0,1)),r},closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Zo),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),wm.prototype=Object.create(Sa.prototype),wm.prototype.constructor=wm,wm.prototype.isImmediateRenderObject=!0;var Sm=new Zo;function Tm(e,t){Sa.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Gs,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Os(r,3));var l=new hh({fog:!1});this.cone=new bh(n,l),this.add(this.cone),this.update()}Tm.prototype=Object.create(Sa.prototype),Tm.prototype.constructor=Tm,Tm.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Tm.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Sm.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Sm),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Em=new Zo,Mm=new oa,Am=new oa;function Pm(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new Gs,r=[],i=[],o=new fs(0,0,1),a=new fs(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Os(r,3)),n.setAttribute("color",new Os(i,3));var u=new hh({vertexColors:Dn,depthTest:!1,depthWrite:!1,transparent:!0});bh.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Lm(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Cd(t,4,2),i=new _s({wireframe:!0,fog:!1});al.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}Pm.prototype=Object.create(bh.prototype),Pm.prototype.constructor=Pm,Pm.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,r=n.getAttribute("position");Am.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(Mm.multiplyMatrices(Am,a.matrixWorld),Em.setFromMatrixPosition(Mm),r.setXYZ(o,Em.x,Em.y,Em.z),Mm.multiplyMatrices(Am,a.parent.matrixWorld),Em.setFromMatrixPosition(Mm),r.setXYZ(o+1,Em.x,Em.y,Em.z),o+=2)}n.getAttribute("position").needsUpdate=!0,Sa.prototype.updateMatrixWorld.call(this,e)},Lm.prototype=Object.create(al.prototype),Lm.prototype.constructor=Lm,Lm.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Lm.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Cm=new Zo,Om=new fs,Rm=new fs;function Nm(e,t,n){Sa.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Bh(t);r.rotateY(.5*Math.PI),this.material=new _s({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=Dn);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ss(o,3)),this.add(new al(r,this.material)),this.update()}function Fm(e,t,n,r){e=e||10,t=t||10,n=new fs(void 0!==n?n:4473924),r=new fs(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],l=[],u=0,c=0,h=-a;u<=t;u++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=u===i?n:r;d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3}var p=new Gs;p.setAttribute("position",new Os(s,3)),p.setAttribute("color",new Os(l,3));var f=new hh({vertexColors:Dn});bh.call(this,p,f)}function Im(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new fs(void 0!==i?i:4473924),o=new fs(void 0!==o?o:8947848);var a,s,l,u,c,h,d,p=[],f=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,s),d=1&u?i:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?i:o,h=e-e/n*u,c=0;c<r;c++)l=c/r*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),l=(c+1)/r*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new Gs;m.setAttribute("position",new Os(p,3)),m.setAttribute("color",new Os(f,3));var v=new hh({vertexColors:Dn});bh.call(this,m,v)}Nm.prototype=Object.create(Sa.prototype),Nm.prototype.constructor=Nm,Nm.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Nm.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Om.copy(this.light.color),Rm.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Om:Rm;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Cm.setFromMatrixPosition(this.light.matrixWorld).negate())},Fm.prototype=Object.assign(Object.create(bh.prototype),{constructor:Fm,copy:function(e){return bh.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),Im.prototype=Object.create(bh.prototype),Im.prototype.constructor=Im;var km=new Zo,Dm=new Zo,zm=new Zo;function Um(e,t,n){Sa.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Gs;r.setAttribute("position",new Os([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new hh({fog:!1});this.lightPlane=new gh(r,i),this.add(this.lightPlane),(r=new Gs).setAttribute("position",new Os([0,0,0,0,0,1],3)),this.targetLine=new gh(r,i),this.add(this.targetLine),this.update()}Um.prototype=Object.create(Sa.prototype),Um.prototype.constructor=Um,Um.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Um.prototype.update=function(){km.setFromMatrixPosition(this.light.matrixWorld),Dm.setFromMatrixPosition(this.light.target.matrixWorld),zm.subVectors(Dm,km),this.lightPlane.lookAt(Dm),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dm),this.targetLine.scale.z=zm.length()};var jm=new Zo,Bm=new bl;function Gm(e){var t=new Gs,n=new hh({color:16777215,vertexColors:kn}),r=[],i=[],o={},a=new fs(16755200),s=new fs(16711680),l=new fs(43775),u=new fs(16777215),c=new fs(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.setAttribute("position",new Os(r,3)),t.setAttribute("color",new Os(i,3)),bh.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Hm(e,t,n,r,i,o,a){jm.set(i,o,a).unproject(r);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),u=0,c=s.length;u<c;u++)l.setXYZ(s[u],jm.x,jm.y,jm.z)}Gm.prototype=Object.create(bh.prototype),Gm.prototype.constructor=Gm,Gm.prototype.update=function(){var e=this.geometry,t=this.pointMap;Bm.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Hm("c",t,e,Bm,0,0,-1),Hm("t",t,e,Bm,0,0,1),Hm("n1",t,e,Bm,-1,-1,-1),Hm("n2",t,e,Bm,1,-1,-1),Hm("n3",t,e,Bm,-1,1,-1),Hm("n4",t,e,Bm,1,1,-1),Hm("f1",t,e,Bm,-1,-1,1),Hm("f2",t,e,Bm,1,-1,1),Hm("f3",t,e,Bm,-1,1,1),Hm("f4",t,e,Bm,1,1,1),Hm("u1",t,e,Bm,.7,1.1,-1),Hm("u2",t,e,Bm,-.7,1.1,-1),Hm("u3",t,e,Bm,0,2,-1),Hm("cf1",t,e,Bm,-1,0,1),Hm("cf2",t,e,Bm,1,0,1),Hm("cf3",t,e,Bm,0,-1,1),Hm("cf4",t,e,Bm,0,1,1),Hm("cn1",t,e,Bm,-1,0,-1),Hm("cn2",t,e,Bm,1,0,-1),Hm("cn3",t,e,Bm,0,-1,-1),Hm("cn4",t,e,Bm,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Vm=new za;function Wm(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Gs;i.setIndex(new Ss(n,1)),i.setAttribute("position",new Ss(r,3)),bh.call(this,i,new hh({color:t})),this.matrixAutoUpdate=!1,this.update()}function Xm(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Gs;r.setIndex(new Ss(n,1)),r.setAttribute("position",new Os([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),bh.call(this,r,new hh({color:t})),this.geometry.computeBoundingSphere()}function Ym(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new Gs;i.setAttribute("position",new Os([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),gh.call(this,i,new hh({color:r}));var o=new Gs;o.setAttribute("position",new Os([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new al(o,new _s({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}Wm.prototype=Object.create(bh.prototype),Wm.prototype.constructor=Wm,Wm.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Vm.setFromObject(this.object),!Vm.isEmpty()){var t=Vm.min,n=Vm.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Wm.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Wm.prototype.copy=function(e){return bh.prototype.copy.call(this,e),this.object=e.object,this},Wm.prototype.clone=function(){return(new this.constructor).copy(this)},Xm.prototype=Object.create(bh.prototype),Xm.prototype.constructor=Xm,Xm.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Sa.prototype.updateMatrixWorld.call(this,e))},Ym.prototype=Object.create(gh.prototype),Ym.prototype.constructor=Ym,Ym.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?On:Cn,this.lookAt(this.plane.normal),Sa.prototype.updateMatrixWorld.call(this,e)};var qm,Jm,Qm=new Zo;function Zm(e,t,n,r,i,o){Sa.call(this),void 0===e&&(e=new Zo(0,0,1)),void 0===t&&(t=new Zo(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===qm&&((qm=new Gs).setAttribute("position",new Os([0,0,0,0,1,0],3)),(Jm=new jd(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new gh(qm,new hh({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new al(Jm,new _s({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function $m(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Gs;n.setAttribute("position",new Os(t,3)),n.setAttribute("color",new Os([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new hh({vertexColors:Dn});bh.call(this,n,r)}Zm.prototype=Object.create(Sa.prototype),Zm.prototype.constructor=Zm,Zm.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Qm.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Qm,t)}},Zm.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Zm.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Zm.prototype.copy=function(e){return Sa.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Zm.prototype.clone=function(){return(new this.constructor).copy(this)},$m.prototype=Object.create(bh.prototype),$m.prototype.constructor=$m;var Km,ev,tv,nv,rv=Math.pow(2,8),iv=[.125,.215,.35,.446,.526,.582],ov=5+iv.length,av={[Zi]:0,[$i]:1,[eo]:2,[no]:3,[ro]:4,[io]:5,[Ki]:6},sv=new sf,lv=(Km=20,ev=new Float32Array(Km),tv=new Zo(0,1,0),(nv=new Yd({defines:{n:Km},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ev},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:tv},inputEncoding:{value:av[Zi]},outputEncoding:{value:av[Zi]}},vertexShader:Ov(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n${Rv()}\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:zn,depthTest:!1,depthWrite:!1})).type="SphericalGaussianBlur",nv),uv=null,cv=null,{_lodPlanes:hv,_sizeLods:dv,_sigmas:pv}=function(){for(var e=[],t=[],n=[],r=8,i=0;i<ov;i++){var o=Math.pow(2,r);t.push(o);var a=1/o;i>4?a=iv[i-8+4-1]:0==i&&(a=0),n.push(a);for(var s=1/(o-1),l=-s/2,u=1+s/2,c=[l,l,u,l,u,u,l,l,u,u,l,u],h=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,v=f>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];h.set(g,18*f),d.set(c,12*f);var y=[f,f,f,f,f,f];p.set(y,6*f)}var x=new Gs;x.setAttribute("position",new Ss(h,3)),x.setAttribute("uv",new Ss(d,2)),x.setAttribute("faceIndex",new Ss(p,1)),e.push(x),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),fv=null,mv=null,vv=null,gv=(1+Math.sqrt(5))/2,yv=1/gv,xv=[new Zo(1,1,1),new Zo(-1,1,1),new Zo(1,1,-1),new Zo(-1,1,-1),new Zo(0,gv,yv),new Zo(0,gv,-yv),new Zo(yv,0,gv),new Zo(-yv,0,gv),new Zo(gv,yv,0),new Zo(-gv,yv,0)];function bv(e){mv=e,Sv(lv)}function _v(e){var t={magFilter:Fr,minFilter:Fr,generateMipmaps:!1,type:e?e.type:Vr,format:e?e.format:si,encoding:e?e.encoding:eo,depthBuffer:!1,stencilBuffer:!1},n=Tv(t);return n.depthBuffer=!e,fv=Tv(t),n}function wv(e){fv.dispose(),mv.setRenderTarget(vv),e.scissorTest=!1,e.setSize(e.width,e.height)}function Sv(e){var t=new Ta;t.add(new al(hv[0],e)),mv.compile(t,sv)}function Tv(e){var t=new Xo(3*rv,3*rv,e);return t.texture.mapping=Lr,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function Ev(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Mv(e){var t=mv.autoClear;mv.autoClear=!1;for(var n=1;n<ov;n++){Av(e,n-1,n,Math.sqrt(pv[n]*pv[n]-pv[n-1]*pv[n-1]),xv[(n-1)%xv.length])}mv.autoClear=t}function Av(e,t,n,r,i){Pv(e,fv,t,n,r,"latitudinal",i),Pv(fv,e,n,n,r,"longitudinal",i)}function Pv(e,t,n,r,i,o,a){"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var s=new Ta;s.add(new al(hv[r],lv));var l=lv.uniforms,u=dv[n]-1,c=isFinite(i)?Math.PI/(2*u):2*Math.PI/39,h=i/c,d=isFinite(i)?1+Math.floor(3*h):20;d>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${d} samples when the maximum is set to 20`);for(var p=[],f=0,m=0;m<20;++m){var v=m/h,g=Math.exp(-v*v/2);p.push(g),0==m?f+=g:m<d&&(f+=2*g)}for(m=0;m<p.length;m++)p[m]=p[m]/f;l.envMap.value=e.texture,l.samples.value=d,l.weights.value=p,l.latitudinal.value="latitudinal"===o,a&&(l.poleAxis.value=a),l.dTheta.value=c,l.mipInt.value=8-n,l.inputEncoding.value=av[e.texture.encoding],l.outputEncoding.value=av[e.texture.encoding];var y=dv[r];Ev(t,v=3*Math.max(0,rv-2*y),(0===r?0:2*rv)+2*y*(r>4?r-8+4:0),3*y,2*y),mv.setRenderTarget(t),mv.render(s,sv)}function Lv(){var e=new Yd({uniforms:{envMap:{value:null},texelSize:{value:new jo(1,1)},inputEncoding:{value:av[Zi]},outputEncoding:{value:av[Zi]}},vertexShader:Ov(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n${Rv()}\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:zn,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function Cv(){var e=new Yd({uniforms:{envMap:{value:null},inputEncoding:{value:av[Zi]},outputEncoding:{value:av[Zi]}},vertexShader:Ov(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n${Rv()}\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:zn,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function Ov(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"}function Rv(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"}function Nv(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ys(e,t,n,i,o,a)}bv.prototype={constructor:bv,fromScene:function(e,t=0,n=.1,r=100){vv=mv.getRenderTarget();var i=_v();return function(e,t,n,r){var i=new _l(90,1,t,n),o=[1,1,1,1,-1,1],a=[1,1,-1,-1,-1,1],s=mv.outputEncoding,l=mv.toneMapping,u=mv.toneMappingExposure,c=mv.getClearColor(),h=mv.getClearAlpha();mv.toneMapping=yr,mv.toneMappingExposure=1,mv.outputEncoding=Zi,e.scale.z*=-1;var d=e.background;if(d&&d.isColor){d.convertSRGBToLinear();var p=Math.max(d.r,d.g,d.b),f=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);d=d.multiplyScalar(Math.pow(2,-f));var m=(f+128)/255;mv.setClearColor(d,m),e.background=null}for(var v=0;v<6;v++){var g=v%3;0==g?(i.up.set(0,o[v],0),i.lookAt(a[v],0,0)):1==g?(i.up.set(0,0,o[v]),i.lookAt(0,a[v],0)):(i.up.set(0,o[v],0),i.lookAt(0,0,a[v])),Ev(r,g*rv,v>2?rv:0,rv,rv),mv.setRenderTarget(r),mv.render(e,i)}mv.toneMapping=l,mv.toneMappingExposure=u,mv.outputEncoding=s,mv.setClearColor(c,h),e.scale.z*=-1}(e,n,r,i),t>0&&Av(i,0,0,t),Mv(i),wv(i),i},fromEquirectangular:function(e){return e.magFilter=Fr,e.minFilter=Fr,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){vv=mv.getRenderTarget();var t=_v(e);return function(e,t){var n=new Ta;e.isCubeTexture?null==cv&&(cv=Cv()):null==uv&&(uv=Lv());var r=e.isCubeTexture?cv:uv;n.add(new al(hv[0],r));var i=r.uniforms;i.envMap.value=e,e.isCubeTexture||i.texelSize.value.set(1/e.image.width,1/e.image.height);i.inputEncoding.value=av[e.encoding],i.outputEncoding.value=av[e.encoding],Ev(t,0,0,3*rv,2*rv),mv.setRenderTarget(t),mv.render(n,sv)}(e,t),Mv(t),wv(t),t},compileCubemapShader:function(){null==cv&&Sv(cv=Cv())},compileEquirectangularShader:function(){null==uv&&Sv(uv=Lv())},dispose:function(){lv.dispose(),null!=cv&&cv.dispose(),null!=uv&&uv.dispose();for(var e=0;e<hv.length;e++)hv[e].dispose()}};var Fv=0,Iv=1;function kv(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Dv(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function zv(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ah(e,t)}function Uv(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Qc(e)}function jv(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ah(e,t)}function Bv(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new wh(e)}function Gv(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new wh(e)}function Hv(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new wh(e)}function Vv(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Zo(e,t,n)}function Wv(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ss(e,t).setUsage(Ao)}function Xv(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ts(e,t)}function Yv(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Es(e,t)}function qv(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ms(e,t)}function Jv(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new As(e,t)}function Qv(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ps(e,t)}function Zv(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ls(e,t)}function $v(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Cs(e,t)}function Kv(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Os(e,t)}function eg(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Rs(e,t)}function tg(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zp.call(this,e),this.type="catmullrom",this.closed=!0}function ng(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zp.call(this,e),this.type="catmullrom"}function rg(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),zp.call(this,e),this.type="catmullrom"}function ig(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new $m(e)}function og(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Wm(e,t)}function ag(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new bh(new zd(e.geometry),new hh({color:void 0!==t?t:16777215}))}function sg(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new bh(new Nh(e.geometry),new hh({color:void 0!==t?t:16777215}))}function lg(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Sp(e)}function ug(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Mp(e)}function cg(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Sl(e,n)}Cp.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Cp.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Qp.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new pl,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Zo(i.x,i.y,i.z||0))}return t}}),Object.assign(Zp.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),tg.prototype=Object.create(zp.prototype),ng.prototype=Object.create(zp.prototype),rg.prototype=Object.create(zp.prototype),Object.assign(rg.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Fm.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Pm.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(_p.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),pf.extractUrlBase(e)}}),_p.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(yf.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(ym.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(za.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Al.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},_m.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Uo,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Uo.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Uo.ceilPowerOfTwo(e)}}),Object.assign(Bo.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(oa.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Zo).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),Ka.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},qo.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ja.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(cs.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(cs,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),cs.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),cs.getNormal(e,t,n,r)}}),Object.assign($p.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Sd(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Id(this,e)}}),Object.assign(jo.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Zo.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Wo.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(pl.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(Sa.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Sa.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(al.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(al.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),qi},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(eh.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ih.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),th.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Cp.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),_l.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Kp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ss.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ao},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ao)}}}),Object.assign(Ss.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ao:Mo),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Gs.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ss(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Gs.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Nc.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Ao},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Nc.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Ao:Mo),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Td.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(cm.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(bs.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new fs}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===Nn}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Qd.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(xl.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Cc.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Cc.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?$i:Zi}}}),Object.defineProperties(_c.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Xo.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Hf.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Lf).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Jf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},wl.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var hg={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function dg(){console.error("THREE.CanvasRenderer has been removed")}function pg(){console.error("THREE.JSONLoader has been removed.")}Go.crossOrigin=void 0,Go.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Lp;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Go.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Pp;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Go.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Go.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var fg={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function mg(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gn}}));var vg=n(33),gg=n.n(vg),yg=n(34),xg=n.n(yg);function bg(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+",a:"+a+"}":"unknown format"}var _g=Array.prototype.forEach,wg=Array.prototype.slice,Sg={BREAK:{},extend:function(e){return this.each(wg.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(wg.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=wg.call(arguments);return function(){for(var t=wg.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(_g&&e.forEach&&e.forEach===_g)e.forEach(t,n);else if(e.length===e.length+0){var r,i=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||e.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}},toArray:function(e){return e.toArray?e.toArray():wg.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},Tg=[{litmus:Sg.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:bg},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:bg},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:bg},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:bg}}},{litmus:Sg.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:Sg.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:Sg.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(Sg.isNumber(e.r)&&Sg.isNumber(e.g)&&Sg.isNumber(e.b)&&Sg.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(Sg.isNumber(e.r)&&Sg.isNumber(e.g)&&Sg.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(Sg.isNumber(e.h)&&Sg.isNumber(e.s)&&Sg.isNumber(e.v)&&Sg.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(Sg.isNumber(e.h)&&Sg.isNumber(e.s)&&Sg.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],Eg=void 0,Mg=void 0,Ag=function(){Mg=!1;var e=arguments.length>1?Sg.toArray(arguments):arguments[0];return Sg.each(Tg,(function(t){if(t.litmus(e))return Sg.each(t.conversions,(function(t,n){if(Eg=t.read(e),!1===Mg&&!1!==Eg)return Mg=Eg,Eg.conversionName=n,Eg.conversion=t,Sg.BREAK})),Sg.BREAK})),Mg},Pg=void 0,Lg={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/o:t===i?2+(n-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(Pg=8*t)|e&~(255<<Pg)}},Cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Rg=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ng=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},Fg=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Ig=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},kg=function(){function e(){if(Og(this,e),this.__state=Ag.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Rg(e,[{key:"toString",value:function(){return bg(this)}},{key:"toHexString",value:function(){return bg(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function Dg(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||kg.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(kg.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function zg(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||kg.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(kg.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}kg.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=Lg.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");Sg.extend(e.__state,Lg.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},kg.recalculateHSV=function(e){var t=Lg.rgb_to_hsv(e.r,e.g,e.b);Sg.extend(e.__state,{s:t.s,v:t.v}),Sg.isNaN(t.h)?Sg.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},kg.COMPONENTS=["r","g","b","h","s","v","hex","a"],Dg(kg.prototype,"r",2),Dg(kg.prototype,"g",1),Dg(kg.prototype,"b",0),zg(kg.prototype,"h"),zg(kg.prototype,"s"),zg(kg.prototype,"v"),Object.defineProperty(kg.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(kg.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=Lg.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var Ug=function(){function e(t,n){Og(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return Rg(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),jg={};Sg.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){Sg.each(e,(function(e){jg[e]=t}))}));var Bg=/(\d+(\.\d+)?)px/;function Gg(e){if("0"===e||Sg.isUndefined(e))return 0;var t=e.match(Bg);return Sg.isNull(t)?0:parseFloat(t[1])}var Hg={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;Sg.isUndefined(i)&&(i=!0),Sg.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=jg[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;Sg.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}Sg.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),Hg},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),Hg},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Hg},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return Hg},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return Gg(t["border-left-width"])+Gg(t["border-right-width"])+Gg(t["padding-left"])+Gg(t["padding-right"])+Gg(t.width)},getHeight:function(e){var t=getComputedStyle(e);return Gg(t["border-top-width"])+Gg(t["border-bottom-width"])+Gg(t["padding-top"])+Gg(t["padding-bottom"])+Gg(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},Vg=function(e){function t(e,n){Og(this,t);var r=Ig(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),Hg.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return Fg(t,e),Rg(t,[{key:"setValue",value:function(e){var n=Ng(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Ng(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ug),Wg=function(e){function t(e,n,r){Og(this,t);var i=Ig(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,a=i;if(i.__select=document.createElement("select"),Sg.isArray(o)){var s={};Sg.each(o,(function(e){s[e]=e})),o=s}return Sg.each(o,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),Hg.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return Fg(t,e),Rg(t,[{key:"setValue",value:function(e){var n=Ng(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return Hg.isActive(this.__select)?this:(this.__select.value=this.getValue(),Ng(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(Ug),Xg=function(e){function t(e,n){Og(this,t);var r=Ig(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Hg.bind(r.__input,"keyup",o),Hg.bind(r.__input,"change",o),Hg.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),Hg.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Fg(t,e),Rg(t,[{key:"updateDisplay",value:function(){return Hg.isActive(this.__input)||(this.__input.value=this.getValue()),Ng(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Ug);function Yg(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var qg=function(e){function t(e,n,r){Og(this,t);var i=Ig(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,Sg.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=Yg(i.__impliedStep),i}return Fg(t,e),Rg(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),Ng(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=Yg(e),this}}]),t}(Ug);var Jg=function(e){function t(e,n,r){Og(this,t);var i=Ig(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(e){var t=a-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),a=e.clientY}function u(){Hg.unbind(window,"mousemove",l),Hg.unbind(window,"mouseup",u),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),Hg.bind(i.__input,"change",(function(){var e=parseFloat(o.__input.value);Sg.isNaN(e)||o.setValue(e)})),Hg.bind(i.__input,"blur",(function(){s()})),Hg.bind(i.__input,"mousedown",(function(e){Hg.bind(window,"mousemove",l),Hg.bind(window,"mouseup",u),a=e.clientY})),Hg.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,s())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return Fg(t,e),Rg(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),Ng(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(qg);function Qg(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var Zg=function(e){function t(e,n,r,i,o){Og(this,t);var a=Ig(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:o})),s=a;function l(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(Qg(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function u(){Hg.unbind(window,"mousemove",l),Hg.unbind(window,"mouseup",u),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(Qg(t,n.left,n.right,s.__min,s.__max))}function h(){Hg.unbind(window,"touchmove",c),Hg.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),Hg.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),Hg.bind(window,"mousemove",l),Hg.bind(window,"mouseup",u),l(e)})),Hg.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;Hg.bind(window,"touchmove",c),Hg.bind(window,"touchend",h),c(e)})),Hg.addClass(a.__background,"slider"),Hg.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return Fg(t,e),Rg(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",Ng(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(qg),$g=function(e){function t(e,n,r){Og(this,t);var i=Ig(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,Hg.bind(i.__button,"click",(function(e){return e.preventDefault(),o.fire(),!1})),Hg.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return Fg(t,e),Rg(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(Ug),Kg=function(e){function t(e,n){Og(this,t);var r=Ig(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new kg(r.getValue()),r.__temp=new kg(0);var i=r;r.domElement=document.createElement("div"),Hg.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",Hg.bind(r.__input,"keydown",(function(e){13===e.keyCode&&h.call(this)})),Hg.bind(r.__input,"blur",h),Hg.bind(r.__selector,"mousedown",(function(){Hg.addClass(this,"drag").bind(window,"mouseup",(function(){Hg.removeClass(i.__selector,"drag")}))})),Hg.bind(r.__selector,"touchstart",(function(){Hg.addClass(this,"drag").bind(window,"touchend",(function(){Hg.removeClass(i.__selector,"drag")}))}));var o,a=document.createElement("div");function s(e){p(e),Hg.bind(window,"mousemove",p),Hg.bind(window,"touchmove",p),Hg.bind(window,"mouseup",u),Hg.bind(window,"touchend",u)}function l(e){f(e),Hg.bind(window,"mousemove",f),Hg.bind(window,"touchmove",f),Hg.bind(window,"mouseup",c),Hg.bind(window,"touchend",c)}function u(){Hg.unbind(window,"mousemove",p),Hg.unbind(window,"touchmove",p),Hg.unbind(window,"mouseup",u),Hg.unbind(window,"touchend",u),d()}function c(){Hg.unbind(window,"mousemove",f),Hg.unbind(window,"touchmove",f),Hg.unbind(window,"mouseup",c),Hg.unbind(window,"touchend",c),d()}function h(){var e=Ag(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function d(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,o=n.clientY,a=(r-t.left)/(t.right-t.left),s=1-(o-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return Sg.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Sg.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Sg.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Sg.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Sg.extend(a.style,{width:"100%",height:"100%",background:"none"}),ty(a,"top","rgba(0,0,0,0)","#000"),Sg.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",Sg.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),Hg.bind(r.__saturation_field,"mousedown",s),Hg.bind(r.__saturation_field,"touchstart",s),Hg.bind(r.__field_knob,"mousedown",s),Hg.bind(r.__field_knob,"touchstart",s),Hg.bind(r.__hue_field,"mousedown",l),Hg.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return Fg(t,e),Rg(t,[{key:"updateDisplay",value:function(){var e=Ag(this.getValue());if(!1!==e){var t=!1;Sg.each(kg.COMPONENTS,(function(n){if(!Sg.isUndefined(e[n])&&!Sg.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&Sg.extend(this.__color.__state,e)}Sg.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;Sg.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,ty(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Sg.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(Ug),ey=["-moz-","-o-","-webkit-","-ms-",""];function ty(e,t,n,r){e.style.background="",Sg.each(ey,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var ny=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}},ry='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',iy=function(e,t){var n=e[t];return Sg.isArray(arguments[2])||Sg.isObject(arguments[2])?new Wg(e,t,arguments[2]):Sg.isNumber(n)?Sg.isNumber(arguments[2])&&Sg.isNumber(arguments[3])?Sg.isNumber(arguments[4])?new Zg(e,t,arguments[2],arguments[3],arguments[4]):new Zg(e,t,arguments[2],arguments[3]):Sg.isNumber(arguments[4])?new Jg(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Jg(e,t,{min:arguments[2],max:arguments[3]}):Sg.isString(n)?new Xg(e,t):Sg.isFunction(n)?new $g(e,t,""):Sg.isBoolean(n)?new Vg(e,t):null};var oy=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},ay=function(){function e(){Og(this,e),this.backgroundElement=document.createElement("div"),Sg.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Hg.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Sg.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;Hg.bind(this.backgroundElement,"click",(function(){t.hide()}))}return Rg(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Sg.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",Hg.unbind(e.domElement,"webkitTransitionEnd",t),Hg.unbind(e.domElement,"transitionend",t),Hg.unbind(e.domElement,"oTransitionEnd",t)};Hg.bind(this.domElement,"webkitTransitionEnd",t),Hg.bind(this.domElement,"transitionend",t),Hg.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Hg.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Hg.getHeight(this.domElement)/2+"px"}}]),e}();ny(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var sy=function(){try{return!!window.localStorage}catch(e){return!1}}(),ly=void 0,uy=!0,cy=void 0,hy=!1,dy=[],py=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Hg.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=Sg.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=Sg.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),Sg.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),Sg.isUndefined(r.parent)&&r.hideable&&dy.push(this),r.resizable=Sg.isUndefined(r.parent)&&r.resizable,r.autoPlace&&Sg.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,o=sy&&"true"===localStorage.getItem(xy(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,Ty(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,s&&(s.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?Hg.addClass(n.__ul,e.CLASS_CLOSED):Hg.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return o},set:function(e){sy&&(o=e,e?Hg.bind(window,"unload",a):Hg.unbind(window,"unload",a),localStorage.setItem(xy(n,"isLocal"),e))}}}),Sg.isUndefined(r.parent)){if(this.closed=r.closed||!1,Hg.addClass(this.domElement,e.CLASS_MAIN),Hg.makeSelectable(this.domElement,!1),sy&&o){n.useLocalStorage=!0;var l=localStorage.getItem(xy(this,"gui"));l&&(r.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,Hg.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(Hg.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Hg.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Hg.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var u=document.createTextNode(r.name);Hg.addClass(u,"controller-name"),s=fy(n,u);Hg.addClass(this.__ul,e.CLASS_CLOSED),Hg.addClass(s,"title"),Hg.bind(s,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(Sg.isUndefined(r.parent)&&(uy&&(cy=document.createElement("div"),Hg.addClass(cy,"dg"),Hg.addClass(cy,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(cy),uy=!1),cy.appendChild(this.domElement),Hg.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||Ty(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},Hg.bind(window,"resize",this.__resizeHandler),Hg.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Hg.bind(this.__ul,"transitionend",this.__resizeHandler),Hg.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&Sy(this),a=function(){sy&&"true"===localStorage.getItem(xy(n,"isLocal"))&&localStorage.setItem(xy(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,Sg.defer((function(){i.width-=1})))};function fy(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function my(e){Hg.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&Hg.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function vy(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function gy(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o.Default)return;a=o.Default}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function yy(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new Kg(t,n);else{var o=[t,n].concat(r.factoryArgs);i=iy.apply(e,o)}r.before instanceof Ug&&(r.before=r.before.__li),gy(e,i),Hg.addClass(i.domElement,"c");var a=document.createElement("span");Hg.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var l=fy(e,s,r.before);return Hg.addClass(l,py.CLASS_CONTROLLER_ROW),i instanceof Kg?Hg.addClass(l,"color"):Hg.addClass(l,Cg(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,Sg.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),yy(e,n.object,n.property,{before:r,factoryArgs:[Sg.toArray(arguments)]})}if(Sg.isArray(t)||Sg.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),yy(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Zg){var r=new Jg(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});Sg.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}})),Hg.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof Jg){var i=function(t){if(Sg.isNumber(n.__min)&&Sg.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=yy(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=Sg.compose(i,n.min),n.max=Sg.compose(i,n.max)}else n instanceof Vg?(Hg.bind(t,"click",(function(){Hg.fakeEvent(n.__checkbox,"click")})),Hg.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof $g?(Hg.bind(t,"click",(function(){Hg.fakeEvent(n.__button,"click")})),Hg.bind(t,"mouseover",(function(){Hg.addClass(n.__button,"hover")})),Hg.bind(t,"mouseout",(function(){Hg.removeClass(n.__button,"hover")}))):n instanceof Kg&&(Hg.addClass(t,"color"),n.updateDisplay=Sg.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=Sg.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&vy(e.getRoot(),!0),t}),n.setValue)}(e,l,i),e.__controllers.push(i),i}function xy(e,t){return document.location.href+"."+t}function by(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function _y(e,t){t.style.display=e.useLocalStorage?"block":"none"}function wy(e){var t=e.__save_row=document.createElement("li");Hg.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),Hg.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",Hg.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",Hg.addClass(r,"button"),Hg.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",Hg.addClass(i,"button"),Hg.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",Hg.addClass(o,"button"),Hg.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?Sg.each(e.load.remembered,(function(t,n){by(e,n,n===e.preset)})):by(e,"Default",!1),Hg.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),sy){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(xy(0,"isLocal"))&&l.setAttribute("checked","checked"),_y(e,s),Hg.bind(l,"change",(function(){e.useLocalStorage=!e.useLocalStorage,_y(e,s)}))}var u=document.getElementById("dg-new-constructor");Hg.bind(u,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||ly.hide()})),Hg.bind(n,"click",(function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),ly.show(),u.focus(),u.select()})),Hg.bind(r,"click",(function(){e.save()})),Hg.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),Hg.bind(o,"click",(function(){e.revert()}))}function Sy(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){Hg.removeClass(e.__closeButton,py.CLASS_DRAG),Hg.unbind(window,"mousemove",n),Hg.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,Hg.addClass(e.__closeButton,py.CLASS_DRAG),Hg.bind(window,"mousemove",n),Hg.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),Sg.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Hg.bind(e.__resize_handle,"mousedown",i),Hg.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function Ty(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Ey(e,t){var n={};return Sg.each(e.__rememberedObjects,(function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];Sg.each(a,(function(e,n){o[n]=t?e.initialValue:e.getValue()})),n[i]=o})),n}py.toggleHide=function(){hy=!hy,Sg.each(dy,(function(e){e.domElement.style.display=hy?"none":""}))},py.CLASS_AUTO_PLACE="a",py.CLASS_AUTO_PLACE_CONTAINER="ac",py.CLASS_MAIN="main",py.CLASS_CONTROLLER_ROW="cr",py.CLASS_TOO_TALL="taller-than-window",py.CLASS_CLOSED="closed",py.CLASS_CLOSE_BUTTON="close-button",py.CLASS_CLOSE_TOP="close-top",py.CLASS_CLOSE_BOTTOM="close-bottom",py.CLASS_DRAG="drag",py.DEFAULT_WIDTH=245,py.TEXT_CLOSED="Close Controls",py.TEXT_OPEN="Open Controls",py._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||py.toggleHide()},Hg.bind(window,"keydown",py._keydownHandler,!1),Sg.extend(py.prototype,{add:function(e,t){return yy(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return yy(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;Sg.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&cy.removeChild(this.domElement);var e=this;Sg.each(this.__folders,(function(t){e.removeFolder(t)})),Hg.unbind(window,"keydown",py._keydownHandler,!1),my(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new py(t);this.__folders[e]=n;var r=fy(this,n.domElement);return Hg.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],my(e);var t=this;Sg.each(e.__folders,(function(t){e.removeFolder(t)})),Sg.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Hg.getOffset(e.__ul).top,n=0;Sg.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=Hg.getHeight(t))})),window.innerHeight-t-20<n?(Hg.addClass(e.domElement,py.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(Hg.removeClass(e.domElement,py.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&Sg.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:Sg.debounce((function(){this.onResize()}),50),remember:function(){if(Sg.isUndefined(ly)&&((ly=new ay).domElement.innerHTML=ry),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;Sg.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&wy(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&Ty(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=Ey(this)),e.folders={},Sg.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Ey(this),vy(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=Ey(this,!0)),this.load.remembered[e]=Ey(this),this.preset=e,by(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){Sg.each(this.__controllers,(function(t){this.getRoot().load.remembered?gy(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),Sg.each(this.__folders,(function(e){e.revert(e)})),e||vy(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&oy.call(window,(function(){e(t)}));Sg.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){Sg.each(this.__controllers,(function(e){e.updateDisplay()})),Sg.each(this.__folders,(function(e){e.updateDisplay()}))}});var My={color:{Color:kg,math:Lg,interpret:Ag},controllers:{Controller:Ug,BooleanController:Vg,OptionController:Wg,StringController:Xg,NumberController:qg,NumberControllerBox:Jg,NumberControllerSlider:Zg,FunctionController:$g,ColorController:Kg},dom:{dom:Hg},gui:{GUI:py},GUI:py},Ay=n(35),Py=n.n(Ay),Ly=n(36),Cy=n.n(Ly);function Oy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ry,Ny,Fy,Iy=function(){function e(t){var n=t.audioElement,r=t.audioSrc,i=t.fftSize,o=void 0===i?64:i,a=t.dataLength,s=void 0===a?110:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fftSize=o,this.audioElement=n,this.configElement(r),this.context=new AudioContext,this.offlineContext=new OfflineAudioContext(2,1764e3,44100),this.source=this.context.createMediaElementSource(this.audioElement),this.analyser=this.context.createAnalyser(),this.source.connect(this.analyser),this.source.connect(this.context.destination),this.frequencyData=new Uint8Array(s),this.play()}var t,n,r;return t=e,(n=[{key:"close",value:function(){this.context&&this.context.close()}},{key:"setSmoothingTimeConstant",value:function(e){this.analyser.smoothingTimeConstant=e}},{key:"configElement",value:function(e){var t=this.audioElement;t.crossOrigin="anonymous",t.type="audio/mp3",t.src=e}},{key:"play",value:function(){this.audioElement.play()}},{key:"pause",value:function(){this.audioElement.pause()}},{key:"stop",value:function(){this.pause(),this.audioElement.currentTime=0}},{key:"volume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.audioElement.volume=e}},{key:"getByteFrequencyData",value:function(){this.analyser.getByteFrequencyData(this.frequencyData)}},{key:"getAverageFrequency",value:function(){return this.frequencyData.reduce((function(e,t){return e+=t}),0)/(this.frequencyData.length-1)}},{key:"createGain",value:function(){return this.context.createGain()}},{key:"createBiquadFilter",value:function(){return this.context.createBiquadFilter()}}])&&Oy(t.prototype,n),r&&Oy(t,r),e}(),ky={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function Dy(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(Dy.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),Dy.FullScreenQuad=(Ry=new sf(-1,1,1,-1,0,1),Ny=new Rl(2,2),Fy=function(e){this._mesh=new al(Ny,e)},Object.defineProperty(Fy.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(Fy.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,Ry)}}),Fy);var zy=function(e,t){Dy.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof xl?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=yl.clone(e.uniforms),this.material=new xl({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Dy.FullScreenQuad(this.material)};zy.prototype=Object.assign(Object.create(Dy.prototype),{constructor:zy,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var Uy=function(e,t){Dy.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};Uy.prototype=Object.assign(Object.create(Dy.prototype),{constructor:Uy,render:function(e,t,n){var r,i,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var jy=function(){Dy.call(this),this.needsSwap=!1};jy.prototype=Object.create(Dy.prototype),Object.assign(jy.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var By=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:Ur,magFilter:Ur,format:ii,stencilBuffer:!1},r=e.getSize(new jo);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new Xo(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===ky&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===zy&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new zy(ky),this.clock=new Df};Object.assign(By.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Uy&&(t instanceof Uy?i=!0:t instanceof jy&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new jo);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var Gy=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(Gy.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),Gy.FullScreenQuad=function(){var e=new sf(-1,1,1,-1,0,1),t=new Rl(2,2),n=function(e){this._mesh=new al(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}();var Hy=function(e,t,n,r,i){Dy.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};function Vy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Hy.prototype=Object.assign(Object.create(Dy.prototype),{constructor:Hy,render:function(e,t,n){var r,i,o=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(r=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,i),this.scene.overrideMaterial=null,e.autoClear=o}});var Wy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.composer=new By(t.renderer),this.addPass(new Hy(t.scene,t.camera))}var t,n,r;return t=e,(n=[{key:"resize",value:function(e,t){this.composer.setSize(e,t)}},{key:"addPass",value:function(e){this.composer.addPass(e)}},{key:"render",value:function(){this.composer.render()}}])&&Vy(t.prototype,n),r&&Vy(t,r),e}();function Xy(e){return(Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qy(e,t,n[t])}))}return e}function qy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zy(e,t){return!t||"object"!==Xy(t)&&"function"!=typeof t?ex(e):t}function $y(e){return($y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ky(e,t){return(Ky=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ex(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var tx=Cy()(r),nx=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Jy(this,t),r=Zy(this,$y(t).call(this));var o=Yy({cameraNear:.1,cameraFar:1e3},i);r.isInitiated=!1,r.frag="",r.vert="",r.audioElement=n,r.audioSrc="",r.audio=null,r.startTime=Date.now(),r.canvas=e,r.mouse={},r.gui={},r.stats={},r.scene={},r.camera={},r.scene=new Ta,o.fog&&(r.scene.fog=o.fog);var a=window.innerWidth/window.innerHeight;r.camera=new _l(75,a,o.cameraNear,o.cameraFar),r.camera.position.set(0,1,-3),r.camera.lookAt(new Zo),r.renderer=new Cc({canvas:r.canvas,antialias:!0,alpha:!1,stencil:!1}),r.renderer.setSize(window.innerWidth,window.innerHeight),r.renderer.setClearColor(16768477);var s=Math.min(1.5,window.devicePixelRatio);return r.renderer.setPixelRatio(s),window.scene=r.scene,r.controls=new tx(r.camera,r.renderer.domElement),r.pp=new Wy(ex(ex(r))),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ky(e,t)}(t,e),n=t,(r=[{key:"clear",value:function(){}},{key:"triggerUnmount",value:function(){this.isInitiated&&this.unmount()}},{key:"init",value:function(){}},{key:"draw",value:function(){}},{key:"render",value:function(){this.init(),this.draw(),this.isInitiated=!0}},{key:"clearScene",value:function(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0])}},{key:"initAudio",value:function(e){var t=Yy({audioElement:this.audioElement,audioSrc:this.audioSrc,camera:this.camera},e);this.audio=new Iy(t)}},{key:"createDatGUI",value:function(){this.gui=new My.GUI}},{key:"createStats",value:function(){this.stats=new Py.a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)}},{key:"createMouseListener",value:function(){var e=this;this.mouse=new jo,this.canvas.addEventListener("mousemove",(function(t){e.mouse.x=t.clientX/e.canvas.width*2-1,e.mouse.y=-t.clientY/e.canvas.height*2+1}))}},{key:"resize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.pp.resize(e,t),this.customResize(e,t)}},{key:"customResize",value:function(e,t){}},{key:"setCameraPos",value:function(e,t,n){this.camera.position.set(e,t,n)}},{key:"lookAt",value:function(e,t,n){this.camera.lookAt(e,t,n)}},{key:"setClearColor",value:function(e){this.renderer.setClearColor(e)}},{key:"disableOrbitControls",value:function(){this.controls.enabled=!1}},{key:"getUTime",value:function(){return(Date.now()-this.startTime)/1e3}}])&&Qy(n.prototype,r),i&&Qy(n,i),t}(Io),rx={clamp:function(e,t,n){return Math.min(Math.max(n,e),t)},remap:function(e,t,n,r,i){return n+(r-n)*(i-e)/(t-e)},toRadians:function(e){return e*Math.PI/180},calcCircumference:function(e){return 2*Math.PI*e},getCenter:function(e){return(new za).setFromObject(e).getCenter()},randomFloatBetween:function(e,t){return Math.random()*(t-e)+e},randomIntBetween:function(e,t){return Math.round(rx.randomFloatBetween(e,t))},randomBool:function(){return Math.random()>=.5},weightedRandomBool:function(e){return Math.random()<=e},randomSign:function(){return Math.random()>=.5?1:-1},lerp:function(e,t,n){return e*(1-n)+t*n},shaderParse:function(e){return e.replace(/\/\/\s?chunk\(\s?(\w+)\s?\);/g,(function(e,t){return Nl[t]+"\n"}))}},ix=rx;function ox(e){return(ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ax(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sx(e,t){return!t||"object"!==ox(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lx(e){return(lx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ux(e,t){return(ux=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sx(this,lx(t).call(this,e))).geometry={},n.material={},n.spotLight={},n.ambientLight={},n.isMouseDown=!1,n.displacement=0,n.displacementInc=.02,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ux(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.geometry.dispose(),this.material.dispose(),this.clearScene()}},{key:"init",value:function(){var e=this;this.disableOrbitControls(),this.setClearColor(15854571),this.setCameraPos(0,2,-6),this.createCenterPiece(),this.createMouseListener(),this.canvas.addEventListener("mousedown",(function(t){e.isMouseDown=!0})),this.canvas.addEventListener("mouseup",(function(t){e.isMouseDown=!1})),this.canvas.addEventListener("touchstart",(function(t){e.isMouseDown=!0})),this.canvas.addEventListener("touchend",(function(t){e.isMouseDown=!1}))}},{key:"createCenterPiece",value:function(){this.geometry=new Gh(1,2),this.geometry.computeFlatVertexNormals(),this.material=new Yd({vertexShader:gg.a,fragmentShader:xg.a,uniforms:{u_displacement:{type:"f",value:0},u_should_explode:{type:"bool",value:!0}}});var e=new al(this.geometry,this.material);this.scene.add(e)}},{key:"createSpehereGeometry",value:function(){for(var e=0,t=0,n=ix.toRadians(1.8),r=new Gs,i=[],o=0;o<200;o++)i.push(5*Math.cos(e)*Math.sin(t),5*Math.sin(e)*Math.sin(t),5*Math.cos(t)),e+=n,t+=n;var a=new Ss(new Float32Array(i),3);return r.addAttribute("position",a),r}},{key:"draw",value:function(){var e=this;this.isMouseDown?this.displacement=Math.min(1,this.displacement+this.displacementInc):this.displacement=Math.max(0,this.displacement-this.displacementInc),this.material.uniforms.u_displacement.value=this.displacement,this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.draw()}))}}])&&ax(n.prototype,r),i&&ax(n,i),t}(nx);n(108),n(109);function hx(e){return(hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function px(e,t){return!t||"object"!==hx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fx(e){return(fx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mx(e,t){return(mx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vx={cameraNear:.01,cameraFar:200},gx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=px(this,fx(t).call(this,e,null,vx))).curve={},n.spline={},n.tunnel={},n.tube={},n.texture={},n.tubeGeometry={},n.tubeMaterial={},n.tubeSpeed=.02,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mx(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.texture.dispose(),this.tube.geometry.dispose(),this.tube.material.dispose(),this.clearScene()}},{key:"init",value:function(){this.setCameraPos(0,0,1.3),this.setClearColor(15854571),this.createLight(),this.createFog(),this.createCurve(),this.createSpline(),this.createTube(),this.disableOrbitControls()}},{key:"createLight",value:function(){var e=new ef(16777147,8943993,.9);this.scene.add(e);var t=new uf(16777215,.8);this.scene.add(t)}},{key:"createFog",value:function(){this.scene.fog=new Rc(2236962,.6,2.8)}},{key:"createTube",value:function(){this.tubeGeometry=this.createTubeGeometry(),this.tubeMaterial=this.createTubeMaterial(),this.wrapTubeMaterialMap(),this.tube=new al(this.tubeGeometry,this.tubeMaterial),this.scene.add(this.tube)}},{key:"createCurve",value:function(){for(var e=[],t=0;t<5;t+=1)e.push(new Zo(0,0,t/4*2.5));e[4].y=-.06,this.curve=new zp(e)}},{key:"createSpline",value:function(){var e=new hh,t=new pl;t.vertices=this.curve.getPoints(70),this.spline=new gh(t,e)}},{key:"createTubeGeometry",value:function(){return new Xh(this.curve,70,.02,50,!1)}},{key:"createTubeMaterial",value:function(){return this.texture=(new Lp).load(Te.T007),new _s({side:On,map:this.texture})}},{key:"wrapTubeMaterialMap",value:function(){this.tubeMaterial.map.wrapS=Or,this.tubeMaterial.map.wrapT=Or,this.tubeMaterial.map.repeat.set(20,1)}},{key:"updateMaterialOffset",value:function(){this.tubeMaterial.map.offset.x+=this.tubeSpeed}},{key:"draw",value:function(){var e=this;this.updateMaterialOffset(),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.draw()}))}}])&&dx(n.prototype,r),i&&dx(n,i),t}(nx);var yx=n(37),xx=n.n(yx),bx=n(38),_x=n.n(bx);function wx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;wx(this,e),this.geometry=new fl(2.5,3.5,2.5),this.material=new Yd({vertexShader:xx.a,fragmentShader:_x.a,uniforms:{uTime:{type:"f",value:r},uFreq:{type:"f",value:n}}}),this.mesh=new al(this.geometry,this.material);var i=t.x,o=t.y,a=t.z;this.mesh.position.set(i,o,a)}var t,n,r;return t=e,(n=[{key:"update",value:function(e,t){this.material.uniforms.uFreq.value=e,this.material.uniforms.uTime.value=t}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updatePos",value:function(){}},{key:"updateUniforms",value:function(){}}])&&Sx(t.prototype,n),r&&Sx(t,r),e}();function Ex(e){return(Ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ax(e,t){return!t||"object"!==Ex(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Px(e){return(Px=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lx(e,t){return(Lx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cx=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ax(this,Px(t).call(this,e,n))).audioSrc=be.S008,r.graph=new Pc,r.fftSize=512,r.layer0={nodes:[],group:new Pc},r.layer1={nodes:[],group:new Pc},r.layer2={nodes:[],group:new Pc},r.clock=new Df,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lx(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.audio.close(),this.layer0.nodes.forEach((function(e){return e.dispose()})),this.layer1.nodes.forEach((function(e){return e.dispose()})),this.layer2.nodes.forEach((function(e){return e.dispose()})),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setClearColor(15854571),this.setCameraPos(-20,50,10);var e={fftSize:this.fftSize};this.initAudio(e),this.initNodes()}},{key:"initNodes",value:function(){for(var e,t=this.audio.frequencyData.length,n=Math.floor(Math.sqrt(t)),r=-70,i=0;i<t;i++)i%n==0&&(e=0,r+=5),this.createNode({x:e,y:0,z:r},this.layer0),this.createNode({x:e,y:8,z:r},this.layer1),this.createNode({x:e,y:16,z:r},this.layer2),e+=5;var o=new Pc;o.add(this.layer0.group),o.add(this.layer1.group),o.add(this.layer2.group),this.lookAt(ix.getCenter(o)),this.scene.add(o)}},{key:"createNode",value:function(e,t){var n=new Tx(e);t.group.add(n.mesh),t.nodes.push(n)}},{key:"updateNodes",value:function(){var e=this,t=this.clock.getElapsedTime();this.audio.frequencyData.forEach((function(n,r){e.layer0.nodes[r].update(n,t),e.layer1.nodes[r].update(n,t),e.layer2.nodes[r].update(n,t)}))}},{key:"draw",value:function(){var e=this;this.audio.getByteFrequencyData(),this.updateNodes(),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.draw()}))}}])&&Mx(n.prototype,r),i&&Mx(n,i),t}(nx);function Ox(e){return(Ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nx(e,t){return!t||"object"!==Ox(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fx(e){return(Fx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ix(e,t){return(Ix=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kx=[4521898,10140831,14516224],Dx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Nx(this,Fx(t).call(this,e))).curve={},n.line={},n.tube={},n.dirLightPositive={},n.dirLightNegative={},n.lightRight={},n.lightLeft={},n.cameraPosOnCurve=0,n.cameraIncrement=.001,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ix(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.tube.geometry.dispose(),this.tube.material.dispose(),this.clearScene()}},{key:"init",value:function(){this.setClearColor(13422540),this.setCameraPos(0,50,-100),this.createLights(),this.scene.fog=new Oc(13627375,.05),this.curve=new zp(this.getInitialCurvePoints()),this.createTunnel()}},{key:"createLights",value:function(){this.dirLightPositive=new uf(kx[0],.5),this.scene.add(this.dirLightPositive),this.dirLightNegative=new uf(kx[0],.5),this.scene.add(this.dirLightNegative),this.lightRight=new af(kx[1],2,15),this.scene.add(this.lightRight),this.lightLeft=new af(kx[2],3,15),this.scene.add(this.lightLeft)}},{key:"getInitialCurvePoints",value:function(){return[new Zo(0,0,0),new Zo(-60,0,-22),new Zo(-80,0,10),new Zo(-30,30,60),new Zo(15,0,70),new Zo(35,0,60),new Zo(50,0,22),new Zo(0,0,0)]}},{key:"createLine",value:function(){var e=this.curve.getPoints(50),t=(new Gs).setFromPoints(e),n=new hh({color:16711680});this.line=new gh(t,n),this.scene.add(this.line)}},{key:"createTunnel",value:function(){var e=new Xh(this.curve,70,5,10,!0),t=(new Lp).load(Te.T009);t.wrapT=Or,t.wrapS=Or;var n=new Kd({color:16777215,opacity:1,map:t,side:On});this.tube=new al(e,n),this.scene.add(this.tube)}},{key:"moveCamera",value:function(){this.cameraPosOnCurve+=this.cameraIncrement;var e=this.getPoint(this.cameraPosOnCurve),t=e.x,n=e.y,r=e.z;this.setCameraPos(t,n,r);var i=this.getPoint(this.cameraPosOnCurve+this.cameraIncrement);this.camera.lookAt(i);var o=i.x,a=i.y,s=i.z;this.dirLightNegative.position.set(o,a-1,s-1),this.dirLightPositive.position.set(o,a+1,s+1),this.lightLeft.position.set(o+2,a-3,s+2),this.lightRight.position.set(o-2,a-3,s-2)}},{key:"getPoint",value:function(e){return this.curve.getPointAt((e%1).toFixed(5))}},{key:"draw",value:function(){var e=this;this.renderer.render(this.scene,this.camera),this.moveCamera(),requestAnimationFrame((function(){return e.draw()}))}}])&&Rx(n.prototype,r),i&&Rx(n,i),t}(nx);function zx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ux=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onMouseMove=function(e){n.mouse.x=e.clientX/n.context.canvas.width*2-1,n.mouse.y=-e.clientY/n.context.canvas.height*2+1},this.context=t,this.intersection=void 0,this.mouse=new jo,this.raycaster=new dm,this.context.canvas.addEventListener("mousemove",this.onMouseMove,!1)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.context.canvas.removeEventListener("mousemove",this.onMouseMove,!1)}},{key:"update",value:function(){this.raycaster.setFromCamera(this.mouse,this.context.camera);var e=this.raycaster.intersectObjects(this.context.lines.children);this.intersection=e[0]}}])&&zx(t.prototype,n),r&&zx(t,r),e}(),jx=[[.96,.72,.84],[.96,.83,.68],[.93,.92,.61],[.79,.95,.67],[.36,.91,.95],[.6,.73,.96],[.8,.73,1]],Bx=n(9),Gx=n.n(Bx),Hx=n(39),Vx=n.n(Hx),Wx=n(40),Xx=n.n(Wx);function Yx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qx=function(){function e(t){var n=t.width,r=t.height,i=t.color,o=t.isInteractable;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isInteractable=o,this.isActive=!1,this.noise=new Zo(0,0,0),this.maxNoise=new Zo(ix.randomFloatBetween(1.5,2),ix.randomFloatBetween(1,2),ix.randomFloatBetween(8,10)),this.noiseIncrement=new Zo(ix.randomFloatBetween(.05,.1),ix.randomFloatBetween(.05,.1),ix.randomFloatBetween(.5,1)),this.noiseDecrement=new Zo(.1*this.noiseIncrement.x,.1*this.noiseIncrement.y,.1*this.noiseIncrement.z),this.amp=0,this.maxAmp=ix.randomFloatBetween(1.7,2),this.ampIncrement=ix.randomFloatBetween(.01,.05),this.ampDecrement=.6*this.ampIncrement,this.time=0,this.timeIncrement=1/16;this.geometry=new Ol(n,r,1.2*n,1.2*r),this.material=new Yd({fragmentShader:Xx.a,vertexShader:Vx.a,uniforms:{uNoise:{value:this.noise},uTime:{value:0},uAmp:{value:this.amp},uColor:{value:i}},side:Rn,flatShading:!0}),this.pivot=new al(this.geometry,this.material),this.pivot.rotation.x+=Math.PI/2}var t,n,r;return t=e,(n=[{key:"setActive",value:function(e){this.isActive=e}},{key:"updateMatrix",value:function(){this.pivot.updateWorldMatrix()}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.isInteractable&&(this.isActive?(this.noise.set(Math.min(this.maxNoise.x,this.noise.x+this.noiseIncrement.x),Math.min(this.maxNoise.y,this.noise.y+this.noiseIncrement.y),Math.min(this.maxNoise.z,this.noise.z+this.noiseIncrement.z)),this.amp=Math.min(this.maxAmp,this.amp+this.ampIncrement),this.time+=this.timeIncrement):(this.noise.set(Math.max(0,this.noise.x-this.noiseDecrement.x),Math.max(0,this.noise.y-this.noiseDecrement.y),Math.max(0,this.noise.z-this.noiseDecrement.z)),this.amp=Math.max(0,this.amp-this.ampDecrement),this.time=Math.max(0,this.time-this.timeIncrement)),this.uniforms.uTime.value=this.time,this.uniforms.uNoise.value=this.noise,this.uniforms.uAmp.value=this.amp)}},{key:"uuid",get:function(){return this.pivot.uuid}},{key:"position",get:function(){return this.pivot.position}},{key:"rotation",get:function(){return this.pivot.rotation}},{key:"uniforms",get:function(){return this.material.uniforms}}])&&Yx(t.prototype,n),r&&Yx(t,r),e}();function Jx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numRepititions=6,this.lineWidth=50,this.lineHeight=4,this.padding=.15,this.lines=[],this.linesMap={},this.pivot=new Pc,this.createLines(),this.createInActiveLines()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.lines.forEach((function(e){return e.dispose()}))}},{key:"createLines",value:function(){for(var e=this,t=this.lineHeight+this.padding,n=-Math.floor((jx.length-1)/2)*t*this.numRepititions,r=0;r<this.numRepititions;r++)jx.forEach((function(r){var i=new qx({width:e.lineWidth,height:e.lineHeight,color:r,isInteractable:!0});i.position.z=n,e.lines.push(i),e.pivot.add(i.pivot),e.linesMap[i.uuid]=i,n+=t}))}},{key:"createInActiveLines",value:function(){for(var e=this,t=this.lineHeight+this.padding,n=-Math.floor((jx.length-1)/2)*t*this.numRepititions,r=0;r<this.numRepititions;r++)jx.forEach((function(r){var i=new qx({width:e.lineWidth,height:e.lineHeight,color:r,isInteractable:!1});i.rotation.y+=Math.PI/2,i.position.set(-e.lineWidth/2,e.lineWidth/2,n),e.lines.push(i),e.pivot.add(i.pivot),e.linesMap[i.uuid]=i,n+=t}))}},{key:"setActive",value:function(e){this.lines.forEach((function(t){t.uuid===e?t.setActive(!0):t.setActive(!1)}))}},{key:"update",value:function(){this.lines.forEach((function(e){return e.update()}))}},{key:"position",get:function(){return this.pivot.position}},{key:"children",get:function(){return this.pivot.children}}])&&Jx(t.prototype,n),r&&Jx(t,r),e}();function Zx(e){return(Zx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kx(e){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eb(e,t){return(eb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var nb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Zx(t)&&"function"!=typeof t?tb(e):t}(this,Kx(t).call(this,e))).lines=new Qx,n.mouse=new Ux(tb(tb(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eb(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.mouse.dispose(),this.lines.dispose(),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setClearColor(5592405),this.setCameraPos(27.5,3.2,-.5),this.lookAt(0,0,0),this.scene.add(this.lines.pivot)}},{key:"draw",value:function(){var e=this;this.renderer.render(this.scene,this.camera),this.mouse.update(),this.mouse.intersection?this.lines.setActive(this.mouse.intersection.object.uuid):this.lines.setActive(void 0),this.lines.update(),requestAnimationFrame((function(){return e.draw()}))}}])&&$x(n.prototype,r),i&&$x(n,i),t}(nx);var rb=n(41),ib=n.n(rb),ob=n(42),ab=n.n(ob);function sb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lb(e,t,n[t])}))}return e}function lb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cb=function(){function e(t){var n=t.shapeTexture,r=t.noiseTexture,i=t.centerCoord,o=void 0===i?new Zo:i,a=t.angle;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minY=-50,this.maxY=-35,this.centerCoord=new Zo(o.x,ix.randomFloatBetween(this.minY,this.maxY),o.z),this.minRadius=ix.randomFloatBetween(40,50),this.maxRadius=ix.randomFloatBetween(70,90),this.radius=70,this.angle=a,this.angleVelocity=ix.randomFloatBetween(.001,.005),this.yVelocity=ix.randomFloatBetween(.01,.04);var s=ix.randomFloatBetween(70,90);this.geometry=new Ol(s,s,3*s,3*s),this.material=new xl({vertexShader:ab.a,fragmentShader:ib.a,uniforms:sb({},yl.clone(Fl.sprite.uniforms),{uTime:{value:0},uTxtShape:{value:n},uTxtCloudNoise:{value:r},uFac1:{value:ix.randomFloatBetween(8,10)},uFac2:{value:ix.randomFloatBetween(2,3)},uTimeFactor1:{value:ix.randomFloatBetween(.001,.007)},uTimeFactor2:{value:ix.randomFloatBetween(1e-4,.003)},uDisplStrenght1:{value:ix.randomFloatBetween(.04,.08)},uDisplStrenght2:{value:ix.randomFloatBetween(.02,.15)}}),transparent:!0,side:Rn}),this.pivot=new al(this.geometry,this.material),this.updatePostion()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updateRadius",value:function(){this.radius=ix.remap(this.minY,this.maxY,this.minRadius,this.maxRadius,this.centerCoord.y)}},{key:"updatePostion",value:function(){this.position.x=this.centerCoord.x+this.radius*Math.cos(this.angle),this.position.z=this.centerCoord.z+this.radius*Math.sin(this.angle),this.centerCoord.y+=this.yVelocity,this.position.y=this.centerCoord.y}},{key:"update",value:function(e){this.material.uniforms.uTime.value=e}},{key:"position",get:function(){return this.pivot.position}}])&&ub(t.prototype,n),r&&ub(t,r),e}();function hb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var db=function(){function e(t){var n=t.numClouds,r=void 0===n?10:n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rotationVelocity=.001,this.numClouds=r,this.clouds=[],this.pivot=new Pc,this.createClouds()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.clouds.forEach((function(e){return e.dispose()}))}},{key:"createClouds",value:function(){for(var e=new Lp,t=e.load(Te.T011a),n=e.load(Te.T011b),r=2*Math.PI/this.numClouds,i=0;i<this.numClouds;i++){var o=i*r,a=new cb({shapeTexture:t,noiseTexture:n,centerCoord:this.position,angle:o});this.clouds.push(a),this.pivot.add(a.pivot)}}},{key:"update",value:function(e){this.pivot.rotation.y+=this.rotationVelocity,this.clouds.forEach((function(t){return t.update(e)}))}},{key:"position",get:function(){return this.pivot.position}}])&&hb(t.prototype,n),r&&hb(t,r),e}(),pb={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new fs(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},fb=function(e,t,n,r){Dy.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=r,this.resolution=void 0!==e?new jo(e.x,e.y):new jo(256,256),this.clearColor=new fs(0,0,0);var i={minFilter:Ur,magFilter:Ur,format:ii};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new Xo(o,a,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var l=new Xo(o,a,i);l.texture.name="UnrealBloomPass.h"+s,l.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(l);var u=new Xo(o,a,i);u.texture.name="UnrealBloomPass.v"+s,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),o=Math.round(o/2),a=Math.round(a/2)}void 0===pb&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var c=pb;this.highPassUniforms=yl.clone(c.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new xl({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var h=[3,5,7,9,11];for(o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new jo(o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Zo(1,1,1),new Zo(1,1,1),new Zo(1,1,1),new Zo(1,1,1),new Zo(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===ky&&console.error("UnrealBloomPass relies on CopyShader");var d=ky;this.copyUniforms=yl.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new xl({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:jn,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new fs,this.oldClearAlpha=1,this.basic=new _s,this.fsQuad=new Dy.FullScreenQuad(null)};function mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}fb.prototype=Object.assign(Object.create(Dy.prototype),{constructor:fb,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new jo(n,r),n=Math.round(n/2),r=Math.round(r/2)},render:function(e,t,n,r,i){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var a=this.renderTargetBright,s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[s].uniforms.direction.value=fb.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[s]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=fb.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[s]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o},getSeperableBlurMaterial:function(e){return new xl({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new jo(.5,.5)},direction:{value:new jo(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new xl({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),fb.BlurDirectionX=new jo(1,0),fb.BlurDirectionY=new jo(0,1);var vb=0,gb=1,yb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.pp=new Wy(this.context),this.bloomPass={},this.init()}var t,n,r;return t=e,(n=[{key:"resize",value:function(){this.pp.resize()}},{key:"init",value:function(){this.createBloom()}},{key:"createBloom",value:function(){var e=.7,t=0,n=0,r=this.context.canvas,i=new jo(r.width,r.height);this.bloomPass=new fb(i,1.5,.4,.85),this.bloomPass.threshold=t,this.bloomPass.strength=e,this.bloomPass.radius=n,this.pp.composer.addPass(this.bloomPass)}},{key:"render",value:function(){this.context.renderer.autoClear=!1,this.context.renderer.clear(),this.context.camera.layers.set(gb),this.pp.render(),this.context.renderer.clearDepth(),this.context.camera.layers.set(vb),this.context.renderer.render(this.context.scene,this.context.camera)}}])&&mb(t.prototype,n),r&&mb(t,r),e}(),xb=n(43),bb=n.n(xb),_b=n(44),wb=n.n(_b);function Sb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minY=0,this.maxY=60,this.centerCoord={x:t.x,y:ix.randomFloatBetween(this.minY,this.maxY),z:t.z},this.radius=ix.randomFloatBetween(25,40),this.angle=ix.randomFloatBetween(0,2*Math.PI),this.yVelocity=ix.randomFloatBetween(.01,.05),this.angleVelocity=ix.randomFloatBetween(.005,.03),this.rotateVelocity=ix.randomFloatBetween(.01,.03),this.geometry=this.createShardGeometry(ix.randomFloatBetween(.01,.04)),this.material=new Yd({side:Rn,uniforms:{},fragmentShader:bb.a,vertexShader:wb.a}),this.pivot=new al(this.geometry,this.material),this.setPosition(this.getInitialCoord()),this.pivot.doubleSide=!0,this.pivot.rotation.y=Math.PI/2,this.pivot.layers.enable(gb)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createShardGeometry",value:function(){var e=new Gs,t=new Float32Array([-.5,.5,0,2,2,0,.5,-.5,0,-2,-2,0]),n=new Float32Array([0,0,1,0,1,1,0,1]),r=new Uint32Array([0,2,1,0,3,2]);return e.setAttribute("position",new Ss(t,3)),e.setAttribute("uv",new Ss(n,2)),e.setIndex(new Ss(r,1)),e}},{key:"getInitialCoord",value:function(){var e=this.centerCoord,t=e.x,n=e.y,r=e.z;return{x:t+this.radius*Math.cos(this.angle),y:n,z:r+this.radius*Math.sin(this.angle)}}},{key:"update",value:function(){this.updateRotation(),this.updatePosition()}},{key:"updateRotation",value:function(){this.pivot.rotation.x+=this.rotateVelocity,this.pivot.rotation.y+=this.rotateVelocity,this.pivot.rotation.z+=this.rotateVelocity}},{key:"updatePosition",value:function(){this.incrementCenterY(),this.angle+=this.angleVelocity;var e=this.centerCoord,t=e.x,n=e.y,r=e.z,i={x:t+this.radius*Math.cos(this.angle),y:n,z:r+this.radius*Math.sin(this.angle)};this.setPosition(i)}},{key:"incrementCenterY",value:function(){(this.centerCoord.y>=this.maxY||this.centerCoord.y<=this.minY)&&(this.yVelocity=-this.yVelocity),this.centerCoord.y+=this.yVelocity}},{key:"setPosition",value:function(e){var t=e.x,n=e.y,r=e.z;this.pivot.position.set(t,n,r)}},{key:"setRotation",value:function(){}}])&&Sb(t.prototype,n),r&&Sb(t,r),e}();function Eb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Mb=function(){function e(t){var n=t.num,r=void 0===n?10:n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numShards=r,this.shards=[],this.pivot=new Pc,this.createPetals()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.shards.forEach((function(e){return e.dispose()}))}},{key:"createPetals",value:function(){for(var e=0;e<this.numShards;e++){var t=new Tb({x:0,y:0,z:0});this.shards.push(t),this.pivot.add(t.pivot)}}},{key:"update",value:function(){this.shards.forEach((function(e){return e.update()}))}}])&&Eb(t.prototype,n),r&&Eb(t,r),e}();function Ab(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new bv(t);n.compileCubemapShader();var r=n.fromScene(this.getEnvScene(),.04);this.cubeMap=r.texture}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.light1.geometry.dispose(),this.light1.material.dispose(),this.light2.geometry.dispose(),this.light2.material.dispose(),this.light3.geometry.dispose(),this.light3.material.dispose(),this.light4.geometry.dispose(),this.light4.material.dispose()}},{key:"getEnvScene",value:function(){var e=new Ta,t=new ml;t.deleteAttribute("uv");var n=new al(t,new qd({metalness:0,side:On}));n.scale.setScalar(10),e.add(n);var r=new cf(new fs(11184895).convertGammaToLinear(2.2),.5);e.add(r);var i=new Kd({color:255,emissive:11184895,emissiveIntensity:20});return this.light1=new al(t,i),this.light1.position.set(5,-2,0),this.light1.scale.set(.1,2,1),e.add(this.light1),this.light2=new al(t,i),this.light2.position.set(0,5,2),this.light2.scale.set(.5,.5,.5),e.add(this.light2),this.light3=new al(t,i),this.light3.position.set(3.5,-1,-5),this.light3.scale.set(2,2,2),e.add(this.light3),this.light4=new al(t,i),this.light4.position.set(-5,2,0),this.light4.scale.set(2,2,2),e.add(this.light4),e}},{key:"update",value:function(){}},{key:"envMap",get:function(){return this.cubeMap}}])&&Ab(t.prototype,n),r&&Ab(t,r),e}();function Lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Cb=function(){function e(t){var n=t.environment,r=t.size,i=void 0===r?20:r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.environment=n,this.size=i,this.rotationVelocity=-.003,this.crystal={},this.pivot=new Pc,this.init()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.crystal.geometry.dispose(),this.crystal.material.dispose()}},{key:"init",value:function(){this.createCrystal(),this.pivot.add(this.crystal)}},{key:"createCrystal",value:function(){var e=new Jd({metalness:.4,roughness:0,opacity:.85,transparent:!0,envMap:this.environment.envMap,side:Rn,sheen:new fs(255).convertGammaToLinear(2.2),color:new fs(16777215).convertGammaToLinear(2.2),refractionRatio:.625}),t=new pl,n=this.createHalf(),r=(new za).setFromObject(n);n.position.y+=r.max.y-r.min.y,n.updateMatrixWorld();var i=this.createHalf();i.rotation.x+=ix.toRadians(180),i.updateMatrix(),t.merge(n.geometry,n.matrix),t.merge(i.geometry,i.matrix),this.crystal=new al(t,e)}},{key:"createHalf",value:function(){return new al(new Bd(this.size,1.5*this.size,4),new _s({color:16777215}))}},{key:"update",value:function(){this.pivot.rotation.y+=this.rotationVelocity}},{key:"position",get:function(){return this.pivot.position}},{key:"rotation",get:function(){return this.pivot.rotation}}])&&Lb(t.prototype,n),r&&Lb(t,r),e}();function Ob(e){return(Ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nb(e){return(Nb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fb(e,t){return(Fb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ib(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var kb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Ob(t)&&"function"!=typeof t?Ib(e):t}(this,Nb(t).call(this,e,null))).time=50,n.timeIncrement=1,n.composer={},n.environment=new Pb(n.renderer),n.crystal=new Cb({environment:n.environment,size:20}),n.shards=new Mb({num:8}),n.clouds=new db({numClouds:10}),n.effectManager=new yb(Ib(Ib(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fb(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.environment.dispose(),this.crystal.dispose(),this.shards.dispose(),this.clouds.dispose(),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setClearColor(1118481),this.setCameraPos(-100,100,150),this.lookAt(0,0,0,0),this.crystal.position.set(0,5,0),this.scene.add(this.crystal.pivot),this.scene.add(this.clouds.pivot),this.scene.add(this.shards.pivot)}},{key:"draw",value:function(){var e=this;this.time+=this.timeIncrement,this.shards.update(),this.crystal.update(),this.clouds.update(this.time),this.effectManager.render(),requestAnimationFrame((function(){return e.draw()}))}}])&&Rb(n.prototype,r),i&&Rb(n,i),t}(nx);var Db=n(45),zb=n.n(Db),Ub=n(46),jb=n.n(Ub);function Bb(e){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hb(e,t){return!t||"object"!==Bb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vb(e){return(Vb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wb(e,t){return(Wb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xb=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Hb(this,Vb(t).call(this,e))).interactRadius=.2,n.amp=3.5,n.planeNoise=new Zo(1,2,2),n.planeGeometry={},n.planeMaterial={},n.plane={},n.raycaster={},n.isMousedown=!1,n.reveal=0,n.revealIncrement=.01,n.rotateionSensitivity=60,n.rotationRadius=80,n.rotationRange={minX:-100,maxX:100},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wb(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.planeGeometry.dispose(),this.planeMaterial.dispose(),this.clearScene()}},{key:"init",value:function(){var e=this;this.disableOrbitControls(),this.setClearColor(12303189),this.setCameraPos(0,0,-this.rotationRadius),this.lookAt(0,0,0),this.raycaster=new dm,this.createMouseListener(),this.createPlane(),this.canvas.addEventListener("mousedown",(function(t){e.isMousedown=!0})),this.canvas.addEventListener("mouseup",(function(t){e.isMousedown=!1})),this.canvas.addEventListener("touchstart",(function(t){e.isMousedown=!0})),this.canvas.addEventListener("touchend",(function(t){e.isMousedown=!1}))}},{key:"createPlane",value:function(){this.planeGeometry=new Ol(90,90,108,108);var e=Go.loadTexture(Te.T012a),t=Go.loadTexture(Te.T012b);this.planeMaterial=new Yd({side:Rn,transparent:!0,fragmentShader:Gx()(zb.a),vertexShader:Gx()(jb.a),shading:Nn,uniforms:{u_time:{type:"f",value:0},u_amp:{type:"f",value:this.amp},u_noise:{type:"v3",value:this.planeNoise},u_texture_a:{type:"t",value:e},u_texture_b:{type:"t",value:t},u_mix_value:{type:"f",value:this.reveal}}}),this.plane=new al(this.planeGeometry,this.planeMaterial),this.scene.add(this.plane)}},{key:"offsetCamera",value:function(){var e=this.rotationRange,t=e.minX,n=e.maxX,r=ix.clamp(t,n,this.mouse.x*this.rotateionSensitivity),i=ix.toRadians(r),o=this.getCircleCoord({x:0,y:0,z:0},this.rotationRadius,i),a=o.x,s=o.z;this.setCameraPos(a,0,-s),this.lookAt(0,0,0)}},{key:"getCircleCoord",value:function(e,t,n){return{x:e.x+t*Math.sin(n),y:0,z:e.y+t*Math.cos(n)}}},{key:"draw",value:function(){var e=this;this.renderer.render(this.scene,this.camera),this.offsetCamera(),this.planeMaterial.uniforms.u_time.value=this.getUTime(),this.planeMaterial.uniforms.u_amp.value=this.amp,this.isMousedown&&this.reveal<1&&(this.reveal+=this.revealIncrement),!this.isMousedown&&this.reveal>0&&(this.reveal-=this.revealIncrement),this.planeMaterial.uniforms.u_mix_value.value=this.reveal,requestAnimationFrame((function(){return e.draw()}))}}])&&Gb(n.prototype,r),i&&Gb(n,i),t}(nx);function Yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ambient=new cf(16777215,.05),this.directional=new uf(16777215,.2),this.directional.position.set(0,50,0)}var t,n,r;return t=e,(n=[{key:"update",value:function(){}}])&&Yb(t.prototype,n),r&&Yb(t,r),e}();function Jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qb=function(){function e(t){var n=t.width,r=void 0===n?100:n,i=t.height,o=void 0===i?100:i,a=t.depth,s=void 0===a?100:a,l=t.color,u=void 0===l?0:l,c=t.material;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=r,this.height=o,this.depth=s,this.color=u,this.geometry=new fl(this.width,this.height,this.depth),this.geometry.faces.splice(4,2),this.geometry.faces.splice(6,2),this.pivot=new al(this.geometry,c);var h=(new za).setFromObject(this.pivot);this.min=h.min,this.max=h.max}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose()}},{key:"getZCoord",value:function(e){var t=this.height*e;return this.min.z+t}},{key:"position",get:function(){return this.pivot.position}}])&&Jb(t.prototype,n),r&&Jb(t,r),e}();function Zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $b=function(){function e(t){var n=t.numSteps,r=void 0===n?5:n,i=t.width,o=void 0===i?10:i,a=t.material;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numSteps=r,this.stepDepth=2,this.stepHeight=1.1,this.stepWidth=o,this.stepGeometry=new fl(this.stepWidth,this.stepHeight,this.stepDepth),this.geometry=new pl,this.createSteps(),this.material=a,this.pivot=new al(this.geometry,this.material)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose()}},{key:"createSteps",value:function(){for(var e=this.stepHeight/2,t=0,n=new al(this.stepGeometry,this.material),r=0;r<this.numSteps;r++){var i=n.clone();i.position.set(0,e,t),i.updateMatrix(),this.geometry.merge(i.geometry,i.matrix),e+=this.stepHeight,t-=this.stepDepth}}},{key:"updateMatrix",value:function(){this.pivot.updateMatrix()}},{key:"position",get:function(){return this.pivot.position}},{key:"width",get:function(){return this.stepWidth}},{key:"height",get:function(){return this.numSteps*this.stepHeight}},{key:"depth",get:function(){return this.numSteps*this.stepDepth-this.stepDepth/2}},{key:"matrix",get:function(){return this.pivot.matrix}}])&&Zb(t.prototype,n),r&&Zb(t,r),e}();function Kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var e_=function(){function e(t){var n=t.numSteps,r=void 0===n?5:n,i=t.width,o=void 0===i?10:i,a=t.material;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.material=a,this.width=o,this.platformDepth=20,this.geometry=new pl,this.stairs=new $b({numSteps:r,width:o,material:this.material}),this.addPlatform(),this.addStairs(),this.pivot=new al(this.geometry,this.material),this.pivot.castShadow=!0,this.pivot.receiveShadow=!0,this.bbox=(new za).setFromObject(this.pivot),this.min=this.bbox.min,this.max=this.bbox.max}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.stairs.dispose()}},{key:"addPlatform",value:function(){var e=new al(new fl(this.stairs.width,this.stairs.height,this.platformDepth),this.material);e.position.set(0,this.stairs.height/2,this.platformDepth/2),e.updateMatrix(),this.geometry.merge(e.geometry,e.matrix)}},{key:"addStairs",value:function(){this.stairs.position.z+=this.stairs.depth+this.platformDepth,this.stairs.updateMatrix(),this.geometry.merge(this.stairs.geometry,this.stairs.matrix)}},{key:"position",get:function(){return this.pivot.position}},{key:"depth",get:function(){return this.bbox.max.z-this.bbox.min.z}},{key:"height",get:function(){return this.bbox.max.y-this.bbox.min.y}}])&&Kb(t.prototype,n),r&&Kb(t,r),e}();function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n_=function(){function e(t){var n=t.height,r=void 0===n?10:n,i=t.width,o=void 0===i?5:i,a=t.depth,s=void 0===a?5:a,l=t.material;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.height=r,this.width=o,this.depth=s,this.radius=this.width/2,this.geometry=new pl,this.createCrown(),this.createSupports(),this.material=l,this.pivot=new al(this.geometry,this.material),this.pivot.receiveShadow=!0,this.bbox=(new za).setFromObject(this.pivot)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose()}},{key:"updateMatrix",value:function(){this.pivot.updateMatrix()}},{key:"createCrown",value:function(){var e=new al(new Ud(this.radius,this.radius,this.depth,8*this.radius,1,!0,0,Math.PI),this.material);e.rotation.x+=Math.PI/2,e.rotation.y+=Math.PI/2,e.position.y+=this.height-this.radius,e.updateMatrix(),this.geometry.merge(e.geometry,e.matrix)}},{key:"createSupports",value:function(){var e=this.height-this.radius,t=new al(new Ol(this.depth,e),this.material);t.rotation.y+=Math.PI/2;var n=t.clone();t.position.x-=this.width/2,n.position.x+=this.width/2,t.position.y=e/2,n.position.y=e/2,t.updateMatrix(),n.updateMatrix(),this.geometry.merge(t.geometry,t.matrix),this.geometry.merge(n.geometry,n.matrix)}},{key:"position",get:function(){return this.pivot.position}},{key:"matrix",get:function(){return this.pivot.matrix}}])&&t_(t.prototype,n),r&&t_(t,r),e}();function r_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i_=function(){function e(t){var n=t.width,r=void 0===n?10:n,i=t.height,o=void 0===i?10:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.intensityIncrement=.01,this.maxIntensity=6,this.minIntensity=0,this.width=r,this.height=o,this.radius=this.width/2,this.geometry=new pl,this.backMaterial=new _s({color:16773103}),this.createGeometry(),this.backing=new al(this.geometry,this.backMaterial),this.backing.intensity=1,this.pivot=new Pc,this.pivot.add(this.backing),this.light={},this.setupLight(),this.pivot.add(this.light),this.bbox=new za,this.helper=new Tm(this.light,16711680)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.pivot.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}},{key:"createFaces",value:function(){var e=new al(this.geometry,new _s({color:16711680,side:Rn}));this.backing.add(e);var t=new al(this.geometry,this.backMaterial);e.add(t)}},{key:"createGeometry",value:function(){var e=this.height-this.radius,t=new al(new Hd(this.radius,8*this.radius,0,Math.PI),this.backMaterial);t.position.y+=e,t.updateMatrix(),this.geometry.merge(t.geometry,t.matrix);var n=new al(new Ol(this.width,e),this.backMaterial);n.position.y+=e/2,n.updateMatrix(),this.geometry.merge(n.geometry,n.matrix)}},{key:"setupLight",value:function(){this.light=new rf(16755440,1.5),this.light.angle=ix.toRadians(40),this.light.distance=150,this.light.decay=2}},{key:"update",value:function(){(this.pivot.intensity>=this.maxIntensity||this.pivot.intensity<=this.minIntensity)&&(this.intensityIncrement=-this.intensityIncrement),this.pivot.intensity+=this.intensityIncrement}},{key:"position",get:function(){return this.pivot.position}}])&&r_(t.prototype,n),r&&r_(t,r),e}();function o_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.progressX=0,this.progressY=0,this.progressZ=0,this.progressVelocityX=ix.randomFloatBetween(.004,.007),this.progressVelocityY=ix.randomFloatBetween(.006,.009),this.progressVelocityZ=ix.randomFloatBetween(.004,.007),this.signX=ix.randomBool()?1:-1,this.signY=ix.weightedRandomBool(.1)?1:-1,this.signZ=1,this.startX=0,this.endX=ix.randomFloatBetween(2,11),this.startY=0,this.endY=ix.randomFloatBetween(5,50),this.startZ=0,this.endZ=150,this.startWingAngle=ix.toRadians(0),this.endWingAngle=ix.toRadians(80),this.wingVelocity=ix.randomFloatBetween(.2,.5),this.rightWing={},this.leftWing={},this.geometry=new pl,this.material=new _s({color:16755455,side:Rn}),this.pivot=new Pc,this.createGeometry(),this.pivot.rotation.y=Math.PI/2}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createWingGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new pl;return t.vertices.push(new Zo(-1,1,0),new Zo(-1,-1,0),new Zo(1,-1,0)),t.faces.push(new ys(0,1,2)),t.computeBoundingSphere(),t.applyMatrix4((new oa).makeTranslation(-1,1,0)),t.scale(e,e,e),t}},{key:"createGeometry",value:function(){var e=this.createWingGeometry(1);this.rightWing=new al(e,this.material),this.leftWing=new al(e,this.material),this.leftWing=new al(e,this.material),this.rightWing=new al(e,this.material),this.leftWing.rotation.x+=ix.toRadians(-45),this.rightWing.rotation.x+=ix.toRadians(45),this.pivot.add(this.rightWing),this.pivot.add(this.leftWing)}},{key:"updateWings",value:function(){(this.rightWing.rotation.x>this.maxWingAngle||this.rightWing.rotation.x<this.minWingAngle)&&(this.wingVelocity=-this.wingVelocity),this.leftWing.rotation.x-=this.wingVelocity,this.rightWing.rotation.x+=this.wingVelocity}},{key:"getXPos",value:function(){return this.signX*ix.remap(0,1,this.startX,this.endX,this.progressX)}},{key:"getYPos",value:function(){return this.signY*ix.remap(0,1,this.startY,this.endY,this.progressY)}},{key:"getZPos",value:function(){return this.signZ*ix.remap(0,1,this.startZ,this.endZ,this.progressZ)}},{key:"update",value:function(){this.progressX<1&&(this.progressX+=this.progressVelocityX),this.progressY<1&&(this.progressY+=this.progressVelocityY),this.progressZ<1&&(this.progressZ+=this.progressVelocityZ),this.progressX>=1&&this.progressY>=1&&this.progressZ>=1&&(this.progressX=0,this.progressY=0,this.progressZ=0),this.updateWings(),this.position.x=this.getXPos(),this.position.y=this.getYPos(),this.position.z=this.getZPos()}},{key:"position",get:function(){return this.pivot.position}}])&&o_(t.prototype,n),r&&o_(t,r),e}();function s_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numBats=ix.randomFloatBetween(8,12),this.bats=[],this.pivot=new Pc,this.createBats()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.bats.forEach((function(e){return e.dispose()}))}},{key:"createBats",value:function(){for(var e=0;e<this.numBats;e++){var t=new a_;this.pivot.add(t.pivot),this.bats.push(t)}}},{key:"update",value:function(){this.bats.forEach((function(e){return e.update()}))}},{key:"position",get:function(){return this.pivot.position}}])&&s_(t.prototype,n),r&&s_(t,r),e}();function u_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c_=function(){function e(t){var n=t.numArcs,r=void 0===n?5:n,i=t.arcMaxHeight,o=void 0===i?20:i,a=t.arcMinHeight,s=void 0===a?15:a,l=t.arcWidth,u=void 0===l?5:l,c=t.arcDepth,h=void 0===c?5:c,d=t.gap,p=void 0===d?2:d,f=t.material;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.arcMaxHeight=o,this.arcMinHeight=s,this.arcWidth=u,this.arcDepth=h,this.gap=p,this.numArcs=r,this.arcs=[],this.arcLights=[],this.bats=[],this.geometry=new pl,this.material=f,this.pivot=new Pc,this.frame=new al(this.geometry,this.material),this.frame.castShadow=!0,this.frame.receiveShadow=!0,this.pivot.add(this.frame),this.createArcs()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.arcs.forEach((function(e){return e.dispose()})),this.arcLights.forEach((function(e){return e.dispose()})),this.bats.forEach((function(e){return e.dispose()}))}},{key:"createArcs",value:function(){for(var e=Math.floor(this.numArcs/2),t=this.arcMinHeight,n=(this.arcMaxHeight-this.arcMinHeight)/e,r=-((this.arcWidth+this.gap)*this.numArcs-(this.arcWidth+this.gap)/2-this.gap)/2,i=this.gap+this.arcWidth,o=0;o<this.numArcs;o++)this.createArc({height:t,x:r,y:0,z:this.arcDepth/2}),this.createArcLight({height:t,x:r,y:0,z:0}),this.createBats({x:r,y:t/2,z:this.arcDepth/2}),o===e&&(n*=-1),t+=n,r+=i}},{key:"createArc",value:function(e){var t=e.height,n=e.x,r=e.y,i=e.z,o=new n_({height:t,width:this.arcWidth,depth:this.arcDepth,material:this.material});o.position.set(n,r,i),o.updateMatrix(),this.geometry.merge(o.geometry,o.matrix),this.arcs.push(o)}},{key:"createArcLight",value:function(e){var t=e.height,n=e.x,r=e.y,i=e.z,o=new i_({height:t,width:this.arcWidth,depth:this.arcDepth});o.position.set(n,r,i),this.pivot.add(o.pivot),this.arcLights.push(o)}},{key:"createBats",value:function(e){var t=e.x,n=e.y,r=e.z,i=new l_;i.position.set(t,n,r),this.pivot.add(i.pivot),this.bats.push(i)}},{key:"update",value:function(){this.arcLights.forEach((function(e){return e.update()})),this.bats.forEach((function(e){return e.update()}))}},{key:"position",get:function(){return this.pivot.position}}])&&u_(t.prototype,n),r&&u_(t,r),e}();function h_(e){return(h_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p_(e,t){return!t||"object"!==h_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f_(e){return(f_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m_(e,t){return(m_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=p_(this,f_(t).call(this,e))).cameraDistance=100,n.sceneCenter={x:0,y:0,z:0},n.lights=new qb,n.envMaterial=new qd({color:16777215,roughness:0,metalness:0,side:Rn}),n.skybox=new Qb({width:300,height:200,depth:150,material:n.envMaterial}),n.platform=new e_({numSteps:35,width:1*n.skybox.width,material:n.envMaterial}),n.entrance=new c_({numArcs:5,arcMaxHeight:80,arcMinHeight:50,arcWidth:15,arcDepth:5,gap:7,material:n.envMaterial}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m_(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.envMaterial.dispose(),this.platform.dispose(),this.entrance.dispose(),this.skybox.dispose(),this.clearScene()}},{key:"init",value:function(){var e=this;this.disableOrbitControls(),this.setClearColor(0),this.setCameraPos(0,31,this.skybox.max.z),this.lookAt(new Zo(0,this.platform.max.y,this.skybox.min.z+40)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=An,this.renderer.outputEncoding=$i,this.entrance.position.set(0,this.platform.height,this.skybox.min.z+.1),this.platform.position.z=this.skybox.min.z+.1,this.skybox.position.y=this.skybox.height/2,this.scene.add(this.lights.ambient),this.scene.add(this.lights.directional),this.scene.add(this.skybox.pivot),this.scene.add(this.platform.pivot),this.scene.add(this.entrance.pivot),this.entrance.arcLights.forEach((function(t){e.scene.add(t.helper)}))}},{key:"draw",value:function(){var e=this;this.renderer.render(this.scene,this.camera),this.entrance.update(),requestAnimationFrame((function(){return e.draw()}))}}])&&d_(n.prototype,r),i&&d_(n,i),t}(nx);new jo(1/1024,1/512),["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n"),"".concat("events","/beatDetectionStart"),"".concat("events","/beatDetectionComplete");n(47),n(48);n(49),n(50);n(51),n(52);var g_=n(53),y_=n.n(g_),x_=n(54),b_=n.n(x_);function __(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w_=function(){function e(t){var n=t.radius,r=void 0===n?0:n,i=t.angle,o=void 0===i?0:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.radius=r,this.angle=o,this.minAngleIncrement=ix.randomFloatBetween(ix.toRadians(0),ix.toRadians(0)),this.maxAngleIncrement=ix.randomFloatBetween(ix.toRadians(.5),ix.toRadians(3)),this.geometry=this.createGeometry(.1);var a=this.createMaterialConfig();this.material=new Yd(a),this.mesh=new al(this.geometry,this.material)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createMaterialConfig",value:function(){var e=new Zo(ix.randomSign()*ix.randomFloatBetween(20,80),ix.randomSign()*ix.randomFloatBetween(20,80),ix.randomSign()*ix.randomFloatBetween(20,80)),t=new Zo(ix.randomSign()*ix.randomFloatBetween(20,80),ix.randomSign()*ix.randomFloatBetween(20,80),ix.randomSign()*ix.randomFloatBetween(20,80));return{transparent:!0,vertexShader:b_.a,fragmentShader:y_.a,uniforms:{u_freq:{type:"f",value:0},u_time:{type:"f",value:0},u_rotate_speed:{type:"v3",value:e},u_translate_speed:{type:"v3",value:t},u_angle:{type:"f",value:this.angle},u_radius:{type:"f",value:this.radius}},side:Rn}}},{key:"createGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new $p;t.moveTo(0,0),t.bezierCurveTo(50,100,-50,100,0,0);var n={depth:1,bevelEnabled:!0,bevelSegments:2,steps:2,bevelSize:15,bevelThickness:.5},r=new Sd(t,n);return r.scale(e,e,e),r}},{key:"frequencyToAngleIncrement",value:function(e){return this.remap(0,255,this.minAngleIncrement,this.maxAngleIncrement,e)}},{key:"fequencyToRotationSpeed",value:function(e){}},{key:"remap",value:function(e,t,n,r,i){return n+(r-n)*(i-e)/(t-e)}},{key:"update",value:function(e,t){this.material.uniforms.u_time.value=t,this.material.uniforms.u_freq.value=e,this.material.uniforms.u_angle.value+=this.frequencyToAngleIncrement(e)}}])&&__(t.prototype,n),r&&__(t,r),e}(),S_=n(55),T_=n.n(S_),E_=n(56),M_=n.n(E_);function A_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P_=function(){function e(t){var n=t.width,r=void 0===n?0:n,i=t.radius,o=void 0===i?0:i,a=t.angle,s=void 0===a?0:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=new Ol(r,r,2,2),this.material=new Yd({fragmentShader:T_.a,vertexShader:M_.a,transparent:!0,side:Rn,uniforms:{u_freq:{type:"f",value:0},u_angle:{type:"f",value:s},u_radius:{type:"f",value:o}}}),this.mesh=new al(this.geometry,this.material),this.mesh.rotation.x+=Math.PI/2}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"setPosition",value:function(e,t,n){this.mesh.position.set(e,t,n)}},{key:"setRotation",value:function(e,t,n){this.mesh.rotation.set(e,t,n)}},{key:"update",value:function(e){this.material.uniforms.u_freq.value=e}}])&&A_(t.prototype,n),r&&A_(t,r),e}(),L_=n(57),C_=n.n(L_),O_=n(58),R_=n.n(O_);function N_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F_=function(){function e(t){var n=t.numPoints,r=void 0===n?0:n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numPoints=r,this.particles=[],this.geometry=new pl,this.createParticles();var i=(new Lp).load(Te.T015),o=new Zo(ix.randomFloatBetween(.01,.1),ix.randomFloatBetween(.01,.1),ix.randomFloatBetween(.01,.1)),a=window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth,s=ix.randomFloatBetween(.01,.05)*a,l=ix.randomFloatBetween(.1,.15)*a;this.material=new Yd({fragmentShader:C_.a,vertexShader:R_.a,uniforms:{u_freq:{type:"f",value:0},u_time:{type:"f",value:0},u_texture:{type:"t",value:i},u_translate_speed:{type:"v3",value:o},u_max_screen_dimension:{type:"f",value:a},u_min_size:{type:"f",value:s},u_max_size:{type:"f",value:l}},transparent:!0,depthWrite:!1,blending:Bn}),this.mesh=new Ah(this.geometry,this.material)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createParticles",value:function(){for(var e=0;e<this.numPoints;e++){var t={position:new Zo(ix.randomFloatBetween(-5,5),ix.randomFloatBetween(-5,5),ix.randomFloatBetween(-5,5)),velocity:new Zo(ix.randomFloatBetween(-.1,.1),.6,ix.randomFloatBetween(-.1,.1)),acceleration:new Zo(0,-.001,0)};this.particles.push(t),this.geometry.vertices.push(t.position)}}},{key:"update",value:function(e,t){this.material.uniforms.u_freq.value=e,this.material.uniforms.u_time.value=t,this.mesh.geometry.verticesNeedUpdate=!0,this.mesh.rotation.x+=.001,this.mesh.rotation.y+=.002}}])&&N_(t.prototype,n),r&&N_(t,r),e}(),I_=n(59),k_=n.n(I_),D_=n(60),z_=n.n(D_);function U_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B_=function(){function e(t){var n,r=t.minZ,i=void 0===r?0:r,o=t.maxZ,a=void 0===o?0:o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minZ=i,this.maxZ=a,this.positionZ=ix.randomFloatBetween(this.minZ,this.maxZ),this.radius=ix.randomFloatBetween(50,100),this.angle=ix.randomFloatBetween(0,2*Math.PI);var s=new Zo(ix.randomSign()*ix.randomFloatBetween(20,80),ix.randomSign()*ix.randomFloatBetween(20,80),ix.randomSign()*ix.randomFloatBetween(20,80)),l=new Zo(ix.randomSign()*ix.randomFloatBetween(20,80),ix.randomSign()*ix.randomFloatBetween(20,80),ix.randomSign()*ix.randomFloatBetween(20,80));this.incrementSign=ix.randomSign(),this.minRotationIncrement=ix.randomFloatBetween(ix.toRadians(0),ix.toRadians(0)),this.maxRotationIncrement=ix.randomFloatBetween(ix.toRadians(1),ix.toRadians(2)),this.minAngleIncrement=ix.randomFloatBetween(ix.toRadians(0),ix.toRadians(0)),this.maxAngleIncrement=ix.randomFloatBetween(ix.toRadians(1),ix.toRadians(2));var u=ix.randomFloatBetween(.1,.3);this.geometry=this.createGeometry(u);var c=new Zo(this.getRandomAngle(),this.getRandomAngle(),this.getRandomAngle());this.material=new Yd((U_(n={side:Rn,transparent:!0,fragmentShader:k_.a,vertexShader:z_.a,uniforms:{u_freq:{type:"f",value:0},u_time:{type:"f",value:0},u_rotation:{type:"v3",value:c},u_min_angle_increment:{type:"f",value:this.minRotationIncrement},u_max_angle_increment:{type:"f",value:this.maxRotationIncrement},u_increment_sign:{type:"f",value:this.incrementSign},u_rotate_speed:{type:"v3",value:s},u_translate_speed:{type:"v3",value:l},u_angle:{type:"f",value:this.angle},u_radius:{type:"f",value:this.radius},u_position_z:{type:"f",value:this.positionZ}}},"side",Rn),U_(n,"transparent",!0),n)),this.mesh=new al(this.geometry,this.material)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new $p;t.moveTo(0,0),t.bezierCurveTo(25,50,-25,50,0,0);var n={depth:1,bevelEnabled:!0,bevelSegments:2,steps:2,bevelSize:15,bevelThickness:0},r=new Sd(t,n);return r.scale(e,e,e),r}},{key:"getRandomAngle",value:function(){return ix.randomFloatBetween(0,2*Math.PI)}},{key:"remap",value:function(e,t,n,r,i){return n+(r-n)*(i-e)/(t-e)}},{key:"remapFreq",value:function(e,t,n){return this.remap(0,255,e,t,n)}},{key:"frequencyToAngleIncrement",value:function(e){return this.remap(0,255,this.minRotationIncrement,this.maxRotationIncrement,e)}},{key:"setPosition",value:function(e,t,n){this.mesh.position.set(e,t,n)}},{key:"update",value:function(e,t){this.material.uniforms.u_freq.value=e,this.material.uniforms.u_time.value=t,this.material.uniforms.u_rotation.value.y+=this.incrementSign*this.frequencyToAngleIncrement(e),this.material.uniforms.u_rotation.value.z+=this.incrementSign*this.frequencyToAngleIncrement(e),this.material.uniforms.u_angle.value-=this.remapFreq(this.minAngleIncrement,this.maxAngleIncrement,e),this.positionZ-=this.remapFreq(0,1,e),this.positionZ<this.minZ&&(this.positionZ=this.maxZ),this.material.uniforms.u_position_z.value=this.positionZ}}])&&j_(t.prototype,n),r&&j_(t,r),e}();function G_(e){return(G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V_(e,t){return!t||"object"!==G_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W_(e){return(W_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X_(e,t){return(X_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=V_(this,W_(t).call(this,e,n))).audioSrc=be.S015,r.numFrequencyNodes=25,r.fftSize=512,r.clock=new Df,r.cameraPositionZ=-200,r.numLeaves=r.numFrequencyNodes,r.leaves=[],r.sphereRadius=5,r.numNodes=100,r.pillarNodes=[],r.numTiles=r.numFrequencyNodes,r.tiles=[],r.orb={},r.numPoints=r.numFrequencyNodes,r.shards=[],r.numShards=r.numFrequencyNodes,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X_(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.audio.close(),this.leaves.forEach((function(e){return e.dispose()})),this.tiles.forEach((function(e){return e.dispose()})),this.shards.forEach((function(e){return e.dispose()})),this.orb.dispose(),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setCameraPos(0,0,this.cameraPositionZ),this.lookAt(0,0,0),this.setClearColor(16777215);var e={fftSize:this.fftSize,dataLength:this.numFrequencyNodes};this.initAudio(e),this.createTiles(),this.createLeaves(),this.createOrb(),this.createShards()}},{key:"createLeaves",value:function(){for(var e=0,t=2*Math.PI/this.numLeaves,n=0;n<this.numLeaves;n++){var r=new w_({radius:50,angle:e});this.leaves.push(r),this.scene.add(r.mesh),e+=t}}},{key:"createTiles",value:function(){for(var e=0,t=2*Math.PI/this.numTiles,n=0;n<this.numTiles;n++){var r=new P_({width:30,radius:80,angle:e});this.tiles.push(r),this.scene.add(r.mesh),e+=t}}},{key:"createOrb",value:function(){this.orb=new F_({numPoints:this.numPoints,numFrequencyNodes:this.numFrequencyNodes}),this.scene.add(this.orb.mesh)}},{key:"createShards",value:function(){for(var e=0;e<this.numShards;e++){var t=new B_({minZ:1.2*this.cameraPositionZ,maxZ:1.2*-this.cameraPositionZ});this.scene.add(t.mesh),this.shards.push(t)}}},{key:"draw",value:function(){var e=this,t=this.clock.getElapsedTime();this.audio.getByteFrequencyData(),this.audio.frequencyData.forEach((function(n,r){e.tiles[r].update(n),e.leaves[r].update(n,t),e.shards[r].update(n,t)})),this.orb.update(this.audio.frequencyData,t),this.orb.update(this.audio.getAverageFrequency(),t),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.draw()}))}}])&&H_(n.prototype,r),i&&H_(n,i),t}(nx);function q_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.camera=t.camera,this.radius=18,this.angleVelocity=-.001,this.minAngleVelocity=-5e-4,this.maxAngleVelocity=-.0025,this.angle=0,this.centerCoord=new Zo(0,8,0),this.target=new Zo}var t,n,r;return t=e,(n=[{key:"updatePosition",value:function(){this.position.set(this.centerCoord.x+this.radius*Math.cos(this.angle),this.centerCoord.y,this.centerCoord.z+this.radius*Math.sin(this.angle))}},{key:"getAngleVelocity",value:function(){var e=this.context.beatManager.overallAverages;return ix.remap(0,255,this.minAngleVelocity,this.maxAngleVelocity,e[e.length-1])}},{key:"update",value:function(){this.angle+=this.getAngleVelocity(),this.updatePosition(),this.camera.lookAt(this.target)}},{key:"position",get:function(){return this.camera.position}}])&&q_(t.prototype,n),r&&q_(t,r),e}();function Q_(e){e=e||{},this.name=e.name,this.type=e.type,this.node=e.node,this.needsUpdate=e.needsUpdate}Object.defineProperties(Q_.prototype,{value:{get:function(){return this.node.value},set:function(e){this.node.value=e}}});var Z_={elements:["x","y","z","w"],addShortcuts:function(){function e(e,t,n){return n?{get:function(){return this[e][t][n]},set:function(r){this[e][t][n]=r}}:{get:function(){return this[e][t]},set:function(n){this[e][t]=n}}}return function(t,n,r){for(var i={},o=0;o<r.length;++o){var a=r[o].split("."),s=a[0],l=a[1];i[s]=e(n,s,l)}Object.defineProperties(t,i)}}()},$_={nodes:{},keywords:{},add:function(e){this.nodes[e.name]=e},addKeyword:function(e,t,n){n=void 0===n||n,this.keywords[e]={callback:t,cache:n}},remove:function(e){delete this.nodes[e.name]},removeKeyword:function(e){delete this.keywords[e]},get:function(e){return this.nodes[e]},getKeyword:function(e,t){return this.keywords[e].callback.call(this,t)},getKeywordData:function(e){return this.keywords[e]},contains:function(e){return void 0!==this.nodes[e]},containsKeyword:function(e){return void 0!==this.keywords[e]}};function K_(e){this.uuid=Uo.generateUUID(),this.name="",this.type=e,this.userData={}}function ew(e,t){K_.call(this,e),t=t||{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}K_.prototype={constructor:K_,isNode:!0,analyze:function(e,t){t=t||{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1},analyzeAndFlow:function(e,t,n){return n=n||{},this.analyze(e,n),this.flow(e,t,n)},flow:function(e,t,n){n=n||{},e.addFlow(n.slot,n.cache,n.context);var r={};return r.result=this.build(e,t),r.code=e.clearNodeCode(),r.extra=e.context.extra,e.removeFlow(),r},build:function(e,t,n){t=t||this.getType(e,t);var r=e.getNodeData(n||this);return e.analyzing&&this.appendDepsNode(e,r,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)},generate:function(){},appendDepsNode:function(e,t,n){t.deps=(t.deps||0)+1;var r=e.getTypeLength(n);(r>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=r,t.output=n)},setName:function(e){return this.name=e,this},getName:function(){return this.name},getType:function(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type},getJSONNode:function(e){if(!(void 0===e||"string"==typeof e)&&void 0!==e.nodes[this.uuid])return e.nodes[this.uuid]},copy:function(e){return void 0!==e.name&&(this.name=e.name),void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},createJSONNode:function(e){var t=void 0===e||"string"==typeof e,n={};if("string"!=typeof this.nodeType)throw new Error("Node does not allow serialization.");return n.uuid=this.uuid,n.nodeType=this.nodeType,""!==this.name&&(n.name=this.name),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.nodes[this.uuid]=n),n},toJSON:function(e){return this.getJSONNode(e)||this.createJSONNode(e)}},ew.prototype=Object.create(K_.prototype),ew.prototype.constructor=ew,ew.prototype.build=function(e,t,n,r){if(t=t||this.getType(e),this.getShared(e,t)){var i=this.getUnique(e,t);i&&void 0===this.constructor.uuid&&(this.constructor.uuid=Uo.generateUUID()),n=e.getUuid(n||this.getUuid(),!i);var o=e.getNodeData(n),a=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,t),this.generate(e,t,n)):K_.prototype.build.call(this,e,t,n);if(i)return o.name=o.name||K_.prototype.build.call(this,e,t,n),o.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||1===o.deps))return K_.prototype.build.call(this,e,t,n);n=this.getUuid(!1);var s=this.getTemp(e,n);if(s)return e.format(s,a,t);s=ew.prototype.generate.call(this,e,t,n,o.output,r);var l=this.generate(e,a,n);return e.addNodeCode(s+" = "+l+";"),e.format(s,a,t)}return K_.prototype.build.call(this,e,t,n)},ew.prototype.getShared=function(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared},ew.prototype.getUnique=function(){return this.unique},ew.prototype.setLabel=function(e){return this.label=e,this},ew.prototype.getLabel=function(){return this.label},ew.prototype.getUuid=function(e){var t=(e||null==e)&&this.constructor.uuid||this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t},ew.prototype.getTemp=function(e,t){t=t||this.uuid;var n=e.getVars()[t];return n?n.name:void 0},ew.prototype.generate=function(e,t,n,r,i){return this.getShared(e,t)||console.error("THREE.TempNode is not shared!"),n=n||this.uuid,e.getTempVar(n,r||this.getType(e),i,this.getLabel()).name};var tw=/^([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,nw=/[a-z_0-9]+/gi;function rw(e,t,n,r,i){this.isMethod=void 0===i,this.isInterface=!1,ew.call(this,i),this.parse(e,t,n,r)}rw.prototype=Object.create(ew.prototype),rw.prototype.constructor=rw,rw.prototype.nodeType="Function",rw.prototype.useKeywords=!0,rw.prototype.getShared=function(){return!this.isMethod},rw.prototype.getType=function(e){return e.getTypeByFormat(this.type)},rw.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},rw.prototype.getIncludeByName=function(e){for(var t=this.includes.length;t--;)if(this.includes[t].name===e)return this.includes[t]},rw.prototype.generate=function(e,t){for(var n=0,r=this.src,i=0;i<this.includes.length;i++)e.include(this.includes[i],this);for(var o in this.extensions)e.extensions[o]=!0;for(var a=[];s=nw.exec(this.src);)a.push(s);for(i=0;i<a.length;i++){var s,l=(s=a[i])[0],u=!this.isMethod||!this.getInputByName(l),c=l;if(this.keywords[l]||this.useKeywords&&u&&$_.containsKeyword(l)){var h=this.keywords[l];if(!h){var d=$_.getKeywordData(l);d.cache&&(h=e.keywords[l]),h=h||$_.getKeyword(l,e),d.cache&&(e.keywords[l]=h)}c=h.build(e)}l!==c&&(r=r.substring(0,s.index+n)+c+r.substring(s.index+l.length+n),n+=c.length-l.length),void 0===this.getIncludeByName(c)&&$_.contains(c)&&e.include($_.get(c))}return"source"===t?r:this.isMethod?(this.isInterface||e.include(this,!1,r),this.name):e.format("( "+r+" )",this.getType(e),t)},rw.prototype.parse=function(e,t,n,r){if(this.src=e||"",this.includes=t||[],this.extensions=n||{},this.keywords=r||{},this.isMethod){var i=this.src.match(tw);if(this.inputs=[],i&&4==i.length){this.type=i[1],this.name=i[2];var o=i[3].match(nw);if(o)for(var a=0;a<o.length;){var s,l,u=o[a++];"in"===u||"out"===u||"inout"===u?s=o[a++]:(s=u,u=""),l=o[a++],this.inputs.push({name:l,type:s,qualifier:u})}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}},rw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.isMethod=e.isMethod,this.useKeywords=e.useKeywords,this.parse(e.src,e.includes,e.extensions,e.keywords),void 0!==e.type&&(this.type=e.type),this},rw.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){for(var n in(t=this.createJSONNode(e)).src=this.src,t.isMethod=this.isMethod,t.useKeywords=this.useKeywords,this.isMethod||(t.type=this.type),t.extensions=JSON.parse(JSON.stringify(this.extensions)),t.keywords={},this.keywords)t.keywords[n]=this.keywords[n].toJSON(e).uuid;if(this.includes.length){t.includes=[];for(var r=0;r<this.includes.length;r++)t.includes.push(this.includes[r].toJSON(e).uuid)}}return t};var iw=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i;function ow(e,t){ew.call(this),this.parse(e||ow.PI,t)}ow.PI="PI",ow.PI2="PI2",ow.RECIPROCAL_PI="RECIPROCAL_PI",ow.RECIPROCAL_PI2="RECIPROCAL_PI2",ow.LOG2="LOG2",ow.EPSILON="EPSILON",ow.prototype=Object.create(ew.prototype),ow.prototype.constructor=ow,ow.prototype.nodeType="Const",ow.prototype.getType=function(e){return e.getTypeByFormat(this.type)},ow.prototype.parse=function(e,t){this.src=e||"";var n,r,i="",o=this.src.match(iw);this.useDefine=t||"#"===this.src.charAt(0),o&&o.length>1?(r=o[1],n=o[2],i=o[3]):(n=this.src,r="f"),this.name=n,this.type=r,this.value=i},ow.prototype.build=function(e,t){return"source"!==t?(e.include(this),e.format(this.name,this.getType(e),t)):this.value?this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";":this.useDefine?this.src:void 0},ow.prototype.generate=function(e,t){return e.format(this.name,this.getType(e),t)},ow.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.parse(e.src,e.useDefine),this},ow.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src,!0===t.useDefine&&(t.useDefine=!0)),t};var aw,sw,lw,uw,cw,hw,dw,pw,fw,mw,vw,gw,yw,xw,bw=/^struct\s*([a-z_0-9]+)\s*{\s*((.|\n)*?)}/gim,_w=/\s*(\w*?)\s*(\w*?)(\=|\;)/gim;function ww(e){ew.call(this),this.parse(e)}function Sw(e,t){(t=t||{}).shared=void 0!==t.shared&&t.shared,ew.call(this,e,t),this.readonly=!1}function Tw(e,t){Sw.call(this,"v2"),this.value=e instanceof jo?e:new jo(e,t)}function Ew(e,t,n){Sw.call(this,"v3"),this.value=e instanceof Zo?e:new Zo(e,t,n)}function Mw(e,t,n,r){Sw.call(this,"v4"),this.value=e instanceof Wo?e:new Wo(e,t,n,r)}function Aw(e){ew.call(this,"v2",{shared:!1}),this.index=e||0}function Pw(e){Sw.call(this,"f"),this.value=e||0}function Lw(e,t,n,r,i){rw.call(this,e,i,r,n,t)}function Cw(e,t){ew.call(this,"v4"),this.input=e,this.method=t||Cw.LINEAR_TO_LINEAR}function Ow(e,t,n,r){Sw.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new Aw,this.bias=n,this.project=void 0!==r&&r}function Rw(e){ew.call(this,"v3"),this.scope=e||Rw.LOCAL}function Nw(e){ew.call(this,"v3"),this.scope=e||Nw.VIEW}function Fw(e){ew.call(this,"v3"),this.scope=e||Fw.CUBE}function Iw(e,t,n){Sw.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new Fw,this.bias=n}function kw(e,t){ew.call(this),this.setFunction(e,t)}function Dw(e,t,n){ew.call(this),this.a=e,this.b=t,this.op=n}function zw(e,t,n,r){ew.call(this),this.a=e,"string"!=typeof t?this.b=t:r=t,"string"!=typeof n?this.c=n:r=n,this.method=r}function Uw(e,t,n){ew.call(this,"v4"),this.value=e,this.uv=t,this.bias=n}function jw(e,t,n){ew.call(this,"v4"),this.value=e,this.radianceNode=new Uw(this.value,t||new Fw(Fw.VECTOR),n),this.irradianceNode=new Uw(this.value,new Nw(Nw.WORLD),new Pw(1).setReadonly(!0))}ww.prototype=Object.create(ew.prototype),ww.prototype.constructor=ww,ww.prototype.nodeType="Struct",ww.prototype.getType=function(e){return e.getTypeByFormat(this.name)},ww.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},ww.prototype.generate=function(e,t){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)},ww.prototype.parse=function(e){this.src=e||"",this.inputs=[];var t=bw.exec(this.src);if(t){for(var n,r=t[2];n=_w.exec(r);)this.inputs.push({type:n[1],name:n[2]});this.name=t[1]}else this.name="";this.type=this.name},ww.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src),t},Sw.prototype=Object.create(ew.prototype),Sw.prototype.constructor=Sw,Sw.prototype.setReadonly=function(e){return this.readonly=e,this},Sw.prototype.getReadonly=function(){return this.readonly},Sw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),void 0!==e.readonly&&(this.readonly=e.readonly),this},Sw.prototype.createJSONNode=function(e){var t=ew.prototype.createJSONNode.call(this,e);return!0===this.readonly&&(t.readonly=this.readonly),t},Sw.prototype.generate=function(e,t,n,r,i,o){n=e.getUuid(n||this.getUuid()),r=r||this.getType(e);var a=e.getNodeData(n);return this.getReadonly(e)&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,r,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,i,o,this.getLabel())),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,i,o,this.getLabel())),e.format(a.fragment.name,r,t))},Tw.prototype=Object.create(Sw.prototype),Tw.prototype.constructor=Tw,Tw.prototype.nodeType="Vector2",Z_.addShortcuts(Tw.prototype,"value",["x","y"]),Tw.prototype.generateReadonly=function(e,t,n,r){return e.format("vec2( "+this.x+", "+this.y+" )",r,t)},Tw.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.value.copy(e),this},Tw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,!0===this.readonly&&(t.readonly=!0)),t},Ew.prototype=Object.create(Sw.prototype),Ew.prototype.constructor=Ew,Ew.prototype.nodeType="Vector3",Z_.addShortcuts(Ew.prototype,"value",["x","y","z"]),Ew.prototype.generateReadonly=function(e,t,n,r){return e.format("vec3( "+this.x+", "+this.y+", "+this.z+" )",r,t)},Ew.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.value.copy(e),this},Ew.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,!0===this.readonly&&(t.readonly=!0)),t},Mw.prototype=Object.create(Sw.prototype),Mw.prototype.constructor=Mw,Mw.prototype.nodeType="Vector4",Z_.addShortcuts(Mw.prototype,"value",["x","y","z","w"]),Mw.prototype.generateReadonly=function(e,t,n,r){return e.format("vec4( "+this.x+", "+this.y+", "+this.z+", "+this.w+" )",r,t)},Mw.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.value.copy(e),this},Mw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,!0===this.readonly&&(t.readonly=!0)),t},Aw.prototype=Object.create(ew.prototype),Aw.prototype.constructor=Aw,Aw.prototype.nodeType="UV",Aw.prototype.generate=function(e,t){e.requires.uv[this.index]=!0;var n=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(r,this.getType(e),t)},Aw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.index=e.index,this},Aw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},$_.addKeyword("uv",(function(){return new Aw})),$_.addKeyword("uv2",(function(){return new Aw(1)})),Pw.prototype=Object.create(Sw.prototype),Pw.prototype.constructor=Pw,Pw.prototype.nodeType="Float",Pw.prototype.generateReadonly=function(e,t,n,r){return e.format(this.value+(this.value%1?"":".0"),r,t)},Pw.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.value=e.value,this},Pw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},Lw.prototype=Object.create(rw.prototype),Lw.prototype.constructor=Lw,Lw.prototype.nodeType="Expression",Cw.Nodes=(aw=new rw(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sw=new rw(["vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );","}"].join("\n")),lw=new rw(["vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );","}"].join("\n")),uw=new rw(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),cw=new rw(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n")),hw=new rw(["vec4 RGBEToLinear( in vec4 value ) {","\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );","}"].join("\n")),dw=new rw(["vec4 LinearToRGBE( in vec4 value ) {","\tfloat maxComponent = max( max( value.r, value.g ), value.b );","\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );","\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );","}"].join("\n")),pw=new rw(["vec3 RGBMToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.xyz * value.w * maxRange, 1.0 );","}"].join("\n")),fw=new rw(["vec3 LinearToRGBM( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );","\tM            = ceil( M * 255.0 ) / 255.0;","\treturn vec4( value.rgb / ( M * maxRange ), M );","}"].join("\n")),mw=new rw(["vec3 RGBDToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );","}"].join("\n")),vw=new rw(["vec3 LinearToRGBD( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat D      = max( maxRange / maxRGB, 1.0 );","\tD            = clamp( floor( D ) / 255.0, 0.0, 1.0 );","\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );","}"].join("\n")),gw=new ow("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );"),yw=new rw(["vec4 LinearToLogLuv( in vec4 value ) {","\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;","\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));","\tvec4 vResult;","\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;","\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;","\tvResult.w = fract(Le);","\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;","\treturn vResult;","}"].join("\n"),[gw]),xw=new ow("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );"),{LinearToLinear:aw,GammaToLinear:sw,LinearToGamma:lw,sRGBToLinear:uw,LinearTosRGB:cw,RGBEToLinear:hw,LinearToRGBE:dw,RGBMToLinear:pw,LinearToRGBM:fw,RGBDToLinear:mw,LinearToRGBD:vw,cLogLuvM:gw,LinearToLogLuv:yw,cLogLuvInverseM:xw,LogLuvToLinear:new rw(["vec4 LogLuvToLinear( in vec4 value ) {","\tfloat Le = value.z * 255.0 + value.w;","\tvec3 Xp_Y_XYZp;","\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);","\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;","\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;","\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;","\treturn vec4( max(vRGB, 0.0), 1.0 );","}"].join("\n"),[xw])}),Cw.LINEAR_TO_LINEAR="LinearToLinear",Cw.GAMMA_TO_LINEAR="GammaToLinear",Cw.LINEAR_TO_GAMMA="LinearToGamma",Cw.SRGB_TO_LINEAR="sRGBToLinear",Cw.LINEAR_TO_SRGB="LinearTosRGB",Cw.RGBE_TO_LINEAR="RGBEToLinear",Cw.LINEAR_TO_RGBE="LinearToRGBE",Cw.RGBM_TO_LINEAR="RGBMToLinear",Cw.LINEAR_TO_RGBM="LinearToRGBM",Cw.RGBD_TO_LINEAR="RGBDToLinear",Cw.LINEAR_TO_RGBD="LinearToRGBD",Cw.LINEAR_TO_LOG_LUV="LinearToLogLuv",Cw.LOG_LUV_TO_LINEAR="LogLuvToLinear",Cw.getEncodingComponents=function(e){switch(e){case Zi:return["Linear"];case $i:return["sRGB"];case eo:return["RGBE"];case no:return["RGBM",new Pw(7).setReadonly(!0)];case ro:return["RGBM",new Pw(16).setReadonly(!0)];case io:return["RGBD",new Pw(256).setReadonly(!0)];case Ki:return["Gamma",new Lw("float( GAMMA_FACTOR )","f")]}},Cw.prototype=Object.create(ew.prototype),Cw.prototype.constructor=Cw,Cw.prototype.nodeType="ColorSpace",Cw.prototype.generate=function(e,t){var n=this.input.build(e,"v4"),r=this.getType(e),i=Cw.Nodes[this.method],o=e.include(i);if(o===Cw.LINEAR_TO_LINEAR)return e.format(n,r,t);if(2===i.inputs.length){var a=this.factor.build(e,"f");return e.format(o+"( "+n+", "+a+" )",r,t)}return e.format(o+"( "+n+" )",r,t)},Cw.prototype.fromEncoding=function(e){var t=Cw.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]},Cw.prototype.fromDecoding=function(e){var t=Cw.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]},Cw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.input=e.input,this.method=e.method,this},Cw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).input=this.input.toJSON(e).uuid,t.method=this.method),t},Ow.prototype=Object.create(Sw.prototype),Ow.prototype.constructor=Ow,Ow.prototype.nodeType="Texture",Ow.prototype.getTexture=function(e,t){return Sw.prototype.generate.call(this,e,t,this.value.uuid,"t")},Ow.prototype.generate=function(e,t){if("sampler2D"===t)return this.getTexture(e,t);var n,r,i=this.getTexture(e,t),o=this.uv.build(e,this.project?"v4":"v2"),a=this.bias?this.bias.build(e,"f"):void 0;void 0===a&&e.context.bias&&(a=e.context.bias.setTexture(this).build(e,"f")),n=this.project?"texture2DProj":a?"tex2DBias":"tex2D",r=a?n+"( "+i+", "+o+", "+a+" )":n+"( "+i+", "+o+" )";var s={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace||new Cw(new Lw("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(r),r=this.colorSpace.build(e,l),e.removeContext(),e.format(r,l,t)},Ow.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),void 0!==e.project&&(this.project=e.project),this},Ow.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.value&&(t.value=this.value.uuid),t.uv=this.uv.toJSON(e).uuid,t.project=this.project,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},Rw.LOCAL="local",Rw.WORLD="world",Rw.VIEW="view",Rw.PROJECTION="projection",Rw.prototype=Object.create(ew.prototype),Rw.prototype.constructor=Rw,Rw.prototype.nodeType="Position",Rw.prototype.getType=function(){switch(this.scope){case Rw.PROJECTION:return"v4"}return this.type},Rw.prototype.getShared=function(){switch(this.scope){case Rw.LOCAL:case Rw.WORLD:return!1}return!0},Rw.prototype.generate=function(e,t){var n;switch(this.scope){case Rw.LOCAL:e.isShader("vertex")?n="transformed":(e.requires.position=!0,n="vPosition");break;case Rw.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,n="vWPosition";break;case Rw.VIEW:n=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Rw.PROJECTION:n=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(n,this.getType(e),t)},Rw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.scope=e.scope,this},Rw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},$_.addKeyword("position",(function(){return new Rw})),$_.addKeyword("worldPosition",(function(){return new Rw(Rw.WORLD)})),$_.addKeyword("viewPosition",(function(){return new Rw(Rw.VIEW)})),Nw.LOCAL="local",Nw.WORLD="world",Nw.VIEW="view",Nw.prototype=Object.create(ew.prototype),Nw.prototype.constructor=Nw,Nw.prototype.nodeType="Normal",Nw.prototype.getShared=function(){return this.scope===Nw.WORLD},Nw.prototype.build=function(e,t,n,r){var i=e.context[this.scope+"Normal"];return i?i.build(e,t,n,r):ew.prototype.build.call(this,e,t,n)},Nw.prototype.generate=function(e,t){var n;switch(this.scope){case Nw.VIEW:n=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case Nw.LOCAL:e.isShader("vertex")?n="objectNormal":(e.requires.normal=!0,n="vObjectNormal");break;case Nw.WORLD:e.isShader("vertex")?n="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,n="vWNormal")}return e.format(n,this.getType(e),t)},Nw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.scope=e.scope,this},Nw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},$_.addKeyword("viewNormal",(function(){return new Nw(Nw.VIEW)})),$_.addKeyword("localNormal",(function(){return new Nw(Nw.NORMAL)})),$_.addKeyword("worldNormal",(function(){return new Nw(Nw.WORLD)})),Fw.CUBE="cube",Fw.SPHERE="sphere",Fw.VECTOR="vector",Fw.prototype=Object.create(ew.prototype),Fw.prototype.constructor=Fw,Fw.prototype.nodeType="Reflect",Fw.prototype.getUnique=function(e){return!e.context.viewNormal},Fw.prototype.getType=function(){switch(this.scope){case Fw.SPHERE:return"v2"}return this.type},Fw.prototype.generate=function(e,t){var n=this.getUnique(e);if(e.isShader("fragment")){var r;switch(this.scope){case Fw.VECTOR:var i=new Nw(Nw.VIEW),o=e.context.roughness,a=i.build(e,"v3"),s=new Rw(Rw.VIEW).build(e,"v3"),l=o?o.build(e,"f"):void 0,u=`reflect( -normalize( ${s} ), ${a} )`;l&&(u=`normalize( mix( ${u}, ${a}, ${l} * ${l} ) )`);var c=`inverseTransformDirection( ${u}, viewMatrix )`;n?(e.addNodeCode(`vec3 reflectVec = ${c};`),r="reflectVec"):r=c;break;case Fw.CUBE:c="vec3( -"+(h=new Fw(Fw.VECTOR).build(e,"v3"))+".x, "+h+".yz )";n?(e.addNodeCode(`vec3 reflectCubeVec = ${c};`),r="reflectCubeVec"):r=c;break;case Fw.SPHERE:var h;c="normalize( ( viewMatrix * vec4( "+(h=new Fw(Fw.VECTOR).build(e,"v3"))+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(e.addNodeCode(`vec2 reflectSphereVec = ${c};`),r="reflectSphereVec"):r=c}return e.format(r,this.getType(e),t)}return console.warn("THREE.ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)},Fw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},Iw.prototype=Object.create(Sw.prototype),Iw.prototype.constructor=Iw,Iw.prototype.nodeType="CubeTexture",Iw.prototype.getTexture=function(e,t){return Sw.prototype.generate.call(this,e,t,this.value.uuid,"tc")},Iw.prototype.generate=function(e,t){if("samplerCube"===t)return this.getTexture(e,t);var n,r=this.getTexture(e,t),i=this.uv.build(e,"v3"),o=this.bias?this.bias.build(e,"f"):void 0;void 0===o&&e.context.bias&&(o=e.context.bias.setTexture(this).build(e,"f")),n=o?"texCubeBias( "+r+", "+i+", "+o+" )":"texCube( "+r+", "+i+" )";var a={include:e.isShader("vertex"),ignoreCache:!0},s=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace||new Cw(new Lw("",s)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(n),n=this.colorSpace.build(e,s),e.removeContext(),e.format(n,s,t)},Iw.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),this},Iw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.uuid,t.uv=this.uv.toJSON(e).uuid,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},kw.prototype=Object.create(ew.prototype),kw.prototype.constructor=kw,kw.prototype.nodeType="FunctionCall",kw.prototype.setFunction=function(e,t){this.value=e,this.inputs=t||[]},kw.prototype.getFunction=function(){return this.value},kw.prototype.getType=function(e){return this.value.getType(e)},kw.prototype.generate=function(e,t){for(var n=this.getType(e),r=this.value,i=r.build(e,t)+"( ",o=[],a=0;a<r.inputs.length;a++){var s=r.inputs[a],l=this.inputs[a]||this.inputs[s.name];o.push(l.build(e,e.getTypeByFormat(s.type)))}return i+=o.join(", ")+" )",e.format(i,n,t)},kw.prototype.copy=function(e){for(var t in ew.prototype.copy.call(this,e),e.inputs)this.inputs[t]=e.inputs[t];return this.value=e.value,this},kw.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){var n=this.value;if((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,n.inputs.length){t.inputs={};for(var r=0;r<n.inputs.length;r++){var i=n.inputs[r],o=this.inputs[r]||this.inputs[i.name];t.inputs[i.name]=o.toJSON(e).uuid}}}return t},Dw.ADD="+",Dw.SUB="-",Dw.MUL="*",Dw.DIV="/",Dw.prototype=Object.create(ew.prototype),Dw.prototype.constructor=Dw,Dw.prototype.nodeType="Operator",Dw.prototype.getType=function(e){var t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t},Dw.prototype.generate=function(e,t){var n=this.getType(e),r=this.a.build(e,n),i=this.b.build(e,n);return e.format("( "+r+" "+this.op+" "+i+" )",n,t)},Dw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op,this},Dw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op),t},zw.RAD="radians",zw.DEG="degrees",zw.EXP="exp",zw.EXP2="exp2",zw.LOG="log",zw.LOG2="log2",zw.SQRT="sqrt",zw.INV_SQRT="inversesqrt",zw.FLOOR="floor",zw.CEIL="ceil",zw.NORMALIZE="normalize",zw.FRACT="fract",zw.SATURATE="saturate",zw.SIN="sin",zw.COS="cos",zw.TAN="tan",zw.ASIN="asin",zw.ACOS="acos",zw.ARCTAN="atan",zw.ABS="abs",zw.SIGN="sign",zw.LENGTH="length",zw.NEGATE="negate",zw.INVERT="invert",zw.MIN="min",zw.MAX="max",zw.MOD="mod",zw.STEP="step",zw.REFLECT="reflect",zw.DISTANCE="distance",zw.DOT="dot",zw.CROSS="cross",zw.POW="pow",zw.MIX="mix",zw.CLAMP="clamp",zw.REFRACT="refract",zw.SMOOTHSTEP="smoothstep",zw.FACEFORWARD="faceforward",zw.prototype=Object.create(ew.prototype),zw.prototype.constructor=zw,zw.prototype.nodeType="Math",zw.prototype.getNumInputs=function(){switch(this.method){case zw.MIX:case zw.CLAMP:case zw.REFRACT:case zw.SMOOTHSTEP:case zw.FACEFORWARD:return 3;case zw.MIN:case zw.MAX:case zw.MOD:case zw.STEP:case zw.REFLECT:case zw.DISTANCE:case zw.DOT:case zw.CROSS:case zw.POW:return 2;default:return 1}},zw.prototype.getInputType=function(e){var t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>r?this.a.getType(e):n>r?this.b.getType(e):this.c.getType(e)},zw.prototype.getType=function(e){switch(this.method){case zw.LENGTH:case zw.DISTANCE:case zw.DOT:return"f";case zw.CROSS:return"v3"}return this.getInputType(e)},zw.prototype.generate=function(e,t){var n,r,i,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.method){case zw.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case zw.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case zw.CROSS:n=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case zw.STEP:n=this.a.build(e,1===o?"f":l),r=this.b.build(e,l);break;case zw.MIN:case zw.MAX:case zw.MOD:n=this.a.build(e,l),r=this.b.build(e,1===a?"f":l);break;case zw.REFRACT:n=this.a.build(e,l),r=this.b.build(e,l),i=this.c.build(e,"f");break;case zw.MIX:n=this.a.build(e,l),r=this.b.build(e,l),i=this.c.build(e,1===s?"f":l);break;default:n=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(i=this.c.build(e,l))}var c=[];c.push(n),r&&c.push(r),i&&c.push(i);var h=this.getNumInputs(e);if(c.length!==h)throw Error(`Arguments not match used in "${this.method}". Require ${h}, currently ${c.length}.`);return e.format(this.method+"( "+c.join(", ")+" )",u,t)},zw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.c=e.c,this.method=e.method,this},zw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,this.b&&(t.b=this.b.toJSON(e).uuid),this.c&&(t.c=this.c.toJSON(e).uuid),t.method=this.method),t},Uw.Nodes=function(){var e=new ww("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new ow("float cubeUV_maxMipLevel 8.0",!0),n=new ow("float cubeUV_minMipLevel 4.0",!0),r=new ow("float cubeUV_maxTileSize 256.0",!0),i=new ow("float cubeUV_minTileSize 16.0",!0),o=new rw("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");o.useKeywords=!1;var a=new rw("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x);\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(direction.x, -direction.z) / abs(direction.y);\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = direction.xy / abs(direction.z);\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x);\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = direction.xz / abs(direction.y);\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z);\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");a.useKeywords=!1;var s=new rw("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n \n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,o,a,t,n,r,i]);s.useKeywords=!1;var l=new ow("float r0 1.0",!0),u=new ow("float v0 0.339",!0),c=new ow("float m0 -2.0",!0);return{bilinearCubeUV:s,roughnessToMip:new rw("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[l,u,c,new ow("float r1 0.8",!0),new ow("float v1 0.276",!0),new ow("float m1 -1.0",!0),new ow("float r4 0.4",!0),new ow("float v4 0.046",!0),new ow("float m4 2.0",!0),new ow("float r5 0.305",!0),new ow("float v5 0.016",!0),new ow("float m5 3.0",!0),new ow("float r6 0.21",!0),new ow("float v6 0.0038",!0),new ow("float m6 4.0",!0)]),m0:c,cubeUV_maxMipLevel:t}}(),Uw.prototype=Object.create(ew.prototype),Uw.prototype.constructor=Uw,Uw.prototype.nodeType="TextureCubeUV",Uw.prototype.bilinearCubeUV=function(e,t,n,r){var i=new kw(Uw.Nodes.bilinearCubeUV,[t,n,r]);this.colorSpaceTL=this.colorSpaceTL||new Cw(new Lw("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(i.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR||new Cw(new Lw("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(i.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL||new Cw(new Lw("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(i.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR||new Cw(new Lw("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(i.build(e)+".br");var o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new Lw(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Lw(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Lw(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Lw(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();var a=new Lw("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=i,a},Uw.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=this.uv,r=this.bias||e.context.roughness,i=new zw(new kw(Uw.Nodes.roughnessToMip,[r]),Uw.Nodes.m0,Uw.Nodes.cubeUV_maxMipLevel,zw.CLAMP),o=new zw(i,zw.FLOOR),a=new zw(i,zw.FRACT),s=new zw(this.bilinearCubeUV(e,this.value,n,o),this.bilinearCubeUV(e,this.value,n,new Dw(o,new Pw(1).setReadonly(!0),Dw.ADD)),a,zw.MIX);return e.format(s.build(e),"v4",t)}return console.warn("THREE.TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},Uw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.bias=this.bias.toJSON(e).uuid),t},jw.prototype=Object.create(ew.prototype),jw.prototype.constructor=jw,jw.prototype.nodeType="TextureCube",jw.prototype.generate=function(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("THREE.TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))},jw.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.value=e.value,this},jw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t};var Bw=Z_.elements,Gw=["float","vec2","vec3","vec4"],Hw={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b"},Vw={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4"};function Ww(){this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.requires={uv:[],color:[],lights:!1,fog:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:"",fragment:""},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={},this.updaters=[],this.nodes=[],this.analyzing=!1}function Xw(e,t,n){Sw.call(this,"c"),this.value=e instanceof fs?e:new fs(e||0,t,n)}function Yw(e){K_.call(this,"v4"),this.value=e}function qw(e,t){xl.call(this);var n=this;this.vertex=e||new Yw(new Rw(Rw.PROJECTION)),this.fragment=t||new Yw(new Xw(16711680)),this.updaters=[],this.onBeforeCompile=function(e,t){var n=t.properties.get(this);this.version!==n.__version&&(this.build({renderer:t}),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader)},this.onBeforeCompile.toString=function(){return n.needsCompile}}function Jw(e){Ow.call(this,void 0,e)}function Qw(){zy.call(this),this.name="",this.uuid=Uo.generateUUID(),this.userData={},this.textureID="renderTexture",this.input=new Jw,this.material=new qw,this.needsUpdate=!0}function Zw(e,t){K_.call(this,e),this.value=t}function $w(e,t){K_.call(this,t),this.name=e}function Kw(e){this.time=void 0!==e?e:0,this.id=0}function eS(e){Sw.call(this,"b"),this.value=Boolean(e)}function tS(e){Sw.call(this,"i"),this.value=Math.floor(e||0)}function nS(e){Sw.call(this,"m3"),this.value=e||new Bo}function rS(e){Sw.call(this,"m4"),this.value=e||new oa}function iS(e){ew.call(this,"v4"),e&&this.setMirror(e)}function oS(e,t,n){Sw.call(this,n),this.object=e,this.property=t}function aS(e,t,n,r){r=r||{},this.input=n,this.clear=void 0===r.clear||r.clear,this.renderTarget=new Xo(e,t,r),this.material=new qw,this.camera=new sf(-1,1,1,-1,0,1),this.scene=new Ta,this.quad=new al(new Rl(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.render=!0,Ow.call(this,this.renderTarget.texture)}Ww.prototype={constructor:Ww,build:function(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(var n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){var r=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this},buildShader:function(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")},setMaterial:function(e,t){return this.material=e,this.renderer=t,this.requires.lights=e.lights,this.requires.fog=e.fog,this.mergeDefines(e.defines),this},addFlow:function(e,t,n){return this.addSlot(e).addCache(t).addContext(n)},removeFlow:function(){return this.removeSlot().removeCache().removeContext()},addCache:function(e){return this.cache=e||"",this.caches.push(this.cache),this},removeCache:function(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this},addContext:function(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this},removeContext:function(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this},addSlot:function(e){return this.slot=e||"",this.slots.push(this.slot),this},removeSlot:function(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this},addVertexCode:function(e){this.addCode(e,"vertex")},addFragmentCode:function(e){this.addCode(e,"fragment")},addCode:function(e,t){this.code[t||this.shader]+=e+"\n"},addVertexNodeCode:function(e){this.addNodeCode(e,"vertex")},addFragmentNodeCode:function(e){this.addNodeCode(e,"fragment")},addNodeCode:function(e,t){this.nodeCode[t||this.shader]+=e+"\n"},clearNodeCode:function(e){e=e||this.shader;var t=this.nodeCode[e];return this.nodeCode[e]="",t},clearVertexNodeCode:function(){return this.clearNodeCode("vertex")},clearFragmentNodeCode:function(){return this.clearNodeCode("fragment")},addVertexFinalCode:function(e){this.addFinalCode(e,"vertex")},addFragmentFinalCode:function(e){this.addFinalCode(e,"fragment")},addFinalCode:function(e,t){this.finalCode[t||this.shader]+=e+"\n"},addVertexParsCode:function(e){this.addParsCode(e,"vertex")},addFragmentParsCode:function(e){this.addParsCode(e,"fragment")},addParsCode:function(e,t){this.parsCode[t||this.shader]+=e+"\n"},addVaryCode:function(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)},isCache:function(e){return-1!==this.caches.indexOf(e)},isSlot:function(e){return-1!==this.slots.indexOf(e)},define:function(e,t){this.defines[e]=void 0===t?1:t},require:function(e){this.requires[e]=!0},isDefined:function(e){return void 0!==this.defines[e]},getVar:function(e,t,n,r="varying",i="V",o=""){var a=this.getVars(r),s=a[e];if(!s){var l=a.length;s={name:n||"node"+i+l+(o?"_"+o:""),type:t},a.push(s),a[e]=s}return s},getTempVar:function(e,t,n,r){return this.getVar(e,t,n,this.shader,"T",r)},getAttribute:function(e,t){if(!this.attributes[e]){var n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]},getCode:function(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")},getVarListCode:function(e,t){t=t||"";for(var n="",r=0,i=e.length;r<i;++r){var o=e[r],a=o.type,s=o.name,l=this.getFormatByType(a);if(void 0===l)throw new Error("Node pars "+l+" not found.");n+=t+" "+l+" "+s+";\n"}return n},getVars:function(e){return this.inputs.vars[e||this.shader]},getNodeData:function(e){var t=e.isNode?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}},createUniform:function(e,t,n,r,i,o){var a=this.inputs.uniforms,s=a.list.length,l=new Q_({type:t,name:r||"nodeU"+s+(o?"_"+o:""),node:n,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l},createVertexUniform:function(e,t,n,r,i){return this.createUniform("vertex",e,t,n,r,i)},createFragmentUniform:function(e,t,n,r,i){return this.createUniform("fragment",e,t,n,r,i)},include:function(e,t,n){var r;if(e="string"==typeof e?$_.get(e):e,!1===this.context.include)return e.name;e instanceof rw?r=this.includes.functions:e instanceof ow?r=this.includes.consts:e instanceof ww&&(r=this.includes.structs);var i=r[this.shader]=r[this.shader]||[];if(e){var o=i[e.name];if(o||(o=i[e.name]={node:e,deps:[]},i.push(o),o.src=e.build(this,"source")),e instanceof rw&&t&&i[t.name]&&-1==i[t.name].deps.indexOf(e)&&(i[t.name].deps.push(e),e.includes&&e.includes.length)){var a=0;do{this.include(e.includes[a++],t)}while(a<e.includes.length)}return n&&(o.src=n),e.name}throw new Error("Include not found.")},colorToVectorProperties:function(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")},colorToVector:function(e){return e.replace(/c/g,"v3")},getIncludes:function(e,t){return this.includes[e][t||this.shader]},getIncludesCode:function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,n){if(!(i=this.getIncludes(t,n)))return"";for(var r="",i=i.sort(e),o=0;o<i.length;o++)i[o].src&&(r+=i[o].src+"\n");return r}}(),getConstructorFromLength:function(e){return Gw[e-1]},isTypeMatrix:function(e){return/^m/.test(e)},getTypeLength:function(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))},getTypeFromLength:function(e){return 1===e?"f":"v"+e},findNode:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(void 0!==t&&t.isNode)return t}},resolve:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(void 0!==t){if(t.isNode)return t;if(t.isTexture)switch(t.mapping){case Tr:case Er:return new Iw(t);case Lr:case Cr:return new jw(new Ow(t));default:return new Ow(t)}else{if(t.isVector2)return new Tw(t);if(t.isVector3)return new Ew(t);if(t.isVector4)return new Mw(t)}}}},format:function(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e},getTypeByFormat:function(e){return Hw[e]||e},getFormatByType:function(e){return Vw[e]||e},getUuid:function(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e},getElementByIndex:function(e){return Bw[e]},getIndexByElement:function(e){return Bw.indexOf(e)},isShader:function(e){return this.shader===e},setShader:function(e){return this.shader=e,this},mergeDefines:function(e){for(var t in e)this.defines[t]=e[t];return this.defines},mergeUniform:function(e){for(var t in e)this.uniforms[t]=e[t];return this.uniforms},getTextureEncodingFromMap:function(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Zi,t===Zi&&this.context.gamma&&(t=Ki),t}},Xw.prototype=Object.create(Sw.prototype),Xw.prototype.constructor=Xw,Xw.prototype.nodeType="Color",Z_.addShortcuts(Xw.prototype,"value",["r","g","b"]),Xw.prototype.generateReadonly=function(e,t,n,r){return e.format("vec3( "+this.r+", "+this.g+", "+this.b+" )",r,t)},Xw.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.value.copy(e),this},Xw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).r=this.r,t.g=this.g,t.b=this.b,!0===this.readonly&&(t.readonly=!0)),t},Yw.prototype=Object.create(K_.prototype),Yw.prototype.constructor=Yw,Yw.prototype.nodeType="Raw",Yw.prototype.generate=function(e){var t=this.value.analyzeAndFlow(e,this.type),n=t.code+"\n";return e.isShader("vertex")?n+="gl_Position = "+t.result+";":n+="gl_FragColor = "+t.result+";",n},Yw.prototype.copy=function(e){return K_.prototype.copy.call(this,e),this.value=e.value,this},Yw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t},qw.prototype=Object.create(xl.prototype),qw.prototype.constructor=qw,qw.prototype.type="NodeMaterial",qw.prototype.isNodeMaterial=!0,Object.defineProperties(qw.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){!0===e&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}}),qw.prototype.updateFrame=function(e){for(var t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])},qw.prototype.build=function(e){var t=(e=e||{}).builder||new Ww;return t.setMaterial(this,e.renderer),t.build(this.vertex,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters,this.fog=t.requires.fog,this.lights=t.requires.lights,this.transparent=t.requires.transparent||this.blending>Un,this},qw.prototype.copy=function(e){var t=this.uuid;for(var n in e)this[n]=e[n];return this.uuid=t,void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},qw.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.materials&&(e.materials={}),!e.materials[this.uuid]){var t={};t.uuid=this.uuid,t.type=this.type,e.materials[t.uuid]=t,""!==this.name&&(t.name=this.name),void 0!==this.size&&(t.size=this.size),void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==Un&&(t.blending=this.blending),!0===this.flatShading&&(t.flatShading=this.flatShading),this.side!==Cn&&(t.side=this.side),this.vertexColors!==In&&(t.vertexColors=this.vertexColors),this.depthFunc!==ur&&(t.depthFunc=this.depthFunc),!1===this.depthTest&&(t.depthTest=this.depthTest),!1===this.depthWrite&&(t.depthWrite=this.depthWrite),1!==this.linewidth&&(t.linewidth=this.linewidth),void 0!==this.dashSize&&(t.dashSize=this.dashSize),void 0!==this.gapSize&&(t.gapSize=this.gapSize),void 0!==this.scale&&(t.scale=this.scale),!0===this.dithering&&(t.dithering=!0),!0===this.wireframe&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(t.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(t.wireframeLinejoin=this.wireframeLinejoin),this.alphaTest>0&&(t.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(t.premultipliedAlpha=this.premultipliedAlpha),!0===this.morphTargets&&(t.morphTargets=!0),!0===this.skinning&&(t.skinning=!0),!1===this.visible&&(t.visible=!1),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.fog=this.fog,t.lights=this.lights,t.vertex=this.vertex.toJSON(e).uuid,t.fragment=this.fragment.toJSON(e).uuid}return e.material=this.uuid,e},Jw.prototype=Object.create(Ow.prototype),Jw.prototype.constructor=Jw,Jw.prototype.nodeType="Screen",Jw.prototype.getUnique=function(){return!0},Jw.prototype.getTexture=function(e,t){return Sw.prototype.generate.call(this,e,t,this.getUuid(),"t","renderTexture")},Qw.prototype=Object.create(zy.prototype),Qw.prototype.constructor=Qw,Qw.prototype.render=function(){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.input,this.needsUpdate=!1),this.uniforms=this.material.uniforms,zy.prototype.render.apply(this,arguments)},Qw.prototype.copy=function(e){return this.input=e.input,this},Qw.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.passes&&(e.passes={}),!e.passes[this.uuid]){var t={};t.uuid=this.uuid,t.type="NodePass",e.passes[this.uuid]=t,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.input=this.input.toJSON(e).uuid}return e.pass=this.uuid,e},Zw.prototype=Object.create(K_.prototype),Zw.prototype.constructor=Zw,Zw.prototype.nodeType="Var",Zw.prototype.getType=function(e){return e.getTypeByFormat(this.type)},Zw.prototype.generate=function(e,t){var n=e.getVar(this.uuid,this.type);return this.value&&e.isShader("vertex")&&e.addNodeCode(n.name+" = "+this.value.build(e,this.getType(e))+";"),e.format(n.name,this.getType(e),t)},Zw.prototype.copy=function(e){return K_.prototype.copy.call(this,e),this.type=e.type,this.value=e.value,this},Zw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type,this.value&&(t.value=this.value.toJSON(e).uuid)),t},$w.prototype=Object.create(K_.prototype),$w.prototype.constructor=$w,$w.prototype.nodeType="Attribute",$w.prototype.getAttributeType=function(e){return"number"==typeof this.type?e.getConstructorFromLength(this.type):this.type},$w.prototype.getType=function(e){var t=this.getAttributeType(e);return e.getTypeByFormat(t)},$w.prototype.generate=function(e,t){var n=this.getAttributeType(e),r=e.getAttribute(this.name,n),i=e.isShader("vertex")?this.name:r.varying.name;return e.format(i,this.getType(e),t)},$w.prototype.copy=function(e){return K_.prototype.copy.call(this,e),this.type=e.type,this},$w.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type),t},Kw.prototype={constructor:Kw,update:function(e){return++this.id,this.time+=e,this.delta=e,this},setRenderer:function(e){return this.renderer=e,this},setRenderTexture:function(e){return this.renderTexture=e,this},updateNode:function(e){return e.frameId===this.id||(e.updateFrame(this),e.frameId=this.id),this}},eS.prototype=Object.create(Sw.prototype),eS.prototype.constructor=eS,eS.prototype.nodeType="Bool",eS.prototype.generateReadonly=function(e,t,n,r){return e.format(this.value,r,t)},eS.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.value=e.value,this},eS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},tS.prototype=Object.create(Sw.prototype),tS.prototype.constructor=tS,tS.prototype.nodeType="Int",tS.prototype.generateReadonly=function(e,t,n,r){return e.format(this.value,r,t)},tS.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.value=e.value,this},tS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},nS.prototype=Object.create(Sw.prototype),nS.prototype.constructor=nS,nS.prototype.nodeType="Matrix3",Object.defineProperties(nS.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),nS.prototype.generateReadonly=function(e,t,n,r){return e.format("mat3( "+this.value.elements.join(", ")+" )",r,t)},nS.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.value.fromArray(e.elements),this},nS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},rS.prototype=Object.create(Sw.prototype),rS.prototype.constructor=rS,rS.prototype.nodeType="Matrix4",Object.defineProperties(rS.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),rS.prototype.generateReadonly=function(e,t,n,r){return e.format("mat4( "+this.value.elements.join(", ")+" )",r,t)},rS.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.scope.value.fromArray(e.elements),this},rS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},iS.prototype=Object.create(ew.prototype),iS.prototype.constructor=iS,iS.prototype.nodeType="Reflector",iS.prototype.setMirror=function(e){this.mirror=e,this.textureMatrix=new rS(this.mirror.material.uniforms.textureMatrix.value),this.localPosition=new Rw(Rw.LOCAL),this.uv=new Dw(this.textureMatrix,this.localPosition,Dw.MUL),this.uvResult=new Dw(null,this.uv,Dw.ADD),this.texture=new Ow(this.mirror.material.uniforms.tDiffuse.value,this.uv,null,!0)},iS.prototype.generate=function(e,t){return e.isShader("fragment")?(this.uvResult.a=this.offset,this.texture.uv=this.offset?this.uvResult:this.uv,"sampler2D"===t?this.texture.build(e,t):e.format(this.texture.build(e,this.type),this.type,t)):(console.warn("THREE.ReflectorNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.type,t))},iS.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),this.scope.mirror=e.mirror,this},iS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).mirror=this.mirror.uuid,this.offset&&(t.offset=this.offset.toJSON(e).uuid)),t},oS.prototype=Object.create(Sw.prototype),oS.prototype.constructor=oS,oS.prototype.nodeType="Property",Object.defineProperties(oS.prototype,{value:{get:function(){return this.object[this.property]},set:function(e){this.object[this.property]=e}}}),oS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,t.property=this.property),t},aS.prototype=Object.create(Ow.prototype),aS.prototype.constructor=aS,aS.prototype.nodeType="RTT",aS.prototype.build=function(e,t,n){var r=new Ww;return r.nodes=e.nodes,r.updaters=e.updaters,this.material.fragment.value=this.input,this.material.build({builder:r}),Ow.prototype.build.call(this,e,t,n)},aS.prototype.updateFramesaveTo=function(e){if(this.saveTo.render=!1,this.saveTo!==this.saveToCurrent){this.saveToMaterial&&this.saveToMaterial.dispose();var t=new qw;t.fragment.value=this,t.build();var n=new Ta,r=new al(new Rl(2,2),t);r.frustumCulled=!1,n.add(r),this.saveToScene=n,this.saveToMaterial=t}this.saveToCurrent=this.saveTo,e.renderer.setRenderTarget(this.saveTo.renderTarget),this.saveTo.clear&&e.renderer.clear(),e.renderer.render(this.saveToScene,this.camera)},aS.prototype.updateFrame=function(e){e.renderer?(this.saveTo&&!1===this.saveTo.render&&this.updateFramesaveTo(e),this.render&&(this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=e.renderTexture),e.renderer.setRenderTarget(this.renderTarget),this.clear&&e.renderer.clear(),e.renderer.render(this.scene,this.camera)),this.saveTo&&!0===this.saveTo.render&&this.updateFramesaveTo(e)):console.warn("RTTNode need a renderer in NodeFrame")},aS.prototype.copy=function(e){return Ow.prototype.copy.call(this,e),this.saveTo=e.saveTo,this},aS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=Ow.prototype.toJSON.call(this,e),this.saveTo&&(t.saveTo=this.saveTo.toJSON(e).uuid)),t};var sS,lS=["color","color2"],uS=["vColor","vColor2"];function cS(e){ew.call(this,"v4",{shared:!1}),this.index=e||0}function hS(e,t){ew.call(this,"v3"),this.setScope(e||hS.POSITION),this.setCamera(t)}function dS(e){ew.call(this,"v3",{shared:!1}),this.scope=e||dS.TOTAL}function pS(){Tw.call(this),this.size=new jo}function fS(e){ew.call(this,"v2"),this.resolution=e||new pS}function mS(e,t,n,r,i){ew.call(this),this.a=e,this.b=t,this.op=n,this.ifNode=r,this.elseNode=i}function vS(e){ew.call(this,"f"),this.uv=e||new Aw}function gS(e){ew.call(this,"f"),this.uv=e||new Aw}function yS(e,t){ew.call(this,"v3"),this.value=e,this.scale=t||new Tw(1,1)}function xS(e,t){ew.call(this,"v3"),this.value=e,this.scale=t||new Pw(1),this.toNormalMap=!1}function bS(e,t){K_.call(this),this.code=e,this.value=t}cS.prototype=Object.create(ew.prototype),cS.prototype.constructor=cS,cS.prototype.nodeType="Colors",cS.prototype.generate=function(e,t){e.requires.color[this.index]=!0;var n=e.isShader("vertex")?lS[this.index]:uS[this.index];return e.format(n,this.getType(e),t)},cS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.index=e.index,this},cS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},hS.Nodes={depthColor:new rw(["float depthColor( float mNear, float mFar ) {","\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\treturn 1.0 - smoothstep( mNear, mFar, depth );","}"].join("\n"))},hS.POSITION="position",hS.DEPTH="depth",hS.TO_VERTEX="toVertex",hS.prototype=Object.create(ew.prototype),hS.prototype.constructor=hS,hS.prototype.nodeType="Camera",hS.prototype.setCamera=function(e){this.camera=e,this.updateFrame=void 0!==e?this.onUpdateFrame:void 0},hS.prototype.setScope=function(e){switch(this.scope){case hS.DEPTH:delete this.near,delete this.far}switch(this.scope=e,e){case hS.DEPTH:var t=this.camera;this.near=new Pw(t?t.near:1),this.far=new Pw(t?t.far:1200)}},hS.prototype.getType=function(){switch(this.scope){case hS.DEPTH:return"f"}return this.type},hS.prototype.getUnique=function(){switch(this.scope){case hS.DEPTH:case hS.TO_VERTEX:return!0}return!1},hS.prototype.getShared=function(){switch(this.scope){case hS.POSITION:return!1}return!0},hS.prototype.generate=function(e,t){var n;switch(this.scope){case hS.POSITION:n="cameraPosition";break;case hS.DEPTH:n=e.include(hS.Nodes.depthColor)+"( "+this.near.build(e,"f")+", "+this.far.build(e,"f")+" )";break;case hS.TO_VERTEX:n="normalize( "+new Rw(Rw.WORLD).build(e,"v3")+" - cameraPosition )"}return e.format(n,this.getType(e),t)},hS.prototype.onUpdateFrame=function(){switch(this.scope){case hS.DEPTH:var e=this.camera;this.near.value=e.near,this.far.value=e.far}},hS.prototype.copy=function(e){switch(ew.prototype.copy.call(this,e),this.setScope(e.scope),e.camera&&this.setCamera(e.camera),e.scope){case hS.DEPTH:this.near.number=e.near,this.far.number=e.far}return this},hS.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)switch((t=this.createJSONNode(e)).scope=this.scope,this.camera&&(t.camera=this.camera.uuid),this.scope){case hS.DEPTH:t.near=this.near.value,t.far=this.far.value}return t},dS.TOTAL="total",dS.prototype=Object.create(ew.prototype),dS.prototype.constructor=dS,dS.prototype.nodeType="Light",dS.prototype.generate=function(e,t){return e.isCache("light")?e.format("reflectedLight.directDiffuse",this.type,t):(console.warn('THREE.LightNode is only compatible in "light" channel.'),e.format("vec3( 0.0 )",this.type,t))},dS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.scope=e.scope,this},dS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},pS.prototype=Object.create(Tw.prototype),pS.prototype.constructor=pS,pS.prototype.nodeType="Resolution",pS.prototype.updateFrame=function(e){if(e.renderer){e.renderer.getSize(this.size);var t=e.renderer.getPixelRatio();this.x=this.size.width*t,this.y=this.size.height*t}else console.warn("ResolutionNode need a renderer in NodeFrame")},pS.prototype.copy=function(e){return Tw.prototype.copy.call(this,e),this.renderer=e.renderer,this},pS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).renderer=this.renderer.uuid),t},fS.prototype=Object.create(ew.prototype),fS.prototype.constructor=fS,fS.prototype.nodeType="ScreenUV",fS.prototype.generate=function(e,t){var n;return e.isShader("fragment")?n="( gl_FragCoord.xy / "+this.resolution.build(e,"v2")+")":(console.warn("THREE.ScreenUVNode is not compatible with "+e.shader+" shader."),n="vec2( 0.0 )"),e.format(n,this.getType(e),t)},fS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.resolution=e.resolution,this},fS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).resolution=this.resolution.toJSON(e).uuid),t},mS.EQUAL="==",mS.NOT_EQUAL="!=",mS.GREATER=">",mS.GREATER_EQUAL=">=",mS.LESS="<",mS.LESS_EQUAL="<=",mS.prototype=Object.create(ew.prototype),mS.prototype.constructor=mS,mS.prototype.nodeType="Cond",mS.prototype.getType=function(e){if(this.ifNode){var t=this.ifNode.getType(e),n=this.elseNode.getType(e);return e.getTypeLength(n)>e.getTypeLength(t)?n:t}return"b"},mS.prototype.getCondType=function(e){return e.getTypeLength(this.b.getType(e))>e.getTypeLength(this.a.getType(e))?this.b.getType(e):this.a.getType(e)},mS.prototype.generate=function(e,t){var n,r=this.getType(e),i=this.getCondType(e),o=this.a.build(e,i),a=this.b.build(e,i);if(this.ifNode){var s=this.ifNode.build(e,r),l=this.elseNode.build(e,r);n="( "+[o,this.op,a,"?",s,":",l].join(" ")+" )"}else n="( "+o+" "+this.op+" "+a+" )";return e.format(n,this.getType(e),t)},mS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op,this.ifNode=e.ifNode,this.elseNode=e.elseNode,this},mS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op,t.ifNode&&(t.ifNode=this.ifNode.toJSON(e).uuid),t.elseNode&&(t.elseNode=this.elseNode.toJSON(e).uuid)),t},vS.prototype=Object.create(ew.prototype),vS.prototype.constructor=vS,vS.prototype.nodeType="Noise",vS.Nodes={snoise:new rw(["float snoise(vec2 co) {","\treturn fract( sin( dot( co.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );","}"].join("\n"))},vS.prototype.generate=function(e,t){var n=e.include(vS.Nodes.snoise);return e.format(n+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},vS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.uv=e.uv,this},vS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},gS.prototype=Object.create(ew.prototype),gS.prototype.constructor=gS,gS.prototype.nodeType="Noise",gS.Nodes={checker:new rw(["float checker( vec2 uv ) {","\tfloat cx = floor( uv.x );","\tfloat cy = floor( uv.y ); ","\tfloat result = mod( cx + cy, 2.0 );","\treturn sign( result );","}"].join("\n"))},gS.prototype.generate=function(e,t){var n=e.include(gS.Nodes.checker);return e.format(n+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},gS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.uv=e.uv,this},gS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},yS.Nodes={perturbNormal2Arb:new rw("vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 map, vec2 vUv, vec2 normalScale ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = map * 2.0 - 1.0;\n\n\t\tmapN.xy *= normalScale;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t// Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331\n\n\t\t\tif ( dot( cross( S, T ), N ) < 0.0 ) mapN.xy *= - 1.0;\n\n\t\t#else\n\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}",null,{derivatives:!0})},yS.prototype=Object.create(ew.prototype),yS.prototype.constructor=yS,yS.prototype.nodeType="NormalMap",yS.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=e.include(yS.Nodes.perturbNormal2Arb);this.normal=this.normal||new Nw,this.position=this.position||new Rw(Rw.VIEW),this.uv=this.uv||new Aw;var r=this.scale.build(e,"v2");return e.material.side===On&&(r="-"+r),e.format(n+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+this.value.build(e,"v3")+", "+this.uv.build(e,"v2")+", "+r+" )",this.getType(e),t)}return console.warn("THREE.NormalMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},yS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale,this},yS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},xS.Nodes={dHdxy_fwd:sS=new rw(["vec2 dHdxy_fwd( sampler2D bumpMap, vec2 vUv, float bumpScale ) {","\tvec2 dSTdx = dFdx( vUv );","\tvec2 dSTdy = dFdy( vUv );","\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;","\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","\treturn vec2( dBx, dBy );","}"].join("\n"),null,{derivatives:!0}),perturbNormalArb:new rw(["vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );","\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );","\tvec3 vN = surf_norm;","\tvec3 R1 = cross( vSigmaY, vN );","\tvec3 R2 = cross( vN, vSigmaX );","\tfloat fDet = dot( vSigmaX, R1 );","\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );","\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","\treturn normalize( abs( fDet ) * surf_norm - vGrad );","}"].join("\n"),[sS],{derivatives:!0}),bumpToNormal:new rw(["vec3 bumpToNormal( sampler2D bumpMap, vec2 uv, float scale ) {","\tvec2 dSTdx = dFdx( uv );","\tvec2 dSTdy = dFdy( uv );","\tfloat Hll = texture2D( bumpMap, uv ).x;","\tfloat dBx = texture2D( bumpMap, uv + dSTdx ).x - Hll;","\tfloat dBy = texture2D( bumpMap, uv + dSTdy ).x - Hll;","\treturn vec3( .5 - ( dBx * scale ), .5 - ( dBy * scale ), 1.0 );","}"].join("\n"),null,{derivatives:!0})},xS.prototype=Object.create(ew.prototype),xS.prototype.constructor=xS,xS.prototype.nodeType="BumpMap",xS.prototype.generate=function(e,t){if(e.isShader("fragment")){if(this.toNormalMap){var n=e.include(xS.Nodes.bumpToNormal);return e.format(n+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )",this.getType(e),t)}var r=e.include(xS.Nodes.dHdxy_fwd),i=e.include(xS.Nodes.perturbNormalArb);this.normal=this.normal||new Nw,this.position=this.position||new Rw(Rw.VIEW);var o=r+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )";return e.format(i+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+o+" )",this.getType(e),t)}return console.warn("THREE.BumpMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},xS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale,this},xS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},bS.prototype=Object.create(K_.prototype),bS.prototype.constructor=bS,bS.prototype.nodeType="Bypass",bS.prototype.getType=function(e){return this.value?this.value.getType(e):e.isShader("fragment")?"f":"void"},bS.prototype.generate=function(e,t){var n=this.code.build(e,t)+";";return e.addNodeCode(n),e.isShader("vertex")?this.value?this.value.build(e,t):void 0:this.value?this.value.build(e,t):e.format("0.0","f",t)},bS.prototype.copy=function(e){return K_.prototype.copy.call(this,e),this.code=e.code,this.value=e.value,this},bS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).code=this.code.toJSON(e).uuid,this.value&&(t.value=this.value.toJSON(e).uuid)),t};var _S,wS=Z_.elements;function SS(e,t,n,r){ew.call(this,"f"),this.x=e,this.y=t,this.z=n,this.w=r}function TS(e,t){K_.call(this),this.node=e,this.components=t||"x"}function ES(e,t,n){Pw.call(this),this.scale=void 0!==e?e:1,this.scope=t||ES.GLOBAL,this.timeScale=void 0!==n?n:void 0!==e}function MS(e,t){Ew.call(this),this.params={},this.velocity=new Zo,this.setTarget(e),this.setParams(t)}function AS(e,t){Lw.call(this,"( uvTransform * vec3( uvNode, 1 ) ).xy","vec2"),this.uv=e||new Aw,this.position=t||new nS}function PS(e){Pw.call(this),this.texture=e,this.maxMIPLevel=0}function LS(e,t){ew.call(this,"f"),this.roughness=e,this.texture=t,this.maxMIPLevel=void 0}function CS(e){ew.call(this),this.slots=e||{}}function OS(e,t,n,r){ew.call(this,"v4"),this.value=e,this.uv=t||new Aw,this.radius=n||new Tw(1,1),this.size=r,this.blurX=!0,this.blurY=!0,this.horizontal=new Pw(1/64),this.vertical=new Pw(1/64)}function RS(e){ew.call(this,"f"),this.rgb=e}function NS(e,t,n){ew.call(this,"v3"),this.rgb=e,this.adjustment=t,this.method=n||NS.SATURATION}function FS(){K_.call(this),this.color=new Xw(15658734),this.spherical=!0}function IS(){K_.call(this),this.color=new Xw(15658734),this.specular=new Xw(1118481),this.shininess=new Pw(30)}function kS(){K_.call(this),this.color=new Xw(16777215),this.roughness=new Pw(1),this.metalness=new Pw(0)}function DS(){kS.call(this),this.properties={color:new fs(16777215),roughness:.5,metalness:.5,normalScale:new jo(1,1)},this.inputs={color:new oS(this.properties,"color","c"),roughness:new oS(this.properties,"roughness","f"),metalness:new oS(this.properties,"metalness","f"),normalScale:new oS(this.properties,"normalScale","v2")}}function zS(){var e=new FS;qw.call(this,e,e),this.type="SpriteNodeMaterial"}function US(){var e=new IS;qw.call(this,e,e),this.type="PhongNodeMaterial"}function jS(){var e=new kS;qw.call(this,e,e),this.type="StandardNodeMaterial"}function BS(){var e=new DS;qw.call(this,e,e),this.type="MeshStandardNodeMaterial"}function GS(e,t){if(void 0===t){var n={minFilter:Ur,magFilter:Ur,format:ii,stencilBuffer:!1},r=e.getDrawingBufferSize(new jo);t=new Xo(r.width,r.height,n)}this.renderer=e,this.renderTarget=t,this.output=new Jw,this.material=new qw,this.camera=new sf(-1,1,1,-1,0,1),this.scene=new Ta,this.quad=new al(new Rl(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.needsUpdate=!0}SS.prototype=Object.create(ew.prototype),SS.prototype.constructor=SS,SS.prototype.nodeType="Join",SS.prototype.getNumElements=function(){for(var e=wS.length;e--;)if(void 0!==this[wS[e]]){++e;break}return Math.max(e,2)},SS.prototype.getType=function(e){return e.getTypeFromLength(this.getNumElements())},SS.prototype.generate=function(e,t){for(var n=this.getType(e),r=this.getNumElements(),i=[],o=0;o<r;o++){var a=this[wS[o]];i.push(a?a.build(e,"f"):"0.0")}var s=(r>1?e.getConstructorFromLength(r):"")+"( "+i.join(", ")+" )";return e.format(s,n,t)},SS.prototype.copy=function(e){for(var t in ew.prototype.copy.call(this,e),e.inputs)this[t]=e.inputs[t];return this},SS.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){(t=this.createJSONNode(e)).inputs={};for(var n=this.getNumElements(),r=0;r<n;r++){var i=this[wS[r]];i&&(t.inputs[wS[r]]=i.toJSON(e).uuid)}}return t},TS.prototype=Object.create(K_.prototype),TS.prototype.constructor=TS,TS.prototype.nodeType="Switch",TS.prototype.getType=function(e){return e.getTypeFromLength(this.components.length)},TS.prototype.generate=function(e,t){var n=this.node.getType(e),r=this.node.build(e,n),i=e.getTypeLength(n)-1;if(i>0){var o,a=0,s=e.colorToVectorProperties(this.components),l=s.length;for(o=0;o<l;o++)a=Math.max(a,e.getIndexByElement(s.charAt(o)));for(a>i&&(a=i),r+=".",o=0;o<l;o++){s.charAt(o);var u=e.getIndexByElement(s.charAt(o));u>a&&(u=a),r+=e.getElementByIndex(u)}return e.format(r,this.getType(e),t)}return e.format(r,n,t)},TS.prototype.copy=function(e){return K_.prototype.copy.call(this,e),this.node=e.node,this.components=e.components,this},TS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).node=this.node.toJSON(e).uuid,t.components=this.components),t},ES.GLOBAL="global",ES.LOCAL="local",ES.DELTA="delta",ES.prototype=Object.create(Pw.prototype),ES.prototype.constructor=ES,ES.prototype.nodeType="Timer",ES.prototype.getReadonly=function(){return!1},ES.prototype.getUnique=function(){return this.timeScale&&(this.scope===ES.GLOBAL||this.scope===ES.DELTA)},ES.prototype.updateFrame=function(e){var t=this.timeScale?this.scale:1;switch(this.scope){case ES.LOCAL:this.value+=e.delta*t;break;case ES.DELTA:this.value=e.delta*t;break;default:this.value=e.time*t}},ES.prototype.copy=function(e){return Pw.prototype.copy.call(this,e),this.scope=e.scope,this.scale=e.scale,this.timeScale=e.timeScale,this},ES.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope,t.scale=this.scale,t.timeScale=this.timeScale),t},$_.addKeyword("time",(function(){return new ES})),MS.prototype=Object.create(Ew.prototype),MS.prototype.constructor=MS,MS.prototype.nodeType="Velocity",MS.prototype.getReadonly=function(){return!1},MS.prototype.setParams=function(e){switch(this.params.type){case"elastic":delete this.moment,delete this.speed,delete this.springVelocity,delete this.lastVelocity}switch(this.params=e||{},this.params.type){case"elastic":this.moment=new Zo,this.speed=new Zo,this.springVelocity=new Zo,this.lastVelocity=new Zo}},MS.prototype.setTarget=function(e){this.target&&(delete this.position,delete this.oldPosition),this.target=e,e&&(this.position=e.getWorldPosition(this.position||new Zo),this.oldPosition=this.position.clone())},MS.prototype.updateFrameVelocity=function(){this.target&&(this.position=this.target.getWorldPosition(this.position||new Zo),this.velocity.subVectors(this.position,this.oldPosition),this.oldPosition.copy(this.position))},MS.prototype.updateFrame=function(e){switch(this.updateFrameVelocity(e),this.params.type){case"elastic":var t=e.delta*(this.params.fps||60),n=Math.pow(this.params.spring,t),r=Math.pow(this.params.damping,t);this.velocity.multiplyScalar(Math.exp(-this.params.damping*t)),this.velocity.add(this.springVelocity),this.velocity.add(this.speed.multiplyScalar(r).multiplyScalar(1-n)),this.speed.subVectors(this.velocity,this.lastVelocity),this.springVelocity.add(this.speed),this.springVelocity.multiplyScalar(n),this.moment.add(this.springVelocity),this.moment.multiplyScalar(r),this.lastVelocity.copy(this.velocity),this.value.copy(this.moment);break;default:this.value.copy(this.velocity)}},MS.prototype.copy=function(e){return Ew.prototype.copy.call(this,e),e.target&&this.setTarget(e.target),this.setParams(e.params),this},MS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.target&&(t.target=this.target.uuid),t.params=JSON.parse(JSON.stringify(this.params))),t},AS.prototype=Object.create(Lw.prototype),AS.prototype.constructor=AS,AS.prototype.nodeType="UVTransform",AS.prototype.generate=function(e,t){return this.keywords.uvNode=this.uv,this.keywords.uvTransform=this.position,Lw.prototype.generate.call(this,e,t)},AS.prototype.setUvTransform=function(e,t,n,r,i,o,a){o=void 0!==o?o:.5,a=void 0!==a?a:.5,this.position.value.setUvTransform(e,t,n,r,i,o,a)},AS.prototype.copy=function(e){return Lw.prototype.copy.call(this,e),this.uv=e.uv,this.position=e.position,this},AS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid,t.position=this.position.toJSON(e).uuid),t},PS.prototype=Object.create(Pw.prototype),PS.prototype.constructor=PS,PS.prototype.nodeType="MaxMIPLevel",Object.defineProperties(PS.prototype,{value:{get:function(){if(0===this.maxMIPLevel){var e=this.texture.value.image;Array.isArray(e)&&(e=e[0]),this.maxMIPLevel=void 0!==e?Math.log(Math.max(e.width,e.height))*Math.LOG2E:0}return this.maxMIPLevel},set:function(){}}}),PS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture.uuid),t},LS.Nodes={getSpecularMIPLevel:new rw(["float getSpecularMIPLevel( const in float roughness, const in float maxMIPLevelScalar ) {","\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );","\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );","\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );","}"].join("\n"))},LS.prototype=Object.create(ew.prototype),LS.prototype.constructor=LS,LS.prototype.nodeType="SpecularMIPLevel",LS.prototype.setTexture=function(e){return this.texture=e,this},LS.prototype.generate=function(e,t){if(e.isShader("fragment")){this.maxMIPLevel=this.maxMIPLevel||new PS,this.maxMIPLevel.texture=this.texture;var n=e.include(LS.Nodes.getSpecularMIPLevel);return e.format(n+"( "+this.roughness.build(e,"f")+", "+this.maxMIPLevel.build(e,"f")+" )",this.type,t)}return console.warn("THREE.SpecularMIPLevelNode is not compatible with "+e.shader+" shader."),e.format("0.0",this.type,t)},LS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.texture=e.texture,this.roughness=e.roughness,this},LS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture,t.roughness=this.roughness),t},CS.prototype=Object.create(ew.prototype),CS.prototype.constructor=CS,CS.prototype.nodeType="SubSlot",CS.prototype.getType=function(e,t){return t},CS.prototype.generate=function(e,t){return this.slots[e.slot]?this.slots[e.slot].build(e,t):e.format("0.0","f",t)},CS.prototype.copy=function(e){for(var t in ew.prototype.copy.call(this,e),e.slots)this.slots[t]=e.slots[t];return this},CS.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)for(var n in(t=this.createJSONNode(e)).slots={},this.slots){var r=this.slots[n];r&&(t.slots[n]=r.toJSON(e).uuid)}return t},OS.Nodes={blurX:new rw(["vec4 blurX( sampler2D texture, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( texture, vec2( uv.x - 4.0 * s, uv.y ) ) * 0.051;","\tsum += texture2D( texture, vec2( uv.x - 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( texture, vec2( uv.x - 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( texture, vec2( uv.x - 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( texture, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( texture, vec2( uv.x + 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( texture, vec2( uv.x + 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( texture, vec2( uv.x + 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( texture, vec2( uv.x + 4.0 * s, uv.y ) ) * 0.051;","\treturn sum * .667;","}"].join("\n")),blurY:new rw(["vec4 blurY( sampler2D texture, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( texture, vec2( uv.x, uv.y - 4.0 * s ) ) * 0.051;","\tsum += texture2D( texture, vec2( uv.x, uv.y - 3.0 * s ) ) * 0.0918;","\tsum += texture2D( texture, vec2( uv.x, uv.y - 2.0 * s ) ) * 0.12245;","\tsum += texture2D( texture, vec2( uv.x, uv.y - 1.0 * s ) ) * 0.1531;","\tsum += texture2D( texture, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( texture, vec2( uv.x, uv.y + 1.0 * s ) ) * 0.1531;","\tsum += texture2D( texture, vec2( uv.x, uv.y + 2.0 * s ) ) * 0.12245;","\tsum += texture2D( texture, vec2( uv.x, uv.y + 3.0 * s ) ) * 0.0918;","\tsum += texture2D( texture, vec2( uv.x, uv.y + 4.0 * s ) ) * 0.051;","\treturn sum * .667;","}"].join("\n"))},OS.prototype=Object.create(ew.prototype),OS.prototype.constructor=OS,OS.prototype.nodeType="Blur",OS.prototype.updateFrame=function(){if(this.size)this.horizontal.value=this.radius.x/this.size.x,this.vertical.value=this.radius.y/this.size.y;else if(this.value.value&&this.value.value.image){var e=this.value.value.image;this.horizontal.value=this.radius.x/e.width,this.vertical.value=this.radius.y/e.height}},OS.prototype.generate=function(e,t){if(e.isShader("fragment")){var n,r=[],i=e.include(OS.Nodes.blurX),o=e.include(OS.Nodes.blurY);return this.blurX&&r.push(i+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.horizontal.build(e,"f")+" )"),this.blurY&&r.push(o+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.vertical.build(e,"f")+" )"),n=2==r.length?"( "+r.join(" + ")+" / 2.0 )":r.length?"( "+r[0]+" )":"vec4( 0.0 )",e.format(n,this.getType(e),t)}return console.warn("THREE.BlurNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},OS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.value=e.value,this.uv=e.uv,this.radius=e.radius,void 0!==e.size&&(this.size=new jo(e.size.x,e.size.y)),this.blurX=e.blurX,this.blurY=e.blurY,this},OS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.radius=this.radius.toJSON(e).uuid,this.size&&(t.size={x:this.size.x,y:this.size.y}),t.blurX=this.blurX,t.blurY=this.blurY),t},RS.Nodes={LUMA:_S=new ow("vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )"),luminance:new rw(["float luminance( vec3 rgb ) {","\treturn dot( rgb, LUMA );","}"].join("\n"),[_S])},RS.prototype=Object.create(ew.prototype),RS.prototype.constructor=RS,RS.prototype.nodeType="Luminance",RS.prototype.generate=function(e,t){var n=e.include(RS.Nodes.luminance);return e.format(n+"( "+this.rgb.build(e,"v3")+" )",this.getType(e),t)},RS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.rgb=e.rgb,this},RS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid),t},NS.Nodes={hue:new rw(["vec3 hue(vec3 rgb, float adjustment) {","\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);","\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);","\tvec3 yiq = RGBtoYIQ * rgb;","\tfloat hue = atan(yiq.z, yiq.y) + adjustment;","\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);","\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));","}"].join("\n")),saturation:new rw(["vec3 saturation(vec3 rgb, float adjustment) {","\tvec3 intensity = vec3( luminance( rgb ) );","\treturn mix( intensity, rgb, adjustment );","}"].join("\n"),[RS.Nodes.luminance]),vibrance:new rw(["vec3 vibrance(vec3 rgb, float adjustment) {","\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;","\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));","\tfloat amt = (mx - average) * (-3.0 * adjustment);","\treturn mix(rgb.rgb, vec3(mx), amt);","}"].join("\n"))},NS.SATURATION="saturation",NS.HUE="hue",NS.VIBRANCE="vibrance",NS.BRIGHTNESS="brightness",NS.CONTRAST="contrast",NS.prototype=Object.create(ew.prototype),NS.prototype.constructor=NS,NS.prototype.nodeType="ColorAdjustment",NS.prototype.generate=function(e,t){var n=this.rgb.build(e,"v3"),r=this.adjustment.build(e,"f");switch(this.method){case NS.BRIGHTNESS:return e.format("( "+n+" + "+r+" )",this.getType(e),t);case NS.CONTRAST:return e.format("( "+n+" * "+r+" )",this.getType(e),t)}var i=e.include(NS.Nodes[this.method]);return e.format(i+"( "+n+", "+r+" )",this.getType(e),t)},NS.prototype.copy=function(e){return ew.prototype.copy.call(this,e),this.rgb=e.rgb,this.adjustment=e.adjustment,this.method=e.method,this},NS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid,t.adjustment=this.adjustment.toJSON(e).uuid,t.method=this.method),t},FS.prototype=Object.create(K_.prototype),FS.prototype.constructor=FS,FS.prototype.nodeType="Sprite",FS.prototype.build=function(e){if(e.define("SPRITE"),e.requires.lights=!1,e.requires.transparent=void 0!==this.alpha,e.isShader("vertex")){var t=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(yl.merge([Pl.fog])),e.addParsCode(["#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n")),o=["#include <clipping_planes_fragment>","#include <begin_vertex>"],t&&o.push(t.code,t.result?"transformed = "+t.result+";":""),o.push("#include <project_vertex>","#include <fog_vertex>","mat4 modelViewMtx = modelViewMatrix;","mat4 modelMtx = modelMatrix;","modelMtx[3][0] = 0.0;","modelMtx[3][1] = 0.0;","modelMtx[3][2] = 0.0;"),this.spherical||o.push("modelMtx[1][1] = 1.0;"),o.push("modelViewMtx[0][0] = 1.0;","modelViewMtx[0][1] = 0.0;","modelViewMtx[0][2] = 0.0;"),this.spherical&&o.push("modelViewMtx[1][0] = 0.0;","modelViewMtx[1][1] = 1.0;","modelViewMtx[1][2] = 0.0;"),o.push("modelViewMtx[2][0] = 0.0;","modelViewMtx[2][1] = 0.0;","modelViewMtx[2][2] = 1.0;","gl_Position = projectionMatrix * modelViewMtx * modelMtx * vec4( transformed, 1.0 );","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","#include <fog_vertex>")}else{e.addParsCode(["#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>"].join("\n")),e.addCode(["#include <clipping_planes_fragment>","#include <logdepthbuf_fragment>"].join("\n")),this.mask&&this.mask.analyze(e),this.alpha&&this.alpha.analyze(e),this.color.analyze(e,{slot:"color"});var n=this.mask?this.mask.flow(e,"b"):void 0,r=this.alpha?this.alpha.flow(e,"f"):void 0,i=this.color.flow(e,"c",{slot:"color"}),o=[];n&&o.push(n.code,"if ( ! "+n.result+" ) discard;"),r?o.push(r.code,"#ifdef ALPHATEST","if ( "+r.result+" <= ALPHATEST ) discard;","#endif",i.code,"gl_FragColor = vec4( "+i.result+", "+r.result+" );"):o.push(i.code,"gl_FragColor = vec4( "+i.result+", 1.0 );"),o.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>")}return o.join("\n")},FS.prototype.copy=function(e){return K_.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,void 0!==e.spherical&&(this.spherical=e.spherical),e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),this},FS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,!1===this.spherical&&(t.spherical=!1),this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid)),t},IS.prototype=Object.create(K_.prototype),IS.prototype.constructor=IS,IS.prototype.nodeType="Phong",IS.prototype.build=function(e){var t;if(e.define("PHONG"),e.requires.lights=!0,e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(yl.merge([Pl.fog,Pl.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];n&&r.push(n.code,n.result?"transformed = "+n.result+";":""),r.push("\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),t=r.join("\n")}else{this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.alpha&&this.alpha.analyze(e),this.normal&&this.normal.analyze(e),this.light&&this.light.analyze(e,{cache:"light"}),this.ao&&this.ao.analyze(e),this.ambient&&this.ambient.analyze(e),this.shadow&&this.shadow.analyze(e),this.emissive&&this.emissive.analyze(e,{slot:"emissive"}),this.environment&&this.environment.analyze(e,{slot:"environment"}),this.environmentAlpha&&this.environment&&this.environmentAlpha.analyze(e);var i=this.mask?this.mask.flow(e,"b"):void 0,o=this.color.flow(e,"c",{slot:"color"}),a=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),l=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.normal?this.normal.flow(e,"v3"):void 0,c=this.light?this.light.flow(e,"v3",{cache:"light"}):void 0,h=this.ao?this.ao.flow(e,"f"):void 0,d=this.ambient?this.ambient.flow(e,"c"):void 0,p=this.shadow?this.shadow.flow(e,"c"):void 0,f=this.emissive?this.emissive.flow(e,"c",{slot:"emissive"}):void 0,m=this.environment?this.environment.flow(e,"c",{slot:"environment"}):void 0,v=this.environmentAlpha&&this.environment?this.environmentAlpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n"));r=["#include <normal_fragment_begin>","\tBlinnPhongMaterial material;"];i&&r.push(i.code,"if ( ! "+i.result+" ) discard;"),r.push(o.code,"\tvec3 diffuseColor = "+o.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",a.code,"\tvec3 specular = "+a.result+";",s.code,"\tfloat shininess = max( 0.0001, "+s.result+" );","\tfloat specularStrength = 1.0;"),l&&r.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u&&r.push(u.code,"normal = "+u.result+";"),r.push("material.diffuseColor = "+(c?"vec3( 1.0 )":"diffuseColor")+";"),r.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c&&(r.push(c.code,"reflectedLight.directDiffuse = "+c.result+";"),r.push("reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),h&&r.push(h.code,"reflectedLight.indirectDiffuse *= "+h.result+";"),d&&r.push(d.code,"reflectedLight.indirectDiffuse += "+d.result+";"),p&&r.push(p.code,"reflectedLight.directDiffuse *= "+p.result+";","reflectedLight.directSpecular *= "+p.result+";"),f&&r.push(f.code,"reflectedLight.directDiffuse += "+f.result+";"),r.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),m&&(r.push(m.code),v?r.push(v.code,"outgoingLight = mix( outgoingLight, "+m.result+", "+v.result+" );"):r.push("outgoingLight = "+m.result+";")),l?r.push("gl_FragColor = vec4( outgoingLight, "+l.result+" );"):r.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),r.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>"),t=r.join("\n")}return t},IS.prototype.copy=function(e){return K_.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.specular=e.specular,this.shininess=e.shininess,e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.environmentAlpha&&(this.environmentAlpha=e.environmentAlpha),this},IS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.environmentAlpha&&(t.environmentAlpha=this.environmentAlpha.toJSON(e).uuid)),t},kS.prototype=Object.create(K_.prototype),kS.prototype.constructor=kS,kS.prototype.nodeType="Standard",kS.prototype.build=function(e){var t;e.define("STANDARD");var n=this.clearcoat||this.clearcoatRoughness||this.clearCoatNormal;if(n&&e.define("CLEARCOAT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){var r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(yl.merge([Pl.fog,Pl.lights])),Pl.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];r&&i.push(r.code,r.result?"transformed = "+r.result+";":""),i.push("#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <fog_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=i.join("\n")}else{var o=new Lw("material.specularRoughness","f"),a=new Lw("material.clearcoatRoughness","f"),s={roughness:o,bias:new LS(o),viewNormal:new Lw("normal","v3"),worldNormal:new Lw("inverseTransformDirection( geometry.normal, viewMatrix )","v3"),gamma:!0},l={gamma:!0},u={roughness:a,bias:new LS(a),viewNormal:new Lw("clearcoatNormal","v3"),worldNormal:new Lw("inverseTransformDirection( geometry.clearcoatNormal, viewMatrix )","v3"),gamma:!0};this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color",context:l}),this.roughness.analyze(e),this.metalness.analyze(e),this.alpha&&this.alpha.analyze(e),this.normal&&this.normal.analyze(e),this.clearcoat&&this.clearcoat.analyze(e),this.clearcoatRoughness&&this.clearcoatRoughness.analyze(e),this.clearcoatNormal&&this.clearcoatNormal.analyze(e),this.reflectivity&&this.reflectivity.analyze(e),this.light&&this.light.analyze(e,{cache:"light"}),this.ao&&this.ao.analyze(e),this.ambient&&this.ambient.analyze(e),this.shadow&&this.shadow.analyze(e),this.emissive&&this.emissive.analyze(e,{slot:"emissive"}),this.environment&&(this.environment.analyze(e,{cache:"radiance",context:s,slot:"radiance"}),e.requires.irradiance&&this.environment.analyze(e,{cache:"irradiance",context:s,slot:"irradiance"})),this.sheen&&this.sheen.analyze(e);var c,h=this.mask?this.mask.flow(e,"b"):void 0,d=this.color.flow(e,"c",{slot:"color",context:l}),p=this.roughness.flow(e,"f"),f=this.metalness.flow(e,"f"),m=this.alpha?this.alpha.flow(e,"f"):void 0,v=this.normal?this.normal.flow(e,"v3"):void 0,g=this.clearcoat?this.clearcoat.flow(e,"f"):void 0,y=(a=this.clearcoatRoughness?this.clearcoatRoughness.flow(e,"f"):void 0,this.clearcoatNormal?this.clearcoatNormal.flow(e,"v3"):void 0),x=this.reflectivity?this.reflectivity.flow(e,"f"):void 0,b=this.light?this.light.flow(e,"v3",{cache:"light"}):void 0,_=this.ao?this.ao.flow(e,"f"):void 0,w=this.ambient?this.ambient.flow(e,"c"):void 0,S=this.shadow?this.shadow.flow(e,"c"):void 0,T=this.emissive?this.emissive.flow(e,"c",{slot:"emissive"}):void 0;this.environment&&(c={radiance:this.environment.flow(e,"c",{cache:"radiance",context:s,slot:"radiance"})},e.requires.irradiance&&(c.irradiance=this.environment.flow(e,"c",{cache:"irradiance",context:s,slot:"irradiance"})));var E=n&&c?this.environment.flow(e,"c",{cache:"clearcoat",context:u,slot:"environment"}):void 0,M=this.sheen?this.sheen.flow(e,"c"):void 0;e.requires.transparent=void 0!==m,e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n"));i=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\t#include <clearcoat_normal_fragment_begin>","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];h&&i.push(h.code,"if ( ! "+h.result+" ) discard;"),i.push(d.code,"\tvec3 diffuseColor = "+d.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",p.code,"\tfloat roughnessFactor = "+p.result+";",f.code,"\tfloat metalnessFactor = "+f.result+";"),m&&i.push(m.code,"#ifdef ALPHATEST","\tif ( "+m.result+" <= ALPHATEST ) discard;","#endif"),v&&i.push(v.code,"normal = "+v.result+";"),y&&i.push(y.code,"clearcoatNormal = "+y.result+";"),i.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),i.push("material.diffuseColor = "+(b?"vec3( 1.0 )":"diffuseColor * ( 1.0 - metalnessFactor )")+";","material.specularRoughness = max( roughnessFactor, 0.0525 );","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );"),g?i.push(g.code,"material.clearcoat = saturate( "+g.result+" );"):n&&i.push("material.clearcoat = 0.0;"),a?i.push(a.code,"material.clearcoatRoughness = max( "+a.result+", 0.0525 );","material.clearcoatRoughness += geometryRoughness;","material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );"):n&&i.push("material.clearcoatRoughness = 0.0;"),M&&i.push("material.sheenColor = "+M.result+";"),x?i.push(x.code,"material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( "+x.result+" ) ), diffuseColor, metalnessFactor );"):i.push("material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );"),i.push("#include <lights_fragment_begin>"),b&&(i.push(b.code,"reflectedLight.directDiffuse = "+b.result+";"),i.push("diffuseColor *= 1.0 - metalnessFactor;","reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),_&&i.push(_.code,"reflectedLight.indirectDiffuse *= "+_.result+";","float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );","reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, "+_.result+", material.specularRoughness );"),w&&i.push(w.code,"reflectedLight.indirectDiffuse += "+w.result+";"),S&&i.push(S.code,"reflectedLight.directDiffuse *= "+S.result+";","reflectedLight.directSpecular *= "+S.result+";"),T&&i.push(T.code,"reflectedLight.directDiffuse += "+T.result+";"),c&&(i.push(c.radiance.code),e.requires.irradiance&&i.push(c.irradiance.code),E&&i.push(E.code,"clearcoatRadiance += "+E.result+";"),i.push("radiance += "+c.radiance.result+";"),e.requires.irradiance&&i.push("iblIrradiance += PI * "+c.irradiance.result+";")),i.push("#include <lights_fragment_end>"),i.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),m?i.push("gl_FragColor = vec4( outgoingLight, "+m.result+" );"):i.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),i.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>","#include <dithering_fragment>"),t=i.join("\n")}return t},kS.prototype.copy=function(e){return K_.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.roughness=e.roughness,this.metalness=e.metalness,e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.clearcoat&&(this.clearcoat=e.clearcoat),e.clearcoatRoughness&&(this.clearcoatRoughness=e.clearcoatRoughness),e.clearcoatNormal&&(this.clearcoatNormal=e.clearcoatNormal),e.reflectivity&&(this.reflectivity=e.reflectivity),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.sheen&&(this.sheen=e.sheen),this},kS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.roughness=this.roughness.toJSON(e).uuid,t.metalness=this.metalness.toJSON(e).uuid,this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.clearcoat&&(t.clearcoat=this.clearcoat.toJSON(e).uuid),this.clearcoatRoughness&&(t.clearcoatRoughness=this.clearcoatRoughness.toJSON(e).uuid),this.clearcoatNormal&&(t.clearcoatNormal=this.clearcoatNormal.toJSON(e).uuid),this.reflectivity&&(t.reflectivity=this.reflectivity.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.sheen&&(t.sheen=this.sheen.toJSON(e).uuid)),t},DS.prototype=Object.create(kS.prototype),DS.prototype.constructor=DS,DS.prototype.nodeType="MeshStandard",DS.prototype.build=function(e){var t=this.properties,n=this.inputs;if(e.isShader("fragment")){var r=e.findNode(t.color,n.color),i=e.resolve(t.map);this.color=i?new Dw(r,i,Dw.MUL):r;var o=e.findNode(t.roughness,n.roughness),a=e.resolve(t.roughnessMap);this.roughness=a?new Dw(o,new TS(a,"g"),Dw.MUL):o;var s=e.findNode(t.metalness,n.metalness),l=e.resolve(t.metalnessMap);this.metalness=l?new Dw(s,new TS(l,"b"),Dw.MUL):s,t.normalMap?(this.normal=new yS(e.resolve(t.normalMap)),this.normal.scale=e.findNode(t.normalScale,n.normalScale)):this.normal=void 0,this.environment=e.resolve(t.envMap)}return kS.prototype.build.call(this,e)},DS.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),console.warn(".toJSON not implemented in",this)),t},zS.prototype=Object.create(qw.prototype),zS.prototype.constructor=zS,Z_.addShortcuts(zS.prototype,"fragment",["color","alpha","mask","position","spherical"]),US.prototype=Object.create(qw.prototype),US.prototype.constructor=US,Z_.addShortcuts(US.prototype,"fragment",["color","alpha","specular","shininess","normal","emissive","ambient","light","shadow","ao","environment","environmentAlpha","mask","position"]),jS.prototype=Object.create(qw.prototype),jS.prototype.constructor=jS,Z_.addShortcuts(jS.prototype,"fragment",["color","alpha","roughness","metalness","reflectivity","clearcoat","clearcoatRoughness","clearcoatNormal","normal","emissive","ambient","light","shadow","ao","environment","mask","position","sheen"]),BS.prototype=Object.create(qw.prototype),BS.prototype.constructor=BS,Z_.addShortcuts(BS.prototype,"properties",["color","roughness","metalness","map","normalMap","normalScale","metalnessMap","roughnessMap","envMap"]),GS.prototype={constructor:GS,render:function(e,t,n){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.output,this.material.build(),this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=this.renderTarget.texture),this.needsUpdate=!1),n.setRenderer(this.renderer).setRenderTexture(this.renderTarget.texture),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(e,t),n.updateNode(this.material),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)},setPixelRatio:function(e){this.renderer.setPixelRatio(e);var t=this.renderer.getSize(new jo);this.setSize(t.width,t.height)},setSize:function(e,t){var n=this.renderer.getPixelRatio();this.renderTarget.setSize(e*n,t*n),this.renderer.setSize(e,t)},copy:function(e){return this.output=e.output,this},toJSON:function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.post&&(e.post={}),!e.post[this.uuid]){var t={};t.uuid=this.uuid,t.type="NodePostProcessing",e.post[this.uuid]=t,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.output=this.output.toJSON(e).uuid}return e.post=this.uuid,e}};var HS={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","\tif(byp<1) {","\t\tvec2 p = vUv;","\t\tfloat xs = floor(gl_FragCoord.x / 0.5);","\t\tfloat ys = floor(gl_FragCoord.y / 0.5);","\t\tvec4 normal = texture2D (tDisp, p*seed*seed);","\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","\t\t\tif(seed_x>0.){","\t\t\t\tp.y = 1. - (p.y + distortion_y);","\t\t\t}","\t\t\telse {","\t\t\t\tp.y = distortion_y;","\t\t\t}","\t\t}","\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","\t\t\tif(seed_y>0.){","\t\t\t\tp.x=distortion_x;","\t\t\t}","\t\t\telse {","\t\t\t\tp.x = 1. - (p.x + distortion_x);","\t\t\t}","\t\t}","\t\tp.x+=normal.x*seed_x*(seed/5.);","\t\tp.y+=normal.y*seed_y*(seed/5.);","\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));","\t\tvec4 cr = texture2D(tDiffuse, p + offset);","\t\tvec4 cga = texture2D(tDiffuse, p);","\t\tvec4 cb = texture2D(tDiffuse, p - offset);","\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","\t\tgl_FragColor = gl_FragColor+ snow;","\t}","\telse {","\t\tgl_FragColor=texture2D (tDiffuse, vUv);","\t}","}"].join("\n")},VS=function(e){Dy.call(this),void 0===HS&&console.error("GlitchPass relies on DigitalGlitch");var t=HS;this.uniforms=yl.clone(t.uniforms),null==e&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new xl({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsQuad=new Dy.FullScreenQuad(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()};function WS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}VS.prototype=Object.assign(Object.create(Dy.prototype),{constructor:VS,render:function(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=Uo.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=Uo.randFloat(-1,1),this.uniforms.seed_y.value=Uo.randFloat(-1,1),this.uniforms.distortion_x.value=Uo.randFloat(0,1),this.uniforms.distortion_y.value=Uo.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=Uo.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=Uo.randFloat(0,1),this.uniforms.distortion_y.value=Uo.randFloat(0,1),this.uniforms.seed_x.value=Uo.randFloat(-.3,.3),this.uniforms.seed_y.value=Uo.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))},generateTrigger:function(){this.randX=Uo.randInt(120,240)},generateHeightmap:function(e){for(var t=new Float32Array(e*e*3),n=e*e,r=0;r<n;r++){var i=Uo.randFloat(0,1);t[3*r+0]=i,t[3*r+1]=i,t[3*r+2]=i}return new Tl(t,e,e,ri,Qr)}});var XS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.spectrumStart=t.spectrumStart,this.beatManager=t.beatManager,this.pp=new Wy(this.context),this.audio=t.audio,this.glitchPass={},this.glitchThreshold=24,this.isGlitchTriggered=!1,this.nodePass={},this.minContrast=1,this.maxContrast=2,this.contrast={},this.contrastNode={},this.minBrightness=0,this.maxBrightness=.5,this.brightness={},this.brightnessNode={},this.blendThreshold=170,this.dropThreshold=-4.2,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.glitchPass=new VS,this.pp.addPass(this.glitchPass),this.nodePass=new Qw;var e=new Jw;this.brightness=new Pw(0),this.contrast=new Pw(1),this.brightnessNode=new NS(e,this.brightness,NS.BRIGHTNESS),this.contrastNode=new NS(this.brightnessNode,this.contrast,NS.CONTRAST),this.nodePass.input=this.contrastNode,this.pp.addPass(this.nodePass),this.contrast.value=1,this.brightness.value=0}},{key:"update",value:function(){this.updateGlitch(),this.updateBlend(),this.updateDrop()}},{key:"updateGlitch",value:function(){var e=this.beatManager.bassAverages;if(0!==e.length){var t=e.length-1;e[t]-e[t-1]>this.glitchThreshold&&(this.glitchPass.curF=0,this.isGlitchTriggered=!0),this.glitchPass.curF>=20&&this.isGlitchTriggered&&(this.glitchPass.curF=100)}}},{key:"updateBlend",value:function(){var e=this.beatManager.midrangeAverages;0!==e.length&&(e[e.length-1]>this.blendThreshold?(this.contrast.value=1,this.brightness.value=.2):(this.contrast.value=1,this.brightness.value=0))}},{key:"updateDrop",value:function(){var e=this.beatManager.bassAverages;if(0!==e.length){var t=e.length-1;e[t]-e[t-1]<this.dropThreshold&&(this.brightness.value=0,this.contrast.value=.1)}}},{key:"render",value:function(){this.context.renderer.autoClear=!1,this.context.renderer.clear(),this.pp.render()}}])&&WS(t.prototype,n),r&&WS(t,r),e}();function YS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.spectrumStart=t.spectrumStart;var n=t.frequencyDataLength-1;this.bassWeight=(this.spectrumStart.midrange-this.spectrumStart.bass)/n,this.midrangeWeight=(this.spectrumStart.highrange-this.spectrumStart.midrange)/n,this.highrangeWeight=(n-this.spectrumStart.highrange)/n,this.bassAverages=[],this.midrangeAverages=[],this.highrangeAverages=[],this.overallAverages=[]}var t,n,r;return t=e,(n=[{key:"update",value:function(){this.updateBassAverage(),this.updateMidrangeAverage(),this.updateHighrangeAverage(),this.updateOverallAverage()}},{key:"updateBassAverage",value:function(){for(var e=this.spectrumStart,t=e.bass,n=e.midrange,r=0,i=t;i<n;i++)r+=this.context.audio.frequencyData[i];r/=n-t,this.bassAverages.push(r)}},{key:"updateMidrangeAverage",value:function(){for(var e=this.spectrumStart,t=e.midrange,n=e.highrange,r=0,i=t;i<n;i++)r+=this.context.audio.frequencyData[i];r/=n-t,this.midrangeAverages.push(r)}},{key:"updateHighrangeAverage",value:function(){for(var e=this.spectrumStart.highrange,t=this.context.frequencyDataLength-1,n=0,r=e;r<t;r++)n+=this.context.audio.frequencyData[r];n/=t-e,this.highrangeAverages.push(n)}},{key:"updateOverallAverage",value:function(){this.overallAverages.push(this.bassAverages[this.bassAverages.length-1]*this.bassWeight+this.midrangeAverages[this.midrangeAverages.length-1]*this.midrangeWeight+this.highrangeAverages[this.highrangeAverages.length-1]*this.highrangeWeight)}}])&&YS(t.prototype,n),r&&YS(t,r),e}(),JS=n(61),QS=n.n(JS),ZS=n(62),$S=n.n(ZS);function KS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var eT=function(){function e(t){var n=t.freqIndex,r=void 0===n?0:n,i=t.minRadius,o=void 0===i?1:i,a=t.maxRadius,s=void 0===a?10:a,l=t.minY,u=void 0===l?0:l,c=t.maxY,h=void 0===c?5:c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.freqIndex=r,this.minY=u,this.maxY=h,this.centerCoord=new Zo(0,ix.randomFloatBetween(this.minY,this.maxY),0),this.radius=ix.randomFloatBetween(o,s),this.angle=ix.randomFloatBetween(0,2*Math.PI),this.rotation=new Zo,this.scale=1,this.minYVelocity=ix.randomFloatBetween(.001,.005),this.maxYVelocity=ix.randomFloatBetween(.02,.05),this.minAgleVelocity=0,this.maxAngleVelocity=ix.randomFloatBetween(.001,.003),this.rotationVelocity={x:0,y:0,z:0};var d=ix.randomBool()?-1:1;this.minRotationVelocityX=ix.randomFloatBetween(.001,.01)*d,this.maxRotationVelocityX=ix.randomFloatBetween(.013,.018)*d;var p=ix.randomBool()?-1:1;this.minRotationVelocityY=ix.randomFloatBetween(.001,.01)*p,this.maxRotationVelocityY=ix.randomFloatBetween(.013,.018)*p;var f=ix.randomBool()?-1:1;this.minRotationVelocityZ=ix.randomFloatBetween(.001,.01)*f,this.maxRotationVelocityZ=ix.randomFloatBetween(.013,.018)*f,this.geometry=new fl(ix.randomFloatBetween(.03,.1),ix.randomFloatBetween(.03,.1),ix.randomFloatBetween(.03,.1)),this.material=new Yd({vertexShader:$S.a,fragmentShader:QS.a,uniforms:{uFreq:{value:0}}}),this.pivot=new al(this.geometry,this.material),this.updatePosition(),this.updateScale()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updatePosition",value:function(){var e={x:this.centerCoord.x+this.radius*Math.cos(this.angle),y:this.centerCoord.y,z:this.centerCoord.z+this.radius*Math.sin(this.angle)};this.position.set(e.x,e.y,e.z)}},{key:"updateScale",value:function(){if(this.position.y>=4){var e=this.maxY-this.position.y;this.scale=ix.remap(0,1,.01,1,e)}else{var t=Math.min(1,this.position.y-this.minY);this.scale=ix.remap(0,1,.01,1,t)}this.pivot.scale.set(this.scale,this.scale,this.scale)}},{key:"remapFreq",value:function(e,t,n){return ix.remap(0,255,e,t,n)}},{key:"remapAngleVelocity",value:function(e){return this.remapFreq(this.minAgleVelocity,this.maxAngleVelocity,e)}},{key:"remapYVelocity",value:function(e){return this.remapFreq(this.minYVelocity,this.maxYVelocity,e)}},{key:"remapRotationVelocityX",value:function(e){return this.remapFreq(this.minRotationVelocityX,this.maxRotationVelocityX,e)}},{key:"remapRotationVelocityY",value:function(e){return this.remapFreq(this.minRotationVelocityY,this.maxRotationVelocityY,e)}},{key:"remapRotationVelocityZ",value:function(e){return this.remapFreq(this.minRotationVelocityZ,this.maxRotationVelocityZ,e)}},{key:"update",value:function(e){this.centerCoord.y>=this.maxY?this.centerCoord.y=this.minY:this.centerCoord.y+=this.remapYVelocity(e),this.angle+=this.remapAngleVelocity(e),this.pivot.rotation.x+=this.remapRotationVelocityX(e),this.pivot.rotation.y+=this.remapRotationVelocityY(e),this.pivot.rotation.z+=this.remapRotationVelocityZ(e),this.updatePosition(),this.updateScale(),this.material.uniforms.uFreq.value=e}},{key:"position",get:function(){return this.pivot.position}}])&&KS(t.prototype,n),r&&KS(t,r),e}();function tT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nT=function(){function e(t,n){var r=n.radius,i=n.numNodes,o=void 0===i?10:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.radius=r,this.numNodes=o,this.debris=[],this.pivot=new Pc,this.init()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.debris.forEach((function(e){return e.dispose()}))}},{key:"init",value:function(){for(var e=0;e<this.numNodes;e++){var t=this.context.spectrumStart.midrange,n=ix.randomIntBetween(t,this.context.frequencyDataLength-1),r=new eT({freqIndex:n,minRadius:.3*this.radius,maxRadius:this.radius,minY:2,maxY:8});this.debris.push(r),this.pivot.add(r.pivot)}}},{key:"update",value:function(e){this.debris.forEach((function(t){return t.update(e[t.freqIndex])}))}},{key:"position",get:function(){return this.pivot.position}}])&&tT(t.prototype,n),r&&tT(t,r),e}();function rT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var iT=function(){function e(t){var n=t.size,r=t.freqIndex,i=t.isActive,o=t.spectrum;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.spectrum=o,this.isActive=i,this.freqIndex=r,this.geometry=new fl(n,.023,n),this.material=new Kd({color:14013909}),this.pivot=new al(this.geometry,this.material),this.pivot.receiveShadow=!0,this.bbox=(new za).setFromObject(this.pivot),this.size=new Zo,this.height=.001}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updateSize",value:function(){this.bbox.setFromObject(this.pivot),this.bbox.getSize(this.size)}},{key:"getCenter",value:function(e){this.bbox.getCenter(e)}},{key:"realignY",value:function(){this.updateSize(),this.position.y=this.size.y/2}},{key:"remapFreq",value:function(){}},{key:"update",value:function(e,t){this.isActive&&(this.height=0!==t?Math.max(e-t,.001):.001)}},{key:"position",get:function(){return this.pivot.position}},{key:"min",get:function(){return this.bbox.min}},{key:"max",get:function(){return this.bbox.max}},{key:"height",get:function(){return this.max.y-this.min.y},set:function(e){this.pivot.scale.y=e,this.realignY()}}])&&rT(t.prototype,n),r&&rT(t,r),e}(),oT=n(15),aT=n.n(oT),sT=n(16),lT=n.n(sT);function uT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=new Ol(t,t,t,t),this.material=new Yd({fragmentShader:aT.a,vertexShader:lT.a,side:Rn,transparent:!0}),this.frame={},this.tint={},this.pivot=new Pc,this.createFrame(t),this.createTint(t/2),this.tint.position.y-=.01,this.bbox=(new za).setFromObject(this.pivot)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createFrame",value:function(e){var t=new Ol(e,e),n=new _s({color:16711680});this.frame=new al(t,n),this.frame.rotation.x-=ix.toRadians(90),this.frame.visible=!1,this.pivot.add(this.frame)}},{key:"createTint",value:function(e){var t=new Hd(e,32),n=new Yd({fragmentShader:aT.a,vertexShader:lT.a,side:Cn,transparent:!0,uniforms:{uRadius:{value:e}}});this.tint=new al(t,n),this.tint.rotation.x-=ix.toRadians(90),this.pivot.add(this.tint)}},{key:"min",get:function(){return this.bbox.min}}])&&uT(t.prototype,n),r&&uT(t,r),e}();function hT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dT="bass",pT="midrange",fT="highrange",mT=function(){function e(t,n){var r=n.size,i=void 0===r?1:r,o=n.divisions,a=void 0===o?1:o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.spectrumStart=t.spectrumStart,this.tileBorderWidth=.05,this.size=i,this.divisions=a,this.numTiles=Math.pow(this.divisions,2),this.tiles=[],this.floorBack=new cT(i),this.pivot=new Pc,this.pivot.add(this.floorBack.pivot),this.createTiles()}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.floorBack.dispose(),this.tiles.forEach((function(e){return e.dispose()}))}},{key:"createTiles",value:function(){for(var e=this.divisions,t=this.size/this.divisions-.02,n=this.floorBack.min.x+t/2,r=n,i=this.floorBack.min.z+t/2,o=t+.02,a=t+.02,s=1;s<=this.numTiles;s++){var l=this.setActiveState(s),u=this.pickSpectrum(s),c=new iT({size:t,isActive:l,spectrum:u,freqIndex:this.pickFreqIndex(u)});c.position.set(r,0,i),this.tiles.push(c),this.pivot.add(c.pivot),s%e==0?(r=n,i+=a):r+=o}}},{key:"setActiveState",value:function(e){var t=Math.round(this.divisions/2),n=e%this.divisions,r=Math.abs(n-t),i=1-ix.remap(0,t,.4,1,r),o=Math.round(this.divisions/2),a=Math.ceil(e/this.divisions)-1,s=Math.abs(a-o),l=1-ix.remap(0,o,.25,1,s);return ix.weightedRandomBool(i*l)}},{key:"pickSpectrum",value:function(e){var t=this.divisions/3;return e%this.divisions<t?dT:e%this.divisions<2*t?pT:fT}},{key:"pickFreqIndex",value:function(e){var t=this.spectrumStart,n=t.bass,r=t.midrange,i=t.highrange;switch(e){case dT:return ix.randomIntBetween(n,r);case pT:return ix.randomIntBetween(r,i);default:return ix.randomIntBetween(i,this.context.frequencyDataLength-1)}}},{key:"update",value:function(){var e=this,t=this.context.beatManager,n=t.midrangeAverages,r=t.bassAverages,i=t.highrangeAverages,o=r[r.length-1],a=n[n.length-1],s=i[i.length-1];this.tiles.forEach((function(t){var n=t.spectrum===dT?o:t.spectrum===pT?a:s,r=e.context.audio.frequencyData[t.freqIndex];t.update(r,n)}))}},{key:"position",get:function(){return this.pivot.position}}])&&hT(t.prototype,n),r&&hT(t,r),e}();var vT=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ambient=new cf(16777215,.5),this.directionalTop=new uf(16777215,1),this.directionalTop.position.set(0,20,0),this.directionalSide=new uf(16777215,.5),this.directionalSide.position.set(-10,0,10)};function gT(e){return(gT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xT(e){return(xT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bT(e,t){return(bT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var wT=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==gT(t)&&"function"!=typeof t?_T(e):t}(this,xT(t).call(this,e,n))).audioSrc=be.S016,r.numFrequencyNodes=25,r.fftSize=512,r.frequencyDataLength=110,r.spectrumStart={bass:0,midrange:13,highrange:75},r.lights=new vT,r.cameraManager=new J_(_T(_T(r))),r.beatManager=new qS(_T(_T(r))),r.effectManager=new XS(_T(_T(r)));return r.debris=new nT(_T(_T(r)),{radius:12.5,numNodes:20}),r.floor=new mT(_T(_T(r)),{size:25,divisions:30}),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bT(e,t)}(t,e),n=t,(r=[{key:"unmount",value:function(){this.audio.close(),this.debris.dispose(),this.floor.dispose(),this.clearScene()}},{key:"init",value:function(){this.setCameraPos(12,8,12),this.setClearColor(14013909),this.lookAt(0,0,0),this.camera.updateProjectionMatrix();var e={fftSize:this.fftSize,dataLength:this.frequencyDataLength};this.initAudio(e),this.audio.setSmoothingTimeConstant(.85),this.scene.add(this.lights.directionalTop),this.scene.add(this.lights.directionalSide),this.scene.add(this.debris.pivot),this.scene.add(this.floor.pivot)}},{key:"draw",value:function(){var e=this;this.audio.getByteFrequencyData(),this.beatManager.update(),this.effectManager.update(),this.cameraManager.update(),this.floor.update(),this.debris.update(this.audio.frequencyData),this.effectManager.render(),requestAnimationFrame((function(){return e.draw()}))}}])&&yT(n.prototype,r),i&&yT(n,i),t}(nx);var ST=[{title:"Metaballs",image:Te.S000,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new xt(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Playing with oscillators",image:Te.S001,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new Lt(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"SDFs",image:Te.S002,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new Ut(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Ray marching",image:Te.S003,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new Jt(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Toon shading",image:Te.S004,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new an(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Basic texture mapping",image:Te.S005,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new vn(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Mesh explosion",instructions:"Press & hold to make the sphere explode",image:Te.S006,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new cx(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Tunnel",image:Te.S007,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new gx(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"",instructions:"Right Now - Nurko & Misdom",isAudio:!0,image:Te.S008,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new Cx(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Light Tunnel",image:Te.S009,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new Dx(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Noise",instructions:"Hover to activate the ribbons",image:Te.S010,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new nb(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Bloom",image:Te.S011,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new kb(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"Noisey plane & texture mixing",instructions:"Press & hold to reach level 9000",image:Te.S012,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new Xb(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"God rays",image:Te.S013,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new v_(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"",instructions:"Nobody (ft. MINO) - Blue.D",isAudio:!0,image:Te.S015,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new Y_(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}},{title:"",instructions:"Wrong (ft. Lil Uzi Vert) - MAX",isAudio:!0,image:Te.S016,component:function(e){var t=e.ready,n=void 0===t||t,r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(r.current)return new wT(r.current,i.current)}),[r.current]),l=st(),u=l.width,c=l.height;return Object(a.useEffect)((function(){o&&o.resize(u,c)}),[o,u,c]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:r}),s.a.createElement("audio",{ref:i,loop:!0}))}}];function TT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ET(e){var t=e.onLoad,n=void 0===t?function(e,t){}:t,r=TT(Object(a.useState)(0),2),i=r[0],o=r[1],l=ST.slice().reverse(),u=ST.length-1;return Object(a.useEffect)((function(){n(i,ST.length)}),[i]),s.a.createElement(ot,null,l.map((function(e,t){return s.a.createElement(rt,{key:t,to:Pe.toSketch(u-t),title:e.title,image:e.image,isAudio:e.isAudio,onLoad:function(){return o(i+1)}})})))}var MT={title:"sketchbook",author:"misspia",socialLinks:[{label:"github",url:"https://github.com/misspia/sketchbook",icon:Se.github}]};function AT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function PT(){var e=AT(Object(a.useState)(0),2),t=e[0],n=e[1];return s.a.createElement(Le,null,t<100&&s.a.createElement(je,{progress:t}),s.a.createElement(Ce,null,s.a.createElement(Oe,null,"Sketchbook"),s.a.createElement(Re,null,"a collection of WebGL experiments"),s.a.createElement(Ne,null,MT.socialLinks.map((function(e,t){return s.a.createElement(Fe,{key:t,href:e.url,target:"_blank"},s.a.createElement(ke,{name:e.icon}))})))),s.a.createElement(ET,{onLoad:function(e,t){n(e/t*100)}}))}var LT=n(63),CT=n.n(LT),OT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var RT=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return s.a.createElement(ve,{children:function(t){return s.a.createElement(e,OT({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:W.a.func},CT()(t,e)},NT=Object(ye.b)(Me.SectionContainer).withConfig({displayName:"entrystyles__Container",componentId:"frdmg6-0"})(["display:flex;flex-direction:column;"]),FT=ye.b.header.withConfig({displayName:"entrystyles__HeaderContainer",componentId:"frdmg6-1"})(["position:fixed;display:flex;flex-direction:row;justify-content:space-between;align-items:center;text-align:center;padding:1em 0;box-sizing:border-box;height:1.5em;font-size:1.0em;& > *{margin:0;padding:0 0.5em;color:",";}a{"," &:hover{transition:0.3s all;color:",";}}"],_e.greyDark,Me.anchorReset,_e.black),IT=ye.b.div.withConfig({displayName:"entrystyles__Instructions",componentId:"frdmg6-2"})(["font-size:0.9em;margin-left:0.5em;padding:0.1em 0.5em;background-color:",";letter-spacing:0.1em;"],_e.whiteTranslucent);ye.b.div.withConfig({displayName:"entrystyles__SketchContainer",componentId:"frdmg6-3"})(["z-index:1;"]);function kT(e){return(kT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zT(e,t){return!t||"object"!==kT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UT(e){return(UT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jT(e,t){return(jT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var BT=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zT(this,UT(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jT(e,t)}(t,e),n=t,(r=[{key:"renderBackButton",value:function(){return s.a.createElement($e,{exact:!0,to:Pe.home},s.a.createElement(ke,{name:Se.close}))}},{key:"renderInstructions",value:function(){if(this.props.instructions)return s.a.createElement(IT,null,this.props.instructions)}},{key:"render",value:function(){return s.a.createElement(FT,null,this.renderBackButton(),this.renderInstructions())}}])&&DT(n.prototype,r),i&&DT(n,i),t}(a.Component);BT.defaultProps={instructions:""};var GT=BT,HT=ye.b.div.withConfig({displayName:"mediaActivatorstyles__Container",componentId:"sc-1gfh8c2-0"})(["position:fixed;top:0;left:0;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center;z-index:999;background-color:rgba(0,0,0,1.0);"]),VT=ye.b.div.withConfig({displayName:"mediaActivatorstyles__Button",componentId:"sc-1gfh8c2-1"})(["font-size:1.4em;padding:0.2em 0.6em;color:",";border:solid 0 transparent;border-left-width:0.1em;border-right-width:0.1em;border-radius:0.1em;transition:all 0.3s;cursor:pointer;position:relative;&::after,&::before{content:'';position:absolute;transition:all 0.3s;height:1px;width:0px;background-color:",";}&::before{right:33.33%;top:0px;}&::after{left:33.33%;bottom:0px;}&:hover{letter-spacing:1px;&::before,&::after{width:33.33%;}}"],_e.cream,_e.cream);function WT(e){return(WT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qT(e,t){return!t||"object"!==WT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JT(e){return(JT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QT(e,t){return(QT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZT=function(e){function t(){return XT(this,t),qT(this,JT(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QT(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return s.a.createElement(HT,null,s.a.createElement(VT,{onClick:function(t){return e.props.onClick(t)}},this.props.text))}}])&&YT(n.prototype,r),i&&YT(n,i),t}(s.a.Component);function $T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ZT.defaultProps={text:"Press to play music",onClick:function(){}};var KT=RT((function(e){var t=e.match.params.index,n=ST[t],r=$T(Object(a.useState)(!n.isAudio),2),i=r[0],o=r[1],l=Object(a.useMemo)((function(){return ST[t].component}),[t]);return i?s.a.createElement(NT,null,s.a.createElement(GT,{title:n.title,instructions:n.instructions}),s.a.createElement(l,{ready:i})):s.a.createElement(ZT,{onClick:function(){return o(!0)}})}));function eE(e){return(eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rE(e,t){return!t||"object"!==eE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iE(e){return(iE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oE(e,t){return(oE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var aE=function(e){function t(){return tE(this,t),rE(this,iE(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return s.a.createElement(ee,null,s.a.createElement(Ae,null,s.a.createElement(ce,null,s.a.createElement(ge,{exact:!0,path:Pe.home,component:PT}),s.a.createElement(ge,{path:Pe.sketch,component:KT}))))}}])&&nE(n.prototype,r),i&&nE(n,i),t}(a.Component);o.a.render(s.a.createElement(aE,null),document.getElementById("app"))}]);