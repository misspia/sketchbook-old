!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=123)}([function(e,t,n){"use strict";e.exports=n(73)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var i=n(76);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var i=n(77).default,r=n(7);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ye}));var i=n(15),r=n.n(i),o=n(23),a=n.n(o),s=n(0),c=n.n(s),l=n(24),u=n(12),h=n(16),d=(n(11),n(70)),p=n(71),f=function(e,t){for(var n=[e[0]],i=0,r=t.length;i<r;i+=1)n.push(t[i],e[i+1]);return n},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},w=function(e){return"object"===(void 0===e?"undefined":m(e))&&e.constructor===Object},_=Object.freeze([]),S=Object.freeze({});function M(e){return"function"==typeof e}function T(e){return e.displayName||e.name||"Component"}function E(e){return e&&"string"==typeof e.styledComponentId}var A=void 0!==e&&(Object({NODE_ENV:"production"}).REACT_APP_SC_ATTR||Object({NODE_ENV:"production"}).SC_ATTR)||"data-styled",C="undefined"!=typeof window&&"HTMLElement"in window,R="boolean"==typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||void 0!==e&&(Object({NODE_ENV:"production"}).REACT_APP_SC_DISABLE_SPEEDY||Object({NODE_ENV:"production"}).SC_DISABLE_SPEEDY)||!1;var L=function(e){function t(n){g(this,t);for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];var a=b(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+n+" for more information."+(r.length>0?" Additional arguments: "+r.join(", "):"")));return b(a)}return x(t,e),t}(Error),P=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,O=function(e){var t=""+(e||""),n=[];return t.replace(P,(function(e,t,i){return n.push({componentId:t,matchIndex:i}),e})),n.map((function(e,i){var r=e.componentId,o=e.matchIndex,a=n[i+1];return{componentId:r,cssFromDOM:a?t.slice(o,a.matchIndex):t.slice(o)}}))},N=/^\s*\/\/.*$/gm,k=new r.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),I=new r.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),D=[],F=function(e){if(-2===e){var t=D;return D=[],t}},z=a()((function(e){D.push(e)})),B=void 0,U=void 0,j=void 0,H=function(e,t,n){return t>0&&-1!==n.slice(0,t).indexOf(U)&&n.slice(t-U.length,t)!==U?"."+B:e};I.use([function(e,t,n){2===e&&n.length&&n[0].lastIndexOf(U)>0&&(n[0]=n[0].replace(j,H))},z,F]),k.use([z,F]);var G=function(e){return k("",e)};function V(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",r=e.join("").replace(N,""),o=t&&n?n+" "+t+" { "+r+" }":r;return B=i,U=t,j=new RegExp("\\"+U+"\\b","g"),I(n||!t?"":t,o)}var W=function(){return n.nc},q=function(e,t,n){n&&((e[t]||(e[t]=Object.create(null)))[n]=!0)},J=function(e,t){e[t]=Object.create(null)},X=function(e){return function(t,n){return void 0!==e[t]&&e[t][n]}},Y=function(e){var t="";for(var n in e)t+=Object.keys(e[n]).join(" ")+" ";return t.trim()},Z=function(e){if(e.sheet)return e.sheet;for(var t=e.ownerDocument.styleSheets.length,n=0;n<t;n+=1){var i=e.ownerDocument.styleSheets[n];if(i.ownerNode===e)return i}throw new L(10)},Q=function(e,t,n){if(!t)return!1;var i=e.cssRules.length;try{e.insertRule(t,n<=i?n:i)}catch(e){return!1}return!0},$=function(e){return"\n/* sc-component-id: "+e+" */\n"},K=function(e,t){for(var n=0,i=0;i<=t;i+=1)n+=e[i];return n},ee=function(e,t){return function(n){var i=W();return"<style "+[i&&'nonce="'+i+'"',A+'="'+Y(t)+'"','data-styled-version="4.4.1"',n].filter(Boolean).join(" ")+">"+e()+"</style>"}},te=function(e,t){return function(){var n,i=((n={})[A]=Y(t),n["data-styled-version"]="4.4.1",n),r=W();return r&&(i.nonce=r),c.a.createElement("style",y({},i,{dangerouslySetInnerHTML:{__html:e()}}))}},ne=function(e){return function(){return Object.keys(e)}},ie=function(e,t){return e.createTextNode($(t))},re=function e(t,n){var i=void 0===t?Object.create(null):t,r=void 0===n?Object.create(null):n,o=function(e){var t=r[e];return void 0!==t?t:r[e]=[""]},a=function(){var e="";for(var t in r){var n=r[t][0];n&&(e+=$(t)+n)}return e};return{clone:function(){var t=function(e){var t=Object.create(null);for(var n in e)t[n]=y({},e[n]);return t}(i),n=Object.create(null);for(var o in r)n[o]=[r[o][0]];return e(t,n)},css:a,getIds:ne(r),hasNameForId:X(i),insertMarker:o,insertRules:function(e,t,n){o(e)[0]+=t.join(" "),q(i,e,n)},removeRules:function(e){var t=r[e];void 0!==t&&(t[0]="",J(i,e))},sealed:!1,styleTag:null,toElement:te(a,i),toHTML:ee(a,i)}},oe=function(e,t,n,i,r){if(C&&!n){var o=function(e,t,n){var i=document;e?i=e.ownerDocument:t&&(i=t.ownerDocument);var r=i.createElement("style");r.setAttribute(A,""),r.setAttribute("data-styled-version","4.4.1");var o=W();if(o&&r.setAttribute("nonce",o),r.appendChild(i.createTextNode("")),e&&!t)e.appendChild(r);else{if(!t||!e||!t.parentNode)throw new L(6);t.parentNode.insertBefore(r,n?t:t.nextSibling)}return r}(e,t,i);return R?function(e,t){var n=Object.create(null),i=Object.create(null),r=void 0!==t,o=!1,a=function(t){var r=i[t];return void 0!==r?r:(i[t]=ie(e.ownerDocument,t),e.appendChild(i[t]),n[t]=Object.create(null),i[t])},s=function(){var e="";for(var t in i)e+=i[t].data;return e};return{clone:function(){throw new L(5)},css:s,getIds:ne(i),hasNameForId:X(n),insertMarker:a,insertRules:function(e,i,s){for(var c=a(e),l=[],u=i.length,h=0;h<u;h+=1){var d=i[h],p=r;if(p&&-1!==d.indexOf("@import"))l.push(d);else{p=!1;var f=h===u-1?"":" ";c.appendData(""+d+f)}}q(n,e,s),r&&l.length>0&&(o=!0,t().insertRules(e+"-import",l))},removeRules:function(a){var s=i[a];if(void 0!==s){var c=ie(e.ownerDocument,a);e.replaceChild(c,s),i[a]=c,J(n,a),r&&o&&t().removeRules(a+"-import")}},sealed:!1,styleTag:e,toElement:te(s,n),toHTML:ee(s,n)}}(o,r):function(e,t){var n=Object.create(null),i=Object.create(null),r=[],o=void 0!==t,a=!1,s=function(e){var t=i[e];return void 0!==t?t:(i[e]=r.length,r.push(0),J(n,e),i[e])},c=function(){var t=Z(e).cssRules,n="";for(var o in i){n+=$(o);for(var a=i[o],s=K(r,a),c=s-r[a];c<s;c+=1){var l=t[c];void 0!==l&&(n+=l.cssText)}}return n};return{clone:function(){throw new L(5)},css:c,getIds:ne(i),hasNameForId:X(n),insertMarker:s,insertRules:function(i,c,l){for(var u=s(i),h=Z(e),d=K(r,u),p=0,f=[],m=c.length,g=0;g<m;g+=1){var v=c[g],y=o;y&&-1!==v.indexOf("@import")?f.push(v):Q(h,v,d+p)&&(y=!1,p+=1)}o&&f.length>0&&(a=!0,t().insertRules(i+"-import",f)),r[u]+=p,q(n,i,l)},removeRules:function(s){var c=i[s];if(void 0!==c&&!1!==e.isConnected){var l=r[c];!function(e,t,n){for(var i=t-n,r=t;r>i;r-=1)e.deleteRule(r)}(Z(e),K(r,c)-1,l),r[c]=0,J(n,s),o&&a&&t().removeRules(s+"-import")}},sealed:!1,styleTag:e,toElement:te(c,n),toHTML:ee(c,n)}}(o,r)}return re()},ae=/\s+/,se=void 0;se=C?R?40:1e3:-1;var ce=0,le=void 0,ue=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C?document.head:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var n=t.tags[0];return t.importRuleTag=oe(t.target,n?n.styleTag:null,t.forceServer,!0)},ce+=1,this.id=ce,this.forceServer=i,this.target=i?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!C||this.forceServer)return this;var e=[],t=[],n=!1,i=document.querySelectorAll("style["+A+'][data-styled-version="4.4.1"]'),r=i.length;if(!r)return this;for(var o=0;o<r;o+=1){var a=i[o];n||(n=!!a.getAttribute("data-styled-streamed"));for(var s,c=(a.getAttribute(A)||"").trim().split(ae),l=c.length,u=0;u<l;u+=1)s=c[u],this.rehydratedNames[s]=!0;t.push.apply(t,O(a.textContent)),e.push(a)}var h=t.length;if(!h)return this;var d=this.makeTag(null);!function(e,t,n){for(var i=0,r=n.length;i<r;i+=1){var o=n[i],a=o.componentId,s=o.cssFromDOM,c=G(s);e.insertRules(a,c)}for(var l=0,u=t.length;l<u;l+=1){var h=t[l];h.parentNode&&h.parentNode.removeChild(h)}}(d,e,t),this.capacity=Math.max(1,se-h),this.tags.push(d);for(var p=0;p<h;p+=1)this.tagMap[t[p].componentId]=d;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];le=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map((function(e){for(var n=e.getIds(),i=e.clone(),r=0;r<n.length;r+=1)t.tagMap[n[r]]=i;return i})),t.rehydratedNames=y({},this.rehydratedNames),t.deferred=y({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach((function(e){e.sealed=!0}))},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return oe(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!t.sealed)return t;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=se,n=this.makeTag(n),this.tags.push(n)),this.tagMap[e]=n},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var n=this.tagMap[e];return void 0!==n&&n.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var n=this.clones,i=0;i<n.length;i+=1)n[i].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,n){for(var i=this.clones,r=0;r<i.length;r+=1)i[r].inject(e,t,n);var o=this.getTagForId(e);if(void 0!==this.deferred[e]){var a=this.deferred[e].concat(t);o.insertRules(e,a,n),this.deferred[e]=void 0}else o.insertRules(e,t,n)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var n=this.clones,i=0;i<n.length;i+=1)n[i].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,this.deferred[e]=void 0}},e.prototype.toHTML=function(){return this.tags.map((function(e){return e.toHTML()})).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map((function(t,n){var i="sc-"+e+"-"+n;return Object(s.cloneElement)(t.toElement(),{key:i})}))},v(e,null,[{key:"master",get:function(){return le||(le=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),he=function(){function e(t,n){var i=this;g(this,e),this.inject=function(e){e.hasNameForId(i.id,i.name)||e.inject(i.id,i.rules,i.name)},this.toString=function(){throw new L(12,String(i.name))},this.name=t,this.rules=n,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),de=/([A-Z])/g,pe=/^ms-/;function fe(e){return e.replace(de,"-$1").toLowerCase().replace(pe,"-ms-")}var me=function(e){return null==e||!1===e||""===e},ge=function e(t,n){var i=[];return Object.keys(t).forEach((function(n){if(!me(t[n])){if(w(t[n]))return i.push.apply(i,e(t[n],n)),i;if(M(t[n]))return i.push(fe(n)+":",t[n],";"),i;i.push(fe(n)+": "+(r=n,(null==(o=t[n])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||r in l.a?String(o).trim():o+"px")+";"))}var r,o;return i})),n?[n+" {"].concat(i,["}"]):i};function ve(e,t,n){if(Array.isArray(e)){for(var i,r=[],o=0,a=e.length;o<a;o+=1)null!==(i=ve(e[o],t,n))&&(Array.isArray(i)?r.push.apply(r,i):r.push(i));return r}return me(e)?null:E(e)?"."+e.styledComponentId:M(e)?"function"!=typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:ve(e(t),t,n):e instanceof he?n?(e.inject(n),e.getName()):e:w(e)?ge(e):e.toString();var s}function ye(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return M(e)||w(e)?ve(f(_,[e].concat(n))):ve(f(e,n))}function xe(e){for(var t,n=0|e.length,i=0|n,r=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+((1540483477*(t>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++r;switch(n){case 3:i^=(255&e.charCodeAt(r+2))<<16;case 2:i^=(255&e.charCodeAt(r+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(r)))+((1540483477*(i>>>16)&65535)<<16)}return((i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16))^i>>>15)>>>0}var be=function(e){return String.fromCharCode(e+(e>25?39:97))};function we(e){var t="",n=void 0;for(n=e;n>52;n=Math.floor(n/52))t=be(n%52)+t;return be(n%52)+t}function _e(e,t){for(var n=0;n<e.length;n+=1){var i=e[n];if(Array.isArray(i)&&!_e(i,t))return!1;if(M(i)&&!E(i))return!1}return!t.some((function(e){return M(e)||function(e){for(var t in e)if(M(e[t]))return!0;return!1}(e)}))}var Se,Me=function(e){return we(xe(e))},Te=function(){function e(t,n,i){g(this,e),this.rules=t,this.isStatic=_e(t,n),this.componentId=i,ue.master.hasId(i)||ue.master.deferredInject(i,[])}return e.prototype.generateAndInjectStyles=function(e,t){var n=this.isStatic,i=this.componentId,r=this.lastClassName;if(C&&n&&"string"==typeof r&&t.hasNameForId(i,r))return r;var o=ve(this.rules,e,t),a=Me(this.componentId+o.join(""));return t.hasNameForId(i,a)||t.inject(this.componentId,V(o,"."+a,void 0,i),a),this.lastClassName=a,a},e.generateName=function(e){return Me(e)},e}(),Ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S,i=!!n&&e.theme===n.theme,r=e.theme&&!i?e.theme:t||n.theme;return r},Ae=/[[\].#*$><+~=|^:(),"'`-]+/g,Ce=/(^-|-$)/g;function Re(e){return e.replace(Ae,"-").replace(Ce,"")}function Le(e){return"string"==typeof e&&!0}var Pe={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Oe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ne=((Se={})[u.ForwardRef]={$$typeof:!0,render:!0},Se),ke=Object.defineProperty,Ie=Object.getOwnPropertyNames,De=Object.getOwnPropertySymbols,Fe=void 0===De?function(){return[]}:De,ze=Object.getOwnPropertyDescriptor,Be=Object.getPrototypeOf,Ue=Object.prototype,je=Array.prototype;function He(e,t,n){if("string"!=typeof t){var i=Be(t);i&&i!==Ue&&He(e,i,n);for(var r=je.concat(Ie(t),Fe(t)),o=Ne[e.$$typeof]||Pe,a=Ne[t.$$typeof]||Pe,s=r.length,c=void 0,l=void 0;s--;)if(l=r[s],!(Oe[l]||n&&n[l]||a&&a[l]||o&&o[l])&&(c=ze(t,l)))try{ke(e,l,c)}catch(e){}return e}return e}var Ge=Object(s.createContext)(),Ve=Ge.Consumer,We=(function(e){function t(n){g(this,t);var i=b(this,e.call(this,n));return i.getContext=Object(h.a)(i.getContext.bind(i)),i.renderInner=i.renderInner.bind(i),i}x(t,e),t.prototype.render=function(){return this.props.children?c.a.createElement(Ge.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(e){var t=this.getContext(this.props.theme,e);return c.a.createElement(Ge.Provider,{value:t},this.props.children)},t.prototype.getTheme=function(e,t){if(M(e))return e(t);if(null===e||Array.isArray(e)||"object"!==(void 0===e?"undefined":m(e)))throw new L(8);return y({},t,e)},t.prototype.getContext=function(e,t){return this.getTheme(e,t)}}(s.Component),function(){function e(){g(this,e),this.masterSheet=ue.master,this.instance=this.masterSheet.clone(),this.sealed=!1}e.prototype.seal=function(){if(!this.sealed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.sealed=!0}},e.prototype.collectStyles=function(e){if(this.sealed)throw new L(2);return c.a.createElement(Je,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new L(3)}}(),Object(s.createContext)()),qe=We.Consumer,Je=function(e){function t(n){g(this,t);var i=b(this,e.call(this,n));return i.getContext=Object(h.a)(i.getContext),i}return x(t,e),t.prototype.getContext=function(e,t){if(e)return e;if(t)return new ue(t);throw new L(4)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.sheet,i=e.target;return c.a.createElement(We.Provider,{value:this.getContext(n,i)},t)},t}(s.Component),Xe={};var Ye=function(e){function t(){g(this,t);var n=b(this,e.call(this));return n.attrs={},n.renderOuter=n.renderOuter.bind(n),n.renderInner=n.renderInner.bind(n),n}return x(t,e),t.prototype.render=function(){return c.a.createElement(qe,null,this.renderOuter)},t.prototype.renderOuter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue.master;return this.styleSheet=e,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():c.a.createElement(Ve,null,this.renderInner)},t.prototype.renderInner=function(e){var t=this.props.forwardedComponent,n=t.componentStyle,i=t.defaultProps,r=(t.displayName,t.foldedComponentIds),o=t.styledComponentId,a=t.target,c=void 0;c=n.isStatic?this.generateAndInjectStyles(S,this.props):this.generateAndInjectStyles(Ee(this.props,e,i)||S,this.props);var l=this.props.as||this.attrs.as||a,u=Le(l),h={},p=y({},this.props,this.attrs),f=void 0;for(f in p)"forwardedComponent"!==f&&"as"!==f&&("forwardedRef"===f?h.ref=p[f]:"forwardedAs"===f?h.as=p[f]:u&&!Object(d.a)(f)||(h[f]=p[f]));return this.props.style&&this.attrs.style&&(h.style=y({},this.attrs.style,this.props.style)),h.className=Array.prototype.concat(r,o,c!==o?c:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),Object(s.createElement)(l,h)},t.prototype.buildExecutionContext=function(e,t,n){var i=this,r=y({},t,{theme:e});return n.length?(this.attrs={},n.forEach((function(e){var t,n=e,o=!1,a=void 0,s=void 0;for(s in M(n)&&(n=n(r),o=!0),n)a=n[s],o||!M(a)||(t=a)&&t.prototype&&t.prototype.isReactComponent||E(a)||(a=a(r)),i.attrs[s]=a,r[s]=a})),r):r},t.prototype.generateAndInjectStyles=function(e,t){var n=t.forwardedComponent,i=n.attrs,r=n.componentStyle;n.warnTooManyClasses;return r.isStatic&&!i.length?r.generateAndInjectStyles(S,this.styleSheet):r.generateAndInjectStyles(this.buildExecutionContext(e,t,i),this.styleSheet)},t}(s.Component);function Ze(e,t,n){var i=E(e),r=!Le(e),o=t.displayName,a=void 0===o?function(e){return Le(e)?"styled."+e:"Styled("+T(e)+")"}(e):o,s=t.componentId,l=void 0===s?function(e,t,n){var i="string"!=typeof t?"sc":Re(t),r=(Xe[i]||0)+1;Xe[i]=r;var o=i+"-"+e.generateName(i+r);return n?n+"-"+o:o}(Te,t.displayName,t.parentComponentId):s,u=t.ParentComponent,h=void 0===u?Ye:u,d=t.attrs,f=void 0===d?_:d,m=t.displayName&&t.componentId?Re(t.displayName)+"-"+t.componentId:t.componentId||l,g=i&&e.attrs?Array.prototype.concat(e.attrs,f).filter(Boolean):f,v=new Te(i?e.componentStyle.rules.concat(n):n,g,m),x=void 0,b=function(e,t){return c.a.createElement(h,y({},e,{forwardedComponent:x,forwardedRef:t}))};return b.displayName=a,(x=c.a.forwardRef(b)).displayName=a,x.attrs=g,x.componentStyle=v,x.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):_,x.styledComponentId=m,x.target=i?e.target:e,x.withComponent=function(e){var i=t.componentId,r=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["componentId"]),o=i&&i+"-"+(Le(e)?e:Re(T(e)));return Ze(e,y({},r,{attrs:g,componentId:o,ParentComponent:h}),n)},Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?Object(p.a)(e.defaultProps,t):t}}),x.toString=function(){return"."+x.styledComponentId},r&&He(x,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),x}var Qe=function(e){return function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;if(!Object(u.isValidElementType)(n))throw new L(1,String(n));var r=function(){return t(n,i,ye.apply(void 0,arguments))};return r.withConfig=function(r){return e(t,n,y({},i,r))},r.attrs=function(r){return e(t,n,y({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},r}(Ze,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Qe[e]=Qe(e)}));!function(){function e(t,n){g(this,e),this.rules=t,this.componentId=n,this.isStatic=_e(t,_),ue.master.hasId(n)||ue.master.deferredInject(n,[])}e.prototype.createStyles=function(e,t){var n=V(ve(this.rules,e,t),"");t.inject(this.componentId,n)},e.prototype.removeStyles=function(e){var t=this.componentId;e.hasId(t)&&e.remove(t)},e.prototype.renderStyles=function(e,t){this.removeStyles(t),this.createStyles(e,t)}}();C&&(window.scCGSHMRCache={});t.b=Qe}).call(this,n(110))},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}n.d(t,"a",(function(){return r}))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var i=n(114),r=n(115),o=n(116),a=n(118);e.exports=function(e,t){return i(e)||r(e,t)||o(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){e.exports=n(112)()},function(e,t,n){"use strict";e.exports=n(111)},function(e,t){e.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],i=0;i<e.length-1;i++)n.push(e[i],t[i]||"");return n.push(e[i]),n.join("")}},,function(e,t,n){e.exports=function e(t){"use strict";var n=/^\0+/g,i=/[\0\r\f]/g,r=/: */g,o=/zoo|gra/,a=/([,: ])(transform)/g,s=/,+\s*(?![^(]*[)])/g,c=/ +\s*(?![^(]*[)])/g,l=/ *[\0] */g,u=/,\r+?/g,h=/([\t\r\n ])*\f?&/g,d=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,p=/\W+/g,f=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,g=/:(read-only)/g,v=/\s+(?=[{\];=:>])/g,y=/([[}=:>])\s+/g,x=/(\{[^{]+?);(?=\})/g,b=/\s{2,}/g,w=/([^\(])(:+) */g,_=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,M=/([\s\S]*?);/g,T=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,A=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,R="-webkit-",L="-moz-",P="-ms-",O=59,N=125,k=123,I=40,D=41,F=10,z=13,B=32,U=45,j=42,H=44,G=58,V=47,W=1,q=1,J=0,X=1,Y=1,Z=1,Q=0,$=0,K=0,ee=[],te=[],ne=0,ie=null,re=0,oe=1,ae="",se="",ce="";function le(e,t,r,o,a){for(var s,c,u=0,h=0,d=0,p=0,v=0,y=0,x=0,b=0,_=0,M=0,T=0,E=0,A=0,C=0,L=0,P=0,Q=0,te=0,ie=0,he=r.length,ve=he-1,ye="",xe="",be="",we="",_e="",Se="";L<he;){if(x=r.charCodeAt(L),L===ve&&h+p+d+u!==0&&(0!==h&&(x=h===V?F:V),p=d=u=0,he++,ve++),h+p+d+u===0){if(L===ve&&(P>0&&(xe=xe.replace(i,"")),xe.trim().length>0)){switch(x){case B:case 9:case O:case z:case F:break;default:xe+=r.charAt(L)}x=O}if(1===Q)switch(x){case k:case N:case O:case 34:case 39:case I:case D:case H:Q=0;case 9:case z:case F:case B:break;default:for(Q=0,ie=L,v=x,L--,x=O;ie<he;)switch(r.charCodeAt(ie++)){case F:case z:case O:++L,x=v,ie=he;break;case G:P>0&&(++L,x=v);case k:ie=he}}switch(x){case k:for(v=(xe=xe.trim()).charCodeAt(0),T=1,ie=++L;L<he;){switch(x=r.charCodeAt(L)){case k:T++;break;case N:T--;break;case V:switch(y=r.charCodeAt(L+1)){case j:case V:L=ge(y,L,ve,r)}break;case 91:x++;case I:x++;case 34:case 39:for(;L++<ve&&r.charCodeAt(L)!==x;);}if(0===T)break;L++}switch(be=r.substring(ie,L),0===v&&(v=(xe=xe.replace(n,"").trim()).charCodeAt(0)),v){case 64:switch(P>0&&(xe=xe.replace(i,"")),y=xe.charCodeAt(1)){case 100:case 109:case 115:case U:s=t;break;default:s=ee}if(ie=(be=le(t,s,be,y,a+1)).length,K>0&&0===ie&&(ie=xe.length),ne>0&&(c=me(3,be,s=ue(ee,xe,te),t,q,W,ie,y,a,o),xe=s.join(""),void 0!==c&&0===(ie=(be=c.trim()).length)&&(y=0,be="")),ie>0)switch(y){case 115:xe=xe.replace(S,fe);case 100:case 109:case U:be=xe+"{"+be+"}";break;case 107:be=(xe=xe.replace(f,"$1 $2"+(oe>0?ae:"")))+"{"+be+"}",be=1===Y||2===Y&&pe("@"+be,3)?"@"+R+be+"@"+be:"@"+be;break;default:be=xe+be,112===o&&(we+=be,be="")}else be="";break;default:be=le(t,ue(t,xe,te),be,o,a+1)}_e+=be,E=0,Q=0,C=0,P=0,te=0,A=0,xe="",be="",x=r.charCodeAt(++L);break;case N:case O:if((ie=(xe=(P>0?xe.replace(i,""):xe).trim()).length)>1)switch(0===C&&((v=xe.charCodeAt(0))===U||v>96&&v<123)&&(ie=(xe=xe.replace(" ",":")).length),ne>0&&void 0!==(c=me(1,xe,t,e,q,W,we.length,o,a,o))&&0===(ie=(xe=c.trim()).length)&&(xe="\0\0"),v=xe.charCodeAt(0),y=xe.charCodeAt(1),v){case 0:break;case 64:if(105===y||99===y){Se+=xe+r.charAt(L);break}default:if(xe.charCodeAt(ie-1)===G)break;we+=de(xe,v,y,xe.charCodeAt(2))}E=0,Q=0,C=0,P=0,te=0,xe="",x=r.charCodeAt(++L)}}switch(x){case z:case F:if(h+p+d+u+$===0)switch(M){case D:case 39:case 34:case 64:case 126:case 62:case j:case 43:case V:case U:case G:case H:case O:case k:case N:break;default:C>0&&(Q=1)}h===V?h=0:X+E===0&&107!==o&&xe.length>0&&(P=1,xe+="\0"),ne*re>0&&me(0,xe,t,e,q,W,we.length,o,a,o),W=1,q++;break;case O:case N:if(h+p+d+u===0){W++;break}default:switch(W++,ye=r.charAt(L),x){case 9:case B:if(p+u+h===0)switch(b){case H:case G:case 9:case B:ye="";break;default:x!==B&&(ye=" ")}break;case 0:ye="\\0";break;case 12:ye="\\f";break;case 11:ye="\\v";break;case 38:p+h+u===0&&X>0&&(te=1,P=1,ye="\f"+ye);break;case 108:if(p+h+u+J===0&&C>0)switch(L-C){case 2:112===b&&r.charCodeAt(L-3)===G&&(J=b);case 8:111===_&&(J=_)}break;case G:p+h+u===0&&(C=L);break;case H:h+d+p+u===0&&(P=1,ye+="\r");break;case 34:case 39:0===h&&(p=p===x?0:0===p?x:p);break;case 91:p+h+d===0&&u++;break;case 93:p+h+d===0&&u--;break;case D:p+h+u===0&&d--;break;case I:if(p+h+u===0){if(0===E)switch(2*b+3*_){case 533:break;default:T=0,E=1}d++}break;case 64:h+d+p+u+C+A===0&&(A=1);break;case j:case V:if(p+u+d>0)break;switch(h){case 0:switch(2*x+3*r.charCodeAt(L+1)){case 235:h=V;break;case 220:ie=L,h=j}break;case j:x===V&&b===j&&ie+2!==L&&(33===r.charCodeAt(ie+2)&&(we+=r.substring(ie,L+1)),ye="",h=0)}}if(0===h){if(X+p+u+A===0&&107!==o&&x!==O)switch(x){case H:case 126:case 62:case 43:case D:case I:if(0===E){switch(b){case 9:case B:case F:case z:ye+="\0";break;default:ye="\0"+ye+(x===H?"":"\0")}P=1}else switch(x){case I:C+7===L&&108===b&&(C=0),E=++T;break;case D:0==(E=--T)&&(P=1,ye+="\0")}break;case 9:case B:switch(b){case 0:case k:case N:case O:case H:case 12:case 9:case B:case F:case z:break;default:0===E&&(P=1,ye+="\0")}}xe+=ye,x!==B&&9!==x&&(M=x)}}_=b,b=x,L++}if(ie=we.length,K>0&&0===ie&&0===_e.length&&0===t[0].length==0&&(109!==o||1===t.length&&(X>0?se:ce)===t[0])&&(ie=t.join(",").length+2),ie>0){if(s=0===X&&107!==o?function(e){for(var t,n,r=0,o=e.length,a=Array(o);r<o;++r){for(var s=e[r].split(l),c="",u=0,h=0,d=0,p=0,f=s.length;u<f;++u)if(!(0===(h=(n=s[u]).length)&&f>1)){if(d=c.charCodeAt(c.length-1),p=n.charCodeAt(0),t="",0!==u)switch(d){case j:case 126:case 62:case 43:case B:case I:break;default:t=" "}switch(p){case 38:n=t+se;case 126:case 62:case 43:case B:case D:case I:break;case 91:n=t+n+se;break;case G:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(Z>0){n=t+n.substring(8,h-1);break}default:(u<1||s[u-1].length<1)&&(n=t+se+n)}break;case H:t="";default:n=h>1&&n.indexOf(":")>0?t+n.replace(w,"$1"+se+"$2"):t+n+se}c+=n}a[r]=c.replace(i,"").trim()}return a}(t):t,ne>0&&void 0!==(c=me(2,we,s,e,q,W,ie,o,a,o))&&0===(we=c).length)return Se+we+_e;if(we=s.join(",")+"{"+we+"}",Y*J!=0){switch(2!==Y||pe(we,2)||(J=0),J){case 111:we=we.replace(g,":-moz-$1")+we;break;case 112:we=we.replace(m,"::"+R+"input-$1")+we.replace(m,"::-moz-$1")+we.replace(m,":-ms-input-$1")+we}J=0}}return Se+we+_e}function ue(e,t,n){var i=t.trim().split(u),r=i,o=i.length,a=e.length;switch(a){case 0:case 1:for(var s=0,c=0===a?"":e[0]+" ";s<o;++s)r[s]=he(c,r[s],n,a).trim();break;default:s=0;var l=0;for(r=[];s<o;++s)for(var h=0;h<a;++h)r[l++]=he(e[h]+" ",i[s],n,a).trim()}return r}function he(e,t,n,i){var r=t,o=r.charCodeAt(0);switch(o<33&&(o=(r=r.trim()).charCodeAt(0)),o){case 38:switch(X+i){case 0:case 1:if(0===e.trim().length)break;default:return r.replace(h,"$1"+e.trim())}break;case G:switch(r.charCodeAt(1)){case 103:if(Z>0&&X>0)return r.replace(d,"$1").replace(h,"$1"+ce);break;default:return e.trim()+r.replace(h,"$1"+e.trim())}default:if(n*X>0&&r.indexOf("\f")>0)return r.replace(h,(e.charCodeAt(0)===G?"":"$1")+e.trim())}return e+r}function de(e,t,n,i){var l,u=0,h=e+";",d=2*t+3*n+4*i;if(944===d)return function(e){var t=e.length,n=e.indexOf(":",9)+1,i=e.substring(0,n).trim(),r=e.substring(n,t-1).trim();switch(e.charCodeAt(9)*oe){case 0:break;case U:if(110!==e.charCodeAt(10))break;default:var o=r.split((r="",s)),a=0;for(n=0,t=o.length;a<t;n=0,++a){for(var l=o[a],u=l.split(c);l=u[n];){var h=l.charCodeAt(0);if(1===oe&&(h>64&&h<90||h>96&&h<123||95===h||h===U&&l.charCodeAt(1)!==U))switch(isNaN(parseFloat(l))+(-1!==l.indexOf("("))){case 1:switch(l){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:l+=ae}}u[n++]=l}r+=(0===a?"":",")+u.join(" ")}}return r=i+r+";",1===Y||2===Y&&pe(r,1)?R+r+r:r}(h);if(0===Y||2===Y&&!pe(h,1))return h;switch(d){case 1015:return 97===h.charCodeAt(10)?R+h+h:h;case 951:return 116===h.charCodeAt(3)?R+h+h:h;case 963:return 110===h.charCodeAt(5)?R+h+h:h;case 1009:if(100!==h.charCodeAt(4))break;case 969:case 942:return R+h+h;case 978:return R+h+L+h+h;case 1019:case 983:return R+h+L+h+P+h+h;case 883:return h.charCodeAt(8)===U?R+h+h:h.indexOf("image-set(",11)>0?h.replace(C,"$1"+R+"$2")+h:h;case 932:if(h.charCodeAt(4)===U)switch(h.charCodeAt(5)){case 103:return R+"box-"+h.replace("-grow","")+R+h+P+h.replace("grow","positive")+h;case 115:return R+h+P+h.replace("shrink","negative")+h;case 98:return R+h+P+h.replace("basis","preferred-size")+h}return R+h+P+h+h;case 964:return R+h+P+"flex-"+h+h;case 1023:if(99!==h.charCodeAt(8))break;return l=h.substring(h.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),R+"box-pack"+l+R+h+P+"flex-pack"+l+h;case 1005:return o.test(h)?h.replace(r,":"+R)+h.replace(r,":"+L)+h:h;case 1e3:switch(u=(l=h.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(u)){case 226:l=h.replace(_,"tb");break;case 232:l=h.replace(_,"tb-rl");break;case 220:l=h.replace(_,"lr");break;default:return h}return R+h+P+l+h;case 1017:if(-1===h.indexOf("sticky",9))return h;case 975:switch(u=(h=e).length-10,d=(l=(33===h.charCodeAt(u)?h.substring(0,u):h).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(l.charCodeAt(8)<111)break;case 115:h=h.replace(l,R+l)+";"+h;break;case 207:case 102:h=h.replace(l,R+(d>102?"inline-":"")+"box")+";"+h.replace(l,R+l)+";"+h.replace(l,P+l+"box")+";"+h}return h+";";case 938:if(h.charCodeAt(5)===U)switch(h.charCodeAt(6)){case 105:return l=h.replace("-items",""),R+h+R+"box-"+l+P+"flex-"+l+h;case 115:return R+h+P+"flex-item-"+h.replace(T,"")+h;default:return R+h+P+"flex-line-pack"+h.replace("align-content","").replace(T,"")+h}break;case 973:case 989:if(h.charCodeAt(3)!==U||122===h.charCodeAt(4))break;case 931:case 953:if(!0===A.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?de(e.replace("stretch","fill-available"),t,n,i).replace(":fill-available",":stretch"):h.replace(l,R+l)+h.replace(l,L+l.replace("fill-",""))+h;break;case 962:if(h=R+h+(102===h.charCodeAt(5)?P+h:"")+h,n+i===211&&105===h.charCodeAt(13)&&h.indexOf("transform",10)>0)return h.substring(0,h.indexOf(";",27)+1).replace(a,"$1"+R+"$2")+h}return h}function pe(e,t){var n=e.indexOf(1===t?":":"{"),i=e.substring(0,3!==t?n:10),r=e.substring(n+1,e.length-1);return ie(2!==t?i:i.replace(E,"$1"),r,t)}function fe(e,t){var n=de(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(M," or ($1)").substring(4):"("+t+")"}function me(e,t,n,i,r,o,a,s,c,l){for(var u,h=0,d=t;h<ne;++h)switch(u=te[h].call(ye,e,d,n,i,r,o,a,s,c,l)){case void 0:case!1:case!0:case null:break;default:d=u}if(d!==t)return d}function ge(e,t,n,i){for(var r=t+1;r<n;++r)switch(i.charCodeAt(r)){case V:if(e===j&&i.charCodeAt(r-1)===j&&t+2!==r)return r+1;break;case F:if(e===V)return r+1}return r}function ve(e){for(var t in e){var n=e[t];switch(t){case"keyframe":oe=0|n;break;case"global":Z=0|n;break;case"cascade":X=0|n;break;case"compress":Q=0|n;break;case"semicolon":$=0|n;break;case"preserve":K=0|n;break;case"prefix":ie=null,n?"function"!=typeof n?Y=1:(Y=2,ie=n):Y=0}}return ve}function ye(t,n){if(void 0!==this&&this.constructor===ye)return e(t);var r=t,o=r.charCodeAt(0);o<33&&(o=(r=r.trim()).charCodeAt(0)),oe>0&&(ae=r.replace(p,91===o?"":"-")),o=1,1===X?ce=r:se=r;var a,s=[ce];ne>0&&void 0!==(a=me(-1,n,s,s,q,W,0,0,0,0))&&"string"==typeof a&&(n=a);var c=le(ee,s,n,0,0);return ne>0&&void 0!==(a=me(-2,c,s,s,q,W,c.length,0,0,0))&&"string"!=typeof(c=a)&&(o=0),ae="",ce="",se="",J=0,q=1,W=1,Q*o==0?c:c.replace(i,"").replace(v,"").replace(y,"$1").replace(x,"$1").replace(b," ")}return ye.use=function e(t){switch(t){case void 0:case null:ne=te.length=0;break;default:if("function"==typeof t)te[ne++]=t;else if("object"==typeof t)for(var n=0,i=t.length;n<i;++n)e(t[n]);else re=0|!!t}return e},ye.set=ve,void 0!==t&&ve(t),ye}(null)},function(e,t,n){"use strict";var i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function r(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],o=t[n],!(r===o||i(r)&&i(o)))return!1;var r,o;return!0}t.a=function(e,t){var n;void 0===t&&(t=r);var i,o=[],a=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return a&&n===this&&t(r,o)||(i=e.apply(this,r),a=!0,n=this,o=r),i}}},function(e,t,n){"use strict";(function(e){var i=n(0),r=n.n(i),o=n(8),a=n(11),s=n.n(a),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:{};function l(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,i){e=n,t.forEach((function(t){return t(e,i)}))}}}var u=r.a.createContext||function(e,t){var n,r,a,u="__create-react-context-"+((c[a="__global_unique_id__"]=(c[a]||0)+1)+"__"),h=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=l(t.props.value),t}Object(o.a)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[u]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,i=this.props.value,r=e.value;((o=i)===(a=r)?0!==o||1/o==1/a:o!=o&&a!=a)?n=0:(n="function"==typeof t?t(i,r):1073741823,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,a},i.render=function(){return this.props.children},n}(i.Component);h.childContextTypes=((n={})[u]=s.a.object.isRequired,n);var d=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(o.a)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?1073741823:t},i.componentDidMount=function(){this.context[u]&&this.context[u].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?1073741823:e},i.componentWillUnmount=function(){this.context[u]&&this.context[u].off(this.onUpdate)},i.getValue=function(){return this.context[u]?this.context[u].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return d.contextTypes=((r={})[u]=s.a.object,r),{Provider:h,Consumer:d}};t.a=u}).call(this,n(119))},function(e,t,n){var i=n(120);e.exports=p,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,i=[],o=0,a=0,s="",u=t&&t.delimiter||"/";null!=(n=r.exec(e));){var h=n[0],d=n[1],p=n.index;if(s+=e.slice(a,p),a=p+h.length,d)s+=d[1];else{var f=e[a],m=n[2],g=n[3],v=n[4],y=n[5],x=n[6],b=n[7];s&&(i.push(s),s="");var w=null!=m&&null!=f&&f!==m,_="+"===x||"*"===x,S="?"===x||"*"===x,M=n[2]||u,T=v||y;i.push({name:g||o++,prefix:m||"",delimiter:M,optional:S,repeat:_,partial:w,asterisk:!!b,pattern:T?l(T):b?".*":"[^"+c(M)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&i.push(s),i}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",h(t)));return function(t,r){for(var o="",s=t||{},c=(r||{}).pretty?a:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!=typeof u){var h,d=s[u.name];if(null==d){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(i(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(h=c(d[p]),!n[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===p?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(d),!n[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');o+=u.prefix+h}}else o+=u}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){i(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var l=e[s];if("string"==typeof l)a+=c(l);else{var d=c(l.prefix),p="(?:"+l.pattern+")";t.push(l),l.repeat&&(p+="(?:"+d+p+")*"),a+=p=l.optional?l.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var f=c(n.delimiter||"/"),m=a.slice(-f.length)===f;return r||(a=(m?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":r&&m?"":"(?="+f+"|$)",u(new RegExp("^"+a,h(n)),t)}function p(e,t,n){return i(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):i(e)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(p(e[r],t,n).source);return u(new RegExp("(?:"+i.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(o(e,n),t,n)}(e,t,n)}},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float uRadius;\n\nvarying float dist;\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nvoid main() {\n  const vec3 color = vec3(0.0, 0.0, 0.0);\n  float opacity = 1.0;\n\n  float threshold = uRadius * 0.8;\n  if(dist >= threshold) {\n    float offsetDist = remap(dist, threshold, uRadius, 0.0, 1.0);\n    opacity = 1.0 - offsetDist;\n  }\n\n  gl_FragColor = vec4(0.0, 0.0, 0.0, opacity);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvarying float dist;\n\nvoid main () {\n  dist = length(position.xyz);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,c=a(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))r.call(n,u)&&(c[u]=n[u]);if(i){s=i(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(c[s[h]]=n[s[h]])}}return c}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(72)},function(e,t,n){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,i,r,o,a,s,c,l,u,h){switch(n){case 1:if(0===u&&64===i.charCodeAt(0))return e(i+";"),"";break;case 2:if(0===l)return i+"/*|*/";break;case 3:switch(l){case 102:case 112:return e(r[0]+i),"";default:return i+(0===h?"/*|*/":"")}case-2:i.split("/*|*/}").forEach(t)}}}}()},function(e,t,n){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";var i=n(12),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return i.isMemo(e)?a:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=a;var l=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!=typeof n){if(f){var r=p(n);r&&r!==f&&e(t,r,i)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=c(t),m=c(n),g=0;g<a.length;++g){var v=a[g];if(!(o[v]||i&&i[v]||m&&m[v]||s&&s[v])){var y=d(n,v);try{l(t,v,y)}catch(e){}}}}return t}},function(e,t){e.exports="#define GLSLIFY 1\nattribute vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nconst int len = 10;\nconst vec3 pink = vec3(0.98, 0.81, 0.85);\nconst vec3 blue = vec3(0.79, 0.91, 0.93);\n\nuniform vec3 u_metaballs[len];\nuniform vec2 u_resolution;\n\nvoid main() {\n  vec2 coord = gl_FragCoord.xy;\n  float velocity = 0.0;\n  vec3 color = blue;\n\n  for(int i = 0; i < len; i++) {\n    vec3 ball = u_metaballs[i];\n    float dx = ball.x - coord.x;\n    float dy = ball.y - coord.y;\n    float r = ball.z;\n    velocity += r * r / (dx * dx + dy * dy);\n\n    if(velocity > 1.0) {\n      float distanceFromRadius = abs(distance(coord.xy, ball.xy));\n      float scaledDistance = distanceFromRadius / r;\n\n      color.r = 2.9 - scaledDistance;\n      color.gb = pink.gb;\n      break;\n    }\n  }\n  gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 v_position;\nattribute vec2 a_position;\nuniform float u_time;\n\nvoid main(void) {\n  gl_PointSize = 2.0;\n  v_position = a_position;\n\n  vec2 pos;\n  pos.x = a_position.x * mod(cos(u_time + length(a_position)), 1.0);\n  pos.y = a_position.y * mod(sin(u_time + length(a_position)), 1.0);\n\n  float posVel = 25.0;\n  float ct = 5.0 + cos(pos.x * posVel) + cos(pos.y * posVel);\n  mat2 transform = mat2(cos(pos.x * ct), sin(pos.x * ct), sin(pos.y * ct), cos(pos.y * ct));\n  pos = transform * pos;\n\n  gl_Position = vec4(pos, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 v_position;\nuniform float u_time;\n\nvoid main() {\n  float gChannel = v_position.y * abs(sin(u_time));\n  gl_FragColor = vec4(v_position.x, gChannel, 1.0, 0.1);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform float u_time;\n\nvec3 yellow = vec3(0.93, 0.86, 0.78);\nvec3 coral = vec3(1.0, 0.38, 0.5);\n\nfloat mapRange(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (newMax - newMin) * (value - oldMin) / (oldMax - oldMin);\n}\n\nfloat smin(float a, float b, float k ) {\n    float h = clamp( 0.5+0.5*(b-a)/k, 0.0, 1.0 );\n    return mix( b, a, h ) - k*h*(1.0-h);\n}\n\nfloat distanceField(vec2 pos, float radius, vec2 origin) {\n   \tfloat d1 = length(pos - origin) - radius;\n    float d2 = length(pos + origin) - radius;\n    float d3 = length(pos - origin.yx) - radius;\n    float d4 = length(pos + origin.yx) - radius;\n\n    float mappedPos = mapRange(pos.x, -1.0, 1.0, 0.1, 0.7); // decrease color channel range\n    float minDist = smin(d1, d2, 0.25);\n\n    return  minDist < 0.0 ? mappedPos : 1.0 - mappedPos;\n}\n\nvoid main() {\n\tvec2 pos = (2.0 * gl_FragCoord.xy - u_resolution.xy) / u_resolution.y;\n\n  float radius = 0.3;\n  vec2 origin;\n\n  origin.x = sin(u_time) * 0.5;\n  origin.y = cos(u_time * 0.5) * 0.5;\n\n  float intensity = distanceField(pos, radius, origin);\n  vec3 color = vec3(intensity * coral);\n  gl_FragColor = vec4(color, 1.0);\n\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform float u_time;\n\n#define MTL_YLW             1.0\n#define MTL_BLUE            2.0\n\n#define MAX_MARCHING_STEPS  255\n#define MIN_DIST            0.0\n#define MAX_DIST            100.0\n#define EPSILON             0.0001\n\nfloat smin( float a, float b, float k ) {\n    float h = clamp( 0.5 + 0.5 * (b - a) / k, 0.0, 1.0 );\n    return mix(b, a, h) - k * h * (1.0 - h);\n}\n\nfloat add(float a, float b) {\n  return smin(a, b, 0.8);\n}\n\nfloat sdSphere(vec3 p, float s) {\n  return length(p) - s;\n}\n\nfloat sdTorus(vec3 p, vec2 t) {\n  vec2 q = vec2(length(p.xz) - t.x, p.y);\n  return length(q) - t.y;\n}\n\nvec3 distort(vec3 p) {\n    float c = cos(10.0 * p.y);\n    float s = sin(10.0 * p.y);\n    mat2  m = mat2(c, -s, s, c);\n    vec3  q = vec3(m * p.xz, p.y);\n    return q;\n}\n\nfloat sceneSDF(vec3 p) {\n  float timeFactor = 1.5;\n  vec3 pt = p, ps1 = p, ps2 = p;\n\n  ps1.y += sin(u_time * timeFactor);\n  ps1.x += sin(-u_time * timeFactor);\n\n  ps2.y += cos(u_time * timeFactor);\n  ps2.x += cos(u_time * timeFactor);\n\n  float torus = sdTorus(distort(pt), vec2(0.4, 0.1));\n  float sphereLeft = sdSphere(ps1, 0.15);\n  float sphereRight = sdSphere(ps2, 0.15);\n  return add(add(torus, sphereLeft), sphereRight);\n}\n\nfloat rayMarch(vec3 camera, vec3 dir, float start, float end) {\n    float depth = start;\n    for (int i = 0; i < MAX_MARCHING_STEPS; i++) {\n        float dist = sceneSDF(camera + depth * dir);\n        if (dist < EPSILON) return depth;\n        depth += dist;\n        if (depth >= end) return end;\n    }\n    return end;\n}\n\nvec3 rayDirection(float fov, vec2 uv) {\n  vec3 dir;\n  dir.xy = uv - u_resolution / 2.0;\n  dir.z = -(u_resolution.y / tan(radians(fov) / 2.0));\n\n  return normalize(dir);\n}\n\nvec3 estimateNormal(vec3 p) {\n    return normalize(vec3(\n        sceneSDF(vec3(p.x + EPSILON, p.y, p.z)) - sceneSDF(vec3(p.x - EPSILON, p.y, p.z)),\n        sceneSDF(vec3(p.x, p.y + EPSILON, p.z)) - sceneSDF(vec3(p.x, p.y - EPSILON, p.z)),\n        sceneSDF(vec3(p.x, p.y, p.z  + EPSILON)) - sceneSDF(vec3(p.x, p.y, p.z - EPSILON))\n    ));\n}\n\nvec3 phongContribForLight(vec3 kd, vec3 ks, float alpha, vec3 p, vec3 camera,\n                          vec3 lightPos, vec3 lightIntensity) {\n    vec3 N = estimateNormal(p);\n    vec3 L = normalize(lightPos - p);\n    vec3 V = normalize(camera - p);\n    vec3 R = normalize(reflect(-L, N));\n\n    float dotLN = dot(L, N);\n    float dotRV = dot(R, V);\n\n    if (dotLN < 0.0) return vec3(0.0, 0.0, 0.0);\n    if (dotRV < 0.0) return lightIntensity * (kd * dotLN);\n\n    return lightIntensity * (kd * dotLN + ks * pow(dotRV, alpha));\n}\n\nvec3 phongIllumination(vec3 ka, vec3 kd, vec3 ks, float alpha, vec3 p, vec3 camera) {\n    const vec3 ambientLight = 0.5 * vec3(1.0, 1.0, 1.0);\n    vec3 color = ambientLight * ka;\n\n    vec3 light1Intensity = vec3(0.4, 0.4, 0.4);\n    vec3 light1Pos = vec3(4.0, 2.0, 4.0);\n\n    vec3 light2Intensity = vec3(0.4, 0.4, 0.4);\n    vec3 light2Pos = vec3(2.0, 2.0, 2.0);\n\n    color += phongContribForLight(kd, ks, alpha, p, camera,\n                                  light1Pos,\n                                  light1Intensity);\n    color += phongContribForLight(kd, ks, alpha, p, camera,\n                                  light2Pos,\n                                  light2Intensity);\n    return color;\n}\n\nvoid main() {\n  vec3 bgColor = vec3(1.0, 0.6, 0.8);\n  vec3 dir = rayDirection(45.0, gl_FragCoord.xy);\n  vec3 camera = vec3(0.0, 0.0, 5.0);\n  float dist = rayMarch(camera, dir, MIN_DIST, MAX_DIST);\n\n  if (dist > MAX_DIST - EPSILON) {\n      gl_FragColor = vec4(bgColor, 1.0);\n      return;\n  }\n\n  vec3 p = camera + dist * dir;\n  vec3 ka = vec3(1.0, 1.0, 0.1);\n  vec3 kd = ka / 2.0;\n  vec3 ks = vec3(1.0, 1.0, 1.0);\n  float shininess = 9.0;\n  vec3 color = phongIllumination(ka, kd, ks, shininess, p, camera);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform float u_time;\n\n#define MAX_ITER\t40\n#define MIN_DIST\t0.0\n#define MAX_DIST\t10.0\n#define EPSILON\t\t0.001\n\nfloat udRoundBox( vec3 p, vec3 b, float r ) {\n  return length(max(abs(p) - b, 0.0)) - r;\n}\n\nfloat smin( float a, float b, float k ) {\n    float h = clamp( 0.5 + 0.5 * (b - a) / k, 0.0, 1.0 );\n    return mix( b, a, h ) - k * h * (1.0 - h);\n}\n\nmat2 rotate(float angle) {\n    return mat2(\n      vec3(cos(angle), -sin(angle), 0.0),\n      vec3(sin(angle), cos(angle), 0.0)\n    );\n}\n\nfloat repeat(float axis, float n) {\n  return mod(axis, n) - n * 0.5;\n}\n\nfloat sceneSDF(vec3 p) {\n    vec3 qLeft = p;\n    vec3 qRight = p;\n\n    float rotationDeg = 15.0;\n\n    qLeft.xy = p.xy * rotate(rotationDeg);\n    qRight.xy = p.xy * rotate(-rotationDeg);\n\n    vec3 dimmensions = vec3(0.4, 1.5, 1.0);\n    float rounding = 0.1;\n    float boxLeft = udRoundBox(qLeft, dimmensions, rounding);\n    float boxRight = udRoundBox(qRight, dimmensions, rounding);\n    return smin(boxLeft, boxRight, 0.1);\n}\n\nvec3 estimateNormal(vec3 p) {\n  vec2 eps = vec2(0.0, EPSILON);\n  return normalize(vec3(\n        sceneSDF(p + eps.yxx) - sceneSDF(p - eps.yxx),\n        sceneSDF(p + eps.xyx) - sceneSDF(p - eps.xyx),\n        sceneSDF(p + eps.xxy) - sceneSDF(p - eps.xxy)));\n}\n\nvec3 toonIllunination(float intensity) {\n  vec3 toonMap;\n  if (intensity < 0.256) {\n      toonMap = vec3(0.195);\n  } else if (intensity < 0.781) {\n      toonMap = vec3(0.781);\n  } else {\n      toonMap = vec3(0.900);\n  }\n  return toonMap;\n}\n\nvec4 colorObject(vec3 p, vec3 rayDir) {\n  vec3 normal = estimateNormal(p);\n\n\tfloat diffuse = max(0.0, dot(-rayDir, normal));\n\tfloat specular = pow(diffuse, 128.0);\n  vec3 lighting = toonIllunination(diffuse + specular);\n\n  return vec4(lighting, 1.0);\n}\n\nvec4 colorBG() {\n  return vec4(0.5, 0.7, 0.7, 1.0);\n}\n\nvec4 rayMarch(vec3 camera, vec3 rayDir) {\n  float totalDist = 0.0;\n  vec3 p = camera;\n  float dist = EPSILON;\n\n  for (int i = 0; i < MAX_ITER; i++) {\n      if (dist < EPSILON) break;\n      dist = sceneSDF(p);\n      p += dist * rayDir;\n  }\n\n  if(dist < EPSILON) {\n    return colorObject(p, rayDir);\n  } else {\n    return colorBG();\n  }\n}\n\nvoid main() {\n  vec3 camera\t= vec3(1.0 + cos(u_time) * 2.0, 3.5 + sin( u_time), 3.5);\n  vec3 target\t= vec3(0.0, 0.0, 0.0);\n\n  vec3 upDir\t\t= vec3(0.0, 1.0, 0.0);\n\n  vec3 camDir\t\t= normalize(target - camera);\n  vec3 camRight\t= normalize(cross(upDir, camera));\n  vec3 camUp\t\t= cross(camDir, camRight);\n\n  vec2 uv =  gl_FragCoord.xy / u_resolution.xy * 2.0 - 1.0;\n  uv.x *= u_resolution.x / u_resolution.y;\n\n  vec3 rayDir = normalize(camRight * uv.x + camUp * uv.y + camDir);\n\n  vec4 color = rayMarch(camera, rayDir);\n  gl_FragColor = color;\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n   vec2 uv = a_position / u_resolution;\n\n   // convert from 0->1 to 0->2\n   uv *= 2.0;\n\n   // convert from 0->2 to -1->+1 (clipspace)\n   vec2 clipSpace = uv - 1.0;\n   clipSpace *= vec2(1.0, -1.0);\n\n   gl_Position = vec4(clipSpace, 0, 1);\n   v_texCoord = a_texCoord;\n}\n"},function(e,t){e.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\n\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\n\nconst float fdelta = 2.0;\nconst float fhalf = 1.0;\n\nvec4 toonShade(float lum) {\n  vec4 color = vec4(0.9, 0.9, 1.0, 1.0);\n  if(lum < 1.0) {\n    if(mod(gl_FragCoord.x + gl_FragCoord.y, fdelta) == 0.0) {\n      color = vec4(1.0, 0.7, 0.7, 1.0);\n    }\n  }\n  if(lum < 0.75) {\n    if(mod(gl_FragCoord.x - gl_FragCoord.y, fdelta) == 0.0) {\n      color = vec4(1.0, 0.5, 0.5, 1.0);\n    }\n  }\n  if(lum < 0.5) {\n    if(mod(gl_FragCoord.x + gl_FragCoord.y - fhalf, fdelta) == 0.0) {\n      color = vec4(1.0, 0.3, 0.3, 1.0);\n    }\n  }\n  if(lum < 0.25) {\n    if(mod(gl_FragCoord.x - gl_FragCoord.y - fhalf, fdelta) == 0.0) {\n      color = vec4(1.0, 0.0, 0.0, 1.0);\n    }\n\n  }\n  return color;\n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / u_resolution;\n  vec2 uv_mouse = u_mouse / u_resolution;\n  uv_mouse.y = 1.0 - uv_mouse.y; // flip axis\n\n  float radar = length(vec2(0.5) - 0.2);\n\n  vec4 bgTexture = texture2D(u_image0, v_texCoord);\n  vec4 fgTexture = texture2D(u_image1, v_texCoord);\n\n  float lum = length(bgTexture.rgb);\n  vec4 color = toonShade(lum);\n\n  if(uv_mouse.x > uv.x) {\n    color = 1.0 - color;\n  }\n  \n  // see batman symbol\n  // if(uv_mouse.x > uv.x) {\n  //   if(fgTexture.a < 0.5) {\n  //     color = 1.0 - color;\n  //   }\n  // } else {\n  //   if(fgTexture.a > 0.5) {\n  //     color = 1.0 - color;\n  //   }\n  // }\n\n  gl_FragColor = vec4(color.rgb, 1.0);\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nattribute vec4 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_displacement;\nuniform bool u_should_explode;\n\nvarying vec3  v_normal;\n\nconst float PI = 3.14159;\n\nfloat sineInOut(const float t) {\n  float t_normal = cos(PI * t);\n  if(t_normal > 0.94) {\n    return 0.0;\n  } else {\n    return -0.5 * (t_normal - 1.0);\n  }\n}\n\nvoid main () {\n   v_normal = normal;\n   float dist = u_displacement;\n   float offsetFactor = 1.2;\n\n   vec4 offset = position;\n   offset.xyz += normal * dist * offsetFactor;\n\n  if(u_should_explode) {\n    offset.xyz += normal * dist * offsetFactor;\n  }\n  gl_Position = projectionMatrix * modelViewMatrix * offset;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvarying vec3 v_normal;\n\nuniform bool u_should_explode;\n\nvoid main () {\n  gl_FragColor = vec4(v_normal.rrr, 0.9);\n}\n"},function(e,t,n){e.exports=function(){"use strict";var e=function(){var t=0,n=document.createElement("div");function i(e){return n.appendChild(e.dom),e}function r(e){for(var i=0;i<n.children.length;i++)n.children[i].style.display=i===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(e){e.preventDefault(),r(++t%n.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,c=i(new e.Panel("FPS","#0ff","#002")),l=i(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=i(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:n,addPanel:i,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-o,200),a+1e3<=e&&(c.update(1e3*s/(e-a),100),a=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:n,setMode:r}};return e.Panel=function(e,t,n){var i=1/0,r=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,c=48*a,l=3*a,u=2*a,h=3*a,d=15*a,p=74*a,f=30*a,m=document.createElement("canvas");m.width=s,m.height=c,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,c),g.fillStyle=t,g.fillText(e,l,u),g.fillRect(h,d,p,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,d,p,f),{dom:m,update:function(c,v){i=Math.min(i,c),r=Math.max(r,c),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,d),g.fillStyle=t,g.fillText(o(c)+" "+e+" ("+o(i)+"-"+o(r)+")",l,u),g.drawImage(m,h+a,d,p-a,f,h,d,p-a,f),g.fillRect(h+p-a,d,a,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+p-a,d,a,o((1-c/v)*f))}}},e}()},function(e,t){e.exports=function(e){function t(t,n){var i,r,o,a,s;this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(l),c.update(),p=d.NONE},this.update=(i=new e.Vector3,r=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),o=r.clone().inverse(),a=new e.Vector3,s=new e.Quaternion,function(){var e=c.object.position;return i.copy(e).sub(c.target),i.applyQuaternion(r),m.setFromVector3(i),c.autoRotate&&p===d.NONE&&L(2*Math.PI/60/60*c.autoRotateSpeed),m.theta+=g.theta,m.phi+=g.phi,m.theta=Math.max(c.minAzimuthAngle,Math.min(c.maxAzimuthAngle,m.theta)),m.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(c.minDistance,Math.min(c.maxDistance,m.radius)),c.target.add(y),i.setFromSpherical(m),i.applyQuaternion(o),e.copy(c.target).add(i),c.object.lookAt(c.target),!0===c.enableDamping?(g.theta*=1-c.dampingFactor,g.phi*=1-c.dampingFactor):g.set(0,0,0),v=1,y.set(0,0,0),!!(x||a.distanceToSquared(c.object.position)>f||8*(1-s.dot(c.object.quaternion))>f)&&(c.dispatchEvent(l),a.copy(c.object.position),s.copy(c.object.quaternion),x=!1,!0)}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",q,!1),c.domElement.removeEventListener("mousedown",z,!1),c.domElement.removeEventListener("wheel",j,!1),c.domElement.removeEventListener("touchstart",G,!1),c.domElement.removeEventListener("touchend",W,!1),c.domElement.removeEventListener("touchmove",V,!1),document.removeEventListener("mousemove",B,!1),document.removeEventListener("mouseup",U,!1),window.removeEventListener("keydown",H,!1)};var c=this,l={type:"change"},u={type:"start"},h={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},p=d.NONE,f=1e-6,m=new e.Spherical,g=new e.Spherical,v=1,y=new e.Vector3,x=!1,b=new e.Vector2,w=new e.Vector2,_=new e.Vector2,S=new e.Vector2,M=new e.Vector2,T=new e.Vector2,E=new e.Vector2,A=new e.Vector2,C=new e.Vector2;function R(){return Math.pow(.95,c.zoomSpeed)}function L(e){g.theta-=e}function P(e){g.phi-=e}var O,N=(O=new e.Vector3,function(e,t){O.setFromMatrixColumn(t,0),O.multiplyScalar(-e),y.add(O)}),k=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),y.add(t)}}(),I=function(){var t=new e.Vector3;return function(n,i){var r=c.domElement===document?c.domElement.body:c.domElement;if(c.object instanceof e.PerspectiveCamera){var o=c.object.position;t.copy(o).sub(c.target);var a=t.length();a*=Math.tan(c.object.fov/2*Math.PI/180),N(2*n*a/r.clientHeight,c.object.matrix),k(2*i*a/r.clientHeight,c.object.matrix)}else c.object instanceof e.OrthographicCamera?(N(n*(c.object.right-c.object.left)/c.object.zoom/r.clientWidth,c.object.matrix),k(i*(c.object.top-c.object.bottom)/c.object.zoom/r.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function D(t){c.object instanceof e.PerspectiveCamera?v/=t:c.object instanceof e.OrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*t)),c.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function F(t){c.object instanceof e.PerspectiveCamera?v*=t:c.object instanceof e.OrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/t)),c.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function z(e){if(!1!==c.enabled){if(e.preventDefault(),e.button===c.mouseButtons.ORBIT){if(!1===c.enableRotate)return;!function(e){b.set(e.clientX,e.clientY)}(e),p=d.ROTATE}else if(e.button===c.mouseButtons.ZOOM){if(!1===c.enableZoom)return;!function(e){E.set(e.clientX,e.clientY)}(e),p=d.DOLLY}else if(e.button===c.mouseButtons.PAN){if(!1===c.enablePan)return;!function(e){S.set(e.clientX,e.clientY)}(e),p=d.PAN}p!==d.NONE&&(document.addEventListener("mousemove",B,!1),document.addEventListener("mouseup",U,!1),c.dispatchEvent(u))}}function B(e){if(!1!==c.enabled)if(e.preventDefault(),p===d.ROTATE){if(!1===c.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),_.subVectors(w,b);var t=c.domElement===document?c.domElement.body:c.domElement;L(2*Math.PI*_.x/t.clientWidth*c.rotateSpeed),P(2*Math.PI*_.y/t.clientHeight*c.rotateSpeed),b.copy(w),c.update()}(e)}else if(p===d.DOLLY){if(!1===c.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),C.subVectors(A,E),C.y>0?D(R()):C.y<0&&F(R()),E.copy(A),c.update()}(e)}else if(p===d.PAN){if(!1===c.enablePan)return;!function(e){M.set(e.clientX,e.clientY),T.subVectors(M,S),I(T.x,T.y),S.copy(M),c.update()}(e)}}function U(e){!1!==c.enabled&&(document.removeEventListener("mousemove",B,!1),document.removeEventListener("mouseup",U,!1),c.dispatchEvent(h),p=d.NONE)}function j(e){!1===c.enabled||!1===c.enableZoom||p!==d.NONE&&p!==d.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?F(R()):e.deltaY>0&&D(R()),c.update()}(e),c.dispatchEvent(u),c.dispatchEvent(h))}function H(e){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(e){switch(e.keyCode){case c.keys.UP:I(0,c.keyPanSpeed),c.update();break;case c.keys.BOTTOM:I(0,-c.keyPanSpeed),c.update();break;case c.keys.LEFT:I(c.keyPanSpeed,0),c.update();break;case c.keys.RIGHT:I(-c.keyPanSpeed,0),c.update()}}(e)}function G(e){if(!1!==c.enabled){switch(e.touches.length){case 1:if(!1===c.enableRotate)return;!function(e){b.set(e.touches[0].pageX,e.touches[0].pageY)}(e),p=d.TOUCH_ROTATE;break;case 2:if(!1===c.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);E.set(0,i)}(e),p=d.TOUCH_DOLLY;break;case 3:if(!1===c.enablePan)return;!function(e){S.set(e.touches[0].pageX,e.touches[0].pageY)}(e),p=d.TOUCH_PAN;break;default:p=d.NONE}p!==d.NONE&&c.dispatchEvent(u)}}function V(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===c.enableRotate)return;if(p!==d.TOUCH_ROTATE)return;!function(e){w.set(e.touches[0].pageX,e.touches[0].pageY),_.subVectors(w,b);var t=c.domElement===document?c.domElement.body:c.domElement;L(2*Math.PI*_.x/t.clientWidth*c.rotateSpeed),P(2*Math.PI*_.y/t.clientHeight*c.rotateSpeed),b.copy(w),c.update()}(e);break;case 2:if(!1===c.enableZoom)return;if(p!==d.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);A.set(0,i),C.subVectors(A,E),C.y>0?F(R()):C.y<0&&D(R()),E.copy(A),c.update()}(e);break;case 3:if(!1===c.enablePan)return;if(p!==d.TOUCH_PAN)return;!function(e){M.set(e.touches[0].pageX,e.touches[0].pageY),T.subVectors(M,S),I(T.x,T.y),S.copy(M),c.update()}(e);break;default:p=d.NONE}}function W(e){!1!==c.enabled&&(c.dispatchEvent(h),p=d.NONE)}function q(e){e.preventDefault()}c.domElement.addEventListener("contextmenu",q,!1),c.domElement.addEventListener("mousedown",z,!1),c.domElement.addEventListener("wheel",j,!1),c.domElement.addEventListener("touchstart",G,!1),c.domElement.addEventListener("touchend",W,!1),c.domElement.addEventListener("touchmove",V,!1),window.addEventListener("keydown",H,!1),this.update()}return t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t,Object.defineProperties(t.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t}},function(e,t){e.exports="#define GLSLIFY 1\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float uTime;\nuniform float uFreq;\n\nattribute vec4 position;\nattribute vec3 normal;\n\nvoid main () {\n  vec4 offset = position;\n  float dist = sin(uTime) * 0.5 + 0.5;\n  offset.xyz += normal * dist;\n  gl_Position = projectionMatrix * modelViewMatrix * offset;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float uTime;\nuniform float uFreq;\n\nfloat map(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvoid main () {\n  // gl_FragColor = vec4(1.0, 0.4, 0.3, 0.9);\n  // gl_FragColor = vec4(1, 0.6, 0.8, 0.9);\n  vec4 color;\n  color.rgba = vec4(1, 0.5, 0.4, 0.9);\n  color.r = map(uFreq, 0.0, 255.0, 0.2, 1.0);\n  color.b = map(uFreq, 0.0, 255.0, 0.5, 0.8);\n  color.g = map(uFreq, 0.0, 255.0, 0.2, 0.7);\n  gl_FragColor = color;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform vec3 uNoise;\nuniform float uTime;\nuniform float uAmp;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nvoid main () {\n  float dist = distance(uv.x, 0.5);\n  float noiseFactor = 1.0 - remap(dist, 0.0, 0.5, 0.0, 1.0);\n  float displacement = uAmp * snoise(vec3(position * uNoise * 0.06) + uTime * 0.5 );\n  vec3 newPosition = position + normal * (displacement * noiseFactor);\n\n  vNormal = normal;\n  vPosition = newPosition;\n  vUv = uv;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\nuniform vec3 uColor;\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nvoid main() {\n    float zDistance = 1.0 - vPosition.z;\n    vec3 shadow = uColor * 0.4;\n    vec3 white = vec3(\n        remap(zDistance, -1.0, 1.0, shadow.r, uColor.r),\n        remap(zDistance, -1.0, 1.0, shadow.g, uColor.g),\n        remap(zDistance, -1.0, 1.0, shadow.b, uColor.b)\n    );\n\n    // gl_FragColor = vec4(1.0, 0.75, 0.8, 1.0);\n    gl_FragColor = vec4(white, 1.0);\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nfloat fbm3d(vec3 x, const in int it) {\n    float v = 0.0;\n    float a = 0.5;\n    vec3 shift = vec3(100);\n\n    \n    for (int i = 0; i < 32; ++i) {\n        if(i<it) {\n            v += a * snoise(x);\n            x = x * 2.0 + shift;\n            a *= 0.5;\n        }\n    }\n    return v;\n}\n\nvec4 gammaCorrect(vec4 color, float gamma){\n  return pow(color, vec4(1.0 / gamma));\n}\n\nvec4 levelRange(vec4 color, float minInput, float maxInput){\n  return min(max(color - vec4(minInput), vec4(0.0)) / (vec4(maxInput) - vec4(minInput)), vec4(1.0));\n}\n\nvec4 levels(vec4 color, float minInput, float gamma, float maxInput){\n  return gammaCorrect(levelRange(color, minInput, maxInput), gamma);\n}\n\nuniform sampler2D uTxtShape;\nuniform sampler2D uTxtCloudNoise;\nuniform float uTime;\n\nuniform float uFac1;\nuniform float uFac2;\nuniform float uTimeFactor1;\nuniform float uTimeFactor2;\nuniform float uDisplStrenght1;\nuniform float uDisplStrenght2;\n\nvarying vec2 vUv;\n\nvoid main() {\n    vec2 newUv = vUv;\n\n    vec4 txtNoise1 = texture2D(uTxtCloudNoise, vec2(vUv.x + uTime * 0.1, vUv.y - uTime * 0.14));\n    vec4 txtNoise2 = texture2D(uTxtCloudNoise, vec2(vUv.x - uTime * 0.02, vUv.y + uTime * 0.17 + 0.2));\n\n    float noiseBig = fbm3d(vec3(vUv * uFac1, uTime * uTimeFactor1), 3);\n    newUv += noiseBig * uDisplStrenght1;\n\n    float noiseSmall = snoise(vec3(newUv * uFac2, uTime * uTimeFactor2));\n\n    newUv += noiseSmall * uDisplStrenght2;\n\n    vec4 txtShape = texture2D(uTxtShape, newUv);\n\n    float alpha = levels((txtNoise1 + txtNoise2) * 0.6, 0.2, 0.4, 0.7).r;\n    alpha *= txtShape.r;\n\n    gl_FragColor = vec4(vec3(0.85, 0.8, 1.0), alpha);\n    // gl_FragColor = vec4(vec3(alpha, 0.0, 0.0), 1.0);\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvarying vec2 vUv;\n\nvoid main() {\n\t// #include <uv_vertex>\n  vUv = uv;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvoid main() {\n    gl_FragColor = vec4(1.0, 0.75, 0.8, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main () {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t){e.exports='precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture_a;\nuniform sampler2D u_texture_b;\nuniform float u_time;\nuniform float u_mix_value;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nfloat rand(vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);\n}\n\n//\n// GLSL textureless classic 2D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec2 P)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod289(Pi); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute(permute(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\nvoid main() {\n    float zDistance = 1.0 - vPosition.z;\n    vec3 white = vec3(\n        remap(zDistance, -1.0, 1.0, 0.7, 0.9),\n        remap(zDistance, -1.0, 1.0, 0.7, 0.9),\n        remap(zDistance, -1.0, 1.0, 0.7, 0.9)\n    );\n    vec4 color = vec4(white, 1.0);\n\n    vec4 tA = texture2D(u_texture_a, vUv);\n    vec4 tB = texture2D(u_texture_b, vUv);\n    vec4 texture = mix(tA, tB, u_mix_value);\n\n    bool isWhite = texture.r > 0.95 && texture.g > 0.9 && texture.b > 0.9;\n\n    // to account for white spots in the character\n    bool isInCharacterZone = vUv.x < 0.41 || vUv.x > 0.6 || vUv.y > 0.7;\n    if(isInCharacterZone && isWhite) {\n        color.a = 0.0;\n        texture.a = 0.0;\n    }\n\n    gl_FragColor = texture * color;\n}\n'},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_time;\nuniform float u_amp;\nuniform vec3 u_noise;\n\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nvoid main () {\n  float displacement = u_amp * snoise(vec3(position * u_noise * 0.06) + u_time );\n  vec3 newPosition = position + normal * displacement;\n\n  vNormal = normal;\n  vPosition = newPosition;\n  vUv = uv;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D diffuseTexture;\nvarying vec2 vAngle;\nvarying float vAlpha;\nvarying float vFreq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, vFreq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - vFreq);\n}\n\n// https://youtu.be/a8h1BTe45AU?t=88\nvoid main() {\n    vec2 coords = (gl_PointCoord - 0.5) * mat2(vAngle.x, vAngle.y, -vAngle.y, vAngle.x) + 0.5;\n    // blue\n    vec3 color = vec3(\n        reverseRemapFreq(0.1, 0.3),\n        0.25, \n        reverseRemapFreq(0.6, 1.0)\n    ); \n    \n    // gl_FragColor = texture2D(diffuseTexture, coords) * vec4(color, vAlpha);\n    float alpha = vAlpha * (1.0 - length(gl_PointCoord.xy)) * 1.3;\n    gl_FragColor = texture2D(diffuseTexture, coords) * vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float pointMultiplier;\n\nattribute vec3 position;\nattribute float size;\nattribute float angle;\nattribute float alpha;\nattribute float freq;\nattribute float yMin;\nattribute float yMax;\n\nvarying vec2 vAngle;\nvarying float vAlpha;\nvarying float vFreq;\nvarying float vYMin;\nvarying float vYMax;\n\nvoid main() {\n\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  gl_Position = projectionMatrix * mvPosition;\n  gl_PointSize = size * pointMultiplier / gl_Position.w;\n  vAngle = vec2(cos(angle), sin(angle));\n  vAlpha = alpha;\n  vFreq = freq;\n  vYMin = yMin;\n  vYMax = yMax;\n\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvarying float vFreq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, vFreq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - vFreq);\n}\n\nvoid main() {\n    vec3 color = vec3(\n        remapFreq(0.1, 1.0), \n        reverseRemapFreq(0.3, 0.4), \n        reverseRemapFreq(0.1, 1.0)\n    );\n\n    float alpha = remapFreq(0.0, 1.0);\n    float len = distance(vec2(0.5, 0.5), gl_PointCoord.xy);\n    if(len > 0.1) {\n        alpha = 0.0;\n    }\n    if(len > 0.08) {\n        color *= 1.2;\n    }\n\n    gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float uPointMultiplier;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute float freq;\n\nvarying vec4 vColor;\nvarying float vFreq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, freq);\n}\n\nvoid main() {\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  \n  gl_Position = projectionMatrix * mvPosition;\n  gl_PointSize = remapFreq(0.0, 2.0) * uPointMultiplier / gl_Position.w;\n\n  vColor = color;\n  vFreq = freq;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvarying float vAlpha;\nvarying float vFreq;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, vFreq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - vFreq);\n}\n\nvoid main() {\n    vec3 color = vec3(\n        remapFreq(0.0, 0.2),\n        remapFreq(0.0, 0.02),\n        remapFreq(0.0, 0.0)\n    ); \n\n    float len = distance(vec2(0.5, 0.5), gl_PointCoord.xy);\n    float alpha = remap(150.0, 210.0, 0.0, 1.0, vFreq);\n\n    if(len > 0.1) {\n        alpha = 0.0;\n    }\n    if(len > 0.08) {\n        color /= 1.5;\n    }\n\n    gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float uPointMultiplier;\n\nattribute vec3 position;\nattribute float alpha;\nattribute vec4 color;\nattribute float freq;\n\nvarying float vAlpha;\nvarying vec4 vColor;\nvarying float vFreq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, freq);\n}\n\nvoid main() {\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  \n  gl_Position = projectionMatrix * mvPosition;\n  gl_PointSize = remapFreq(0.0, 2.0) * uPointMultiplier / gl_Position.w;\n\n  vColor = color;\n  vAlpha = alpha;\n  vFreq = freq;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvarying vec3 vNormal;\nvarying vec3 vWorldPosition;\nvarying float vAlpha;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\nuniform vec3 spotPosition;\nuniform float freq;\nuniform float attenuation;\nuniform float anglePower;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n  return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n  return remap(0.0, 255.0, min, max, freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n  return remap(0.0, 255.0, min, max, 255.0 - freq);\n}\n\nvoid main() {\n  float intensity;\n\n  intensity\t= distance(vWorldPosition, spotPosition)/attenuation;\n  intensity\t= 1.0 - clamp(intensity, 0.0, 1.0);\n\n  vec3 normal\t= vec3(vNormal.x, vNormal.y, abs(vNormal.z));\n  float angleIntensity\t= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );\n  intensity\t= intensity * angleIntensity;\n\n  vec3 lightColor = vec3(\n    1.0,\n    reverseRemapFreq(0.7, 1.0),\n    reverseRemapFreq(0.7, 1.0)\n    );\n\n  gl_FragColor\t= vec4( lightColor, intensity * remapFreq(0.0, 1.0));\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute float alpha;\n\nvarying vec3 vNormal;\nvarying vec3 vWorldPosition;\n\nvarying float vAlpha;\nvarying vec3 vPosition;\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position\t= projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n  vNormal\t\t= normalize( normalMatrix * normal );\n  vec4 worldPosition\t= modelMatrix * vec4( position, 1.0 );\n  vWorldPosition\t\t= worldPosition.xyz;\n  vAlpha = alpha;\n  vPosition = position;\n  vUv = uv;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_time;\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    vec3 color = vec3(0.0, 0.0, 0.0);\n\n    if(u_freq > 200.0) {\n        color.r = remapFreq(0.5, 0.7);\n        color.g = remapFreq(0.5, 0.7);\n        color.b = remapFreq(0.5, 1.0);\n    } else {\n        color.r = remapFreq(0.0, 0.6);\n        color.g = remapFreq(0.0, 0.6);\n        color.b = remapFreq(0.0, 0.6);\n    }\n\n    float alpha = remapFreq(0.0, 1.0);\n    gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_time;\nuniform vec3 u_rotate_speed;\nuniform vec3 u_translate_speed;\nuniform float u_angle;\nuniform float u_radius;\n\nconst float DEG_TO_RAD = 3.141592653589793 / 180.0;\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nmat3 rotate() {\n    float rad = u_time * DEG_TO_RAD;\n    return rotateX(rad * u_rotate_speed.x) *\n            rotateY(rad * u_rotate_speed.y) *\n            rotateZ(rad * u_rotate_speed.z);\n}\n\nvec3 translate() {\n    vec3 centerCoord = vec3(0.0, 0.0, 0.0);\n    return vec3(\n        centerCoord.x + u_radius * sin(u_angle),\n        centerCoord.y + u_radius * cos(u_angle),\n        centerCoord.z\n\n    );\n}\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nbool isInBounds(vec3 pos) {\n    vec3 bounds = vec3(100.0, 100.0, 100.0);\n    return abs(pos.x) < bounds.x &&\n            abs(pos.y) < bounds.y &&\n            abs(pos.z) < bounds.z;\n}\n\nvoid main () {\n    vec3 pos = position;\n    pos *= rotate();\n    pos += translate();\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    float colorFactor = 0.7;\n    vec3 color = vec3(0.0, 0.0, 1.0);\n\n    float alpha = 1.0;\n\n    if(u_freq > 240.0) {\n        color.r = reverseRemapFreq(0.4, 0.8);\n        color.g = reverseRemapFreq(0.4, 0.8);\n        color.b = reverseRemapFreq(0.6, 1.0);\n        alpha = remapFreq(0.1, 0.6);\n\n    } else if(u_freq > 200.0) {\n        color.r = reverseRemapFreq(0.4, 1.0);\n        color.g = reverseRemapFreq(0.4, 1.0);\n        color.b = reverseRemapFreq(0.6, 1.0);\n        alpha = remapFreq(0.1, 0.8);\n    } else {\n        color.r = reverseRemapFreq(0.4, 1.0) ;\n        color.g = reverseRemapFreq(0.4, 1.0) ;\n        color.b = reverseRemapFreq(0.4, 1.0);\n        alpha = remapFreq(0.1, 1.0);\n    }\n\n    gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_freq;\nuniform float u_radius;\nuniform float u_angle;\nuniform float u_time;\n\nconst float DEG_TO_RAD = 3.141592653589793 / 180.0;\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nvec3 translate() {\n    vec3 centerCoord = vec3(0.0, 0.0, 0.0);\n    return vec3(\n        centerCoord.x + u_radius * sin(u_angle),\n        centerCoord.y,\n        centerCoord.z + u_radius * cos(u_angle)\n    );\n}\n\nvoid main () {\n\n  vec3 pos = position;\n\n  pos += translate();\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\nuniform sampler2D u_texture;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    vec4 texture = texture2D(u_texture, gl_PointCoord);\n    vec4 color = vec4(0.0, 1.0, 1.0, 1.0);\n    color.r = reverseRemapFreq(0.0, 0.7);\n    color.g = remapFreq(0.0, 0.7);\n    color.b = remapFreq(0.0, 0.7);\n    color.a = 0.0;\n\n    gl_FragColor = vec4(color.rgb * texture.rgb, color.a);\n    if(texture.a < 0.1) discard;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_time;\nuniform float u_freq;\nuniform vec3 u_translate_speed;\nuniform float u_max_screen_dimension;\nuniform float u_min_size;\nuniform float u_max_size;\n\nconst float DEG_TO_RAD = 3.141592653589793 / 180.0;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvec3 translate() {\n  return vec3(\n    position.x + sin(u_time) * u_translate_speed.x,\n    position.y + sin(u_time) * u_translate_speed.y,\n    position.z + sin(u_time) * u_translate_speed.z\n  );\n}\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nmat3 rotate() {\n  vec3 u_rotate_speed = vec3(10.0, 0.1, 2.0);\n    float rad = u_time * DEG_TO_RAD;\n    return rotateX(rad * u_rotate_speed.x) *\n            rotateY(rad * u_rotate_speed.y) *\n            rotateZ(rad * u_rotate_speed.z);\n}\n\nvoid main () {\n  vec3 pos = position;\n  pos *= rotate();\n  pos += translate();\n\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  float size = remapFreq(u_min_size, u_max_size);\n  gl_PointSize = size * (300.0 / -mvPosition.z);\n  gl_Position = projectionMatrix * mvPosition;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_freq;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nfloat reverseRemapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, 255.0 - u_freq);\n}\n\nvoid main() {\n    vec3 color = vec3(0.0, 0.0, 1.0);\n    color.r = remapFreq(0.2, 1.0);\n    color.g = remapFreq(0.2, 1.0);\n    color.b = remapFreq(0.2, 1.0);\n\n    float alpha = remapFreq(0.7, 1.0);\n\n    gl_FragColor = vec4(color, alpha);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_freq;\nuniform float u_time;\nuniform float u_radius;\nuniform float u_angle;\nuniform vec3 u_rotate_speed;\nuniform vec3 u_translate_speed;\nuniform vec3 u_rotation;\nuniform float u_position_z;\n\nfloat remap(float min1, float max1, float min2, float max2, float value) {\n    return min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n}\n\nfloat remapFreq(float min, float max) {\n    return remap(0.0, 255.0, min, max, u_freq);\n}\n\nmat3 rotateX(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        1.0, 0.0, 0.0,\n        0.0, c, s,\n        0.0, -s, c\n    );\n}\n\nmat3 rotateY(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, 0.0, -s,\n        0.0, 1.0, 0.0,\n        s, 0.0, c\n    );\n}\n\nmat3 rotateZ(float rad) {\n    float c = cos(rad);\n    float s = sin(rad);\n    return mat3(\n        c, s, 0.0,\n        -s, c, 0.0,\n        0.0, 0.0, 1.0\n    );\n}\n\nmat3 rotate() {\n    return rotateX(u_rotation.x) *\n            rotateY(u_rotation.y) *\n            rotateZ(u_rotation.z);\n}\n\nmat3 scale() {\n    float scale = remapFreq(0.1, 1.0);\n    return mat3(\n        scale, 0.0, 0.0,\n        0.0, scale, 0.0,\n        0.0, 0.0, scale\n    );\n}\n\nvec3 translate() {\n    vec3 centerCoord = vec3(0.0, 0.0, 0.0);\n    return vec3(\n        centerCoord.x + u_radius * sin(u_angle),\n        centerCoord.y + u_radius * cos(u_angle),\n        u_position_z\n    );\n}\n\nvoid main () {\n    vec3 pos = position;\n    pos *= rotate();\n    pos *= scale();\n    pos += translate();\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float uFreq;\n\nfloat remap(float value, float oldMin, float oldMax, float newMin, float newMax) {\n    return newMin + (value - oldMin) * (newMax - newMin) / (oldMax - oldMin);\n}\n\nfloat remapFreq(float freq, float min, float max) {\n  return remap(freq, 0.0, 255.0, min, max);\n}\n\nvoid main() {\n  vec3 baseColor = vec3(0.6, 0.6, 0.6);\n  vec3 color = baseColor;\n  color.r = remapFreq(uFreq, 0.0, baseColor.r);\n  color.g = remapFreq(uFreq, 0.0, baseColor.g);\n  color.b = remapFreq(uFreq, 0.0, baseColor.b);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main () {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},function(e,t,n){"use strict";var i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,r=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.a=r},function(e,t,n){"use strict";function i(e){return Object.prototype.toString.call(e).slice(8,-1)}function r(e){return"Undefined"===i(e)}function o(e){return"Null"===i(e)}function a(e){return"Object"===i(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function s(e){return"Array"===i(e)}function c(e){return"Symbol"===i(e)}var l,u,h,d,p;l=o,u=r;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function f(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function m(e,t,n,i){var r=i.propertyIsEnumerable(t)?"enumerable":"nonenumerable";"enumerable"===r&&(e[t]=n),"nonenumerable"===r&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}function g(e,t,n){if(!a(t))return n&&s(n)&&n.forEach((function(n){t=n(e,t)})),t;var i={};a(e)&&(i=f(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)).reduce((function(n,i){var r=e[i];return(!c(i)&&!Object.getOwnPropertyNames(t).includes(i)||c(i)&&!Object.getOwnPropertySymbols(t).includes(i))&&m(n,i,r,e),n}),{}));return f(Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)).reduce((function(i,r){var o=t[r],c=a(e)?e[r]:void 0;return n&&s(n)&&n.forEach((function(e){o=e(c,o)})),void 0!==c&&a(o)&&(o=g(c,o,n)),m(i,r,o,t),i}),i)}t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=null,r=e;return a(e)&&e.extensions&&1===Object.keys(e).length&&(r={},i=e.extensions),t.reduce((function(e,t){return g(e,t,i)}),r)}},function(e,t,n){"use strict";
/** @license React v17.0.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(0),r=n(21),o=n(74);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(a(227));var s=new Set,c={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(c[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function g(e,t,n,i,r,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=v.hasOwnProperty(t)?v[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!p.call(m,e)||!p.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,x);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,x);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,x);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,S=60106,M=60107,T=60108,E=60114,A=60109,C=60110,R=60112,L=60113,P=60120,O=60115,N=60116,k=60121,I=60128,D=60129,F=60130,z=60131;if("function"==typeof Symbol&&Symbol.for){var B=Symbol.for;_=B("react.element"),S=B("react.portal"),M=B("react.fragment"),T=B("react.strict_mode"),E=B("react.profiler"),A=B("react.provider"),C=B("react.context"),R=B("react.forward_ref"),L=B("react.suspense"),P=B("react.suspense_list"),O=B("react.memo"),N=B("react.lazy"),k=B("react.block"),B("react.scope"),I=B("react.opaque.id"),D=B("react.debug_trace_mode"),F=B("react.offscreen"),z=B("react.legacy_hidden")}var U,j="function"==typeof Symbol&&Symbol.iterator;function H(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=j&&e[j]||e["@@iterator"])?e:null}function G(e){if(void 0===U)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var V=!1;function W(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var i=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){i=e}e.call(t.prototype)}else{try{throw Error()}catch(e){i=e}e()}}catch(e){if(e&&i&&"string"==typeof e.stack){for(var r=e.stack.split("\n"),o=i.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s])return"\n"+r[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?G(e):""}function q(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function J(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case M:return"Fragment";case S:return"Portal";case E:return"Profiler";case T:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return J(e.type);case k:return J(e._render);case N:t=e._payload,e=e._init;try{return J(e(t))}catch(e){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Y(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function $(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=X(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=X(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,n):t.hasOwnProperty("defaultValue")&&re(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function re(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+X(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:X(n)}}function le(e,t){var n=X(t.value),i=X(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=be(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(ye).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var _e=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function Me(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ae=null,Ce=null;function Re(e){if(e=$i(e)){if("function"!=typeof Ee)throw Error(a(280));var t=e.stateNode;t&&(t=er(t),Ee(e.stateNode,e.type,t))}}function Le(e){Ae?Ce?Ce.push(e):Ce=[e]:Ae=e}function Pe(){if(Ae){var e=Ae,t=Ce;if(Ce=Ae=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Oe(e,t){return e(t)}function Ne(e,t,n,i,r){return e(t,n,i,r)}function ke(){}var Ie=Oe,De=!1,Fe=!1;function ze(){null===Ae&&null===Ce||(ke(),Pe())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var i=er(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Ue=!1;if(h)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(e){Ue=!1}function He(e,t,n,i,r,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var Ge=!1,Ve=null,We=!1,qe=null,Je={onError:function(e){Ge=!0,Ve=e}};function Xe(e,t,n,i,r,o,a,s,c){Ge=!1,Ve=null,He.apply(Je,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Ye(e)!==e)throw Error(a(188))}function $e(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Qe(r),e;if(o===i)return Qe(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,c=r.child;c;){if(c===n){s=!0,n=r,i=o;break}if(c===i){s=!0,i=r,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,i=r;break}if(c===i){s=!0,i=o,n=r;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ke(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,it,rt=!1,ot=[],at=null,st=null,ct=null,lt=new Map,ut=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,i,r){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[i]}}function ft(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,i,r,o),null!==t&&(null!==(t=$i(t))&&tt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function gt(e){var t=Qi(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=$i(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){vt(e)&&n.delete(t)}function xt(){for(rt=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=$i(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&vt(at)&&(at=null),null!==st&&vt(st)&&(st=null),null!==ct&&vt(ct)&&(ct=null),lt.forEach(yt),ut.forEach(yt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xt)))}function wt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var i=ot[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==at&&bt(at,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ut.forEach(t),n=0;n<ht.length;n++)(i=ht[n]).blockedOn===e&&(i.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var St={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Mt={},Tt={};function Et(e){if(Mt[e])return Mt[e];if(!St[e])return e;var t,n=St[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Mt[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var At=Et("animationend"),Ct=Et("animationiteration"),Rt=Et("animationstart"),Lt=Et("transitionend"),Pt=new Map,Ot=new Map,Nt=["abort","abort",At,"animationEnd",Ct,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lt,"transitionEnd","waiting","waiting"];function kt(e,t){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Ot.set(i,t),Pt.set(i,r),l(r,[i])}}(0,o.unstable_now)();var It=8;function Dt(e){if(0!=(1&e))return It=15,1;if(0!=(2&e))return It=14,2;if(0!=(4&e))return It=13,4;var t=24&e;return 0!==t?(It=12,t):0!=(32&e)?(It=11,32):0!==(t=192&e)?(It=10,t):0!=(256&e)?(It=9,256):0!==(t=3584&e)?(It=8,t):0!=(4096&e)?(It=7,4096):0!==(t=4186112&e)?(It=6,t):0!==(t=62914560&e)?(It=5,t):67108864&e?(It=4,67108864):0!=(134217728&e)?(It=3,134217728):0!==(t=805306368&e)?(It=2,t):0!=(1073741824&e)?(It=1,1073741824):(It=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return It=0;var i=0,r=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)i=o,r=It=15;else if(0!==(o=134217727&n)){var c=o&~a;0!==c?(i=Dt(c),r=It):0!==(s&=o)&&(i=Dt(s),r=It)}else 0!==(o=n&~a)?(i=Dt(o),r=It):0!==s&&(i=Dt(s),r=It);if(0===i)return 0;if(i=n&((0>(i=31-Gt(i))?0:1<<i)<<1)-1,0!==t&&t!==i&&0==(t&a)){if(Dt(t),r<=It)return t;It=r}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-Gt(t)),i|=e[n],t&=~r;return i}function zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Bt(10,t):e;case 10:return 0===(e=Ut(192&~t))?Bt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Ut(e){return e&-e}function jt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ht(e,t,n){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/Wt|0)|0},Vt=Math.log,Wt=Math.LN2;var qt=o.unstable_UserBlockingPriority,Jt=o.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,i){De||ke();var r=Qt,o=De;De=!0;try{Ne(r,e,t,n,i)}finally{(De=o)||ze()}}function Zt(e,t,n,i){Jt(qt,Qt.bind(null,e,t,n,i))}function Qt(e,t,n,i){var r;if(Xt)if((r=0==(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,i),ot.push(e);else{var o=$t(e,t,n,i);if(null===o)r&&ft(e,i);else{if(r){if(-1<dt.indexOf(e))return e=pt(o,e,t,n,i),void ot.push(e);if(function(e,t,n,i,r){switch(t){case"focusin":return at=mt(at,e,t,n,i,r),!0;case"dragenter":return st=mt(st,e,t,n,i,r),!0;case"mouseover":return ct=mt(ct,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return lt.set(o,mt(lt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,ut.set(o,mt(ut.get(o)||null,e,t,n,i,r)),!0}return!1}(o,e,t,n,i))return;ft(e,i)}Li(e,t,i,null,n)}}}function $t(e,t,n,i){var r=Te(i);if(null!==(r=Qi(r))){var o=Ye(r);if(null===o)r=null;else{var a=o.tag;if(13===a){if(null!==(r=Ze(o)))return r;r=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Li(e,t,i,r,n),null}var Kt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,i=n.length,r="value"in Kt?Kt.value:Kt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);return tn=r.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function sn(e){function t(t,n,i,r,o){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?on:an,this.isPropagationStopped=an,this}return r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,un,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=r({},hn,{view:0,detail:0}),fn=sn(pn),mn=r({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(cn=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=cn=0,un=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=sn(mn),vn=sn(r({},mn,{dataTransfer:0})),yn=sn(r({},pn,{relatedTarget:0})),xn=sn(r({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=sn(r({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wn=sn(r({},hn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function En(){return Tn}var An=sn(r({},pn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Cn=sn(r({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=sn(r({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Ln=sn(r({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=sn(r({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),On=[9,13,27,32],Nn=h&&"CompositionEvent"in window,kn=null;h&&"documentMode"in document&&(kn=document.documentMode);var In=h&&"TextEvent"in window&&!kn,Dn=h&&(!Nn||kn&&8<kn&&11>=kn),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Vn(e,t,n,i){Le(i),0<(t=Oi(t,"onChange")).length&&(n=new dn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,qn=null;function Jn(e){Mi(e,0)}function Xn(e){if(Q(Ki(e)))return e}function Yn(e,t){if("change"===e)return t}var Zn=!1;if(h){var Qn;if(h){var $n="oninput"in document;if(!$n){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),$n="function"==typeof Kn.oninput}Qn=$n}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function ei(){Wn&&(Wn.detachEvent("onpropertychange",ti),qn=Wn=null)}function ti(e){if("value"===e.propertyName&&Xn(qn)){var t=[];if(Vn(t,qn,e,Te(e)),e=Jn,De)e(t);else{De=!0;try{Oe(e,t)}finally{De=!1,ze()}}}}function ni(e,t,n){"focusin"===e?(ei(),qn=n,(Wn=t).attachEvent("onpropertychange",ti)):"focusout"===e&&ei()}function ii(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(qn)}function ri(e,t){if("click"===e)return Xn(t)}function oi(e,t){if("input"===e||"change"===e)return Xn(t)}var ai="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},si=Object.prototype.hasOwnProperty;function ci(e,t){if(ai(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!si.call(t,n[i])||!ai(e[n[i]],t[n[i]]))return!1;return!0}function li(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=li(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=li(i)}}function hi(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pi=h&&"documentMode"in document&&11>=document.documentMode,fi=null,mi=null,gi=null,vi=!1;function yi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==fi||fi!==$(i)||("selectionStart"in(i=fi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},gi&&ci(gi,i)||(gi=i,0<(i=Oi(mi,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=fi)))}kt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),kt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),kt(Nt,2);for(var xi="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),bi=0;bi<xi.length;bi++)Ot.set(xi[bi],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_i=new Set("cancel close invalid load scroll toggle".split(" ").concat(wi));function Si(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,s,c,l){if(Xe.apply(this,arguments),Ge){if(!Ge)throw Error(a(198));var u=Ve;Ge=!1,Ve=null,We||(We=!0,qe=u)}}(i,t,void 0,e),e.currentTarget=null}function Mi(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&r.isPropagationStopped())break e;Si(r,s,l),o=c}else for(a=0;a<i.length;a++){if(c=(s=i[a]).instance,l=s.currentTarget,s=s.listener,c!==o&&r.isPropagationStopped())break e;Si(r,s,l),o=c}}}if(We)throw e=qe,We=!1,qe=null,e}function Ti(e,t){var n=tr(t),i=e+"__bubble";n.has(i)||(Ri(t,e,2,!1),n.add(i))}var Ei="_reactListening"+Math.random().toString(36).slice(2);function Ai(e){e[Ei]||(e[Ei]=!0,s.forEach((function(t){_i.has(t)||Ci(t,!1,e,null),Ci(t,!0,e,null)})))}function Ci(e,t,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==i&&!t&&_i.has(e)){if("scroll"!==e)return;r|=2,o=i}var a=tr(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(r|=4),Ri(o,e,r,t),a.add(s))}function Ri(e,t,n,i){var r=Ot.get(t);switch(void 0===r?2:r){case 0:r=Yt;break;case 1:r=Zt;break;default:r=Qt}n=r.bind(null,t,n,e),r=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Li(e,t,n,i,r){var o=i;if(0==(1&t)&&0==(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===r||8===c.nodeType&&c.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=Qi(s)))return;if(5===(c=a.tag)||6===c){i=o=a;continue e}s=s.parentNode}}i=i.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Ie(e,t,n)}finally{Fe=!1,ze()}}((function(){var i=o,r=Te(n),a=[];e:{var s=Pt.get(e);if(void 0!==s){var c=dn,l=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":c=An;break;case"focusin":l="focus",c=yn;break;case"focusout":l="blur",c=yn;break;case"beforeblur":case"afterblur":c=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Rn;break;case At:case Ct:case Rt:c=xn;break;case Lt:c=Ln;break;case"scroll":c=fn;break;case"wheel":c=Pn;break;case"copy":case"cut":case"paste":c=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Cn}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Be(f,d))&&u.push(Pi(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new c(s,l,null,n,r),a.push({event:s,listeners:u}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Qi(l)&&!l[Yi])&&(c||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=i,null!==(l=(l=n.relatedTarget||n.toElement)?Qi(l):null)&&(l!==(h=Ye(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=i),c!==l)){if(u=gn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==c?s:Ki(c),p=null==l?s:Ki(l),(s=new u(m,f+"leave",c,n,r)).target=h,s.relatedTarget=p,m=null,Qi(r)===i&&((u=new u(d,f+"enter",l,n,r)).target=p,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,f=0,p=u=c;p;p=Ni(p))f++;for(p=0,m=d;m;m=Ni(m))p++;for(;0<f-p;)u=Ni(u),f--;for(;0<p-f;)d=Ni(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Ni(u),d=Ni(d)}u=null}else u=null;null!==c&&ki(a,s,c,u,!1),null!==l&&null!==h&&ki(a,h,l,u,!0)}if("select"===(c=(s=i?Ki(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=Yn;else if(Gn(s))if(Zn)g=oi;else{g=ii;var v=ni}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ri);switch(g&&(g=g(e,i))?Vn(a,g,n,r):(v&&v(e,s,i),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&re(s,"number",s.value)),v=i?Ki(i):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(fi=v,mi=i,gi=null);break;case"focusout":gi=mi=fi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,yi(a,n,r);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":yi(a,n,r)}var y;if(Nn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else jn?Bn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Dn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==x?"onCompositionEnd"===x&&jn&&(y=nn()):(en="value"in(Kt=r)?Kt.value:Kt.textContent,jn=!0)),0<(v=Oi(i,x)).length&&(x=new wn(x,e,null,n,r),a.push({event:x,listeners:v}),y?x.data=y:null!==(y=Un(n))&&(x.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Nn&&Bn(e,t)?(e=nn(),tn=en=Kt=null,jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(i=Oi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Mi(a,t)}))}function Pi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Oi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Be(e,n))&&i.unshift(Pi(e,o,r)),null!=(o=Be(e,t))&&i.push(Pi(e,o,r))),e=e.return}return i}function Ni(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function ki(e,t,n,i,r){for(var o=t._reactName,a=[];null!==n&&n!==i;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===i)break;5===s.tag&&null!==l&&(s=l,r?null!=(c=Be(n,o))&&a.unshift(Pi(n,c,s)):r||null!=(c=Be(n,o))&&a.push(Pi(n,c,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Ii(){}var Di=null,Fi=null;function zi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Bi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ui="function"==typeof setTimeout?setTimeout:void 0,ji="function"==typeof clearTimeout?clearTimeout:void 0;function Hi(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Gi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Vi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Wi=0;var qi=Math.random().toString(36).slice(2),Ji="__reactFiber$"+qi,Xi="__reactProps$"+qi,Yi="__reactContainer$"+qi,Zi="__reactEvents$"+qi;function Qi(e){var t=e[Ji];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yi]||n[Ji]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Vi(e);null!==e;){if(n=e[Ji])return n;e=Vi(e)}return t}n=(e=n).parentNode}return null}function $i(e){return!(e=e[Ji]||e[Yi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function er(e){return e[Xi]||null}function tr(e){var t=e[Zi];return void 0===t&&(t=e[Zi]=new Set),t}var nr=[],ir=-1;function rr(e){return{current:e}}function or(e){0>ir||(e.current=nr[ir],nr[ir]=null,ir--)}function ar(e,t){ir++,nr[ir]=e.current,e.current=t}var sr={},cr=rr(sr),lr=rr(!1),ur=sr;function hr(e,t){var n=e.type.contextTypes;if(!n)return sr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function dr(e){return null!=(e=e.childContextTypes)}function pr(){or(lr),or(cr)}function fr(e,t,n){if(cr.current!==sr)throw Error(a(168));ar(cr,t),ar(lr,n)}function mr(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var o in i=i.getChildContext())if(!(o in e))throw Error(a(108,J(t)||"Unknown",o));return r({},n,i)}function gr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sr,ur=cr.current,ar(cr,e),ar(lr,lr.current),!0}function vr(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=mr(e,t,ur),i.__reactInternalMemoizedMergedChildContext=e,or(lr),or(cr),ar(cr,e)):or(lr),ar(lr,n)}var yr=null,xr=null,br=o.unstable_runWithPriority,wr=o.unstable_scheduleCallback,_r=o.unstable_cancelCallback,Sr=o.unstable_shouldYield,Mr=o.unstable_requestPaint,Tr=o.unstable_now,Er=o.unstable_getCurrentPriorityLevel,Ar=o.unstable_ImmediatePriority,Cr=o.unstable_UserBlockingPriority,Rr=o.unstable_NormalPriority,Lr=o.unstable_LowPriority,Pr=o.unstable_IdlePriority,Or={},Nr=void 0!==Mr?Mr:function(){},kr=null,Ir=null,Dr=!1,Fr=Tr(),zr=1e4>Fr?Tr:function(){return Tr()-Fr};function Br(){switch(Er()){case Ar:return 99;case Cr:return 98;case Rr:return 97;case Lr:return 96;case Pr:return 95;default:throw Error(a(332))}}function Ur(e){switch(e){case 99:return Ar;case 98:return Cr;case 97:return Rr;case 96:return Lr;case 95:return Pr;default:throw Error(a(332))}}function jr(e,t){return e=Ur(e),br(e,t)}function Hr(e,t,n){return e=Ur(e),wr(e,t,n)}function Gr(){if(null!==Ir){var e=Ir;Ir=null,_r(e)}Vr()}function Vr(){if(!Dr&&null!==kr){Dr=!0;var e=0;try{var t=kr;jr(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),kr=null}catch(t){throw null!==kr&&(kr=kr.slice(e+1)),wr(Ar,Gr),t}finally{Dr=!1}}}var Wr=w.ReactCurrentBatchConfig;function qr(e,t){if(e&&e.defaultProps){for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Jr=rr(null),Xr=null,Yr=null,Zr=null;function Qr(){Zr=Yr=Xr=null}function $r(e){var t=Jr.current;or(Jr),e.type._context._currentValue=t}function Kr(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function eo(e,t){Xr=e,Zr=Yr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Oa=!0),e.firstContext=null)}function to(e,t){if(Zr!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Zr=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Yr){if(null===Xr)throw Error(a(308));Yr=t,Xr.dependencies={lanes:0,firstContext:t,responders:null}}else Yr=Yr.next=t;return e._currentValue}var no=!1;function io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ao(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function so(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function co(e,t,n,i){var o=e.updateQueue;no=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,c=o.shared.pending;if(null!==c){o.shared.pending=null;var l=c,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=l)}}if(null!==a){for(d=o.baseState,s=0,h=u=l=null;;){c=a.lane;var p=a.eventTime;if((i&c)===c){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(c=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,c);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(c="function"==typeof(f=m.payload)?f.call(p,d,c):f))break e;d=r({},d,c);break e;case 2:no=!0}}null!==a.callback&&(e.flags|=32,null===(c=o.effects)?o.effects=[a]:c.push(a))}else p={eventTime:p,lane:c,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(u=h=p,l=d):h=h.next=p,s|=c;if(null===(a=a.next)){if(null===(c=o.shared.pending))break;a=c.next,c.next=null,o.lastBaseUpdate=c,o.shared.pending=null}}null===h&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=h,ks|=s,e.lanes=s,e.memoizedState=d}}function lo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var uo=(new i.Component).refs;function ho(e,t,n,i){n=null==(n=n(i,t=e.memoizedState))?t:r({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=oc(),r=ac(e),o=oo(i,r);o.payload=t,null!=n&&(o.callback=n),ao(e,o),sc(e,r,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=oc(),r=ac(e),o=oo(i,r);o.tag=1,o.payload=t,null!=n&&(o.callback=n),ao(e,o),sc(e,r,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=oc(),i=ac(e),r=oo(n,i);r.tag=2,null!=t&&(r.callback=t),ao(e,r),sc(e,i,n)}};function fo(e,t,n,i,r,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ci(n,i)||!ci(r,o))}function mo(e,t,n){var i=!1,r=sr,o=t.contextType;return"object"==typeof o&&null!==o?o=to(o):(r=dr(t)?ur:cr.current,o=(i=null!=(i=t.contextTypes))?hr(e,r):sr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=po,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function go(e,t,n,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function vo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=uo,io(e);var o=t.contextType;"object"==typeof o&&null!==o?r.context=to(o):(o=dr(t)?ur:cr.current,r.context=hr(e,o)),co(e,n,r,i),r.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(ho(e,t,o,n),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&po.enqueueReplaceState(r,r.state,null),co(e,n,r,i),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.flags|=4)}var yo=Array.isArray;function xo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=i.refs;t===uo&&(t=i.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function bo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wo(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Bc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags=2,n):i:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,i){return null===t||6!==t.tag?((t=Gc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=xo(e,t,n),i.return=e,i):((i=Uc(n.type,n.key,n.props,null,e.mode,i)).ref=xo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,o){return null===t||7!==t.tag?((t=jc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Gc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Uc(t.type,t.key,t.props,null,e.mode,n)).ref=xo(e,null,t),n.return=e,n;case S:return(t=Vc(t,e.mode,n)).return=e,t}if(yo(t)||H(t))return(t=jc(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==r?null:c(e,t,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?n.type===M?h(e,t,n.props.children,i,r):l(e,t,n,i):null;case S:return n.key===r?u(e,t,n,i):null}if(yo(n)||H(n))return null!==r?null:h(e,t,n,i,null);bo(e,n)}return null}function f(e,t,n,i,r){if("string"==typeof i||"number"==typeof i)return c(t,e=e.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case _:return e=e.get(null===i.key?n:i.key)||null,i.type===M?h(t,e,i.props.children,r,i.key):l(t,e,i,r);case S:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(yo(i)||H(i))return h(t,e=e.get(n)||null,i,r,null);bo(t,i)}return null}function m(r,a,s,c){for(var l=null,u=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(r,h,s[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(r,h),a=o(v,a,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===s.length)return n(r,h),l;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],c))&&(a=o(h,a,m),null===u?l=h:u.sibling=h,u=h);return l}for(h=i(r,h);m<s.length;m++)null!==(g=f(h,r,m,s[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(r,e)})),l}function g(r,s,c,l){var u=H(c);if("function"!=typeof u)throw Error(a(150));if(null==(c=u.call(c)))throw Error(a(151));for(var h=u=null,m=s,g=s=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=p(r,m,y.value,l);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(r,m),s=o(x,s,g),null===h?u=x:h.sibling=x,h=x,m=v}if(y.done)return n(r,m),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(r,y.value,l))&&(s=o(y,s,g),null===h?u=y:h.sibling=y,h=y);return u}for(m=i(r,m);!y.done;g++,y=c.next())null!==(y=f(m,r,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(r,e)})),u}return function(e,i,o,c){var l="object"==typeof o&&null!==o&&o.type===M&&null===o.key;l&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case _:e:{for(u=o.key,l=i;null!==l;){if(l.key===u){switch(l.tag){case 7:if(o.type===M){n(e,l.sibling),(i=r(l,o.props.children)).return=e,e=i;break e}break;default:if(l.elementType===o.type){n(e,l.sibling),(i=r(l,o.props)).ref=xo(e,l,o),i.return=e,e=i;break e}}n(e,l);break}t(e,l),l=l.sibling}o.type===M?((i=jc(o.props.children,e.mode,c,o.key)).return=e,e=i):((c=Uc(o.type,o.key,o.props,null,e.mode,c)).ref=xo(e,i,o),c.return=e,e=c)}return s(e);case S:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(e,i.sibling),(i=r(i,o.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Vc(o,e.mode,c)).return=e,e=i}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,o)).return=e,e=i):(n(e,i),(i=Gc(o,e.mode,c)).return=e,e=i),s(e);if(yo(o))return m(e,i,o,c);if(H(o))return g(e,i,o,c);if(u&&bo(e,o),void 0===o&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,J(e.type)||"Component"))}return n(e,i)}}var _o=wo(!0),So=wo(!1),Mo={},To=rr(Mo),Eo=rr(Mo),Ao=rr(Mo);function Co(e){if(e===Mo)throw Error(a(174));return e}function Ro(e,t){switch(ar(Ao,t),ar(Eo,e),ar(To,Mo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}or(To),ar(To,t)}function Lo(){or(To),or(Eo),or(Ao)}function Po(e){Co(Ao.current);var t=Co(To.current),n=fe(t,e.type);t!==n&&(ar(Eo,e),ar(To,n))}function Oo(e){Eo.current===e&&(or(To),or(Eo))}var No=rr(0);function ko(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Io=null,Do=null,Fo=!1;function zo(e,t){var n=Fc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Bo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Uo(e){if(Fo){var t=Do;if(t){var n=t;if(!Bo(e,t)){if(!(t=Gi(n.nextSibling))||!Bo(e,t))return e.flags=-1025&e.flags|2,Fo=!1,void(Io=e);zo(Io,n)}Io=e,Do=Gi(t.firstChild)}else e.flags=-1025&e.flags|2,Fo=!1,Io=e}}function jo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Io=e}function Ho(e){if(e!==Io)return!1;if(!Fo)return jo(e),Fo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Bi(t,e.memoizedProps))for(t=Do;t;)zo(e,t),t=Gi(t.nextSibling);if(jo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Do=Gi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Do=null}}else Do=Io?Gi(e.stateNode.nextSibling):null;return!0}function Go(){Do=Io=null,Fo=!1}var Vo=[];function Wo(){for(var e=0;e<Vo.length;e++)Vo[e]._workInProgressVersionPrimary=null;Vo.length=0}var qo=w.ReactCurrentDispatcher,Jo=w.ReactCurrentBatchConfig,Xo=0,Yo=null,Zo=null,Qo=null,$o=!1,Ko=!1;function ea(){throw Error(a(321))}function ta(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function na(e,t,n,i,r,o){if(Xo=o,Yo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qo.current=null===e||null===e.memoizedState?Ca:Ra,e=n(i,r),Ko){o=0;do{if(Ko=!1,!(25>o))throw Error(a(301));o+=1,Qo=Zo=null,t.updateQueue=null,qo.current=La,e=n(i,r)}while(Ko)}if(qo.current=Aa,t=null!==Zo&&null!==Zo.next,Xo=0,Qo=Zo=Yo=null,$o=!1,t)throw Error(a(300));return e}function ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qo?Yo.memoizedState=Qo=e:Qo=Qo.next=e,Qo}function ra(){if(null===Zo){var e=Yo.alternate;e=null!==e?e.memoizedState:null}else e=Zo.next;var t=null===Qo?Yo.memoizedState:Qo.next;if(null!==t)Qo=t,Zo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Zo=e).memoizedState,baseState:Zo.baseState,baseQueue:Zo.baseQueue,queue:Zo.queue,next:null},null===Qo?Yo.memoizedState=Qo=e:Qo=Qo.next=e}return Qo}function oa(e,t){return"function"==typeof t?t(e):t}function aa(e){var t=ra(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=Zo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var c=s=o=null,l=r;do{var u=l.lane;if((Xo&u)===u)null!==c&&(c=c.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),i=l.eagerReducer===e?l.eagerState:e(i,l.action);else{var h={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(s=c=h,o=i):c=c.next=h,Yo.lanes|=u,ks|=u}l=l.next}while(null!==l&&l!==r);null===c?o=i:c.next=s,ai(i,t.memoizedState)||(Oa=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function sa(e){var t=ra(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);ai(o,t.memoizedState)||(Oa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function ca(e,t,n){var i=t._getVersion;i=i(t._source);var r=t._workInProgressVersionPrimary;if(null!==r?e=r===i:(e=e.mutableReadLanes,(e=(Xo&e)===e)&&(t._workInProgressVersionPrimary=i,Vo.push(t))),e)return n(t._source);throw Vo.push(t),Error(a(350))}function la(e,t,n,i){var r=Es;if(null===r)throw Error(a(349));var o=t._getVersion,s=o(t._source),c=qo.current,l=c.useState((function(){return ca(r,t,n)})),u=l[1],h=l[0];l=Qo;var d=e.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var g=Yo;return e.memoizedState={refs:p,source:t,subscribe:i},c.useEffect((function(){p.getSnapshot=n,p.setSnapshot=u;var e=o(t._source);if(!ai(s,e)){e=n(t._source),ai(h,e)||(u(e),e=ac(g),r.mutableReadLanes|=e&r.pendingLanes),e=r.mutableReadLanes,r.entangledLanes|=e;for(var i=r.entanglements,a=e;0<a;){var c=31-Gt(a),l=1<<c;i[c]|=e,a&=~l}}}),[n,t,i]),c.useEffect((function(){return i(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var i=ac(g);r.mutableReadLanes|=i&r.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,i]),ai(f,n)&&ai(m,t)&&ai(d,i)||((e={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:h}).dispatch=u=Ea.bind(null,Yo,e),l.queue=e,l.baseQueue=null,h=ca(r,t,n),l.memoizedState=l.baseState=h),h}function ua(e,t,n){return la(ra(),e,t,n)}function ha(e){var t=ia();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:e}).dispatch=Ea.bind(null,Yo,e),[t.memoizedState,e]}function da(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Yo.updateQueue)?(t={lastEffect:null},Yo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function pa(e){return e={current:e},ia().memoizedState=e}function fa(){return ra().memoizedState}function ma(e,t,n,i){var r=ia();Yo.flags|=e,r.memoizedState=da(1|t,n,void 0,void 0===i?null:i)}function ga(e,t,n,i){var r=ra();i=void 0===i?null:i;var o=void 0;if(null!==Zo){var a=Zo.memoizedState;if(o=a.destroy,null!==i&&ta(i,a.deps))return void da(t,n,o,i)}Yo.flags|=e,r.memoizedState=da(1|t,n,o,i)}function va(e,t){return ma(516,4,e,t)}function ya(e,t){return ga(516,4,e,t)}function xa(e,t){return ga(4,2,e,t)}function ba(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function wa(e,t,n){return n=null!=n?n.concat([e]):null,ga(4,2,ba.bind(null,t,e),n)}function _a(){}function Sa(e,t){var n=ra();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ta(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ma(e,t){var n=ra();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ta(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ta(e,t){var n=Br();jr(98>n?98:n,(function(){e(!0)})),jr(97<n?97:n,(function(){var n=Jo.transition;Jo.transition=1;try{e(!1),t()}finally{Jo.transition=n}}))}function Ea(e,t,n){var i=oc(),r=ac(e),o={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Yo||null!==a&&a===Yo)Ko=$o=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,c=a(s,n);if(o.eagerReducer=a,o.eagerState=c,ai(c,s))return}catch(e){}sc(e,r,i)}}var Aa={readContext:to,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useLayoutEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useMutableSource:ea,useOpaqueIdentifier:ea,unstable_isNewReconciler:!1},Ca={readContext:to,useCallback:function(e,t){return ia().memoizedState=[e,void 0===t?null:t],e},useContext:to,useEffect:va,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ma(4,2,ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4,2,e,t)},useMemo:function(e,t){var n=ia();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ia();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ea.bind(null,Yo,e),[i.memoizedState,e]},useRef:pa,useState:ha,useDebugValue:_a,useDeferredValue:function(e){var t=ha(e),n=t[0],i=t[1];return va((function(){var t=Jo.transition;Jo.transition=1;try{i(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=ha(!1),t=e[0];return pa(e=Ta.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var i=ia();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},la(i,e,t,n)},useOpaqueIdentifier:function(){if(Fo){var e=!1,t=function(e){return{$$typeof:I,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Wi++).toString(36))),Error(a(355))})),n=ha(t)[1];return 0==(2&Yo.mode)&&(Yo.flags|=516,da(5,(function(){n("r:"+(Wi++).toString(36))}),void 0,null)),t}return ha(t="r:"+(Wi++).toString(36)),t},unstable_isNewReconciler:!1},Ra={readContext:to,useCallback:Sa,useContext:to,useEffect:ya,useImperativeHandle:wa,useLayoutEffect:xa,useMemo:Ma,useReducer:aa,useRef:fa,useState:function(){return aa(oa)},useDebugValue:_a,useDeferredValue:function(e){var t=aa(oa),n=t[0],i=t[1];return ya((function(){var t=Jo.transition;Jo.transition=1;try{i(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=aa(oa)[0];return[fa().current,e]},useMutableSource:ua,useOpaqueIdentifier:function(){return aa(oa)[0]},unstable_isNewReconciler:!1},La={readContext:to,useCallback:Sa,useContext:to,useEffect:ya,useImperativeHandle:wa,useLayoutEffect:xa,useMemo:Ma,useReducer:sa,useRef:fa,useState:function(){return sa(oa)},useDebugValue:_a,useDeferredValue:function(e){var t=sa(oa),n=t[0],i=t[1];return ya((function(){var t=Jo.transition;Jo.transition=1;try{i(e)}finally{Jo.transition=t}}),[e]),n},useTransition:function(){var e=sa(oa)[0];return[fa().current,e]},useMutableSource:ua,useOpaqueIdentifier:function(){return sa(oa)[0]},unstable_isNewReconciler:!1},Pa=w.ReactCurrentOwner,Oa=!1;function Na(e,t,n,i){t.child=null===e?So(t,null,n,i):_o(t,e.child,n,i)}function ka(e,t,n,i,r){n=n.render;var o=t.ref;return eo(t,r),i=na(e,t,n,i,o,r),null===e||Oa?(t.flags|=1,Na(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,es(e,t,r))}function Ia(e,t,n,i,r,o){if(null===e){var a=n.type;return"function"!=typeof a||zc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Uc(n.type,null,i,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Da(e,t,a,i,r,o))}return a=e.child,0==(r&o)&&(r=a.memoizedProps,(n=null!==(n=n.compare)?n:ci)(r,i)&&e.ref===t.ref)?es(e,t,o):(t.flags|=1,(e=Bc(a,i)).ref=t.ref,e.return=t,t.child=e)}function Da(e,t,n,i,r,o){if(null!==e&&ci(e.memoizedProps,i)&&e.ref===t.ref){if(Oa=!1,0==(o&r))return t.lanes=e.lanes,es(e,t,o);0!=(16384&e.flags)&&(Oa=!0)}return Ba(e,t,n,i,o)}function Fa(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},mc(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},mc(t,e),null;t.memoizedState={baseLanes:0},mc(t,null!==o?o.baseLanes:n)}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,mc(t,i);return Na(e,t,r,n),t.child}function za(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ba(e,t,n,i,r){var o=dr(n)?ur:cr.current;return o=hr(t,o),eo(t,r),n=na(e,t,n,i,o,r),null===e||Oa?(t.flags|=1,Na(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,es(e,t,r))}function Ua(e,t,n,i,r){if(dr(n)){var o=!0;gr(t)}else o=!1;if(eo(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),mo(t,n,i),vo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=to(l):l=hr(t,l=dr(n)?ur:cr.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==i||c!==l)&&go(t,a,i,l),no=!1;var d=t.memoizedState;a.state=d,co(t,i,a,r),c=t.memoizedState,s!==i||d!==c||lr.current||no?("function"==typeof u&&(ho(t,n,u,i),c=t.memoizedState),(s=no||fo(t,n,s,i,d,c,l))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=l,i=s):("function"==typeof a.componentDidMount&&(t.flags|=4),i=!1)}else{a=t.stateNode,ro(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:qr(t.type,s),a.props=l,h=t.pendingProps,d=a.context,"object"==typeof(c=n.contextType)&&null!==c?c=to(c):c=hr(t,c=dr(n)?ur:cr.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==c)&&go(t,a,i,c),no=!1,d=t.memoizedState,a.state=d,co(t,i,a,r);var f=t.memoizedState;s!==h||d!==f||lr.current||no?("function"==typeof p&&(ho(t,n,p,i),f=t.memoizedState),(l=no||fo(t,n,l,i,d,f,c))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,c)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=c,i=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),i=!1)}return ja(e,t,n,i,o,r)}function ja(e,t,n,i,r,o){za(e,t);var a=0!=(64&t.flags);if(!i&&!a)return r&&vr(t,n,!1),es(e,t,o);i=t.stateNode,Pa.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,s,o)):Na(e,t,s,o),t.memoizedState=i.state,r&&vr(t,n,!0),t.child}function Ha(e){var t=e.stateNode;t.pendingContext?fr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&fr(0,t.context,!1),Ro(e,t.containerInfo)}var Ga,Va,Wa,qa={dehydrated:null,retryLane:0};function Ja(e,t,n){var i,r=t.pendingProps,o=No.current,a=!1;return(i=0!=(64&t.flags))||(i=(null===e||null!==e.memoizedState)&&0!=(2&o)),i?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(o|=1),ar(No,1&o),null===e?(void 0!==r.fallback&&Uo(t),e=r.children,o=r.fallback,a?(e=Xa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=qa,e):"number"==typeof r.unstable_expectedLoadTime?(e=Xa(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=qa,t.lanes=33554432,e):((n=Hc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(r=Za(e,t,r.children,r.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=qa,r):(n=Ya(e,t,r.children,n),t.memoizedState=null,n))}function Xa(e,t,n,i){var r=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&r)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Hc(t,r,0,null),n=jc(n,r,i,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Ya(e,t,n,i){var r=e.child;return e=r.sibling,n=Bc(r,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Za(e,t,n,i,r){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Bc(a,s),null!==e?i=Bc(e,i):(i=jc(i,o,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function Qa(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Kr(e.return,t)}function $a(e,t,n,i,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.lastEffect=o)}function Ka(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(Na(e,t,i.children,n),0!=(2&(i=No.current)))i=1&i|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qa(e,n);else if(19===e.tag)Qa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ar(No,i),0==(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ko(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),$a(t,!1,r,n,o,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ko(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}$a(t,!0,n,null,o,t.lastEffect);break;case"together":$a(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function es(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ks|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Bc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ts(e,t){if(!Fo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ns(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return dr(t.type)&&pr(),null;case 3:return Lo(),or(lr),or(cr),Wo(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Ho(t)?t.flags|=4:i.hydrate||(t.flags|=256)),null;case 5:Oo(t);var o=Co(Ao.current);if(n=t.type,null!==e&&null!=t.stateNode)Va(e,t,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(null===t.stateNode)throw Error(a(166));return null}if(e=Co(To.current),Ho(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[Ji]=t,i[Xi]=s,n){case"dialog":Ti("cancel",i),Ti("close",i);break;case"iframe":case"object":case"embed":Ti("load",i);break;case"video":case"audio":for(e=0;e<wi.length;e++)Ti(wi[e],i);break;case"source":Ti("error",i);break;case"img":case"image":case"link":Ti("error",i),Ti("load",i);break;case"details":Ti("toggle",i);break;case"input":ee(i,s),Ti("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ti("invalid",i);break;case"textarea":ce(i,s),Ti("invalid",i)}for(var l in Se(n,s),e=null,s)s.hasOwnProperty(l)&&(o=s[l],"children"===l?"string"==typeof o?i.textContent!==o&&(e=["children",o]):"number"==typeof o&&i.textContent!==""+o&&(e=["children",""+o]):c.hasOwnProperty(l)&&null!=o&&"onScroll"===l&&Ti("scroll",i));switch(n){case"input":Z(i),ie(i,s,!0);break;case"textarea":Z(i),ue(i);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(i.onclick=Ii)}i=e,t.updateQueue=i,null!==i&&(t.flags|=4)}else{switch(l=9===o.nodeType?o:o.ownerDocument,e===he&&(e=pe(n)),e===he?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[Ji]=t,e[Xi]=i,Ga(e,t),t.stateNode=e,l=Me(n,i),n){case"dialog":Ti("cancel",e),Ti("close",e),o=i;break;case"iframe":case"object":case"embed":Ti("load",e),o=i;break;case"video":case"audio":for(o=0;o<wi.length;o++)Ti(wi[o],e);o=i;break;case"source":Ti("error",e),o=i;break;case"img":case"image":case"link":Ti("error",e),Ti("load",e),o=i;break;case"details":Ti("toggle",e),o=i;break;case"input":ee(e,i),o=K(e,i),Ti("invalid",e);break;case"option":o=oe(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=r({},i,{value:void 0}),Ti("invalid",e);break;case"textarea":ce(e,i),o=se(e,i),Ti("invalid",e);break;default:o=i}Se(n,o);var u=o;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===s?"string"==typeof h?("textarea"!==n||""!==h)&&ve(e,h):"number"==typeof h&&ve(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(c.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ti("scroll",e):null!=h&&b(e,s,h,l))}switch(n){case"input":Z(e),ie(e,i,!1);break;case"textarea":Z(e),ue(e);break;case"option":null!=i.value&&e.setAttribute("value",""+X(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ae(e,!!i.multiple,s,!1):null!=i.defaultValue&&ae(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Ii)}zi(n,i)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Wa(0,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(a(166));n=Co(Ao.current),Co(To.current),Ho(t)?(i=t.stateNode,n=t.memoizedProps,i[Ji]=t,i.nodeValue!==n&&(t.flags|=4)):((i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Ji]=t,t.stateNode=i)}return null;case 13:return or(No),i=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ho(t):n=null!==e.memoizedState,i&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&No.current)?0===Ps&&(Ps=3):(0!==Ps&&3!==Ps||(Ps=4),null===Es||0==(134217727&ks)&&0==(134217727&Is)||hc(Es,Cs))),(i||n)&&(t.flags|=4),null);case 4:return Lo(),null===e&&Ai(t.stateNode.containerInfo),null;case 10:return $r(t),null;case 17:return dr(t.type)&&pr(),null;case 19:if(or(No),null===(i=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(l=i.rendering))if(s)ts(i,!1);else{if(0!==Ps||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=ko(e))){for(t.flags|=64,ts(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ar(No,1&No.current|2),t.child}e=e.sibling}null!==i.tail&&zr()>Bs&&(t.flags|=64,s=!0,ts(i,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=ko(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ts(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!Fo)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*zr()-i.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=64,s=!0,ts(i,!1),t.lanes=33554432);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=zr(),n.sibling=null,t=No.current,ar(No,s?1&t|2:1&t),n):null;case 23:case 24:return gc(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function is(e){switch(e.tag){case 1:dr(e.type)&&pr();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Lo(),or(lr),or(cr),Wo(),0!=(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Oo(e),null;case 13:return or(No),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return or(No),null;case 4:return Lo(),null;case 10:return $r(e),null;case 23:case 24:return gc(),null;default:return null}}function rs(e,t){try{var n="",i=t;do{n+=q(i),i=i.return}while(i);var r=n}catch(e){r="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:r}}function os(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ga=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Va=function(e,t,n,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,Co(To.current);var a,s=null;switch(n){case"input":o=K(e,o),i=K(e,i),s=[];break;case"option":o=oe(e,o),i=oe(e,i),s=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),s=[];break;case"textarea":o=se(e,o),i=se(e,i),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(e.onclick=Ii)}for(h in Se(n,i),n=null,o)if(!i.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var l=o[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(c.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var u=i[h];if(l=null!=o?o[h]:void 0,i.hasOwnProperty(h)&&u!==l&&(null!=u||null!=l))if("style"===h)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(h,u)):"children"===h?"string"!=typeof u&&"number"!=typeof u||(s=s||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(c.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Ti("scroll",e),s||l===u||(s=[])):"object"==typeof u&&null!==u&&u.$$typeof===I?u.toString():(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Wa=function(e,t,n,i){n!==i&&(t.flags|=4)};var as="function"==typeof WeakMap?WeakMap:Map;function ss(e,t,n){(n=oo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Gs||(Gs=!0,Vs=i),os(0,t)},n}function cs(e,t,n){(n=oo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var r=t.value;n.payload=function(){return os(0,t),i(r)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===Ws?Ws=new Set([this]):Ws.add(this),os(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ls="function"==typeof WeakSet?WeakSet:Set;function us(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Nc(e,t)}else t.current=null}function hs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:qr(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hi(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ds(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e;i=r.next,0!=(4&(r=r.tag))&&0!=(1&r)&&(Lc(n,e),Rc(n,e)),e=i}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(i=n.elementType===n.type?t.memoizedProps:qr(n.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&lo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}lo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zi(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function ps(e,t){for(var n=e;;){if(5===n.tag){var i=n.stateNode;if(t)"function"==typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=null!=r&&r.hasOwnProperty("display")?r.display:null,i.style.display=be("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function fs(e,t){if(xr&&"function"==typeof xr.onCommitFiberUnmount)try{xr.onCommitFiberUnmount(yr,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var i=n,r=i.destroy;if(i=i.tag,void 0!==r)if(0!=(4&i))Lc(t,n);else{i=t;try{r()}catch(e){Nc(i,e)}}n=n.next}while(n!==e)}break;case 1:if(us(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Nc(t,e)}break;case 5:us(t);break;case 4:ys(e,t)}}function ms(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function gs(e){return 5===e.tag||3===e.tag||4===e.tag}function vs(e){e:{for(var t=e.return;null!==t;){if(gs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(a(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}i?function e(t,n,i){var r=t.tag,o=5===r||6===r;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===i.nodeType?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(8===i.nodeType?(n=i.parentNode).insertBefore(t,i):(n=i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==n.onclick||(n.onclick=Ii));else if(4!==r&&null!==(t=t.child))for(e(t,n,i),t=t.sibling;null!==t;)e(t,n,i),t=t.sibling}(e,n,t):function e(t,n,i){var r=t.tag,o=5===r||6===r;if(o)t=o?t.stateNode:t.stateNode.instance,n?i.insertBefore(t,n):i.appendChild(t);else if(4!==r&&null!==(t=t.child))for(e(t,n,i),t=t.sibling;null!==t;)e(t,n,i),t=t.sibling}(e,n,t)}function ys(e,t){for(var n,i,r=t,o=!1;;){if(!o){o=r.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}o=o.return}o=!0}if(5===r.tag||6===r.tag){e:for(var s=e,c=r,l=c;;)if(fs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===c)break e;for(;null===l.sibling;){if(null===l.return||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}i?(s=n,c=r.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(fs(e,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function xs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{3==(3&i.tag)&&(e=i.destroy,i.destroy=void 0,void 0!==e&&e()),i=i.next}while(i!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){i=t.memoizedProps;var r=null!==e?e.memoizedProps:i;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Xi]=i,"input"===e&&"radio"===i.type&&null!=i.name&&te(n,i),Me(e,r),t=Me(e,i),r=0;r<o.length;r+=2){var s=o[r],c=o[r+1];"style"===s?we(n,c):"dangerouslySetInnerHTML"===s?ge(n,c):"children"===s?ve(n,c):b(n,s,c,t)}switch(e){case"input":ne(n,i);break;case"textarea":le(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(o=i.value)?ae(n,!!i.multiple,o,!1):e!==!!i.multiple&&(null!=i.defaultValue?ae(n,!!i.multiple,i.defaultValue,!0):ae(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(zs=zr(),ps(t.child,!0)),void bs(t);case 19:return void bs(t);case 17:return;case 23:case 24:return void ps(t,null!==t.memoizedState)}throw Error(a(163))}function bs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ls),t.forEach((function(t){var i=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ws(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var _s=Math.ceil,Ss=w.ReactCurrentDispatcher,Ms=w.ReactCurrentOwner,Ts=0,Es=null,As=null,Cs=0,Rs=0,Ls=rr(0),Ps=0,Os=null,Ns=0,ks=0,Is=0,Ds=0,Fs=null,zs=0,Bs=1/0;function Us(){Bs=zr()+500}var js,Hs=null,Gs=!1,Vs=null,Ws=null,qs=!1,Js=null,Xs=90,Ys=[],Zs=[],Qs=null,$s=0,Ks=null,ec=-1,tc=0,nc=0,ic=null,rc=!1;function oc(){return 0!=(48&Ts)?zr():-1!==ec?ec:ec=zr()}function ac(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Br()?1:2;if(0===tc&&(tc=Ns),0!==Wr.transition){0!==nc&&(nc=null!==Fs?Fs.pendingLanes:0),e=tc;var t=4186112&~nc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Br(),0!=(4&Ts)&&98===e?e=Bt(12,tc):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),tc),e}function sc(e,t,n){if(50<$s)throw $s=0,Ks=null,Error(a(185));if(null===(e=cc(e,t)))return null;Ht(e,t,n),e===Es&&(Is|=t,4===Ps&&hc(e,Cs));var i=Br();1===t?0!=(8&Ts)&&0==(48&Ts)?dc(e):(lc(e,n),0===Ts&&(Us(),Gr())):(0==(4&Ts)||98!==i&&99!==i||(null===Qs?Qs=new Set([e]):Qs.add(e)),lc(e,n)),Fs=e}function cc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function lc(e,t){for(var n=e.callbackNode,i=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var c=31-Gt(s),l=1<<c,u=o[c];if(-1===u){if(0==(l&i)||0!=(l&r)){u=t,Dt(l);var h=It;o[c]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);s&=~l}if(i=Ft(e,e===Es?Cs:0),t=It,0===i)null!==n&&(n!==Or&&_r(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Or&&_r(n)}15===t?(n=dc.bind(null,e),null===kr?(kr=[n],Ir=wr(Ar,Vr)):kr.push(n),n=Or):14===t?n=Hr(99,dc.bind(null,e)):n=Hr(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),uc.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function uc(e){if(ec=-1,nc=tc=0,0!=(48&Ts))throw Error(a(327));var t=e.callbackNode;if(Cc()&&e.callbackNode!==t)return null;var n=Ft(e,e===Es?Cs:0);if(0===n)return null;var i=n,r=Ts;Ts|=16;var o=xc();for(Es===e&&Cs===i||(Us(),vc(e,i));;)try{_c();break}catch(t){yc(e,t)}if(Qr(),Ss.current=o,Ts=r,null!==As?i=0:(Es=null,Cs=0,i=Ps),0!=(Ns&Is))vc(e,0);else if(0!==i){if(2===i&&(Ts|=64,e.hydrate&&(e.hydrate=!1,Hi(e.containerInfo)),0!==(n=zt(e))&&(i=bc(e,n))),1===i)throw t=Os,vc(e,0),hc(e,n),lc(e,zr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,i){case 0:case 1:throw Error(a(345));case 2:Tc(e);break;case 3:if(hc(e,n),(62914560&n)===n&&10<(i=zs+500-zr())){if(0!==Ft(e,0))break;if(((r=e.suspendedLanes)&n)!==n){oc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Ui(Tc.bind(null,e),i);break}Tc(e);break;case 4:if(hc(e,n),(4186112&n)===n)break;for(i=e.eventTimes,r=-1;0<n;){var s=31-Gt(n);o=1<<s,(s=i[s])>r&&(r=s),n&=~o}if(n=r,10<(n=(120>(n=zr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_s(n/1960))-n)){e.timeoutHandle=Ui(Tc.bind(null,e),n);break}Tc(e);break;case 5:Tc(e);break;default:throw Error(a(329))}}return lc(e,zr()),e.callbackNode===t?uc.bind(null,e):null}function hc(e,t){for(t&=~Ds,t&=~Is,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),i=1<<n;e[n]=-1,t&=~i}}function dc(e){if(0!=(48&Ts))throw Error(a(327));if(Cc(),e===Es&&0!=(e.expiredLanes&Cs)){var t=Cs,n=bc(e,t);0!=(Ns&Is)&&(n=bc(e,t=Ft(e,t)))}else n=bc(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Ts|=64,e.hydrate&&(e.hydrate=!1,Hi(e.containerInfo)),0!==(t=zt(e))&&(n=bc(e,t))),1===n)throw n=Os,vc(e,0),hc(e,t),lc(e,zr()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e),lc(e,zr()),null}function pc(e,t){var n=Ts;Ts|=1;try{return e(t)}finally{0===(Ts=n)&&(Us(),Gr())}}function fc(e,t){var n=Ts;Ts&=-2,Ts|=8;try{return e(t)}finally{0===(Ts=n)&&(Us(),Gr())}}function mc(e,t){ar(Ls,Rs),Rs|=t,Ns|=t}function gc(){Rs=Ls.current,or(Ls)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ji(n)),null!==As)for(n=As.return;null!==n;){var i=n;switch(i.tag){case 1:null!=(i=i.type.childContextTypes)&&pr();break;case 3:Lo(),or(lr),or(cr),Wo();break;case 5:Oo(i);break;case 4:Lo();break;case 13:case 19:or(No);break;case 10:$r(i);break;case 23:case 24:gc()}n=n.return}Es=e,As=Bc(e.current,null),Cs=Rs=Ns=t,Ps=0,Os=null,Ds=Is=ks=0}function yc(e,t){for(;;){var n=As;try{if(Qr(),qo.current=Aa,$o){for(var i=Yo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}$o=!1}if(Xo=0,Qo=Zo=Yo=null,Ko=!1,Ms.current=null,null===n||null===n.return){Ps=1,Os=t,As=null;break}e:{var o=e,a=n.return,s=n,c=t;if(t=Cs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var l=c;if(0==(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&No.current),d=a;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var g=d.updateQueue;if(null===g){var v=new Set;v.add(l),d.updateQueue=v}else g.add(l);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=oo(-1,1);y.tag=2,ao(s,y)}s.lanes|=1;break e}c=void 0,s=t;var x=o.pingCache;if(null===x?(x=o.pingCache=new as,c=new Set,x.set(l,c)):void 0===(c=x.get(l))&&(c=new Set,x.set(l,c)),!c.has(s)){c.add(s);var b=kc.bind(null,o,l,s);l.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((J(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ps&&(Ps=2),c=rs(c,s),d=a;do{switch(d.tag){case 3:o=c,d.flags|=4096,t&=-t,d.lanes|=t,so(d,ss(0,o,t));break e;case 1:o=c;var w=d.type,_=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Ws||!Ws.has(_)))){d.flags|=4096,t&=-t,d.lanes|=t,so(d,cs(d,o,t));break e}}d=d.return}while(null!==d)}Mc(n)}catch(e){t=e,As===n&&null!==n&&(As=n=n.return);continue}break}}function xc(){var e=Ss.current;return Ss.current=Aa,null===e?Aa:e}function bc(e,t){var n=Ts;Ts|=16;var i=xc();for(Es===e&&Cs===t||vc(e,t);;)try{wc();break}catch(t){yc(e,t)}if(Qr(),Ts=n,Ss.current=i,null!==As)throw Error(a(261));return Es=null,Cs=0,Ps}function wc(){for(;null!==As;)Sc(As)}function _c(){for(;null!==As&&!Sr();)Sc(As)}function Sc(e){var t=js(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?Mc(e):As=t,Ms.current=null}function Mc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ns(n,t,Rs)))return void(As=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Rs)||0==(4&n.mode)){for(var i=0,r=n.child;null!==r;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=is(t)))return n.flags&=2047,void(As=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ps&&(Ps=5)}function Tc(e){var t=Br();return jr(99,Ec.bind(null,e,t)),null}function Ec(e,t){do{Cc()}while(null!==Js);if(0!=(48&Ts))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var i=n.lanes|n.childLanes,r=i,o=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;for(var s=e.eventTimes,c=e.expirationTimes;0<o;){var l=31-Gt(o),u=1<<l;r[l]=0,s[l]=-1,c[l]=-1,o&=~u}if(null!==Qs&&0==(24&i)&&Qs.has(e)&&Qs.delete(e),e===Es&&(As=Es=null,Cs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){if(r=Ts,Ts|=32,Ms.current=null,Di=Xt,di(s=hi())){if("selectionStart"in s)c={start:s.selectionStart,end:s.selectionEnd};else e:if(c=(c=s.ownerDocument)&&c.defaultView||window,(u=c.getSelection&&c.getSelection())&&0!==u.rangeCount){c=u.anchorNode,o=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{c.nodeType,l.nodeType}catch(e){c=null;break e}var h=0,d=-1,p=-1,f=0,m=0,g=s,v=null;t:for(;;){for(var y;g!==c||0!==o&&3!==g.nodeType||(d=h+o),g!==l||0!==u&&3!==g.nodeType||(p=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===s)break t;if(v===c&&++f===o&&(d=h),v===l&&++m===u&&(p=h),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}c=-1===d||-1===p?null:{start:d,end:p}}else c=null;c=c||{start:0,end:0}}else c=null;Fi={focusedElem:s,selectionRange:c},Xt=!1,ic=null,rc=!1,Hs=i;do{try{Ac()}catch(e){if(null===Hs)throw Error(a(330));Nc(Hs,e),Hs=Hs.nextEffect}}while(null!==Hs);ic=null,Hs=i;do{try{for(s=e;null!==Hs;){var x=Hs.flags;if(16&x&&ve(Hs.stateNode,""),128&x){var b=Hs.alternate;if(null!==b){var w=b.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&x){case 2:vs(Hs),Hs.flags&=-3;break;case 6:vs(Hs),Hs.flags&=-3,xs(Hs.alternate,Hs);break;case 1024:Hs.flags&=-1025;break;case 1028:Hs.flags&=-1025,xs(Hs.alternate,Hs);break;case 4:xs(Hs.alternate,Hs);break;case 8:ys(s,c=Hs);var _=c.alternate;ms(c),null!==_&&ms(_)}Hs=Hs.nextEffect}}catch(e){if(null===Hs)throw Error(a(330));Nc(Hs,e),Hs=Hs.nextEffect}}while(null!==Hs);if(w=Fi,b=hi(),x=w.focusedElem,s=w.selectionRange,b!==x&&x&&x.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){null!==s&&di(x)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in x?(x.selectionStart=b,x.selectionEnd=Math.min(w,x.value.length)):(w=(b=x.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),c=x.textContent.length,_=Math.min(s.start,c),s=void 0===s.end?_:Math.min(s.end,c),!w.extend&&_>s&&(c=s,s=_,_=c),c=ui(x,_),o=ui(x,s),c&&o&&(1!==w.rangeCount||w.anchorNode!==c.node||w.anchorOffset!==c.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((b=b.createRange()).setStart(c.node,c.offset),w.removeAllRanges(),_>s?(w.addRange(b),w.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),w.addRange(b))))),b=[];for(w=x;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<b.length;x++)(w=b[x]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Xt=!!Di,Fi=Di=null,e.current=n,Hs=i;do{try{for(x=e;null!==Hs;){var S=Hs.flags;if(36&S&&ds(x,Hs.alternate,Hs),128&S){b=void 0;var M=Hs.ref;if(null!==M){var T=Hs.stateNode;switch(Hs.tag){case 5:b=T;break;default:b=T}"function"==typeof M?M(b):M.current=b}}Hs=Hs.nextEffect}}catch(e){if(null===Hs)throw Error(a(330));Nc(Hs,e),Hs=Hs.nextEffect}}while(null!==Hs);Hs=null,Nr(),Ts=r}else e.current=n;if(qs)qs=!1,Js=e,Xs=t;else for(Hs=i;null!==Hs;)t=Hs.nextEffect,Hs.nextEffect=null,8&Hs.flags&&((S=Hs).sibling=null,S.stateNode=null),Hs=t;if(0===(i=e.pendingLanes)&&(Ws=null),1===i?e===Ks?$s++:($s=0,Ks=e):$s=0,n=n.stateNode,xr&&"function"==typeof xr.onCommitFiberRoot)try{xr.onCommitFiberRoot(yr,n,void 0,64==(64&n.current.flags))}catch(e){}if(lc(e,zr()),Gs)throw Gs=!1,e=Vs,Vs=null,e;return 0!=(8&Ts)||Gr(),null}function Ac(){for(;null!==Hs;){var e=Hs.alternate;rc||null===ic||(0!=(8&Hs.flags)?Ke(Hs,ic)&&(rc=!0):13===Hs.tag&&ws(e,Hs)&&Ke(Hs,ic)&&(rc=!0));var t=Hs.flags;0!=(256&t)&&hs(e,Hs),0==(512&t)||qs||(qs=!0,Hr(97,(function(){return Cc(),null}))),Hs=Hs.nextEffect}}function Cc(){if(90!==Xs){var e=97<Xs?97:Xs;return Xs=90,jr(e,Pc)}return!1}function Rc(e,t){Ys.push(t,e),qs||(qs=!0,Hr(97,(function(){return Cc(),null})))}function Lc(e,t){Zs.push(t,e),qs||(qs=!0,Hr(97,(function(){return Cc(),null})))}function Pc(){if(null===Js)return!1;var e=Js;if(Js=null,0!=(48&Ts))throw Error(a(331));var t=Ts;Ts|=32;var n=Zs;Zs=[];for(var i=0;i<n.length;i+=2){var r=n[i],o=n[i+1],s=r.destroy;if(r.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===o)throw Error(a(330));Nc(o,e)}}for(n=Ys,Ys=[],i=0;i<n.length;i+=2){r=n[i],o=n[i+1];try{var c=r.create;r.destroy=c()}catch(e){if(null===o)throw Error(a(330));Nc(o,e)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Ts=t,Gr(),!0}function Oc(e,t,n){ao(e,t=ss(0,t=rs(n,t),1)),t=oc(),null!==(e=cc(e,1))&&(Ht(e,1,t),lc(e,t))}function Nc(e,t){if(3===e.tag)Oc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Oc(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Ws||!Ws.has(i))){var r=cs(n,e=rs(t,e),1);if(ao(n,r),r=oc(),null!==(n=cc(n,1)))Ht(n,1,r),lc(n,r);else if("function"==typeof i.componentDidCatch&&(null===Ws||!Ws.has(i)))try{i.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function kc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=oc(),e.pingedLanes|=e.suspendedLanes&n,Es===e&&(Cs&n)===n&&(4===Ps||3===Ps&&(62914560&Cs)===Cs&&500>zr()-zs?vc(e,0):Ds|=n),lc(e,t)}function Ic(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Br()?1:2:(0===tc&&(tc=Ns),0===(t=Ut(62914560&~tc))&&(t=4194304))),n=oc(),null!==(e=cc(e,t))&&(Ht(e,t,n),lc(e,n))}function Dc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Fc(e,t,n,i){return new Dc(e,t,n,i)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bc(e,t){var n=e.alternate;return null===n?((n=Fc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uc(e,t,n,i,r,o){var s=2;if(i=e,"function"==typeof e)zc(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case M:return jc(n.children,r,o,t);case D:s=8,r|=16;break;case T:s=8,r|=1;break;case E:return(e=Fc(12,n,t,8|r)).elementType=E,e.type=E,e.lanes=o,e;case L:return(e=Fc(13,n,t,r)).type=L,e.elementType=L,e.lanes=o,e;case P:return(e=Fc(19,n,t,r)).elementType=P,e.lanes=o,e;case F:return Hc(n,r,o,t);case z:return(e=Fc(24,n,t,r)).elementType=z,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case C:s=9;break e;case R:s=11;break e;case O:s=14;break e;case N:s=16,i=null;break e;case k:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Fc(s,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function jc(e,t,n,i){return(e=Fc(7,e,i,t)).lanes=n,e}function Hc(e,t,n,i){return(e=Fc(23,e,i,t)).elementType=F,e.lanes=n,e}function Gc(e,t,n){return(e=Fc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Fc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function qc(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Jc(e,t,n,i){var r=t.current,o=oc(),s=ac(r);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(dr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(a(171))}if(1===n.tag){var l=n.type;if(dr(l)){n=mr(n,l,c);break e}}n=c}else n=sr;return null===t.context?t.context=n:t.pendingContext=n,(t=oo(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),ao(r,t),sc(r,s,o),s}function Xc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Yc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zc(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}function Qc(e,t,n){var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Wc(e,t,null!=n&&!0===n.hydrate),t=Fc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,io(t),e[Yi]=n.current,Ai(8===e.nodeType?e.parentNode:e),i)for(e=0;e<i.length;e++){var r=(t=i[e])._getVersion;r=r(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,r]:n.mutableSourceEagerHydrationData.push(t,r)}this._internalRoot=n}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kc(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof r){var s=r;r=function(){var e=Xc(a);s.call(e)}}Jc(t,a,e,r)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Qc(e,0,t?{hydrate:!0}:void 0)}(n,i),a=o._internalRoot,"function"==typeof r){var c=r;r=function(){var e=Xc(a);c.call(e)}}fc((function(){Jc(t,a,e,r)}))}return Xc(a)}function el(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return qc(e,t,null,n)}js=function(e,t,n){var i=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||lr.current)Oa=!0;else{if(0==(n&i)){switch(Oa=!1,t.tag){case 3:Ha(t),Go();break;case 5:Po(t);break;case 1:dr(t.type)&&gr(t);break;case 4:Ro(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var r=t.type._context;ar(Jr,r._currentValue),r._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ja(e,t,n):(ar(No,1&No.current),null!==(t=es(e,t,n))?t.sibling:null);ar(No,1&No.current);break;case 19:if(i=0!=(n&t.childLanes),0!=(64&e.flags)){if(i)return Ka(e,t,n);t.flags|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),ar(No,No.current),i)break;return null;case 23:case 24:return t.lanes=0,Fa(e,t,n)}return es(e,t,n)}Oa=0!=(16384&e.flags)}else Oa=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=hr(t,cr.current),eo(t,n),r=na(null,t,i,e,r,n),t.flags|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,dr(i)){var o=!0;gr(t)}else o=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,io(t);var s=i.getDerivedStateFromProps;"function"==typeof s&&ho(t,i,s,e),r.updater=po,t.stateNode=r,r._reactInternals=t,vo(t,i,e,n),t=ja(null,t,i,!0,o,n)}else t.tag=0,Na(null,t,r,n),t=t.child;return t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return zc(e)?1:0;if(null!=e){if((e=e.$$typeof)===R)return 11;if(e===O)return 14}return 2}(r),e=qr(r,e),o){case 0:t=Ba(null,t,r,e,n);break e;case 1:t=Ua(null,t,r,e,n);break e;case 11:t=ka(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,qr(r.type,e),i,n);break e}throw Error(a(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ba(e,t,i,r=t.elementType===i?r:qr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ua(e,t,i,r=t.elementType===i?r:qr(i,r),n);case 3:if(Ha(t),i=t.updateQueue,null===e||null===i)throw Error(a(282));if(i=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,ro(e,t),co(t,i,null,n),(i=t.memoizedState.element)===r)Go(),t=es(e,t,n);else{if((o=(r=t.stateNode).hydrate)&&(Do=Gi(t.stateNode.containerInfo.firstChild),Io=t,o=Fo=!0),o){if(null!=(e=r.mutableSourceEagerHydrationData))for(r=0;r<e.length;r+=2)(o=e[r])._workInProgressVersionPrimary=e[r+1],Vo.push(o);for(n=So(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Na(e,t,i,n),Go();t=t.child}return t;case 5:return Po(t),null===e&&Uo(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,Bi(i,r)?s=null:null!==o&&Bi(i,o)&&(t.flags|=16),za(e,t),Na(e,t,s,n),t.child;case 6:return null===e&&Uo(t),null;case 13:return Ja(e,t,n);case 4:return Ro(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=_o(t,null,i,n):Na(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ka(e,t,i,r=t.elementType===i?r:qr(i,r),n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value;var c=t.type._context;if(ar(Jr,c._currentValue),c._currentValue=o,null!==s)if(c=s.value,0===(o=ai(c,o)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(c,o):1073741823))){if(s.children===r.children&&!lr.current){t=es(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){s=c.child;for(var u=l.firstContext;null!==u;){if(u.context===i&&0!=(u.observedBits&o)){1===c.tag&&((u=oo(-1,n&-n)).tag=2,ao(c,u)),c.lanes|=n,null!==(u=c.alternate)&&(u.lanes|=n),Kr(c.return,n),l.lanes|=n;break}u=u.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Na(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(o=t.pendingProps).children,eo(t,n),i=i(r=to(r,o.unstable_observedBits)),t.flags|=1,Na(e,t,i,n),t.child;case 14:return o=qr(r=t.type,t.pendingProps),Ia(e,t,r,o=qr(r.type,o),i,n);case 15:return Da(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:qr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,dr(i)?(e=!0,gr(t)):e=!1,eo(t,n),mo(t,i,r),vo(t,i,r,n),ja(null,t,i,!0,e,n);case 19:return Ka(e,t,n);case 23:case 24:return Fa(e,t,n)}throw Error(a(156,t.tag))},Qc.prototype.render=function(e){Jc(e,this._internalRoot,null,null)},Qc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Jc(null,e,null,(function(){t[Yi]=null}))},et=function(e){13===e.tag&&(sc(e,4,oc()),Zc(e,4))},tt=function(e){13===e.tag&&(sc(e,67108864,oc()),Zc(e,67108864))},nt=function(e){if(13===e.tag){var t=oc(),n=ac(e);sc(e,n,t),Zc(e,n)}},it=function(e,t){return t()},Ee=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=er(i);if(!r)throw Error(a(90));Q(i),ne(i,r)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Oe=pc,Ne=function(e,t,n,i,r){var o=Ts;Ts|=4;try{return jr(98,e.bind(null,t,n,i,r))}finally{0===(Ts=o)&&(Us(),Gr())}},ke=function(){0==(49&Ts)&&(function(){if(null!==Qs){var e=Qs;Qs=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,lc(e,zr())}))}Gr()}(),Cc())},Ie=function(e,t){var n=Ts;Ts|=2;try{return e(t)}finally{0===(Ts=n)&&(Us(),Gr())}};var tl={Events:[$i,Ki,er,Le,Pe,Cc,{current:!1}]},nl={findFiberByHostInstance:Qi,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},il={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{yr=rl.inject(il),xr=rl}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=el,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ts;if(0!=(48&n))return e(t);Ts|=1;try{if(e)return jr(99,e.bind(null,t))}finally{Ts=n,Gr()}},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Kc(null,e,t,!0,n)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Kc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){Kc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Yi]=null}))})),!0)},t.unstable_batchedUpdates=pc,t.unstable_createPortal=function(e,t){return el(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Kc(e,t,n,!1,i)},t.version="17.0.1"},function(e,t,n){"use strict";
/** @license React v17.0.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(21),r=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,c=60112;t.Suspense=60113;var l=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),c=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),u=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var x=y.prototype=new v;x.constructor=y,i(x,g.prototype),x.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:r,type:e,key:a,ref:s,props:o,_owner:b.current}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var T=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case o:c=!0}}if(c)return a=a(c=e),e=""===i?"."+E(c,0):i,Array.isArray(a)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),A(a,t,n,"",(function(e){return e}))):null!=a&&(M(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=""===i?".":i+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=i+E(s=e[l],l);c+=A(s,t,n,u,a)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),l=0;!(s=e.next()).done;)c+=A(s=s.value,t,n,u=i+E(s,l++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function C(e,t,n){if(null==e)return e;var i=[],r=0;return A(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function R(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var L={current:null};function P(){var e=L.current;if(null===e)throw Error(p(321));return e}var O={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error(p(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var o=i({},e.props),a=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!_.hasOwnProperty(u)&&(o[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:r,type:e.type,key:a,ref:s,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.1"},function(e,t,n){"use strict";e.exports=n(75)},function(e,t,n){"use strict";
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i,r,o,a;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,h=null,d=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(d,0),e}};i=function(e){null!==u?setTimeout(i,0,e):(u=e,setTimeout(d,0))},r=function(e,t){h=setTimeout(e,t)},o=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,v=null,y=-1,x=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,_=w.port2;w.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();b=e+x;try{v(!0,e)?_.postMessage(null):(g=!1,v=null)}catch(e){throw _.postMessage(null),e}}else g=!1},i=function(e){v=e,g||(g=!0,_.postMessage(null))},r=function(e,n){y=p((function(){e(t.unstable_now())}),n)},o=function(){f(y),y=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,r=e[i];if(!(void 0!==r&&0<E(r,t)))break e;e[i]=t,e[n]=r,n=i}}function M(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var o=2*(i+1)-1,a=e[o],s=o+1,c=e[s];if(void 0!==a&&0>E(a,n))void 0!==c&&0>E(c,a)?(e[i]=c,e[s]=n,i=s):(e[i]=a,e[o]=n,i=o);else{if(!(void 0!==c&&0>E(c,n)))break e;e[i]=c,e[s]=n,i=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],C=[],R=1,L=null,P=3,O=!1,N=!1,k=!1;function I(e){for(var t=M(C);null!==t;){if(null===t.callback)T(C);else{if(!(t.startTime<=e))break;T(C),t.sortIndex=t.expirationTime,S(A,t)}t=M(C)}}function D(e){if(k=!1,I(e),!N)if(null!==M(A))N=!0,i(F);else{var t=M(C);null!==t&&r(D,t.startTime-e)}}function F(e,n){N=!1,k&&(k=!1,o()),O=!0;var i=P;try{for(I(n),L=M(A);null!==L&&(!(L.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=L.callback;if("function"==typeof a){L.callback=null,P=L.priorityLevel;var s=a(L.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?L.callback=s:L===M(A)&&T(A),I(n)}else T(A);L=M(A)}if(null!==L)var c=!0;else{var l=M(C);null!==l&&r(D,l.startTime-n),c=!1}return c}finally{L=null,P=i,O=!1}}var z=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){N||O||(N=!0,i(F))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return M(A)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:R++,callback:n,priorityLevel:e,startTime:a,expirationTime:c=a+c,sortIndex:-1},a>s?(e.sortIndex=a,S(C,e),null===M(A)&&e===M(C)&&(k?o():k=!0,r(D,a-s))):(e.sortIndex=c,S(A,e),N||O||(N=!0,i(F))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,i)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){e.exports=n.p+"182396c8d851bbbaada91d17139eabd8.mp3"},function(e,t,n){e.exports=n.p+"356a2fa2fef6ae9e8a65e977e75feb5e.mp3"},function(e,t,n){e.exports=n.p+"f60f34af42b69b6b5f255a1fdf07078e.mp3"},function(e,t,n){e.exports=n.p+"462121f9f97118b75069169251770aa1.jpg"},function(e,t,n){e.exports=n.p+"a3dd59bdee9d284e5f38aa0853f5f9c2.jpg"},function(e,t,n){e.exports=n.p+"9ec121e1b941e29b327ead1f3fd1d5df.jpg"},function(e,t,n){e.exports=n.p+"a77e67433af901eb23d1a3bc9842a58c.jpg"},function(e,t,n){e.exports=n.p+"baa7eaaa6f8d6a93e20cb0223ecfee7e.jpg"},function(e,t,n){e.exports=n.p+"cf02e8d1c7c3d2d5483c53f9459f5464.jpg"},function(e,t,n){e.exports=n.p+"a1e17dfe3d39dd8b52379b119dd6a30c.jpg"},function(e,t,n){e.exports=n.p+"768d153eabe0494e377d3ae0e50faf83.jpg"},function(e,t,n){e.exports=n.p+"aa33bdc4d2d1d3572087b0b1e8f5711c.jpg"},function(e,t,n){e.exports=n.p+"8675303aeff5e765d7eeeecd2c9d5741.jpg"},function(e,t,n){e.exports=n.p+"b599f813a76b3bab5375b9df96fc3061.jpg"},function(e,t,n){e.exports=n.p+"7cf06caf5de0a2bb1b4fa73c292c1e0f.jpg"},function(e,t,n){e.exports=n.p+"a4ac84e7059e59683be09227d245d003.jpg"},function(e,t,n){e.exports=n.p+"d2a78ff9c761c519fc1db05832af3a1c.jpg"},function(e,t,n){e.exports=n.p+"52544188dc2c751509078fbc6ddc2164.jpg"},function(e,t,n){e.exports=n.p+"5029f2992fcc311faacd3cd214728056.jpg"},function(e,t,n){e.exports=n.p+"8ff99d4ad331a6cb8df97748fdab4287.jpg"},function(e,t,n){e.exports=n.p+"2f17aea1c47b38e65993aa9c78c9db65.jpg"},function(e,t,n){e.exports=n.p+"a29ab34a61c2f5504cad588f169cd4f3.png"},function(e,t,n){e.exports=n.p+"183d99d08a5e2ba9912e8ad69512fe94.jpg"},function(e,t,n){e.exports=n.p+"bcfb9394f4141ab0c9cdaeaf62f1aadd.jpg"},function(e,t,n){e.exports=n.p+"be2bf8db582b674ba961add047716dfe.jpg"},function(e,t,n){e.exports=n.p+"e4553dbc5f2188290af4ceb007c64fea.jpg"},function(e,t,n){e.exports=n.p+"44bc6af3cea65fa13ff3cba9e4d94933.jpg"},function(e,t,n){e.exports=n.p+"87fe6339f668ac2298aff772f6688816.jpg"},function(e,t,n){e.exports=n.p+"c9d1f6a453d673a310bca758afcf73ac.png"},function(e,t,n){e.exports=n.p+"f8722875071fb3f56277c4a03f7f1223.jpg"},function(e,t,n){e.exports=n.p+"f90c9de67e4962140bdfa2f8697f8e14.jpg"},function(e,t,n){e.exports=n.p+"6fcfa7e6789e87957c0c7419c18fad9c.png"},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.block"):60121,x=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,w=i?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case h:case d:case a:case c:case s:case f:return e;default:switch(e=e&&e.$$typeof){case u:case p:case v:case g:case l:return e;default:return t}}case o:return t}}}function S(e){return _(e)===d}t.AsyncMode=h,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=p,t.Fragment=a,t.Lazy=v,t.Memo=g,t.Portal=o,t.Profiler=c,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||_(e)===h},t.isConcurrentMode=S,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===p},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===v},t.isMemo=function(e){return _(e)===g},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===c},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===c||e===s||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===x||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},t.typeOf=_},function(e,t,n){"use strict";var i=n(113);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var i=n(117);e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){e.exports="#define GLSLIFY 1\nattribute vec4 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main () {\n  gl_Position = position;\n}\n"},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\n\nvoid main () {\n  gl_FragColor = vec4(position.xyz, 1.0);\n}\n"},function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"ACESFilmicToneMapping",(function(){return zn})),n.d(i,"AddEquation",(function(){return sn})),n.d(i,"AddOperation",(function(){return Nn})),n.d(i,"AdditiveAnimationBlendMode",(function(){return Cr})),n.d(i,"AdditiveBlending",(function(){return nn})),n.d(i,"AlphaFormat",(function(){return yi})),n.d(i,"AlwaysDepth",(function(){return Mn})),n.d(i,"AlwaysStencilFunc",(function(){return oo})),n.d(i,"AmbientLight",(function(){return ef})),n.d(i,"AmbientLightProbe",(function(){return Mf})),n.d(i,"AnimationClip",(function(){return sp})),n.d(i,"AnimationLoader",(function(){return mp})),n.d(i,"AnimationMixer",(function(){return em})),n.d(i,"AnimationObjectGroup",(function(){return $f})),n.d(i,"AnimationUtils",(function(){return Xd})),n.d(i,"ArcCurve",(function(){return Sp})),n.d(i,"ArrayCamera",(function(){return du})),n.d(i,"ArrowHelper",(function(){return Hm})),n.d(i,"Audio",(function(){return kf})),n.d(i,"AudioAnalyser",(function(){return Uf})),n.d(i,"AudioContext",(function(){return wf})),n.d(i,"AudioListener",(function(){return Nf})),n.d(i,"AudioLoader",(function(){return _f})),n.d(i,"AxesHelper",(function(){return Gm})),n.d(i,"AxisHelper",(function(){return zg})),n.d(i,"BackSide",(function(){return Zt})),n.d(i,"BasicDepthPacking",(function(){return Ur})),n.d(i,"BasicShadowMap",(function(){return Wt})),n.d(i,"BinaryTextureLoader",(function(){return Gg})),n.d(i,"Bone",(function(){return Ju})),n.d(i,"BooleanKeyframeTrack",(function(){return ep})),n.d(i,"BoundingBoxHelper",(function(){return Bg})),n.d(i,"Box2",(function(){return lm})),n.d(i,"Box3",(function(){return xa})),n.d(i,"Box3Helper",(function(){return Fm})),n.d(i,"BoxBufferGeometry",(function(){return Qs})),n.d(i,"BoxGeometry",(function(){return Zs})),n.d(i,"BoxHelper",(function(){return Dm})),n.d(i,"BufferAttribute",(function(){return os})),n.d(i,"BufferGeometry",(function(){return Ms})),n.d(i,"BufferGeometryLoader",(function(){return lf})),n.d(i,"ByteType",(function(){return si})),n.d(i,"Cache",(function(){return lp})),n.d(i,"Camera",(function(){return nc})),n.d(i,"CameraHelper",(function(){return Nm})),n.d(i,"CanvasRenderer",(function(){return qg})),n.d(i,"CanvasTexture",(function(){return xh})),n.d(i,"CatmullRomCurve3",(function(){return Rp})),n.d(i,"CineonToneMapping",(function(){return Fn})),n.d(i,"CircleBufferGeometry",(function(){return Id})),n.d(i,"CircleGeometry",(function(){return kd})),n.d(i,"ClampToEdgeWrapping",(function(){return Xn})),n.d(i,"Clock",(function(){return Cf})),n.d(i,"ClosedSplineCurve3",(function(){return Ig})),n.d(i,"Color",(function(){return Ya})),n.d(i,"ColorKeyframeTrack",(function(){return tp})),n.d(i,"CompressedTexture",(function(){return yh})),n.d(i,"CompressedTextureLoader",(function(){return gp})),n.d(i,"ConeBufferGeometry",(function(){return Nd})),n.d(i,"ConeGeometry",(function(){return Od})),n.d(i,"CubeCamera",(function(){return rc})),n.d(i,"CubeGeometry",(function(){return Zs})),n.d(i,"CubeReflectionMapping",(function(){return jn})),n.d(i,"CubeRefractionMapping",(function(){return Hn})),n.d(i,"CubeTexture",(function(){return Lc})),n.d(i,"CubeTextureLoader",(function(){return xp})),n.d(i,"CubeUVReflectionMapping",(function(){return Wn})),n.d(i,"CubeUVRefractionMapping",(function(){return qn})),n.d(i,"CubicBezierCurve",(function(){return Np})),n.d(i,"CubicBezierCurve3",(function(){return kp})),n.d(i,"CubicInterpolant",(function(){return Zd})),n.d(i,"CullFaceBack",(function(){return Ht})),n.d(i,"CullFaceFront",(function(){return Gt})),n.d(i,"CullFaceFrontBack",(function(){return Vt})),n.d(i,"CullFaceNone",(function(){return jt})),n.d(i,"Curve",(function(){return wp})),n.d(i,"CurvePath",(function(){return jp})),n.d(i,"CustomBlending",(function(){return an})),n.d(i,"CustomToneMapping",(function(){return Bn})),n.d(i,"CylinderBufferGeometry",(function(){return Pd})),n.d(i,"CylinderGeometry",(function(){return Ld})),n.d(i,"Cylindrical",(function(){return sm})),n.d(i,"DataTexture",(function(){return ac})),n.d(i,"DataTexture2DArray",(function(){return Pc})),n.d(i,"DataTexture3D",(function(){return Oc})),n.d(i,"DataTextureLoader",(function(){return vp})),n.d(i,"DecrementStencilOp",(function(){return Xr})),n.d(i,"DecrementWrapStencilOp",(function(){return Zr})),n.d(i,"DefaultLoadingManager",(function(){return hp})),n.d(i,"DepthFormat",(function(){return Mi})),n.d(i,"DepthStencilFormat",(function(){return Ti})),n.d(i,"DepthTexture",(function(){return bh})),n.d(i,"DirectionalLight",(function(){return Kp})),n.d(i,"DirectionalLightHelper",(function(){return Lm})),n.d(i,"DirectionalLightShadow",(function(){return $p})),n.d(i,"DiscreteInterpolant",(function(){return $d})),n.d(i,"DodecahedronBufferGeometry",(function(){return Nh})),n.d(i,"DodecahedronGeometry",(function(){return Oh})),n.d(i,"DoubleSide",(function(){return Qt})),n.d(i,"DstAlphaFactor",(function(){return yn})),n.d(i,"DstColorFactor",(function(){return bn})),n.d(i,"DynamicBufferAttribute",(function(){return Tg})),n.d(i,"DynamicCopyUsage",(function(){return fo})),n.d(i,"DynamicDrawUsage",(function(){return so})),n.d(i,"DynamicReadUsage",(function(){return uo})),n.d(i,"EdgesGeometry",(function(){return Rd})),n.d(i,"EdgesHelper",(function(){return Ug})),n.d(i,"EllipseCurve",(function(){return _p})),n.d(i,"EqualDepth",(function(){return An})),n.d(i,"EqualStencilFunc",(function(){return eo})),n.d(i,"EquirectangularReflectionMapping",(function(){return Gn})),n.d(i,"EquirectangularRefractionMapping",(function(){return Vn})),n.d(i,"Euler",(function(){return Go})),n.d(i,"EventDispatcher",(function(){return go})),n.d(i,"ExtrudeBufferGeometry",(function(){return md})),n.d(i,"ExtrudeGeometry",(function(){return fd})),n.d(i,"Face3",(function(){return Ka})),n.d(i,"Face4",(function(){return ug})),n.d(i,"FaceColors",(function(){return fg})),n.d(i,"FileLoader",(function(){return fp})),n.d(i,"FlatShading",(function(){return $t})),n.d(i,"Float32Attribute",(function(){return Ng})),n.d(i,"Float32BufferAttribute",(function(){return ps})),n.d(i,"Float64Attribute",(function(){return kg})),n.d(i,"Float64BufferAttribute",(function(){return fs})),n.d(i,"FloatType",(function(){return di})),n.d(i,"Fog",(function(){return bu})),n.d(i,"FogExp2",(function(){return xu})),n.d(i,"Font",(function(){return vf})),n.d(i,"FontLoader",(function(){return xf})),n.d(i,"FrontSide",(function(){return Yt})),n.d(i,"Frustum",(function(){return lc})),n.d(i,"GammaEncoding",(function(){return kr})),n.d(i,"Geometry",(function(){return Ys})),n.d(i,"GeometryUtils",(function(){return Wg})),n.d(i,"GreaterDepth",(function(){return Rn})),n.d(i,"GreaterEqualDepth",(function(){return Cn})),n.d(i,"GreaterEqualStencilFunc",(function(){return ro})),n.d(i,"GreaterStencilFunc",(function(){return no})),n.d(i,"GridHelper",(function(){return Tm})),n.d(i,"Group",(function(){return pu})),n.d(i,"HalfFloatType",(function(){return pi})),n.d(i,"HemisphereLight",(function(){return Wp})),n.d(i,"HemisphereLightHelper",(function(){return Mm})),n.d(i,"HemisphereLightProbe",(function(){return Sf})),n.d(i,"IcosahedronBufferGeometry",(function(){return Ph})),n.d(i,"IcosahedronGeometry",(function(){return Lh})),n.d(i,"ImageBitmapLoader",(function(){return mf})),n.d(i,"ImageLoader",(function(){return yp})),n.d(i,"ImageUtils",(function(){return So})),n.d(i,"ImmediateRenderObject",(function(){return pm})),n.d(i,"IncrementStencilOp",(function(){return Jr})),n.d(i,"IncrementWrapStencilOp",(function(){return Yr})),n.d(i,"InstancedBufferAttribute",(function(){return cf})),n.d(i,"InstancedBufferGeometry",(function(){return sf})),n.d(i,"InstancedInterleavedBuffer",(function(){return nm})),n.d(i,"InstancedMesh",(function(){return $u})),n.d(i,"Int16Attribute",(function(){return Rg})),n.d(i,"Int16BufferAttribute",(function(){return ls})),n.d(i,"Int32Attribute",(function(){return Pg})),n.d(i,"Int32BufferAttribute",(function(){return hs})),n.d(i,"Int8Attribute",(function(){return Eg})),n.d(i,"Int8BufferAttribute",(function(){return as})),n.d(i,"IntType",(function(){return ui})),n.d(i,"InterleavedBuffer",(function(){return wu})),n.d(i,"InterleavedBufferAttribute",(function(){return Su})),n.d(i,"Interpolant",(function(){return Yd})),n.d(i,"InterpolateDiscrete",(function(){return wr})),n.d(i,"InterpolateLinear",(function(){return _r})),n.d(i,"InterpolateSmooth",(function(){return Sr})),n.d(i,"InvertStencilOp",(function(){return Qr})),n.d(i,"JSONLoader",(function(){return Jg})),n.d(i,"KeepStencilOp",(function(){return Wr})),n.d(i,"KeyframeTrack",(function(){return Kd})),n.d(i,"LOD",(function(){return Hu})),n.d(i,"LatheBufferGeometry",(function(){return Td})),n.d(i,"LatheGeometry",(function(){return Md})),n.d(i,"Layers",(function(){return Vo})),n.d(i,"LensFlare",(function(){return Yg})),n.d(i,"LessDepth",(function(){return Tn})),n.d(i,"LessEqualDepth",(function(){return En})),n.d(i,"LessEqualStencilFunc",(function(){return to})),n.d(i,"LessStencilFunc",(function(){return Kr})),n.d(i,"Light",(function(){return Vp})),n.d(i,"LightProbe",(function(){return rf})),n.d(i,"LightShadow",(function(){return qp})),n.d(i,"Line",(function(){return oh})),n.d(i,"Line3",(function(){return dm})),n.d(i,"LineBasicMaterial",(function(){return Ku})),n.d(i,"LineCurve",(function(){return Ip})),n.d(i,"LineCurve3",(function(){return Dp})),n.d(i,"LineDashedMaterial",(function(){return qd})),n.d(i,"LineLoop",(function(){return lh})),n.d(i,"LinePieces",(function(){return dg})),n.d(i,"LineSegments",(function(){return ch})),n.d(i,"LineStrip",(function(){return hg})),n.d(i,"LinearEncoding",(function(){return Or})),n.d(i,"LinearFilter",(function(){return ti})),n.d(i,"LinearInterpolant",(function(){return Qd})),n.d(i,"LinearMipMapLinearFilter",(function(){return oi})),n.d(i,"LinearMipMapNearestFilter",(function(){return ii})),n.d(i,"LinearMipmapLinearFilter",(function(){return ri})),n.d(i,"LinearMipmapNearestFilter",(function(){return ni})),n.d(i,"LinearToneMapping",(function(){return In})),n.d(i,"Loader",(function(){return dp})),n.d(i,"LoaderUtils",(function(){return af})),n.d(i,"LoadingManager",(function(){return up})),n.d(i,"LogLuvEncoding",(function(){return Dr})),n.d(i,"LoopOnce",(function(){return yr})),n.d(i,"LoopPingPong",(function(){return br})),n.d(i,"LoopRepeat",(function(){return xr})),n.d(i,"LuminanceAlphaFormat",(function(){return _i})),n.d(i,"LuminanceFormat",(function(){return wi})),n.d(i,"MOUSE",(function(){return Bt})),n.d(i,"Material",(function(){return ts})),n.d(i,"MaterialLoader",(function(){return of})),n.d(i,"Math",(function(){return xo})),n.d(i,"MathUtils",(function(){return xo})),n.d(i,"Matrix3",(function(){return wo})),n.d(i,"Matrix4",(function(){return Uo})),n.d(i,"MaxEquation",(function(){return hn})),n.d(i,"Mesh",(function(){return Hs})),n.d(i,"MeshBasicMaterial",(function(){return ns})),n.d(i,"MeshDepthMaterial",(function(){return au})),n.d(i,"MeshDistanceMaterial",(function(){return su})),n.d(i,"MeshFaceMaterial",(function(){return gg})),n.d(i,"MeshLambertMaterial",(function(){return Vd})),n.d(i,"MeshMatcapMaterial",(function(){return Wd})),n.d(i,"MeshNormalMaterial",(function(){return Gd})),n.d(i,"MeshPhongMaterial",(function(){return jd})),n.d(i,"MeshPhysicalMaterial",(function(){return Ud})),n.d(i,"MeshStandardMaterial",(function(){return Bd})),n.d(i,"MeshToonMaterial",(function(){return Hd})),n.d(i,"MinEquation",(function(){return un})),n.d(i,"MirroredRepeatWrapping",(function(){return Yn})),n.d(i,"MixOperation",(function(){return On})),n.d(i,"MultiMaterial",(function(){return vg})),n.d(i,"MultiplyBlending",(function(){return on})),n.d(i,"MultiplyOperation",(function(){return Pn})),n.d(i,"NearestFilter",(function(){return Zn})),n.d(i,"NearestMipMapLinearFilter",(function(){return ei})),n.d(i,"NearestMipMapNearestFilter",(function(){return $n})),n.d(i,"NearestMipmapLinearFilter",(function(){return Kn})),n.d(i,"NearestMipmapNearestFilter",(function(){return Qn})),n.d(i,"NeverDepth",(function(){return Sn})),n.d(i,"NeverStencilFunc",(function(){return $r})),n.d(i,"NoBlending",(function(){return en})),n.d(i,"NoColors",(function(){return pg})),n.d(i,"NoToneMapping",(function(){return kn})),n.d(i,"NormalAnimationBlendMode",(function(){return Ar})),n.d(i,"NormalBlending",(function(){return tn})),n.d(i,"NotEqualDepth",(function(){return Ln})),n.d(i,"NotEqualStencilFunc",(function(){return io})),n.d(i,"NumberKeyframeTrack",(function(){return np})),n.d(i,"Object3D",(function(){return ra})),n.d(i,"ObjectLoader",(function(){return hf})),n.d(i,"ObjectSpaceNormalMap",(function(){return Gr})),n.d(i,"OctahedronBufferGeometry",(function(){return Rh})),n.d(i,"OctahedronGeometry",(function(){return Ch})),n.d(i,"OneFactor",(function(){return pn})),n.d(i,"OneMinusDstAlphaFactor",(function(){return xn})),n.d(i,"OneMinusDstColorFactor",(function(){return wn})),n.d(i,"OneMinusSrcAlphaFactor",(function(){return vn})),n.d(i,"OneMinusSrcColorFactor",(function(){return mn})),n.d(i,"OrthographicCamera",(function(){return Qp})),n.d(i,"PCFShadowMap",(function(){return qt})),n.d(i,"PCFSoftShadowMap",(function(){return Jt})),n.d(i,"PMREMGenerator",(function(){return ng})),n.d(i,"ParametricBufferGeometry",(function(){return Sh})),n.d(i,"ParametricGeometry",(function(){return _h})),n.d(i,"Particle",(function(){return xg})),n.d(i,"ParticleBasicMaterial",(function(){return _g})),n.d(i,"ParticleSystem",(function(){return bg})),n.d(i,"ParticleSystemMaterial",(function(){return Sg})),n.d(i,"Path",(function(){return Hp})),n.d(i,"PerspectiveCamera",(function(){return ic})),n.d(i,"Plane",(function(){return ka})),n.d(i,"PlaneBufferGeometry",(function(){return fc})),n.d(i,"PlaneGeometry",(function(){return pc})),n.d(i,"PlaneHelper",(function(){return zm})),n.d(i,"PointCloud",(function(){return yg})),n.d(i,"PointCloudMaterial",(function(){return wg})),n.d(i,"PointLight",(function(){return Zp})),n.d(i,"PointLightHelper",(function(){return bm})),n.d(i,"Points",(function(){return mh})),n.d(i,"PointsMaterial",(function(){return uh})),n.d(i,"PolarGridHelper",(function(){return Em})),n.d(i,"PolyhedronBufferGeometry",(function(){return Th})),n.d(i,"PolyhedronGeometry",(function(){return Mh})),n.d(i,"PositionalAudio",(function(){return Bf})),n.d(i,"PropertyBinding",(function(){return Qf})),n.d(i,"PropertyMixer",(function(){return jf})),n.d(i,"QuadraticBezierCurve",(function(){return Fp})),n.d(i,"QuadraticBezierCurve3",(function(){return zp})),n.d(i,"Quaternion",(function(){return Ro})),n.d(i,"QuaternionKeyframeTrack",(function(){return rp})),n.d(i,"QuaternionLinearInterpolant",(function(){return ip})),n.d(i,"REVISION",(function(){return zt})),n.d(i,"RGBADepthPacking",(function(){return jr})),n.d(i,"RGBAFormat",(function(){return bi})),n.d(i,"RGBAIntegerFormat",(function(){return Pi})),n.d(i,"RGBA_ASTC_10x10_Format",(function(){return er})),n.d(i,"RGBA_ASTC_10x5_Format",(function(){return Qi})),n.d(i,"RGBA_ASTC_10x6_Format",(function(){return $i})),n.d(i,"RGBA_ASTC_10x8_Format",(function(){return Ki})),n.d(i,"RGBA_ASTC_12x10_Format",(function(){return tr})),n.d(i,"RGBA_ASTC_12x12_Format",(function(){return nr})),n.d(i,"RGBA_ASTC_4x4_Format",(function(){return Gi})),n.d(i,"RGBA_ASTC_5x4_Format",(function(){return Vi})),n.d(i,"RGBA_ASTC_5x5_Format",(function(){return Wi})),n.d(i,"RGBA_ASTC_6x5_Format",(function(){return qi})),n.d(i,"RGBA_ASTC_6x6_Format",(function(){return Ji})),n.d(i,"RGBA_ASTC_8x5_Format",(function(){return Xi})),n.d(i,"RGBA_ASTC_8x6_Format",(function(){return Yi})),n.d(i,"RGBA_ASTC_8x8_Format",(function(){return Zi})),n.d(i,"RGBA_BPTC_Format",(function(){return ir})),n.d(i,"RGBA_ETC2_EAC_Format",(function(){return Hi})),n.d(i,"RGBA_PVRTC_2BPPV1_Format",(function(){return Bi})),n.d(i,"RGBA_PVRTC_4BPPV1_Format",(function(){return zi})),n.d(i,"RGBA_S3TC_DXT1_Format",(function(){return Ni})),n.d(i,"RGBA_S3TC_DXT3_Format",(function(){return ki})),n.d(i,"RGBA_S3TC_DXT5_Format",(function(){return Ii})),n.d(i,"RGBDEncoding",(function(){return Br})),n.d(i,"RGBEEncoding",(function(){return Ir})),n.d(i,"RGBEFormat",(function(){return Si})),n.d(i,"RGBFormat",(function(){return xi})),n.d(i,"RGBIntegerFormat",(function(){return Li})),n.d(i,"RGBM16Encoding",(function(){return zr})),n.d(i,"RGBM7Encoding",(function(){return Fr})),n.d(i,"RGB_ETC1_Format",(function(){return Ui})),n.d(i,"RGB_ETC2_Format",(function(){return ji})),n.d(i,"RGB_PVRTC_2BPPV1_Format",(function(){return Fi})),n.d(i,"RGB_PVRTC_4BPPV1_Format",(function(){return Di})),n.d(i,"RGB_S3TC_DXT1_Format",(function(){return Oi})),n.d(i,"RGFormat",(function(){return Ci})),n.d(i,"RGIntegerFormat",(function(){return Ri})),n.d(i,"RawShaderMaterial",(function(){return zd})),n.d(i,"Ray",(function(){return La})),n.d(i,"Raycaster",(function(){return im})),n.d(i,"RectAreaLight",(function(){return tf})),n.d(i,"RedFormat",(function(){return Ei})),n.d(i,"RedIntegerFormat",(function(){return Ai})),n.d(i,"ReinhardToneMapping",(function(){return Dn})),n.d(i,"RepeatWrapping",(function(){return Jn})),n.d(i,"ReplaceStencilOp",(function(){return qr})),n.d(i,"ReverseSubtractEquation",(function(){return ln})),n.d(i,"RingBufferGeometry",(function(){return Sd})),n.d(i,"RingGeometry",(function(){return _d})),n.d(i,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return mr})),n.d(i,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return dr})),n.d(i,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return pr})),n.d(i,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return fr})),n.d(i,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return gr})),n.d(i,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return vr})),n.d(i,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return rr})),n.d(i,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return or})),n.d(i,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return ar})),n.d(i,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return sr})),n.d(i,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return cr})),n.d(i,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return lr})),n.d(i,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return ur})),n.d(i,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return hr})),n.d(i,"Scene",(function(){return oa})),n.d(i,"SceneUtils",(function(){return Xg})),n.d(i,"ShaderChunk",(function(){return mc})),n.d(i,"ShaderLib",(function(){return gc})),n.d(i,"ShaderMaterial",(function(){return tc})),n.d(i,"ShadowMaterial",(function(){return Fd})),n.d(i,"Shape",(function(){return Gp})),n.d(i,"ShapeBufferGeometry",(function(){return Ad})),n.d(i,"ShapeGeometry",(function(){return Ed})),n.d(i,"ShapePath",(function(){return gf})),n.d(i,"ShapeUtils",(function(){return hd})),n.d(i,"ShortType",(function(){return ci})),n.d(i,"Skeleton",(function(){return qu})),n.d(i,"SkeletonHelper",(function(){return xm})),n.d(i,"SkinnedMesh",(function(){return Gu})),n.d(i,"SmoothShading",(function(){return Kt})),n.d(i,"Sphere",(function(){return _a})),n.d(i,"SphereBufferGeometry",(function(){return wd})),n.d(i,"SphereGeometry",(function(){return bd})),n.d(i,"Spherical",(function(){return am})),n.d(i,"SphericalHarmonics3",(function(){return nf})),n.d(i,"Spline",(function(){return Fg})),n.d(i,"SplineCurve",(function(){return Bp})),n.d(i,"SplineCurve3",(function(){return Dg})),n.d(i,"SpotLight",(function(){return Xp})),n.d(i,"SpotLightHelper",(function(){return mm})),n.d(i,"SpotLightShadow",(function(){return Jp})),n.d(i,"Sprite",(function(){return zu})),n.d(i,"SpriteMaterial",(function(){return Mu})),n.d(i,"SrcAlphaFactor",(function(){return gn})),n.d(i,"SrcAlphaSaturateFactor",(function(){return _n})),n.d(i,"SrcColorFactor",(function(){return fn})),n.d(i,"StaticCopyUsage",(function(){return po})),n.d(i,"StaticDrawUsage",(function(){return ao})),n.d(i,"StaticReadUsage",(function(){return lo})),n.d(i,"StereoCamera",(function(){return Af})),n.d(i,"StreamCopyUsage",(function(){return mo})),n.d(i,"StreamDrawUsage",(function(){return co})),n.d(i,"StreamReadUsage",(function(){return ho})),n.d(i,"StringKeyframeTrack",(function(){return op})),n.d(i,"SubtractEquation",(function(){return cn})),n.d(i,"SubtractiveBlending",(function(){return rn})),n.d(i,"TOUCH",(function(){return Ut})),n.d(i,"TangentSpaceNormalMap",(function(){return Hr})),n.d(i,"TetrahedronBufferGeometry",(function(){return Ah})),n.d(i,"TetrahedronGeometry",(function(){return Eh})),n.d(i,"TextBufferGeometry",(function(){return xd})),n.d(i,"TextGeometry",(function(){return yd})),n.d(i,"Texture",(function(){return To})),n.d(i,"TextureLoader",(function(){return bp})),n.d(i,"TorusBufferGeometry",(function(){return Bh})),n.d(i,"TorusGeometry",(function(){return zh})),n.d(i,"TorusKnotBufferGeometry",(function(){return Fh})),n.d(i,"TorusKnotGeometry",(function(){return Dh})),n.d(i,"Triangle",(function(){return Wa})),n.d(i,"TriangleFanDrawMode",(function(){return Pr})),n.d(i,"TriangleStripDrawMode",(function(){return Lr})),n.d(i,"TrianglesDrawMode",(function(){return Rr})),n.d(i,"TubeBufferGeometry",(function(){return Ih})),n.d(i,"TubeGeometry",(function(){return kh})),n.d(i,"UVMapping",(function(){return Un})),n.d(i,"Uint16Attribute",(function(){return Lg})),n.d(i,"Uint16BufferAttribute",(function(){return us})),n.d(i,"Uint32Attribute",(function(){return Og})),n.d(i,"Uint32BufferAttribute",(function(){return ds})),n.d(i,"Uint8Attribute",(function(){return Ag})),n.d(i,"Uint8BufferAttribute",(function(){return ss})),n.d(i,"Uint8ClampedAttribute",(function(){return Cg})),n.d(i,"Uint8ClampedBufferAttribute",(function(){return cs})),n.d(i,"Uniform",(function(){return tm})),n.d(i,"UniformsLib",(function(){return uc})),n.d(i,"UniformsUtils",(function(){return ec})),n.d(i,"UnsignedByteType",(function(){return ai})),n.d(i,"UnsignedInt248Type",(function(){return vi})),n.d(i,"UnsignedIntType",(function(){return hi})),n.d(i,"UnsignedShort4444Type",(function(){return fi})),n.d(i,"UnsignedShort5551Type",(function(){return mi})),n.d(i,"UnsignedShort565Type",(function(){return gi})),n.d(i,"UnsignedShortType",(function(){return li})),n.d(i,"VSMShadowMap",(function(){return Xt})),n.d(i,"Vector2",(function(){return bo})),n.d(i,"Vector3",(function(){return Oo})),n.d(i,"Vector4",(function(){return Eo})),n.d(i,"VectorKeyframeTrack",(function(){return ap})),n.d(i,"Vertex",(function(){return Mg})),n.d(i,"VertexColors",(function(){return mg})),n.d(i,"VideoTexture",(function(){return vh})),n.d(i,"WebGL1Renderer",(function(){return yu})),n.d(i,"WebGLCubeRenderTarget",(function(){return oc})),n.d(i,"WebGLMultisampleRenderTarget",(function(){return Co})),n.d(i,"WebGLRenderTarget",(function(){return Ao})),n.d(i,"WebGLRenderTargetCube",(function(){return Vg})),n.d(i,"WebGLRenderer",(function(){return vu})),n.d(i,"WebGLUtils",(function(){return hu})),n.d(i,"WireframeGeometry",(function(){return wh})),n.d(i,"WireframeHelper",(function(){return jg})),n.d(i,"WrapAroundEnding",(function(){return Er})),n.d(i,"XHRLoader",(function(){return Hg})),n.d(i,"ZeroCurvatureEnding",(function(){return Mr})),n.d(i,"ZeroFactor",(function(){return dn})),n.d(i,"ZeroSlopeEnding",(function(){return Tr})),n.d(i,"ZeroStencilOp",(function(){return Vr})),n.d(i,"sRGBEncoding",(function(){return Nr}));var r=n(22),o=n.n(r),a=n(0),s=n.n(a),c=n(1),l=n.n(c),u=n(2),h=n.n(u),d=n(4),p=n.n(d),f=n(5),m=n.n(f),g=n(3),v=n.n(g),y=n(8);n(11);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function b(e){return"/"===e.charAt(0)}function w(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}var _=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],r=t&&t.split("/")||[],o=e&&b(e),a=t&&b(t),s=o||a;if(e&&b(e)?r=i:i.length&&(r.pop(),r=r.concat(i)),!r.length)return"/";if(r.length){var c=r[r.length-1];n="."===c||".."===c||""===c}else n=!1;for(var l=0,u=r.length;u>=0;u--){var h=r[u];"."===h?w(r,u):".."===h?(w(r,u),l++):l&&(w(r,u),l--)}if(!s)for(;l--;l)r.unshift("..");!s||""===r[0]||r[0]&&b(r[0])||r.unshift("");var d=r.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};var S=function(e,t){if(!e)throw new Error("Invariant failed")};function M(e){return"/"===e.charAt(0)?e:"/"+e}function T(e){return"/"===e.charAt(0)?e.substr(1):e}function E(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function A(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function C(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function R(e,t,n,i){var r;"string"==typeof e?(r=function(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}}(e)).state=t:(void 0===(r=x({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(r.key=n),i?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=_(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r}function L(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,r){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof i?i(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter((function(e){return e!==i}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){return e.apply(void 0,n)}))}}}var P=!("undefined"==typeof window||!window.document||!window.document.createElement);function O(e,t){t(window.confirm(e))}function N(){try{return window.history.state||{}}catch(e){return{}}}function k(e){void 0===e&&(e={}),P||S(!1);var t,n=window.history,i=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,r=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,c=o.getUserConfirmation,l=void 0===c?O:c,u=o.keyLength,h=void 0===u?6:u,d=e.basename?A(M(e.basename)):"";function p(e){var t=e||{},n=t.key,i=t.state,r=window.location,o=r.pathname+r.search+r.hash;return d&&(o=E(o,d)),R(o,i,n)}function f(){return Math.random().toString(36).substr(2,h)}var m=L();function g(e){x(B,e),B.length=n.length,m.notifyListeners(B.location,B.action)}function v(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||w(p(e.state))}function y(){w(p(N()))}var b=!1;function w(e){if(b)b=!1,g();else{m.confirmTransitionTo(e,"POP",l,(function(t){t?g({action:"POP",location:e}):function(e){var t=B.location,n=T.indexOf(t.key);-1===n&&(n=0);var i=T.indexOf(e.key);-1===i&&(i=0);var r=n-i;r&&(b=!0,I(r))}(e)}))}}var _=p(N()),T=[_.key];function k(e){return d+C(e)}function I(e){n.go(e)}var D=0;function F(e){1===(D+=e)&&1===e?(window.addEventListener("popstate",v),r&&window.addEventListener("hashchange",y)):0===D&&(window.removeEventListener("popstate",v),r&&window.removeEventListener("hashchange",y))}var z=!1;var B={length:n.length,action:"POP",location:_,createHref:k,push:function(e,t){var r=R(e,t,f(),B.location);m.confirmTransitionTo(r,"PUSH",l,(function(e){if(e){var t=k(r),o=r.key,a=r.state;if(i)if(n.pushState({key:o,state:a},null,t),s)window.location.href=t;else{var c=T.indexOf(B.location.key),l=T.slice(0,c+1);l.push(r.key),T=l,g({action:"PUSH",location:r})}else window.location.href=t}}))},replace:function(e,t){var r=R(e,t,f(),B.location);m.confirmTransitionTo(r,"REPLACE",l,(function(e){if(e){var t=k(r),o=r.key,a=r.state;if(i)if(n.replaceState({key:o,state:a},null,t),s)window.location.replace(t);else{var c=T.indexOf(B.location.key);-1!==c&&(T[c]=r.key),g({action:"REPLACE",location:r})}else window.location.replace(t)}}))},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return z||(F(1),z=!0),function(){return z&&(z=!1,F(-1)),t()}},listen:function(e){var t=m.appendListener(e);return F(1),function(){F(-1),t()}}};return B}var I={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+T(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:T,decodePath:M},slash:{encodePath:M,decodePath:M}};function D(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function F(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function z(e){window.location.replace(D(window.location.href)+"#"+e)}function B(e){void 0===e&&(e={}),P||S(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,r=void 0===i?O:i,o=n.hashType,a=void 0===o?"slash":o,s=e.basename?A(M(e.basename)):"",c=I[a],l=c.encodePath,u=c.decodePath;function h(){var e=u(F());return s&&(e=E(e,s)),R(e)}var d=L();function p(e){x(B,e),B.length=t.length,d.notifyListeners(B.location,B.action)}var f=!1,m=null;function g(){var e,t,n=F(),i=l(n);if(n!==i)z(i);else{var o=h(),a=B.location;if(!f&&(t=o,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(m===C(o))return;m=null,function(e){if(f)f=!1,p();else{d.confirmTransitionTo(e,"POP",r,(function(t){t?p({action:"POP",location:e}):function(e){var t=B.location,n=w.lastIndexOf(C(t));-1===n&&(n=0);var i=w.lastIndexOf(C(e));-1===i&&(i=0);var r=n-i;r&&(f=!0,_(r))}(e)}))}}(o)}}var v=F(),y=l(v);v!==y&&z(y);var b=h(),w=[C(b)];function _(e){t.go(e)}var T=0;function N(e){1===(T+=e)&&1===e?window.addEventListener("hashchange",g):0===T&&window.removeEventListener("hashchange",g)}var k=!1;var B={length:t.length,action:"POP",location:b,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=D(window.location.href)),n+"#"+l(s+C(e))},push:function(e,t){var n=R(e,void 0,void 0,B.location);d.confirmTransitionTo(n,"PUSH",r,(function(e){if(e){var t=C(n),i=l(s+t);if(F()!==i){m=t,function(e){window.location.hash=e}(i);var r=w.lastIndexOf(C(B.location)),o=w.slice(0,r+1);o.push(t),w=o,p({action:"PUSH",location:n})}else p()}}))},replace:function(e,t){var n=R(e,void 0,void 0,B.location);d.confirmTransitionTo(n,"REPLACE",r,(function(e){if(e){var t=C(n),i=l(s+t);F()!==i&&(m=t,z(i));var r=w.indexOf(C(B.location));-1!==r&&(w[r]=t),p({action:"REPLACE",location:n})}}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return k||(N(1),k=!0),function(){return k&&(k=!1,N(-1)),t()}},listen:function(e){var t=d.appendListener(e);return N(1),function(){N(-1),t()}}};return B}function U(e,t,n){return Math.min(Math.max(e,t),n)}function j(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,r=void 0===i?["/"]:i,o=t.initialIndex,a=void 0===o?0:o,s=t.keyLength,c=void 0===s?6:s,l=L();function u(e){x(g,e),g.length=g.entries.length,l.notifyListeners(g.location,g.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=U(a,0,r.length-1),p=r.map((function(e){return R(e,void 0,"string"==typeof e?h():e.key||h())})),f=C;function m(e){var t=U(g.index+e,0,g.entries.length-1),i=g.entries[t];l.confirmTransitionTo(i,"POP",n,(function(e){e?u({action:"POP",location:i,index:t}):u()}))}var g={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:f,push:function(e,t){var i=R(e,t,h(),g.location);l.confirmTransitionTo(i,"PUSH",n,(function(e){if(e){var t=g.index+1,n=g.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),u({action:"PUSH",location:i,index:t,entries:n})}}))},replace:function(e,t){var i=R(e,t,h(),g.location);l.confirmTransitionTo(i,"REPLACE",n,(function(e){e&&(g.entries[g.index]=i,u({action:"REPLACE",location:i}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=g.index+e;return t>=0&&t<g.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return g}var H=n(17),G=n(18),V=n.n(G);n(12);function W(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var q=n(25),J=n.n(q),X=function(e){var t=Object(H.a)();return t.displayName=e,t}("Router-History"),Y=function(e){var t=Object(H.a)();return t.displayName=e,t}("Router"),Z=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(y.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return s.a.createElement(Y.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},s.a.createElement(X.Provider,{children:this.props.children||null,value:this.props.history}))},t}(s.a.Component);s.a.Component;s.a.Component;var Q={},$=0;function K(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,r=n.exact,o=void 0!==r&&r,a=n.strict,s=void 0!==a&&a,c=n.sensitive,l=void 0!==c&&c;return[].concat(i).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=Q[n]||(Q[n]={});if(i[e])return i[e];var r=[],o={regexp:V()(e,r,t),keys:r};return $<1e4&&(i[e]=o,$++),o}(n,{end:o,strict:s,sensitive:l}),r=i.regexp,a=i.keys,c=r.exec(e);if(!c)return null;var u=c[0],h=c.slice(1),d=e===u;return o&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:a.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var ee=function(e){function t(){return e.apply(this,arguments)||this}return Object(y.a)(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(Y.Consumer,null,(function(t){t||S(!1);var n=e.props.location||t.location,i=x({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?K(n.pathname,e.props):t.match}),r=e.props,o=r.children,a=r.component,c=r.render;return Array.isArray(o)&&0===o.length&&(o=null),s.a.createElement(Y.Provider,{value:i},i.match?o?"function"==typeof o?o(i):o:a?s.a.createElement(a,i):c?c(i):null:"function"==typeof o?o(i):null)}))},t}(s.a.Component);function te(e){return"/"===e.charAt(0)?e:"/"+e}function ne(e,t){if(!e)return t;var n=te(e);return 0!==t.pathname.indexOf(n)?t:x({},t,{pathname:t.pathname.substr(n.length)})}function ie(e){return"string"==typeof e?e:C(e)}function re(e){return function(){S(!1)}}function oe(){}s.a.Component;var ae=function(e){function t(){return e.apply(this,arguments)||this}return Object(y.a)(t,e),t.prototype.render=function(){var e=this;return s.a.createElement(Y.Consumer,null,(function(t){t||S(!1);var n,i,r=e.props.location||t.location;return s.a.Children.forEach(e.props.children,(function(e){if(null==i&&s.a.isValidElement(e)){n=e;var o=e.props.path||e.props.from;i=o?K(r.pathname,x({},e.props,{path:o})):t.match}})),i?s.a.cloneElement(n,{location:r,computedMatch:i}):null}))},t}(s.a.Component);s.a.useContext;s.a.Component;var se=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=B(t.props),t}return Object(y.a)(t,e),t.prototype.render=function(){return s.a.createElement(Z,{history:this.history,children:this.props.children})},t}(s.a.Component);var ce=function(e,t){return"function"==typeof e?e(t):e},le=function(e,t){return"string"==typeof e?R(e,null,null,t):e},ue=function(e){return e},he=s.a.forwardRef;void 0===he&&(he=ue);var de=he((function(e,t){var n=e.innerRef,i=e.navigate,r=e.onClick,o=W(e,["innerRef","navigate","onClick"]),a=o.target,c=x({},o,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=ue!==he&&t||n,s.a.createElement("a",c)}));var pe=he((function(e,t){var n=e.component,i=void 0===n?de:n,r=e.replace,o=e.to,a=e.innerRef,c=W(e,["component","replace","to","innerRef"]);return s.a.createElement(Y.Consumer,null,(function(e){e||S(!1);var n=e.history,l=le(ce(o,e.location),e.location),u=l?n.createHref(l):"",h=x({},c,{href:u,navigate:function(){var t=ce(o,e.location);(r?n.replace:n.push)(t)}});return ue!==he?h.ref=t||a:h.innerRef=a,s.a.createElement(i,h)}))})),fe=function(e){return e},me=s.a.forwardRef;void 0===me&&(me=fe);var ge,ve=me((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,r=e.activeClassName,o=void 0===r?"active":r,a=e.activeStyle,c=e.className,l=e.exact,u=e.isActive,h=e.location,d=e.sensitive,p=e.strict,f=e.style,m=e.to,g=e.innerRef,v=W(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return s.a.createElement(Y.Consumer,null,(function(e){e||S(!1);var n=h||e.location,r=le(ce(m,n),n),y=r.pathname,b=y&&y.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=b?K(n.pathname,{path:b,exact:l,sensitive:d,strict:p}):null,_=!!(u?u(w,n):w),M=_?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,o):c,T=_?x({},f,{},a):f,E=x({"aria-current":_&&i||null,className:M,style:T,to:r},v);return fe!==me?E.ref=t||g:E.innerRef=g,s.a.createElement(pe,E)}))})),ye=n(6),xe=n(9),be=n.n(xe);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se="https://raw.githubusercontent.com/misspia/assets/master/audio/",Me=_e(_e({elemId:"audio"},(ge={tester:n(78)},be()(ge,"tester",n(79)),be()(ge,"tester",n(80)),ge)||{}),{},{S008:"".concat(Se,"nurko-right-now.mp3"),S014:"".concat(Se,"coven-theme-riot.mp3"),S015:"".concat(Se,"blue-d-nobody.mp3"),S016:"".concat(Se,"max-wrong.mp3")}),Te={shadow:"rgba(0,0,0,0.26)",whiteTranslucent:"rgba(255, 255, 255, 0.6)",white:"#fff",black:"#22313F",grey:"#6C7A89",greyDark:"#343a39",cream:"#eeeeee",pink:"#fe9bba",jasmine:"#eacbf7",blue:"#a1bce7",thistle:"#c9bbc8"},Ee={familyTitle:"'Fjalla One', sans-serif",familyBody:"'Nunito', sans-serif",weightLight:100},Ae={close:"close",github:"logo-github",audio:"musical-note"},Ce={S000:n(81),S001:n(82),S002:n(83),S003:n(84),S004:n(85),S005:n(86),S006:n(87),S007:n(88),S008:n(89),S009:n(90),S010:n(91),S011:n(92),S012:n(93),S013:n(94),S014:n(95),S015:n(96),S016:n(97),T005a:n(98),T005b:n(99),T007:n(100),T009:n(101),T011a:n(102),T011b:n(103),T012a:n(104),T012b:n(105),T014Smoke:n(106),T014ThreeTone:n(107),T014FiveTone:n(108),T015:n(109)},Re={previewSize:256,previewMargin:16},Le={SectionContainer:ye.b.section.withConfig({displayName:"styles__SectionContainer",componentId:"sc-189e01y-0"})(["width:100%;min-height:100vh;"]),anchorReset:Object(ye.a)(["text-decoration:none;&:visited,&:active{outline:none;}"])},Pe=ye.b.main.withConfig({displayName:"routerstyles__Container",componentId:"kmowqy-0"})(["font-family:",";font-size:1em;"],Ee.familyBody),Oe=(ye.b.nav.withConfig({displayName:"routerstyles__Nav",componentId:"kmowqy-1"})(["position:fixed;display:flex;justify-content:space-around;width:100%;"]),{home:"/",sketch:"".concat("/sketch/",":index"),toSketch:function(e){return"".concat("/sketch/").concat(e)}}),Ne=n(10),ke=n.n(Ne),Ie=Object(ye.b)(Le.SectionContainer).withConfig({displayName:"homestyles__Container",componentId:"sc-1pcqj2j-0"})(["display:flex;flex-direction:column;align-items:center;background-color:",";"],Te.cream),De=ye.b.header.withConfig({displayName:"homestyles__Header",componentId:"sc-1pcqj2j-1"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0.5em;box-sizing:border-box;width:100%;font-family:",";"],Ee.familyTitle),Fe=ye.b.h1.withConfig({displayName:"homestyles__Title",componentId:"sc-1pcqj2j-2"})(["font-size:2.5em;margin:0;"]),ze=ye.b.h2.withConfig({displayName:"homestyles__Subtitle",componentId:"sc-1pcqj2j-3"})(["margin:0 0 0.2em 0;font-size:1.1em;font-style:italic;font-weight:",";font-family:",";"],Ee.weightLight,Ee.familyBody),Be=ye.b.div.withConfig({displayName:"homestyles__SocialContainer",componentId:"sc-1pcqj2j-4"})(["display:flex;font-size:1.1em;"]),Ue=ye.b.a.withConfig({displayName:"homestyles__SocialLink",componentId:"sc-1pcqj2j-5"})(["color:",";transition:0.2s all;&:hover{color:",";}"],Te.black,Te.pink),je=ye.b.div.withConfig({displayName:"iconstyles__Wrapper",componentId:"sc-6vawap-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;height:",";width:",";color:",";&:hover{","}",""],(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.color}),(function(e){return e.hover}),(function(e){return e.customStyles}));var He=function(e){var t=e.name,n=void 0===t?"":t,i=e.size,r=void 0===i?"1em":i,o=e.color,a=void 0===o?"":o,c=e.customStyle,l=void 0===c?"":c,u=e.hover,h=void 0===u?"":u;return s.a.createElement(je,{size:r,color:a,customStyles:l,hover:h},s.a.createElement("ion-icon",{name:n}))},Ge=ye.b.div.withConfig({displayName:"loaderstyles__Wrapper",componentId:"i44wr3-0"})(["z-index:999;position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:",";"],Te.cream),Ve=ye.b.div.withConfig({displayName:"loaderstyles__Text",componentId:"i44wr3-1"})(["color:",";margin-bottom:1.5em;letter-spacing:2px;"],Te.grey),We=ye.b.div.withConfig({displayName:"loaderstyles__Bar",componentId:"i44wr3-2"})(["height:1px;width:","%;background-color:",";transition:width 0.3s;"],(function(e){return e.width}),Te.grey);var qe=function(e){var t=e.progress,n=void 0===t?0:t;return s.a.createElement(Ge,null,s.a.createElement(Ve,null,"Loading..."),s.a.createElement(We,{width:n}))},Je=ye.b.div.withConfig({displayName:"previewstyles__Container",componentId:"sc-937doj-0"})(["margin:","px;position:relative;display:flex;flex-direction:column;align-items:center;width:","px;height:","px;overflow:hidden;a{z-index:2;position:absolute;width:100%;height:100%;","}"],Re.previewMargin,Re.previewSize,Re.previewSize,Le.anchorReset),Xe=ye.b.img.withConfig({displayName:"previewstyles__Image",componentId:"sc-937doj-1"})(["z-index:0;position:absolute;top:0;left:0;bottom:0;right:0;margin:auto;width:auto;height:100%;filter:grayscale(60%);transition:0.2s all;",":hover &{filter:grayscale(0%);transform:scale(1.1);}"],Je),Ye=ye.b.div.withConfig({displayName:"previewstyles__HiddenContainer",componentId:"sc-937doj-2"})(["z-index:1;display:flex;justify-content:center;align-items:center;width:100%;height:100%;transition:all 0.5s;opacity:0;",":hover &{background-color:",";opacity:1;}"],Je,Te.whiteTranslucent),Ze=(ye.b.h2.withConfig({displayName:"previewstyles__Title",componentId:"sc-937doj-3"})(["font-size:1.2em;letter-spacing:0.1em;text-align:center;color:",";"],Te.greyDark),ye.b.div.withConfig({displayName:"previewstyles__IconWrapper",componentId:"sc-937doj-4"})(["margin:0.5em;padding:0.2em;position:absolute;bottom:0;right:0;background-color:",";border-radius:0.2em;box-sizing:border-box;"],Te.thistle));function Qe(e){var t=e.to,n=void 0===t?"":t,i=(e.title,e.image),r=void 0===i?"":i,o=e.isAudio,a=void 0!==o&&o,c=e.onLoad,l=void 0===c?function(){}:c;return s.a.createElement(Je,null,s.a.createElement(Xe,{src:r,onLoad:l}),s.a.createElement(ve,{to:n}),s.a.createElement(Ye,null),a&&s.a.createElement(Ze,null,s.a.createElement(He,{size:"1.5em",color:Te.grey,name:Ae.audio})))}var $e=3*(Re.previewSize+2*Re.previewMargin)+3*Re.previewMargin,Ke=ye.b.div.withConfig({displayName:"sketchListstyles__Container",componentId:"sc-11uf565-0"})(["display:flex;justify-content:flex-start;align-items:center;flex-wrap:wrap;width:","px;@media (max-width:800px){justify-content:center;width:100%;}"],$e);function et(){var e=Object(a.useState)(0),t=ke()(e,2),n=t[0],i=t[1],r=Object(a.useState)(0),o=ke()(r,2),s=o[0],c=o[1];return Object(a.useEffect)((function(){var e=function(){var e=window,t=e.innerWidth,n=e.innerHeight;i(t),c(n)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),{width:n,height:s}}var tt=n(26),nt=n.n(tt),it=n(27),rt=n.n(it),ot=function(){function e(t){l()(this,e),this.canvas=t;try{this.gl=t.getContext("webgl")}catch(e){throw alert("Sorry, WebGL has not been enabled on your browser :("),e}this.program={},this.vertShader={},this.fragShader={},this.mouse={},this.images=[]}return h()(e,[{key:"unmount",value:function(){}},{key:"init",value:function(){}},{key:"draw",value:function(){}},{key:"render",value:function(){this.init(),this.draw()}},{key:"clear",value:function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},{key:"resize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"getRandomRange",value:function(e,t){return Math.random()*(t-e)+e}},{key:"getSmallestDimmension",value:function(){return this.canvas.width>this.canvas.height?this.canvas.width:this.canvas.height}},{key:"setMouseMoveListener",value:function(){var e=this;this.canvas.addEventListener("mousemove",(function(t){e.mouse={x:t.clientX?t.clientX:0,y:t.clientY?t.clientY:0}}))}},{key:"addMouseListener",value:function(e){}},{key:"initFragPlayground",value:function(e,t){this.vertShader=this.compileShader(e,this.gl.VERTEX_SHADER),this.fragShader=this.compileShader(t,this.gl.FRAGMENT_SHADER),this.program=this.createProgram(this.vertShader,this.fragShader);var n=new Float32Array([-1,1,-1,-1,1,1,1,-1]),i=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.STATIC_DRAW)}},{key:"createProgram",value:function(e,t){var n=this.gl.createProgram();return this.gl.attachShader(n,e),this.gl.attachShader(n,t),this.gl.linkProgram(n),this.gl.useProgram(n),n}},{key:"compileShader",value:function(e,t){var n=this.gl.createShader(t);if(this.gl.shaderSource(n,e),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))throw"Failed to compile shader: ".concat(this.gl.getShaderInfoLog(n));return n}},{key:"getAttribLocation",value:function(e,t){var n=this.gl.getAttribLocation(e,t);if(-1===n)throw"Cannot find attribute ".concat(t);return n}},{key:"getUniformLocation",value:function(e,t){var n=this.gl.getUniformLocation(e,t);if(-1===n)throw"Cannot find uniform ".concat(t);return n}},{key:"getAPosition",value:function(){var e=this.getAttribLocation(this.program,"a_position");this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,this.gl.FALSE,8,0)}},{key:"getUResolution",value:function(){var e=this.getUniformLocation(this.program,"u_resolution");this.gl.uniform2f(e,this.canvas.width,this.canvas.height)}},{key:"getUTime",value:function(){var e=(Date.now()-this.startTime)/1e3,t=this.getUniformLocation(this.program,"u_time");this.gl.uniform1f(t,e)}},{key:"getUMouse",value:function(){var e=this.getUniformLocation(this.program,"u_mouse");this.gl.uniform2f(e,this.mouse.x,this.mouse.y)}},{key:"loadImage",value:function(e,t){var n=new Image;return n.src=e,n.onload=t,n}},{key:"loadImages",value:function(e,t){var n=this,i=e.length,r=function(){0==--i&&t()};e.forEach((function(e){var t=n.loadImage(e,r);n.images.push(t)}))}}]),e}();function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var st=function(e){p()(n,e);var t=at(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).metaballs=[],i.numMetaballs=10,i}return h()(n,[{key:"init",value:function(){this.initFragPlayground(nt.a,rt.a),this.getUResolution("u_resolution"),this.getAPosition("a_position"),this.generateMetaballs()}},{key:"generateMetaballs",value:function(){for(var e=this.getSmallestDimmension(),t=.1*e,n=.02*e,i=0;i<this.numMetaballs;i++){var r=this.getRandomRange(n,t);this.metaballs.push({x:this.getRandomRange(r,this.canvas.width-2),y:this.getRandomRange(r,this.canvas.height-2),velX:this.getRandomRange(2,8),velY:this.getRandomRange(2,8),r:r})}}},{key:"draw",value:function(){var e=this;this.updateMetaballs();var t=new Float32Array(3*this.numMetaballs);this.metaballs.forEach((function(e,n){var i=3*n;t[i+0]=e.x,t[i+1]=e.y,t[i+2]=e.r}));var n=this.getUniformLocation(this.program,"u_metaballs");this.gl.uniform3fv(n,t),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),requestAnimationFrame((function(){return e.draw()}))}},{key:"updateMetaballs",value:function(){var e=this;this.metaballs.map((function(t){t.x+=t.velX,t.y+=t.velY,t.x-t.r<0?(t.x=t.r+1,t.velX=Math.abs(t.velX)):t.x+t.r>e.canvas.width&&(t.x=e.canvas.width-t.r,t.velX=-Math.abs(t.velX)),t.y-t.r<0?(t.y=t.r+1,t.velY=Math.abs(t.velY)):t.y+t.r>e.canvas.height&&(t.y=e.canvas.height-t.r,t.velY=-Math.abs(t.velY))}))}}]),n}(ot);var ct=n(28),lt=n.n(ct),ut=n(29),ht=n.n(ut);function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var pt=function(e){p()(n,e);var t=dt(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).numParticles=3e4,i.particleVert=new Float32Array(2*i.numParticles),i.particleVertBuffer={},i.startTime=Date.now(),i}return h()(n,[{key:"init",value:function(){this.generateParticles(),this.particleVertBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.particleVertBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.particleVert,this.gl.STATIC_DRAW),this.vertShader=this.compileShader(lt.a,this.gl.VERTEX_SHADER),this.fragShader=this.compileShader(ht.a,this.gl.FRAGMENT_SHADER),this.program=this.createProgram(this.vertShader,this.fragShader),this.setStaticAttributes(),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.disable(this.gl.DEPTH_TEST),this.gl.clearColor(.1,.1,.12,1)}},{key:"generateParticles",value:function(){for(var e=this.particleVert.length;e--;)for(this.particleVert[e]=0;Math.pow(this.particleVert[e],2)<.3;)this.particleVert[e]=this.getRandomRange(-1,1)}},{key:"setStaticAttributes",value:function(){var e=this.gl.getAttribLocation(this.program,"a_position");this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(this.particleVertBuffer,2,this.gl.FLOAT,!1,4,0)}},{key:"draw",value:function(){var e=this,t=(Date.now()-this.startTime)/3e3;this.gl.clear(this.gl.COLOR_BUFFER_BIT);var n=this.gl.getUniformLocation(this.program,"u_time");this.gl.uniform1f(n,t),this.gl.drawArrays(this.gl.POINTS,0,this.numParticles),requestAnimationFrame((function(){return e.draw()}))}}]),n}(ot);var ft=n(30),mt=n.n(ft),gt=n(31),vt=n.n(gt);function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var xt=function(e){p()(n,e);var t=yt(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).startTime=Date.now(),i}return h()(n,[{key:"init",value:function(){this.initFragPlayground(mt.a,vt.a),this.getAPosition("a_position"),this.getUResolution("u_resolution"),this.setMouseMoveListener()}},{key:"draw",value:function(){var e=this;this.getUTime("u_time"),this.getUMouse("u_mouse"),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),requestAnimationFrame((function(){return e.draw()}))}}]),n}(ot);var bt=n(32),wt=n.n(bt),_t=n(33),St=n.n(_t);function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Tt=function(e){p()(n,e);var t=Mt(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).startTime=Date.now(),i}return h()(n,[{key:"init",value:function(){this.initFragPlayground(wt.a,St.a),this.getAPosition("a_position"),this.getUResolution("u_resolution")}},{key:"draw",value:function(){var e=this;this.getUTime("u_time"),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),requestAnimationFrame((function(){return e.draw()}))}}]),n}(ot);var Et=n(34),At=n.n(Et),Ct=n(35),Rt=n.n(Ct);function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Pt=function(e){p()(n,e);var t=Lt(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).startTime=Date.now(),i}return h()(n,[{key:"init",value:function(){this.initFragPlayground(At.a,Rt.a),this.getAPosition("a_position"),this.getUResolution("u_resolution")}},{key:"draw",value:function(){var e=this;this.getUTime("u_time"),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),requestAnimationFrame((function(){return e.draw()}))}}]),n}(ot);var Ot=n(36),Nt=n.n(Ot),kt=n(37),It=n.n(kt);function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Ft=function(e){p()(n,e);var t=Dt(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).startTime=Date.now(),i}return h()(n,[{key:"init",value:function(){var e=this,t=[Ce.T005a,Ce.T005b];this.loadImages(t,(function(){return e.renderImages()}))}},{key:"renderImages",value:function(){this.vertShader=this.compileShader(Nt.a,this.gl.VERTEX_SHADER),this.fragShader=this.compileShader(It.a,this.gl.FRAGMENT_SHADER),this.program=this.createProgram(this.vertShader,this.fragShader);var e=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.setRectangle(0,0,this.canvas.width,this.canvas.height),this.getAPosition("a_position"),this.getATexCoord("a_texCoord"),this.getUResolution("u_resolution"),this.getUImages(["u_image0","u_image1"]),this.setMouseMoveListener(),this.draw()}},{key:"setRectangle",value:function(e,t,n,i){var r=e+n,o=t+i,a=new Float32Array([e,t,r,t,e,o,e,o,r,t,r,o]);this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW)}},{key:"getATexCoord",value:function(e){var t=this.getAttribLocation(this.program,e),n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n);var i=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(t),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)}},{key:"getUImages",value:function(e){var t=this,n=[];this.images.forEach((function(e){var i=t.createTexture(e);n.push(i)}));var i=this.getUniformLocation(this.program,e[0]),r=this.getUniformLocation(this.program,e[1]);this.gl.uniform1i(i,0),this.gl.uniform1i(r,1),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,n[0]),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,n[1])}},{key:"createTexture",value:function(e){var t=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),t}},{key:"draw",value:function(){var e=this;this.getUMouse("u_mouse"),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLES,0,6),requestAnimationFrame((function(){return e.draw()}))}},{key:"render",value:function(){this.init()}}]),n}(ot);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1;e<arguments.length;e++){const n=arguments[e];if(null!=n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t});const zt="119",Bt={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ut={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},jt=0,Ht=1,Gt=2,Vt=3,Wt=0,qt=1,Jt=2,Xt=3,Yt=0,Zt=1,Qt=2,$t=1,Kt=2,en=0,tn=1,nn=2,rn=3,on=4,an=5,sn=100,cn=101,ln=102,un=103,hn=104,dn=200,pn=201,fn=202,mn=203,gn=204,vn=205,yn=206,xn=207,bn=208,wn=209,_n=210,Sn=0,Mn=1,Tn=2,En=3,An=4,Cn=5,Rn=6,Ln=7,Pn=0,On=1,Nn=2,kn=0,In=1,Dn=2,Fn=3,zn=4,Bn=5,Un=300,jn=301,Hn=302,Gn=303,Vn=304,Wn=306,qn=307,Jn=1e3,Xn=1001,Yn=1002,Zn=1003,Qn=1004,$n=1004,Kn=1005,ei=1005,ti=1006,ni=1007,ii=1007,ri=1008,oi=1008,ai=1009,si=1010,ci=1011,li=1012,ui=1013,hi=1014,di=1015,pi=1016,fi=1017,mi=1018,gi=1019,vi=1020,yi=1021,xi=1022,bi=1023,wi=1024,_i=1025,Si=bi,Mi=1026,Ti=1027,Ei=1028,Ai=1029,Ci=1030,Ri=1031,Li=1032,Pi=1033,Oi=33776,Ni=33777,ki=33778,Ii=33779,Di=35840,Fi=35841,zi=35842,Bi=35843,Ui=36196,ji=37492,Hi=37496,Gi=37808,Vi=37809,Wi=37810,qi=37811,Ji=37812,Xi=37813,Yi=37814,Zi=37815,Qi=37816,$i=37817,Ki=37818,er=37819,tr=37820,nr=37821,ir=36492,rr=37840,or=37841,ar=37842,sr=37843,cr=37844,lr=37845,ur=37846,hr=37847,dr=37848,pr=37849,fr=37850,mr=37851,gr=37852,vr=37853,yr=2200,xr=2201,br=2202,wr=2300,_r=2301,Sr=2302,Mr=2400,Tr=2401,Er=2402,Ar=2500,Cr=2501,Rr=0,Lr=1,Pr=2,Or=3e3,Nr=3001,kr=3007,Ir=3002,Dr=3003,Fr=3004,zr=3005,Br=3006,Ur=3200,jr=3201,Hr=0,Gr=1,Vr=0,Wr=7680,qr=7681,Jr=7682,Xr=7683,Yr=34055,Zr=34056,Qr=5386,$r=512,Kr=513,eo=514,to=515,no=516,io=517,ro=518,oo=519,ao=35044,so=35048,co=35040,lo=35045,uo=35049,ho=35041,po=35046,fo=35050,mo=35042;function go(){}Object.assign(go.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e)}}});const vo=[];for(let e=0;e<256;e++)vo[e]=(e<16?"0":"")+e.toString(16);let yo=1234567;const xo={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(vo[255&e]+vo[e>>8&255]+vo[e>>16&255]+vo[e>>24&255]+"-"+vo[255&t]+vo[t>>8&255]+"-"+vo[t>>16&15|64]+vo[t>>24&255]+"-"+vo[63&n|128]+vo[n>>8&255]+"-"+vo[n>>16&255]+vo[n>>24&255]+vo[255&i]+vo[i>>8&255]+vo[i>>16&255]+vo[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(yo=e%2147483647),yo=16807*yo%2147483647,(yo-1)/2147483646},degToRad:function(e){return e*xo.DEG2RAD},radToDeg:function(e){return e*xo.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),c=a(n/2),l=o((t+i)/2),u=a((t+i)/2),h=o((t-i)/2),d=a((t-i)/2),p=o((i-t)/2),f=a((i-t)/2);switch(r){case"XYX":e.set(s*u,c*h,c*d,s*l);break;case"YZY":e.set(c*d,s*u,c*h,s*l);break;case"ZXZ":e.set(c*h,c*d,s*u,s*l);break;case"XZX":e.set(s*u,c*f,c*p,s*l);break;case"YXY":e.set(c*p,s*u,c*f,s*l);break;case"ZYZ":e.set(c*f,c*p,s*u,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function bo(e=0,t=0){this.x=e,this.y=t}function wo(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}let _o;Object.defineProperties(bo.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(bo.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(wo.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,o,a,s,c){const l=this.elements;return l[0]=e,l[1]=i,l[2]=a,l[3]=t,l[4]=r,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},extractBasis:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],w=i[5],_=i[8];return r[0]=o*f+a*v+s*b,r[3]=o*m+a*y+s*w,r[6]=o*g+a*x+s*_,r[1]=c*f+l*v+u*b,r[4]=c*m+l*y+u*w,r[7]=c*g+l*x+u*_,r[2]=h*f+d*v+p*b,r[5]=h*m+d*y+p*w,r[8]=h*g+d*x+p*_,this},multiplyScalar:function(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8];return t*o*l-t*a*c-n*r*l+n*a*s+i*r*c-i*o*s},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=e.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],p=d*c-l*h,f=l*u-d*s,m=h*s-c*u,g=r*p+o*f+a*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return i[0]=p*v,i[1]=(a*h-d*o)*v,i[2]=(l*o-a*c)*v,i[3]=f*v,i[4]=(d*r-a*u)*v,i[5]=(a*s-l*r)*v,i[6]=m*v,i[7]=(o*u-h*r)*v,i[8]=(c*r-o*s)*v,this},transpose:function(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,o,a){const s=Math.cos(r),c=Math.sin(r);this.set(n*s,n*c,-n*(s*o+c*a)+o+e,-i*c,i*s,-i*(-c*o+s*a)+a+t,0,0,1)},scale:function(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],c=i[4],l=i[7];return i[0]=t*r+n*s,i[3]=t*o+n*c,i[6]=t*a+n*l,i[1]=-n*r+t*s,i[4]=-n*o+t*c,i[7]=-n*a+t*l,this},translate:function(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});const So={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===_o&&(_o=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_o.width=e.width,_o.height=e.height;const n=_o.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=_o}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let Mo=0;function To(e,t,n,i,r,o,a,s,c,l){Object.defineProperty(this,"id",{value:Mo++}),this.uuid=xo.generateUUID(),this.name="",this.image=void 0!==e?e:To.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:To.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Xn,this.wrapT=void 0!==i?i:Xn,this.magFilter=void 0!==r?r:ti,this.minFilter=void 0!==o?o:ri,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:bi,this.internalFormat=null,this.type=void 0!==s?s:ai,this.offset=new bo(0,0),this.repeat=new bo(1,1),this.center=new bo(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Or,this.version=0,this.onUpdate=null}function Eo(e=0,t=0,n=0,i=1){this.x=e,this.y=t,this.z=n,this.w=i}function Ao(e,t,n){this.width=e,this.height=t,this.scissor=new Eo(0,0,e,t),this.scissorTest=!1,this.viewport=new Eo(0,0,e,t),n=n||{},this.texture=new To(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ti,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Co(e,t,n){Ao.call(this,e,t,n),this.samples=4}function Ro(e=0,t=0,n=0,i=1){this._x=e,this._y=t,this._z=n,this._w=i}To.DEFAULT_IMAGE=void 0,To.DEFAULT_MAPPING=Un,To.prototype=Object.assign(Object.create(go.prototype),{constructor:To,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=xo.generateUUID()),!t&&void 0===e.images[i.uuid]){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)t.push(So.getDataURL(i[e]))}else t=So.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:t}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==Un)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Jn:e.x=e.x-Math.floor(e.x);break;case Xn:e.x=e.x<0?0:1;break;case Yn:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Jn:e.y=e.y-Math.floor(e.y);break;case Xn:e.y=e.y<0?0:1;break;case Yn:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(To.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Eo.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Eo.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){let t,n,i,r;const o=e.elements,a=o[0],s=o[4],c=o[8],l=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const e=(a+1)/2,o=(u+1)/2,m=(f+1)/2,g=(s+l)/4,v=(c+d)/4,y=(h+p)/4;return e>o&&e>m?e<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=g/n,r=v/n):o>m?o<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=g/i,r=y/i):m<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(m),n=v/r,i=y/r),this.set(n,i,r,t),this}let m=Math.sqrt((p-h)*(p-h)+(c-d)*(c-d)+(l-s)*(l-s));return Math.abs(m)<.001&&(m=1),this.x=(p-h)/m,this.y=(c-d)/m,this.z=(l-s)/m,this.w=Math.acos((a+u+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),Ao.prototype=Object.assign(Object.create(go.prototype),{constructor:Ao,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Co.prototype=Object.assign(Object.create(Ao.prototype),{constructor:Co,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Ao.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(Ro,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,o,a){let s=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3];const h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||s!==h||c!==d||l!==p){let e=1-a,t=s*h+c*d+l*p+u*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*e+h*r,c=c*e+d*r,l=l*e+p*r,u=u*e+f*r,e===1-a){const e=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=e,c*=e,l*=e,u*=e}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u},multiplyQuaternionsFlat:function(e,t,n,i,r,o){const a=n[i],s=n[i+1],c=n[i+2],l=n[i+3],u=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[t]=a*p+l*u+s*d-c*h,e[t+1]=s*p+l*h+c*u-a*d,e[t+2]=c*p+l*d+a*h-s*u,e[t+3]=l*p-a*u-s*h-c*d,e}}),Object.defineProperties(Ro.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(Ro.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,r=e._z,o=e.order,a=Math.cos,s=Math.sin,c=a(n/2),l=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),p=s(r/2);switch(o){case"XYZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"YXZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"ZXY":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"ZYX":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"YZX":this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p;break;case"XZY":this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],a=t[5],s=t[9],c=t[2],l=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-s)*e,this._y=(r-c)*e,this._z=(o-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(l-s)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+c)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-c)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(s+l)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-i)/e,this._x=(r+c)/e,this._y=(s+l)/e,this._z=.25*e}return this._onChangeCallback(),this},setFromUnitVectors:function(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(xo.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+o*a+i*c-r*s,this._y=i*l+o*s+r*a-n*c,this._z=r*l+o*c+n*s-i*a,this._w=o*l-n*a-i*s-r*c,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(s),l=Math.atan2(c,a),u=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});const Lo=new Oo,Po=new Ro;function Oo(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}Object.assign(Oo.prototype,{isVector3:!0,set:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Po.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Po.setFromAxisAngle(e,t))},applyMatrix3:function(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*i-a*n,l=s*n+a*t-r*i,u=s*i+r*n-o*t,h=-r*t-o*n-a*i;return this.x=c*s+h*-r+l*-a-u*-o,this.y=l*s+h*-o+u*-r-c*-a,this.z=u*s+h*-a+c*-o-l*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)},projectOnPlane:function(e){return Lo.copy(this).projectOnVector(e),this.sub(Lo)},reflect:function(e){return this.sub(Lo.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(xo.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});const No=new Oo,ko=new Uo,Io=new Oo(0,0,0),Do=new Oo(1,1,1),Fo=new Oo,zo=new Oo,Bo=new Oo;function Uo(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Uo.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,o,a,s,c,l,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Uo).fromArray(this.elements)},copy:function(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){const t=this.elements,n=e.elements,i=1/No.setFromMatrixColumn(e,0).length(),r=1/No.setFromMatrixColumn(e,1).length(),o=1/No.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=o*l,n=o*u,i=a*l,r=a*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=n+i*c,t[5]=e-r*c,t[9]=-a*s,t[2]=r-e*c,t[6]=i+n*c,t[10]=o*s}else if("YXZ"===e.order){const e=s*l,n=s*u,i=c*l,r=c*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=o*c,t[1]=o*u,t[5]=o*l,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*l,n=s*u,i=c*l,r=c*u;t[0]=e-r*a,t[4]=-o*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=o*l,t[9]=r-e*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*l,n=o*u,i=a*l,r=a*u;t[0]=s*l,t[4]=i*c-n,t[8]=e*c+r,t[1]=s*u,t[5]=r*c+e,t[9]=n*c-i,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*c,i=a*s,r=a*c;t[0]=s*l,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=o*l,t[9]=-a*l,t[2]=-c*l,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=o*s,n=o*c,i=a*s,r=a*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=e*u+r,t[5]=o*l,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*l,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Io,e,Do)},lookAt:function(e,t,n){const i=this.elements;return Bo.subVectors(e,t),0===Bo.lengthSq()&&(Bo.z=1),Bo.normalize(),Fo.crossVectors(n,Bo),0===Fo.lengthSq()&&(1===Math.abs(n.z)?Bo.x+=1e-4:Bo.z+=1e-4,Bo.normalize(),Fo.crossVectors(n,Bo)),Fo.normalize(),zo.crossVectors(Bo,Fo),i[0]=Fo.x,i[4]=zo.x,i[8]=Bo.x,i[1]=Fo.y,i[5]=zo.y,i[9]=Bo.y,i[2]=Fo.z,i[6]=zo.z,i[10]=Bo.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],w=i[0],_=i[4],S=i[8],M=i[12],T=i[1],E=i[5],A=i[9],C=i[13],R=i[2],L=i[6],P=i[10],O=i[14],N=i[3],k=i[7],I=i[11],D=i[15];return r[0]=o*w+a*T+s*R+c*N,r[4]=o*_+a*E+s*L+c*k,r[8]=o*S+a*A+s*P+c*I,r[12]=o*M+a*C+s*O+c*D,r[1]=l*w+u*T+h*R+d*N,r[5]=l*_+u*E+h*L+d*k,r[9]=l*S+u*A+h*P+d*I,r[13]=l*M+u*C+h*O+d*D,r[2]=p*w+f*T+m*R+g*N,r[6]=p*_+f*E+m*L+g*k,r[10]=p*S+f*A+m*P+g*I,r[14]=p*M+f*C+m*O+g*D,r[3]=v*w+y*T+x*R+b*N,r[7]=v*_+y*E+x*L+b*k,r[11]=v*S+y*A+x*P+b*I,r[15]=v*M+y*C+x*O+b*D,this},multiplyScalar:function(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*c*u-r*a*h+n*c*h+i*a*d-n*s*d)+e[7]*(+t*s*d-t*c*h+r*o*h-i*o*d+i*c*l-r*s*l)+e[11]*(+t*c*u-t*a*d-r*o*u+n*o*d+r*a*l-n*c*l)+e[15]*(-i*a*l-t*s*u+t*a*h+i*o*u-n*o*h+n*s*l)},transpose:function(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this},getInverse:function(e,t){void 0!==t&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,i=e.elements,r=i[0],o=i[1],a=i[2],s=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],x=i[15],b=p*y*h-v*f*h+v*u*m-l*y*m-p*u*x+l*f*x,w=g*f*h-d*y*h-g*u*m+c*y*m+d*u*x-c*f*x,_=d*v*h-g*p*h+g*l*m-c*v*m-d*l*x+c*p*x,S=g*p*u-d*v*u-g*l*f+c*v*f+d*l*y-c*p*y,M=r*b+o*w+a*_+s*S;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/M;return n[0]=b*T,n[1]=(v*f*s-p*y*s-v*a*m+o*y*m+p*a*x-o*f*x)*T,n[2]=(l*y*s-v*u*s+v*a*h-o*y*h-l*a*x+o*u*x)*T,n[3]=(p*u*s-l*f*s-p*a*h+o*f*h+l*a*m-o*u*m)*T,n[4]=w*T,n[5]=(d*y*s-g*f*s+g*a*m-r*y*m-d*a*x+r*f*x)*T,n[6]=(g*u*s-c*y*s-g*a*h+r*y*h+c*a*x-r*u*x)*T,n[7]=(c*f*s-d*u*s+d*a*h-r*f*h-c*a*m+r*u*m)*T,n[8]=_*T,n[9]=(g*p*s-d*v*s-g*o*m+r*v*m+d*o*x-r*p*x)*T,n[10]=(c*v*s-g*l*s+g*o*h-r*v*h-c*o*x+r*l*x)*T,n[11]=(d*l*s-c*p*s-d*o*h+r*p*h+c*o*m-r*l*m)*T,n[12]=S*T,n[13]=(d*v*a-g*p*a+g*o*f-r*v*f-d*o*y+r*p*y)*T,n[14]=(g*l*a-c*v*a-g*o*u+r*v*u+c*o*y-r*l*y)*T,n[15]=(c*p*a-d*l*a+d*o*u-r*p*u-c*o*f+r*l*f)*T,this},scale:function(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,c=r*o,l=r*a;return this.set(c*o+n,c*a-i*s,c*s+i*a,0,c*a+i*s,l*a+n,l*s-i*o,0,c*s-i*a,l*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){const i=this.elements,r=t._x,o=t._y,a=t._z,s=t._w,c=r+r,l=o+o,u=a+a,h=r*c,d=r*l,p=r*u,f=o*l,m=o*u,g=a*u,v=s*c,y=s*l,x=s*u,b=n.x,w=n.y,_=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+x)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-x)*w,i[5]=(1-(h+g))*w,i[6]=(m+v)*w,i[7]=0,i[8]=(p+y)*_,i[9]=(m-v)*_,i[10]=(1-(h+f))*_,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:function(e,t,n){const i=this.elements;let r=No.set(i[0],i[1],i[2]).length(),o=No.set(i[4],i[5],i[6]).length(),a=No.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],ko.copy(this);const s=1/r,c=1/o,l=1/a;return ko.elements[0]*=s,ko.elements[1]*=s,ko.elements[2]*=s,ko.elements[4]*=c,ko.elements[5]*=c,ko.elements[6]*=c,ko.elements[8]*=l,ko.elements[9]*=l,ko.elements[10]*=l,t.setFromRotationMatrix(ko),n.x=r,n.y=o,n.z=a,this},makePerspective:function(e,t,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*r/(t-e),c=2*r/(n-i),l=(t+e)/(t-e),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,i,r,o){const a=this.elements,s=1/(t-e),c=1/(n-i),l=1/(o-r),u=(t+e)*s,h=(n+i)*c,d=(o+r)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});const jo=new Uo,Ho=new Ro;function Go(e=0,t=0,n=0,i=Go.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=i}function Vo(){this.mask=1}Go.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Go.DefaultOrder="XYZ",Object.defineProperties(Go.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(Go.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){const i=xo.clamp,r=e.elements,o=r[0],a=r[4],s=r[8],c=r[1],l=r[5],u=r[9],h=r[2],d=r[6],p=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return jo.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jo,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return Ho.setFromEuler(this),this.setFromQuaternion(Ho,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Oo(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Vo.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});let Wo=0;const qo=new Oo,Jo=new Ro,Xo=new Uo,Yo=new Oo,Zo=new Oo,Qo=new Oo,$o=new Ro,Ko=new Oo(1,0,0),ea=new Oo(0,1,0),ta=new Oo(0,0,1),na={type:"added"},ia={type:"removed"};function ra(){Object.defineProperty(this,"id",{value:Wo++}),this.uuid=xo.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ra.DefaultUp.clone();const e=new Oo,t=new Go,n=new Ro,i=new Oo(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Uo},normalMatrix:{value:new wo}}),this.matrix=new Uo,this.matrixWorld=new Uo,this.matrixAutoUpdate=ra.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Vo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function oa(){ra.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ra.DefaultUp=new Oo(0,1,0),ra.DefaultMatrixAutoUpdate=!0,ra.prototype=Object.assign(Object.create(go.prototype),{constructor:ra,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Jo.setFromAxisAngle(e,t),this.quaternion.multiply(Jo),this},rotateOnWorldAxis:function(e,t){return Jo.setFromAxisAngle(e,t),this.quaternion.premultiply(Jo),this},rotateX:function(e){return this.rotateOnAxis(Ko,e)},rotateY:function(e){return this.rotateOnAxis(ea,e)},rotateZ:function(e){return this.rotateOnAxis(ta,e)},translateOnAxis:function(e,t){return qo.copy(e).applyQuaternion(this.quaternion),this.position.add(qo.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Ko,e)},translateY:function(e){return this.translateOnAxis(ea,e)},translateZ:function(e){return this.translateOnAxis(ta,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Xo.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Yo.copy(e):Yo.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Zo.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xo.lookAt(Zo,Yo,this.up):Xo.lookAt(Yo,Zo,this.up),this.quaternion.setFromRotationMatrix(Xo),i&&(Xo.extractRotation(i.matrixWorld),Jo.setFromRotationMatrix(Xo),this.quaternion.premultiply(Jo.inverse()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(na)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ia)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Xo.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Xo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xo),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Oo),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Ro),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Zo,e,Qo),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Oo),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Zo,$o,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Oo),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),a=o(e.images),s=o(e.shapes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}),oa.prototype=Object.assign(Object.create(ra.prototype),{constructor:oa,isScene:!0,copy:function(e,t){return ra.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){const t=ra.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});const aa=[new Oo,new Oo,new Oo,new Oo,new Oo,new Oo,new Oo,new Oo],sa=new Oo,ca=new xa,la=new Oo,ua=new Oo,ha=new Oo,da=new Oo,pa=new Oo,fa=new Oo,ma=new Oo,ga=new Oo,va=new Oo,ya=new Oo;function xa(e,t){this.min=void 0!==e?e:new Oo(1/0,1/0,1/0),this.max=void 0!==t?t:new Oo(-1/0,-1/0,-1/0)}function ba(e,t,n,i,r){for(let o=0,a=e.length-3;o<=a;o+=3){ya.fromArray(e,o);const a=r.x*Math.abs(ya.x)+r.y*Math.abs(ya.y)+r.z*Math.abs(ya.z),s=t.dot(ya),c=n.dot(ya),l=i.dot(ya);if(Math.max(-Math.max(s,c,l),Math.min(s,c,l))>a)return!1}return!0}Object.assign(xa.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,c=e.length;s<c;s+=3){const c=e[s],l=e[s+1],u=e[s+2];c<t&&(t=c),l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function(e){let t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,c=e.count;s<c;s++){const c=e.getX(s),l=e.getY(s),u=e.getZ(s);c<t&&(t=c),l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromPoints:function(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){const n=sa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Oo),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Oo),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ca.copy(t.boundingBox),ca.applyMatrix4(e.matrixWorld),this.union(ca));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Oo),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,sa),sa.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(ma),ga.subVectors(this.max,ma),la.subVectors(e.a,ma),ua.subVectors(e.b,ma),ha.subVectors(e.c,ma),da.subVectors(ua,la),pa.subVectors(ha,ua),fa.subVectors(la,ha);let t=[0,-da.z,da.y,0,-pa.z,pa.y,0,-fa.z,fa.y,da.z,0,-da.x,pa.z,0,-pa.x,fa.z,0,-fa.x,-da.y,da.x,0,-pa.y,pa.x,0,-fa.y,fa.x,0];return!!ba(t,la,ua,ha,ga)&&(t=[1,0,0,0,1,0,0,0,1],!!ba(t,la,ua,ha,ga)&&(va.crossVectors(da,pa),t=[va.x,va.y,va.z],ba(t,la,ua,ha,ga)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Oo),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return sa.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(sa).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(aa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),aa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),aa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),aa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),aa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),aa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),aa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),aa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(aa)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});const wa=new xa;function _a(e,t){this.center=void 0!==e?e:new Oo,this.radius=void 0!==t?t:-1}Object.assign(_a.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){const n=this.center;void 0!==t?n.copy(t):wa.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Oo),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new xa),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});const Sa=new Oo,Ma=new Oo,Ta=new Oo,Ea=new Oo,Aa=new Oo,Ca=new Oo,Ra=new Oo;function La(e,t){this.origin=void 0!==e?e:new Oo,this.direction=void 0!==t?t:new Oo(0,0,-1)}Object.assign(La.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Oo),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Sa)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Oo),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){const t=Sa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Sa.copy(this.direction).multiplyScalar(t).add(this.origin),Sa.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,i){Ma.copy(e).add(t).multiplyScalar(.5),Ta.copy(t).sub(e).normalize(),Ea.copy(this.origin).sub(Ma);const r=.5*e.distanceTo(t),o=-this.direction.dot(Ta),a=Ea.dot(this.direction),s=-Ea.dot(Ta),c=Ea.lengthSq(),l=Math.abs(1-o*o);let u,h,d,p;if(l>0)if(u=o*s-a,h=o*a-s,p=r*l,u>=0)if(h>=-p)if(h<=p){const e=1/l;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+c}else h=r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;else h=-r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;else h<=-p?(u=Math.max(0,-(-o*r+a)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+c):h<=p?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+c):(u=Math.max(0,-(o*r+a)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+c);else h=o>0?-r:r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+c;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(Ta).multiplyScalar(h).add(Ma),d},intersectSphere:function(e,t){Sa.subVectors(e.center,this.origin);const n=Sa.dot(this.direction),i=Sa.dot(Sa)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){let n,i,r,o,a,s;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),l>=0?(r=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(r=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Sa)},intersectTriangle:function(e,t,n,i,r){Aa.subVectors(t,e),Ca.subVectors(n,e),Ra.crossVectors(Aa,Ca);let o,a=this.direction.dot(Ra);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Ea.subVectors(this.origin,e);const s=o*this.direction.dot(Ca.crossVectors(Ea,Ca));if(s<0)return null;const c=o*this.direction.dot(Aa.cross(Ea));if(c<0)return null;if(s+c>a)return null;const l=-o*Ea.dot(Ra);return l<0?null:this.at(l/a,r)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});const Pa=new Oo,Oa=new Oo,Na=new wo;function ka(e,t){this.normal=void 0!==e?e:new Oo(1,0,0),this.constant=void 0!==t?t:0}Object.assign(ka.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){const i=Pa.subVectors(n,t).cross(Oa.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Oo),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Oo);const n=e.delta(Pa),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)},intersectsLine:function(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Oo),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){const n=t||Na.getNormalMatrix(e),i=this.coplanarPoint(Pa).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});const Ia=new Oo,Da=new Oo,Fa=new Oo,za=new Oo,Ba=new Oo,Ua=new Oo,ja=new Oo,Ha=new Oo,Ga=new Oo,Va=new Oo;function Wa(e,t,n){this.a=void 0!==e?e:new Oo,this.b=void 0!==t?t:new Oo,this.c=void 0!==n?n:new Oo}Object.assign(Wa,{getNormal:function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Oo),i.subVectors(n,t),Ia.subVectors(e,t),i.cross(Ia);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(e,t,n,i,r){Ia.subVectors(i,t),Da.subVectors(n,t),Fa.subVectors(e,t);const o=Ia.dot(Ia),a=Ia.dot(Da),s=Ia.dot(Fa),c=Da.dot(Da),l=Da.dot(Fa),u=o*c-a*a;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Oo),0===u)return r.set(-2,-1,-1);const h=1/u,d=(c*s-a*l)*h,p=(o*l-a*s)*h;return r.set(1-d-p,p,d)},containsPoint:function(e,t,n,i){return Wa.getBarycoord(e,t,n,i,za),za.x>=0&&za.y>=0&&za.x+za.y<=1},getUV:function(e,t,n,i,r,o,a,s){return this.getBarycoord(e,t,n,i,za),s.set(0,0),s.addScaledVector(r,za.x),s.addScaledVector(o,za.y),s.addScaledVector(a,za.z),s},isFrontFacing:function(e,t,n,i){return Ia.subVectors(n,t),Da.subVectors(e,t),Ia.cross(Da).dot(i)<0}}),Object.assign(Wa.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Ia.subVectors(this.c,this.b),Da.subVectors(this.a,this.b),.5*Ia.cross(Da).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Oo),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Wa.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ka),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Wa.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,i,r){return Wa.getUV(e,this.a,this.b,this.c,t,n,i,r)},containsPoint:function(e){return Wa.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Wa.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Oo);const n=this.a,i=this.b,r=this.c;let o,a;Ba.subVectors(i,n),Ua.subVectors(r,n),Ha.subVectors(e,n);const s=Ba.dot(Ha),c=Ua.dot(Ha);if(s<=0&&c<=0)return t.copy(n);Ga.subVectors(e,i);const l=Ba.dot(Ga),u=Ua.dot(Ga);if(l>=0&&u<=l)return t.copy(i);const h=s*u-l*c;if(h<=0&&s>=0&&l<=0)return o=s/(s-l),t.copy(n).addScaledVector(Ba,o);Va.subVectors(e,r);const d=Ba.dot(Va),p=Ua.dot(Va);if(p>=0&&d<=p)return t.copy(r);const f=d*c-s*p;if(f<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(n).addScaledVector(Ua,a);const m=l*p-d*u;if(m<=0&&u-l>=0&&d-p>=0)return ja.subVectors(r,i),a=(u-l)/(u-l+(d-p)),t.copy(i).addScaledVector(ja,a);const g=1/(m+f+h);return o=f*g,a=h*g,t.copy(n).addScaledVector(Ba,o).addScaledVector(Ua,a)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});const qa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ja={h:0,s:0,l:0},Xa={h:0,s:0,l:0};function Ya(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function Za(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Qa(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function $a(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function Ka(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Oo,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Ya,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}Object.assign(Ya.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=xo.euclideanModulo(e,1),t=xo.clamp(t,0,1),n=xo.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Za(r,i,e+1/3),this.g=Za(r,i,e),this.b=Za(r,i,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let e;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[5]),this;if(e=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[5]),this;break;case"hsl":case"hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){const n=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,r=parseInt(e[3],10)/100;return t(e[5]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){const t=qa[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=Qa(e.r),this.g=Qa(e.g),this.b=Qa(e.b),this},copyLinearToSRGB:function(e){return this.r=$a(e.r),this.g=$a(e.g),this.b=$a(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,i=this.b,r=Math.max(t,n,i),o=Math.min(t,n,i);let a,s;const c=(o+r)/2;if(o===r)a=0,s=0;else{const e=r-o;switch(s=c<=.5?e/(r+o):e/(2-r-o),r){case t:a=(n-i)/e+(n<i?6:0);break;case n:a=(i-t)/e+2;break;case i:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(Ja),Ja.h+=e,Ja.s+=t,Ja.l+=n,this.setHSL(Ja.h,Ja.s,Ja.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Ja),e.getHSL(Xa);const n=xo.lerp(Ja.h,Xa.h,t),i=xo.lerp(Ja.s,Xa.s,t),r=xo.lerp(Ja.l,Xa.l,t);return this.setHSL(n,i,r),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},fromBufferAttribute:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),Ya.NAMES=qa,Object.assign(Ka.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});let es=0;function ts(){Object.defineProperty(this,"id",{value:es++}),this.uuid=xo.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=tn,this.side=Yt,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=gn,this.blendDst=vn,this.blendEquation=sn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=En,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=oo,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wr,this.stencilZFail=Wr,this.stencilZPass=Wr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function ns(e){ts.call(this),this.type="MeshBasicMaterial",this.color=new Ya(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}ts.prototype=Object.assign(Object.create(go.prototype),{constructor:ts,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===$t;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==tn&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==Yt&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ts.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),ns.prototype=Object.create(ts.prototype),ns.prototype.constructor=ns,ns.prototype.isMeshBasicMaterial=!0,ns.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const is=new Oo,rs=new bo;function os(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=ao,this.updateRange={offset:0,count:-1},this.version=0}function as(e,t,n){os.call(this,new Int8Array(e),t,n)}function ss(e,t,n){os.call(this,new Uint8Array(e),t,n)}function cs(e,t,n){os.call(this,new Uint8ClampedArray(e),t,n)}function ls(e,t,n){os.call(this,new Int16Array(e),t,n)}function us(e,t,n){os.call(this,new Uint16Array(e),t,n)}function hs(e,t,n){os.call(this,new Int32Array(e),t,n)}function ds(e,t,n){os.call(this,new Uint32Array(e),t,n)}function ps(e,t,n){os.call(this,new Float32Array(e),t,n)}function fs(e,t,n){os.call(this,new Float64Array(e),t,n)}function ms(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function gs(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(os.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(os.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new Ya),t[n++]=r.r,t[n++]=r.g,t[n++]=r.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new bo),t[n++]=r.x,t[n++]=r.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Oo),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let r=e[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Eo),t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n++]=r.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)rs.fromBufferAttribute(this,t),rs.applyMatrix3(e),this.setXY(t,rs.x,rs.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyMatrix3(e),this.setXYZ(t,is.x,is.y,is.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)is.x=this.getX(t),is.y=this.getY(t),is.z=this.getZ(t),is.applyMatrix4(e),this.setXYZ(t,is.x,is.y,is.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)is.x=this.getX(t),is.y=this.getY(t),is.z=this.getZ(t),is.applyNormalMatrix(e),this.setXYZ(t,is.x,is.y,is.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)is.x=this.getX(t),is.y=this.getY(t),is.z=this.getZ(t),is.transformDirection(e),this.setXYZ(t,is.x,is.y,is.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),as.prototype=Object.create(os.prototype),as.prototype.constructor=as,ss.prototype=Object.create(os.prototype),ss.prototype.constructor=ss,cs.prototype=Object.create(os.prototype),cs.prototype.constructor=cs,ls.prototype=Object.create(os.prototype),ls.prototype.constructor=ls,us.prototype=Object.create(os.prototype),us.prototype.constructor=us,hs.prototype=Object.create(os.prototype),hs.prototype.constructor=hs,ds.prototype=Object.create(os.prototype),ds.prototype.constructor=ds,ps.prototype=Object.create(os.prototype),ps.prototype.constructor=ps,fs.prototype=Object.create(os.prototype),fs.prototype.constructor=fs,Object.assign(ms.prototype,{computeGroups:function(e){const t=[];let n,i,r=void 0;const o=e.faces;for(i=0;i<o.length;i++){const e=o[i];e.materialIndex!==r&&(r=e.materialIndex,void 0!==n&&(n.count=3*i-n.start,t.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,t.push(n)),this.groups=t},fromGeometry:function(e){const t=e.faces,n=e.vertices,i=e.faceVertexUvs,r=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,a=e.morphTargets,s=a.length;let c;if(s>0){c=[];for(let e=0;e<s;e++)c[e]={name:a[e].name,data:[]};this.morphTargets.position=c}const l=e.morphNormals,u=l.length;let h;if(u>0){h=[];for(let e=0;e<u;e++)h[e]={name:l[e].name,data:[]};this.morphTargets.normal=h}const d=e.skinIndices,p=e.skinWeights,f=d.length===n.length,m=p.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let e=0;e<t.length;e++){const g=t[e];this.vertices.push(n[g.a],n[g.b],n[g.c]);const v=g.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{const e=g.normal;this.normals.push(e,e,e)}const y=g.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{const e=g.color;this.colors.push(e,e,e)}if(!0===r){const t=i[0][e];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",e),this.uvs.push(new bo,new bo,new bo))}if(!0===o){const t=i[1][e];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",e),this.uvs2.push(new bo,new bo,new bo))}for(let e=0;e<s;e++){const t=a[e].vertices;c[e].data.push(t[g.a],t[g.b],t[g.c])}for(let t=0;t<u;t++){const n=l[t].vertexNormals[e];h[t].data.push(n.a,n.b,n.c)}f&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),m&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});let vs=1;const ys=new Uo,xs=new ra,bs=new Oo,ws=new xa,_s=new xa,Ss=new Oo;function Ms(){Object.defineProperty(this,"id",{value:vs+=2}),this.uuid=xo.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ms.prototype=Object.assign(Object.create(go.prototype),{constructor:Ms,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(gs(e)>65535?ds:us)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new wo).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return ys.makeRotationX(e),this.applyMatrix4(ys),this},rotateY:function(e){return ys.makeRotationY(e),this.applyMatrix4(ys),this},rotateZ:function(e){return ys.makeRotationZ(e),this.applyMatrix4(ys),this},translate:function(e,t,n){return ys.makeTranslation(e,t,n),this.applyMatrix4(ys),this},scale:function(e,t,n){return ys.makeScale(e,t,n),this.applyMatrix4(ys),this},lookAt:function(e){return xs.lookAt(e),xs.updateMatrix(),this.applyMatrix4(xs.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(bs).negate(),this.translate(bs.x,bs.y,bs.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const e=new ps(3*t.vertices.length,3),n=new ps(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const e=new ps(t.lineDistances.length,1);this.setAttribute("lineDistance",e.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new ps(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}if(!0===t.verticesNeedUpdate){const e=this.attributes.position;void 0!==e&&(e.copyVector3sArray(t.vertices),e.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){const e=this.attributes.normal;void 0!==e&&(e.copyVector3sArray(t.normals),e.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){const e=this.attributes.color;void 0!==e&&(e.copyColorsArray(t.colors),e.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const e=this.attributes.uv;void 0!==e&&(e.copyVector2sArray(t.uvs),e.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const e=this.attributes.lineDistance;void 0!==e&&(e.copyArray(t.lineDistances),e.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new ms).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new os(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const t=new Float32Array(3*e.normals.length);this.setAttribute("normal",new os(t,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const t=new Float32Array(3*e.colors.length);this.setAttribute("color",new os(t,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const t=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new os(t,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const t=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new os(t,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const t in e.morphTargets){const n=[],i=e.morphTargets[t];for(let e=0,t=i.length;e<t;e++){const t=i[e],r=new ps(3*t.data.length,3);r.name=t.name,n.push(r.copyVector3sArray(t.data))}this.morphAttributes[t]=n}if(e.skinIndices.length>0){const t=new ps(4*e.skinIndices.length,4);this.setAttribute("skinIndex",t.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const t=new ps(4*e.skinWeights.length,4);this.setAttribute("skinWeight",t.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new xa);const e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];ws.setFromBufferAttribute(n),this.morphTargetsRelative?(Ss.addVectors(this.boundingBox.min,ws.min),this.boundingBox.expandByPoint(Ss),Ss.addVectors(this.boundingBox.max,ws.max),this.boundingBox.expandByPoint(Ss)):(this.boundingBox.expandByPoint(ws.min),this.boundingBox.expandByPoint(ws.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new _a);const e=this.attributes.position,t=this.morphAttributes.position;if(e){const n=this.boundingSphere.center;if(ws.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];_s.setFromBufferAttribute(n),this.morphTargetsRelative?(Ss.addVectors(ws.min,_s.min),ws.expandByPoint(Ss),Ss.addVectors(ws.max,_s.max),ws.expandByPoint(Ss)):(ws.expandByPoint(_s.min),ws.expandByPoint(_s.max))}ws.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Ss.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Ss));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],a=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)Ss.fromBufferAttribute(o,t),a&&(bs.fromBufferAttribute(e,t),Ss.add(bs)),i=Math.max(i,n.distanceToSquared(Ss))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new os(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new Oo,r=new Oo,o=new Oo,a=new Oo,s=new Oo,c=new Oo,l=new Oo,u=new Oo;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),l.subVectors(o,r),u.subVectors(i,r),l.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),c.fromBufferAttribute(n,f),a.add(l),s.add(l),c.add(l),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,c.x,c.y,c.z)}else for(let e=0,a=t.count;e<a;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),l.subVectors(o,r),u.subVectors(i,r),l.cross(u),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===e.attributes[i])continue;const r=n[i].array,o=e.attributes[i],a=o.array,s=o.itemSize*t,c=Math.min(a.length,r.length-s);for(let e=0,t=s;e<c;e++,t++)r[t]=a[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ss.fromBufferAttribute(e,t),Ss.normalize(),e.setXYZ(t,Ss.x,Ss.y,Ss.z)},toNonIndexed:function(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let a=0,s=0;for(let e=0,r=t.length;e<r;e++){a=t[e]*i;for(let e=0;e<i;e++)o[s++]=n[a++]}return new os(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new Ms,n=this.index.array,i=this.attributes;for(const r in i){const o=e(i[r],n);t.setAttribute(r,o)}const r=this.morphAttributes;for(const i in r){const o=[],a=r[i];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);o.push(i)}t.morphAttributes[i]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t],r=i.toJSON(e.data);""!==i.name&&(r.name=i.name),e.data.attributes[t]=r}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t],r=i.toJSON(e.data);""!==i.name&&(r.name=i.name),o.push(r)}o.length>0&&(i[t]=o,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e},clone:function(){return(new Ms).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Ts=new Uo,Es=new La,As=new _a,Cs=new Oo,Rs=new Oo,Ls=new Oo,Ps=new Oo,Os=new Oo,Ns=new Oo,ks=new Oo,Is=new Oo,Ds=new Oo,Fs=new bo,zs=new bo,Bs=new bo,Us=new Oo,js=new Oo;function Hs(e,t){ra.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ms,this.material=void 0!==t?t:new ns,this.updateMorphTargets()}function Gs(e,t,n,i,r,o,a,s){let c;if(c=t.side===Zt?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,t.side!==Qt,s),null===c)return null;js.copy(s),js.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(js);return l<n.near||l>n.far?null:{distance:l,point:js.clone(),object:e}}function Vs(e,t,n,i,r,o,a,s,c,l,u,h){Cs.fromBufferAttribute(r,l),Rs.fromBufferAttribute(r,u),Ls.fromBufferAttribute(r,h);const d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){ks.set(0,0,0),Is.set(0,0,0),Ds.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=d[e],n=o[e];0!==t&&(Ps.fromBufferAttribute(n,l),Os.fromBufferAttribute(n,u),Ns.fromBufferAttribute(n,h),a?(ks.addScaledVector(Ps,t),Is.addScaledVector(Os,t),Ds.addScaledVector(Ns,t)):(ks.addScaledVector(Ps.sub(Cs),t),Is.addScaledVector(Os.sub(Rs),t),Ds.addScaledVector(Ns.sub(Ls),t)))}Cs.add(ks),Rs.add(Is),Ls.add(Ds)}e.isSkinnedMesh&&(e.boneTransform(l,Cs),e.boneTransform(u,Rs),e.boneTransform(h,Ls));const p=Gs(e,t,n,i,Cs,Rs,Ls,Us);if(p){s&&(Fs.fromBufferAttribute(s,l),zs.fromBufferAttribute(s,u),Bs.fromBufferAttribute(s,h),p.uv=Wa.getUV(Us,Cs,Rs,Ls,Fs,zs,Bs,new bo)),c&&(Fs.fromBufferAttribute(c,l),zs.fromBufferAttribute(c,u),Bs.fromBufferAttribute(c,h),p.uv2=Wa.getUV(Us,Cs,Rs,Ls,Fs,zs,Bs,new bo));const e=new Ka(l,u,h);Wa.getNormal(Cs,Rs,Ls,e.normal),p.face=e}return p}Hs.prototype=Object.assign(Object.create(ra.prototype),{constructor:Hs,isMesh:!0,copy:function(e){return ra.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),As.copy(n.boundingSphere),As.applyMatrix4(r),!1===e.ray.intersectsSphere(As))return;if(Ts.getInverse(r),Es.copy(e.ray).applyMatrix4(Ts),null!==n.boundingBox&&!1===Es.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position,s=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=i[p.materialIndex];for(let n=Math.max(p.start,d.start),i=Math.min(p.start+p.count,d.start+d.count);n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);o=Vs(this,f,e,Es,a,s,c,l,u,i,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),h=Math.min(r.count,d.start+d.count);n<h;n+=3){const h=r.getX(n),d=r.getX(n+1),p=r.getX(n+2);o=Vs(this,i,e,Es,a,s,c,l,u,h,d,p),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==a)if(Array.isArray(i))for(let n=0,r=h.length;n<r;n++){const r=h[n],p=i[r.materialIndex];for(let n=Math.max(r.start,d.start),i=Math.min(r.start+r.count,d.start+d.count);n<i;n+=3){o=Vs(this,p,e,Es,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=r.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),r=Math.min(a.count,d.start+d.count);n<r;n+=3){o=Vs(this,i,e,Es,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}else if(n.isGeometry){const r=Array.isArray(i),a=n.vertices,s=n.faces;let c;const l=n.faceVertexUvs[0];l.length>0&&(c=l);for(let n=0,l=s.length;n<l;n++){const l=s[n],u=r?i[l.materialIndex]:i;if(void 0===u)continue;const h=a[l.a],d=a[l.b],p=a[l.c];if(o=Gs(this,u,e,Es,h,d,p,Us),o){if(c&&c[n]){const e=c[n];Fs.copy(e[0]),zs.copy(e[1]),Bs.copy(e[2]),o.uv=Wa.getUV(Us,h,d,p,Fs,zs,Bs,new bo)}o.face=l,o.faceIndex=n,t.push(o)}}}}});let Ws=0;const qs=new Uo,Js=new ra,Xs=new Oo;function Ys(){Object.defineProperty(this,"id",{value:Ws+=2}),this.uuid=xo.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Ys.prototype=Object.assign(Object.create(go.prototype),{constructor:Ys,isGeometry:!0,applyMatrix4:function(e){const t=(new wo).getNormalMatrix(e);for(let t=0,n=this.vertices.length;t<n;t++){this.vertices[t].applyMatrix4(e)}for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];n.normal.applyMatrix3(t).normalize();for(let e=0,i=n.vertexNormals.length;e<i;e++)n.vertexNormals[e].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return qs.makeRotationX(e),this.applyMatrix4(qs),this},rotateY:function(e){return qs.makeRotationY(e),this.applyMatrix4(qs),this},rotateZ:function(e){return qs.makeRotationZ(e),this.applyMatrix4(qs),this},translate:function(e,t,n){return qs.makeTranslation(e,t,n),this.applyMatrix4(qs),this},scale:function(e,t,n){return qs.makeScale(e,t,n),this.applyMatrix4(qs),this},lookAt:function(e){return Js.lookAt(e),Js.updateMatrix(),this.applyMatrix4(Js.matrix),this},fromBufferGeometry:function(e){const t=this,n=null!==e.index?e.index:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,o=i.normal,a=i.color,s=i.uv,c=i.uv2;void 0!==c&&(this.faceVertexUvs[1]=[]);for(let e=0;e<r.count;e++)t.vertices.push((new Oo).fromBufferAttribute(r,e)),void 0!==a&&t.colors.push((new Ya).fromBufferAttribute(a,e));function l(e,n,i,r){const l=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],u=new Ka(e,n,i,void 0===o?[]:[(new Oo).fromBufferAttribute(o,e),(new Oo).fromBufferAttribute(o,n),(new Oo).fromBufferAttribute(o,i)],l,r);t.faces.push(u),void 0!==s&&t.faceVertexUvs[0].push([(new bo).fromBufferAttribute(s,e),(new bo).fromBufferAttribute(s,n),(new bo).fromBufferAttribute(s,i)]),void 0!==c&&t.faceVertexUvs[1].push([(new bo).fromBufferAttribute(c,e),(new bo).fromBufferAttribute(c,n),(new bo).fromBufferAttribute(c,i)])}const u=e.groups;if(u.length>0)for(let e=0;e<u.length;e++){const t=u[e],i=t.start;for(let e=i,r=i+t.count;e<r;e+=3)void 0!==n?l(n.getX(e),n.getX(e+1),n.getX(e+2),t.materialIndex):l(e,e+1,e+2,t.materialIndex)}else if(void 0!==n)for(let e=0;e<n.count;e+=3)l(n.getX(e),n.getX(e+1),n.getX(e+2));else for(let e=0;e<r.count;e+=3)l(e,e+1,e+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xs).negate(),this.translate(Xs.x,Xs.y,Xs.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Uo;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const e=new Oo,t=new Oo;for(let n=0,i=this.faces.length;n<i;n++){const i=this.faces[n],r=this.vertices[i.a],o=this.vertices[i.b],a=this.vertices[i.c];e.subVectors(a,o),t.subVectors(r,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);const t=new Array(this.vertices.length);for(let e=0,n=this.vertices.length;e<n;e++)t[e]=new Oo;if(e){const e=new Oo,n=new Oo;for(let i=0,r=this.faces.length;i<r;i++){const r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,a),n.subVectors(o,a),e.cross(n),t[r.a].add(e),t[r.b].add(e),t[r.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let e=0,n=this.vertices.length;e<n;e++)t[e].normalize();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e],i=n.vertexNormals;3===i.length?(i[0].copy(t[n.a]),i[1].copy(t[n.b]),i[2].copy(t[n.c])):(i[0]=t[n.a].clone(),i[1]=t[n.b].clone(),i[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,n=t.vertexNormals.length;e<n;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}const e=new Ys;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,i=this.faces.length;t<i;t++){const t=new Oo,i={a:new Oo,b:new Oo,c:new Oo};e.push(t),n.push(i)}}const n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],i=n.faceNormals[e],r=n.vertexNormals[e];i.copy(t.normal),r.a.copy(t.vertexNormals[0]),r.b.copy(t.vertexNormals[1]),r.c.copy(t.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new xa),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new _a),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let i,r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,l=this.colors,u=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new wo).getNormalMatrix(t));for(let e=0,n=a.length;e<n;e++){const n=a[e].clone();void 0!==t&&n.applyMatrix4(t),o.push(n)}for(let e=0,t=u.length;e<t;e++)l.push(u[e].clone());for(let e=0,t=c.length;e<t;e++){let t,o,a,l=c[e],u=l.vertexNormals,h=l.vertexColors;t=new Ka(l.a+r,l.b+r,l.c+r),t.normal.copy(l.normal),void 0!==i&&t.normal.applyMatrix3(i).normalize();for(let e=0,n=u.length;e<n;e++)o=u[e].clone(),void 0!==i&&o.applyMatrix3(i).normalize(),t.vertexNormals.push(o);t.color.copy(l.color);for(let e=0,n=h.length;e<n;e++)a=h[e],t.vertexColors.push(a.clone());t.materialIndex=l.materialIndex+n,s.push(t)}for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e],r=[];for(let e=0,t=i.length;e<t;e++)r.push(i[e].clone());this.faceVertexUvs[t].push(r)}}},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){const e={},t=[],n=[],i=Math.pow(10,4);for(let r=0,o=this.vertices.length;r<o;r++){const o=this.vertices[r],a=Math.round(o.x*i)+"_"+Math.round(o.y*i)+"_"+Math.round(o.z*i);void 0===e[a]?(e[a]=r,t.push(this.vertices[r]),n[r]=t.length-1):n[r]=n[e[a]]}const r=[];for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e];t.a=n[t.a],t.b=n[t.b],t.c=n[t.c];const i=[t.a,t.b,t.c];for(let t=0;t<3;t++)if(i[t]===i[(t+1)%3]){r.push(e);break}}for(let e=r.length-1;e>=0;e--){const t=r[e];this.faces.splice(t,1);for(let e=0,n=this.faceVertexUvs.length;e<n;e++)this.faceVertexUvs[e].splice(t,1)}const o=this.vertices.length-t.length;return this.vertices=t,o},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];this.vertices.push(new Oo(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));const n=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let r,o;n&&n.length===t&&(r=[]),i&&i.length===t&&(o=[]);for(let a=0;a<t;a++){const t=e[a]._id;r&&r.push(n[t]),o&&o.push(i[t])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}const t=[];for(let e=0;e<this.vertices.length;e++){const n=this.vertices[e];t.push(n.x,n.y,n.z)}const n=[],i=[],r={},o=[],a={},s=[],c={};for(let e=0;e<this.faces.length;e++){const t=this.faces[e],i=!0,r=!1,o=void 0!==this.faceVertexUvs[0][e],a=t.normal.length()>0,s=t.vertexNormals.length>0,c=1!==t.color.r||1!==t.color.g||1!==t.color.b,p=t.vertexColors.length>0;let f=0;if(f=l(f,0,0),f=l(f,1,i),f=l(f,2,r),f=l(f,3,o),f=l(f,4,a),f=l(f,5,s),f=l(f,6,c),f=l(f,7,p),n.push(f),n.push(t.a,t.b,t.c),n.push(t.materialIndex),o){const t=this.faceVertexUvs[0][e];n.push(d(t[0]),d(t[1]),d(t[2]))}if(a&&n.push(u(t.normal)),s){const e=t.vertexNormals;n.push(u(e[0]),u(e[1]),u(e[2]))}if(c&&n.push(h(t.color)),p){const e=t.vertexColors;n.push(h(e[0]),h(e[1]),h(e[2]))}}function l(e,t,n){return n?e|1<<t:e&~(1<<t)}function u(e){const t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==r[t]||(r[t]=i.length/3,i.push(e.x,e.y,e.z)),r[t]}function h(e){const t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==a[t]||(a[t]=o.length,o.push(e.getHex())),a[t]}function d(e){const t=e.x.toString()+e.y.toString();return void 0!==c[t]||(c[t]=s.length/2,s.push(e.x,e.y)),c[t]}return e.data={},e.data.vertices=t,e.data.normals=i,o.length>0&&(e.data.colors=o),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e},clone:function(){return(new Ys).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let e=0,n=t.length;e<n;e++)this.vertices.push(t[e].clone());const n=e.colors;for(let e=0,t=n.length;e<t;e++)this.colors.push(n[e].clone());const i=e.faces;for(let e=0,t=i.length;e<t;e++)this.faces.push(i[e].clone());for(let t=0,n=e.faceVertexUvs.length;t<n;t++){const n=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,i=n.length;e<i;e++){const i=n[e],r=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];r.push(t.clone())}this.faceVertexUvs[t].push(r)}}const r=e.morphTargets;for(let e=0,t=r.length;e<t;e++){const t={};if(t.name=r[e].name,void 0!==r[e].vertices){t.vertices=[];for(let n=0,i=r[e].vertices.length;n<i;n++)t.vertices.push(r[e].vertices[n].clone())}if(void 0!==r[e].normals){t.normals=[];for(let n=0,i=r[e].normals.length;n<i;n++)t.normals.push(r[e].normals[n].clone())}this.morphTargets.push(t)}const o=e.morphNormals;for(let e=0,t=o.length;e<t;e++){const t={};if(void 0!==o[e].vertexNormals){t.vertexNormals=[];for(let n=0,i=o[e].vertexNormals.length;n<i;n++){const i=o[e].vertexNormals[n],r={};r.a=i.a.clone(),r.b=i.b.clone(),r.c=i.c.clone(),t.vertexNormals.push(r)}}if(void 0!==o[e].faceNormals){t.faceNormals=[];for(let n=0,i=o[e].faceNormals.length;n<i;n++)t.faceNormals.push(o[e].faceNormals[n].clone())}this.morphNormals.push(t)}const a=e.skinWeights;for(let e=0,t=a.length;e<t;e++)this.skinWeights.push(a[e].clone());const s=e.skinIndices;for(let e=0,t=s.length;e<t;e++)this.skinIndices.push(s[e].clone());const c=e.lineDistances;for(let e=0,t=c.length;e<t;e++)this.lineDistances.push(c[e]);const l=e.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Zs extends Ys{constructor(e,t,n,i,r,o){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Qs(e,t,n,i,r,o)),this.mergeVertices()}}class Qs extends Ms{constructor(e=1,t=1,n=1,i=1,r=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const a=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const s=[],c=[],l=[],u=[];let h=0,d=0;function p(e,t,n,i,r,o,p,f,m,g,v){const y=o/m,x=p/g,b=o/2,w=p/2,_=f/2,S=m+1,M=g+1;let T=0,E=0;const A=new Oo;for(let o=0;o<M;o++){const a=o*x-w;for(let s=0;s<S;s++){const h=s*y-b;A[e]=h*i,A[t]=a*r,A[n]=_,c.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,l.push(A.x,A.y,A.z),u.push(s/m),u.push(1-o/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+S*e,i=h+t+S*(e+1),r=h+(t+1)+S*(e+1),o=h+(t+1)+S*e;s.push(n,i,o),s.push(i,r,o),E+=6}a.addGroup(d,E,v),d+=E,h+=T}p("z","y","x",-1,-1,n,t,e,o,r,0),p("z","y","x",1,-1,n,t,-e,o,r,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new ps(c,3)),this.setAttribute("normal",new ps(l,3)),this.setAttribute("uv",new ps(u,2))}}function $s(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Ks(e){const t={};for(let n=0;n<e.length;n++){const i=$s(e[n]);for(const e in i)t[e]=i[e]}return t}const ec={clone:$s,merge:Ks};function tc(e){ts.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function nc(){ra.call(this),this.type="Camera",this.matrixWorldInverse=new Uo,this.projectionMatrix=new Uo,this.projectionMatrixInverse=new Uo}function ic(e,t,n,i){nc.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}tc.prototype=Object.create(ts.prototype),tc.prototype.constructor=tc,tc.prototype.isShaderMaterial=!0,tc.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$s(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this},tc.prototype.toJSON=function(e){const t=ts.prototype.toJSON.call(this,e);t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},nc.prototype=Object.assign(Object.create(ra.prototype),{constructor:nc,isCamera:!0,copy:function(e,t){return ra.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Oo),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){ra.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){ra.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ic.prototype=Object.assign(Object.create(nc.prototype),{constructor:ic,isPerspectiveCamera:!0,copy:function(e,t){return nc.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*xo.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*xo.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*xo.RAD2DEG*Math.atan(Math.tan(.5*xo.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){let e=this.near,t=e*Math.tan(.5*xo.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/a,i*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=ra.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function rc(e,t,n){if(ra.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new ic(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Oo(1,0,0)),this.add(i);const r=new ic(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Oo(-1,0,0)),this.add(r);const o=new ic(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Oo(0,1,0)),this.add(o);const a=new ic(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Oo(0,-1,0)),this.add(a);const s=new ic(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Oo(0,0,1)),this.add(s);const c=new ic(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new Oo(0,0,-1)),this.add(c),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();const l=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=l},this.clear=function(e,t,i,r){const o=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(n,o),e.clear(t,i,r);e.setRenderTarget(o)}}function oc(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),Ao.call(this,e,e,t)}function ac(e,t,n,i,r,o,a,s,c,l,u,h){To.call(this,null,o,a,s,c,l,i,r,u,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==c?c:Zn,this.minFilter=void 0!==l?l:Zn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}rc.prototype=Object.create(ra.prototype),rc.prototype.constructor=rc,oc.prototype=Object.create(Ao.prototype),oc.prototype.constructor=oc,oc.prototype.isWebGLCubeRenderTarget=!0,oc.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=bi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n=new oa,i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},r=new tc({name:"CubemapFromEquirect",uniforms:$s(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Zt,blending:en});r.uniforms.tEquirect.value=t;const o=new Hs(new Qs(5,5,5),r);n.add(o);return new rc(1,10,this).update(e,n),o.geometry.dispose(),o.material.dispose(),this},ac.prototype=Object.create(To.prototype),ac.prototype.constructor=ac,ac.prototype.isDataTexture=!0;const sc=new _a,cc=new Oo;function lc(e,t,n,i,r,o){this.planes=[void 0!==e?e:new ka,void 0!==t?t:new ka,void 0!==n?n:new ka,void 0!==i?i:new ka,void 0!==r?r:new ka,void 0!==o?o:new ka]}Object.assign(lc.prototype,{set:function(e,t,n,i,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-i,u-s,f-h,y-m).normalize(),t[1].setComponents(a+i,u+s,f+h,y+m).normalize(),t[2].setComponents(a+r,u+c,f+d,y+g).normalize(),t[3].setComponents(a-r,u-c,f-d,y-g).normalize(),t[4].setComponents(a-o,u-l,f-p,y-v).normalize(),t[5].setComponents(a+o,u+l,f+p,y+v).normalize(),this},intersectsObject:function(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),sc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(sc)},intersectsSprite:function(e){return sc.center.set(0,0,0),sc.radius=.7071067811865476,sc.applyMatrix4(e.matrixWorld),this.intersectsSphere(sc)},intersectsSphere:function(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(cc.x=i.normal.x>0?e.max.x:e.min.x,cc.y=i.normal.y>0?e.max.y:e.min.y,cc.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(cc)<0)return!1}return!0},containsPoint:function(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});const uc={common:{diffuse:{value:new Ya(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new wo},uv2Transform:{value:new wo},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new bo(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ya(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Ya(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new wo}},sprite:{diffuse:{value:new Ya(15658734)},opacity:{value:1},center:{value:new bo(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new wo}}};function hc(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function dc(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){t.isInterleavedBufferAttribute&&(t=t.data);const o=i.get(t);void 0===o?i.set(t,function(t,n){const i=t.array,r=t.usage,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();let a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,r)):o.version<t.version&&(!function(t,i,r){const o=i.array,a=i.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,o):(n?e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,r),o.version=t.version)}}}function pc(e,t,n,i){Ys.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new fc(e,t,n,i)),this.mergeVertices()}function fc(e,t,n,i){Ms.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=(e=e||1)/2,o=(t=t||1)/2,a=Math.floor(n)||1,s=Math.floor(i)||1,c=a+1,l=s+1,u=e/a,h=t/s,d=[],p=[],f=[],m=[];for(let e=0;e<l;e++){const t=e*h-o;for(let n=0;n<c;n++){const i=n*u-r;p.push(i,-t,0),f.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+c*e,i=t+c*(e+1),r=t+1+c*(e+1),o=t+1+c*e;d.push(n,i,o),d.push(i,r,o)}this.setIndex(d),this.setAttribute("position",new ps(p,3)),this.setAttribute("normal",new ps(f,3)),this.setAttribute("uv",new ps(m,2))}pc.prototype=Object.create(Ys.prototype),pc.prototype.constructor=pc,fc.prototype=Object.create(Ms.prototype),fc.prototype.constructor=fc;const mc={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},gc={basic:{uniforms:Ks([uc.common,uc.specularmap,uc.envmap,uc.aomap,uc.lightmap,uc.fog]),vertexShader:mc.meshbasic_vert,fragmentShader:mc.meshbasic_frag},lambert:{uniforms:Ks([uc.common,uc.specularmap,uc.envmap,uc.aomap,uc.lightmap,uc.emissivemap,uc.fog,uc.lights,{emissive:{value:new Ya(0)}}]),vertexShader:mc.meshlambert_vert,fragmentShader:mc.meshlambert_frag},phong:{uniforms:Ks([uc.common,uc.specularmap,uc.envmap,uc.aomap,uc.lightmap,uc.emissivemap,uc.bumpmap,uc.normalmap,uc.displacementmap,uc.fog,uc.lights,{emissive:{value:new Ya(0)},specular:{value:new Ya(1118481)},shininess:{value:30}}]),vertexShader:mc.meshphong_vert,fragmentShader:mc.meshphong_frag},standard:{uniforms:Ks([uc.common,uc.envmap,uc.aomap,uc.lightmap,uc.emissivemap,uc.bumpmap,uc.normalmap,uc.displacementmap,uc.roughnessmap,uc.metalnessmap,uc.fog,uc.lights,{emissive:{value:new Ya(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mc.meshphysical_vert,fragmentShader:mc.meshphysical_frag},toon:{uniforms:Ks([uc.common,uc.aomap,uc.lightmap,uc.emissivemap,uc.bumpmap,uc.normalmap,uc.displacementmap,uc.gradientmap,uc.fog,uc.lights,{emissive:{value:new Ya(0)}}]),vertexShader:mc.meshtoon_vert,fragmentShader:mc.meshtoon_frag},matcap:{uniforms:Ks([uc.common,uc.bumpmap,uc.normalmap,uc.displacementmap,uc.fog,{matcap:{value:null}}]),vertexShader:mc.meshmatcap_vert,fragmentShader:mc.meshmatcap_frag},points:{uniforms:Ks([uc.points,uc.fog]),vertexShader:mc.points_vert,fragmentShader:mc.points_frag},dashed:{uniforms:Ks([uc.common,uc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mc.linedashed_vert,fragmentShader:mc.linedashed_frag},depth:{uniforms:Ks([uc.common,uc.displacementmap]),vertexShader:mc.depth_vert,fragmentShader:mc.depth_frag},normal:{uniforms:Ks([uc.common,uc.bumpmap,uc.normalmap,uc.displacementmap,{opacity:{value:1}}]),vertexShader:mc.normal_vert,fragmentShader:mc.normal_frag},sprite:{uniforms:Ks([uc.sprite,uc.fog]),vertexShader:mc.sprite_vert,fragmentShader:mc.sprite_frag},background:{uniforms:{uvTransform:{value:new wo},t2D:{value:null}},vertexShader:mc.background_vert,fragmentShader:mc.background_frag},cube:{uniforms:Ks([uc.envmap,{opacity:{value:1}}]),vertexShader:mc.cube_vert,fragmentShader:mc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mc.equirect_vert,fragmentShader:mc.equirect_frag},distanceRGBA:{uniforms:Ks([uc.common,uc.displacementmap,{referencePosition:{value:new Oo},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mc.distanceRGBA_vert,fragmentShader:mc.distanceRGBA_frag},shadow:{uniforms:Ks([uc.lights,uc.fog,{color:{value:new Ya(0)},opacity:{value:1}}]),vertexShader:mc.shadow_vert,fragmentShader:mc.shadow_frag}};function vc(e,t,n,i){const r=new Ya(0);let o,a,s=0,c=null,l=0,u=null;function h(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return r},setClearColor:function(e,t){r.set(e),s=void 0!==t?t:1,h(r,s)},getClearAlpha:function(){return s},setClearAlpha:function(e){s=e,h(r,s)},render:function(t,i,d,p){let f=!0===i.isScene?i.background:null;const m=e.xr,g=m.getSession&&m.getSession();if(g&&"additive"===g.environmentBlendMode&&(f=null),null===f?h(r,s):f&&f.isColor&&(h(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLCubeRenderTarget||f.mapping===Wn)){void 0===a&&(a=new Hs(new Qs(1,1,1),new tc({name:"BackgroundCubeMaterial",uniforms:$s(gc.cube.uniforms),vertexShader:gc.cube.vertexShader,fragmentShader:gc.cube.fragmentShader,side:Zt,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(a));const i=f.isWebGLCubeRenderTarget?f.texture:f;a.material.uniforms.envMap.value=i,a.material.uniforms.flipEnvMap.value=i.isCubeTexture?-1:1,c===f&&l===i.version&&u===e.toneMapping||(a.material.needsUpdate=!0,c=f,l=i.version,u=e.toneMapping),t.unshift(a,a.geometry,a.material,0,0,null)}else f&&f.isTexture&&(void 0===o&&(o=new Hs(new fc(2,2),new tc({name:"BackgroundMaterial",uniforms:$s(gc.background.uniforms),vertexShader:gc.background.vertexShader,fragmentShader:gc.background.fragmentShader,side:Yt,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&l===f.version&&u===e.toneMapping||(o.material.needsUpdate=!0,c=f,l=f.version,u=e.toneMapping),t.unshift(o,o.geometry,o.material,0,0,null))}}}function yc(e,t,n,i){const r=e.getParameter(34921),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,s={},c=d(null);let l=c;function u(t){return i.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return i.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{}}}function p(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,r){const o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function g(){const t=l.newAttributes,n=l.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function v(t,n,r,o,a,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,o,a,s):e.vertexAttribIPointer(t,n,r,a,s)}function y(){x(),l!==c&&(l=c,u(l.object))}function x(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(r,c,h,y,x){let b=!1;if(a){const t=function(t,n,r){const a=!0===r.wireframe;let c=s[t.id];void 0===c&&(c={},s[t.id]=c);let l=c[n.id];void 0===l&&(l={},c[n.id]=l);let u=l[a];void 0===u&&(u=d(i.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[a]=u);return u}(y,h,c);l!==t&&(l=t,u(l.object)),b=function(e){const t=l.attributes,n=e.attributes;if(Object.keys(t).length!==Object.keys(n).length)return!0;for(const e in n){const i=t[e],r=n[e];if(i.attribute!==r)return!0;if(i.data!==r.data)return!0}return!1}(y),b&&function(e){const t={},n=e.attributes;for(const e in n){const i=n[e],r={};r.attribute=i,i.data&&(r.data=i.data),t[e]=r}l.attributes=t}(y)}else{const e=!0===c.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===e||(l.geometry=y.id,l.program=h.id,l.wireframe=e,b=!0)}!0===r.isInstancedMesh&&(b=!0),null!==x&&n.update(x,34963),b&&(!function(r,o,a,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const c=s.attributes,l=a.getAttributes(),u=o.defaultAttributeValues;for(const t in l){const i=l[t];if(i>=0){const o=c[t];if(void 0!==o){const t=o.normalized,r=o.itemSize,a=n.get(o);if(void 0===a)continue;const c=a.buffer,l=a.type,u=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(i,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):f(i),e.bindBuffer(34962,c),v(i,r,l,t,a*u,h*u)}else o.isInstancedBufferAttribute?(m(i,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):f(i),e.bindBuffer(34962,c),v(i,r,l,t,0,0)}else if("instanceMatrix"===t){const t=n.get(r.instanceMatrix);if(void 0===t)continue;const o=t.buffer,a=t.type;m(i+0,1),m(i+1,1),m(i+2,1),m(i+3,1),e.bindBuffer(34962,o),e.vertexAttribPointer(i+0,4,a,!1,64,0),e.vertexAttribPointer(i+1,4,a,!1,64,16),e.vertexAttribPointer(i+2,4,a,!1,64,32),e.vertexAttribPointer(i+3,4,a,!1,64,48)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i,n);break;case 3:e.vertexAttrib3fv(i,n);break;case 4:e.vertexAttrib4fv(i,n);break;default:e.vertexAttrib1fv(i,n)}}}}g()}(r,c,h,y),null!==x&&e.bindBuffer(34963,n.get(x).buffer))},reset:y,resetDefaultState:x,dispose:function(){y();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)h(i[e].object),delete i[e];delete n[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function xc(e,t,n,i){const r=i.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,i){e.drawArrays(o,t,i),n.update(i,o,1)},this.renderInstances=function(i,a,s){if(0===s)return;let c,l;if(r)c=e,l="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](o,i,a,s),n.update(a,o,s)}}function bc(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=u>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;const n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?e.getParameter(36183):0}}function wc(){const e=this;let t=null,n=0,i=!1,r=!1;const o=new ka,a=new wo,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(t,n,i,r){let c=null!==t?t.length:0,l=null;if(0!==c){if(l=s.value,!0!==r||null===l){const e=i+4*c,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===l||l.length<e)&&(l=new Float32Array(e));for(let e=0,n=i;e!==c;++e,n+=4)o.copy(t[e]).applyMatrix4(r,a),o.normal.toArray(l,n),l[n+3]=o.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=c,e.numIntersection=0,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){const a=0!==e.length||r||0!==n||i;return i=r,t=l(e,o,0),n=e.length,a},this.beginShadows=function(){r=!0,l(null)},this.endShadows=function(){r=!1,c()},this.setState=function(e,o,a,u,h,d){if(!i||null===e||0===e.length||r&&!a)r?l(null):c();else{const i=r?0:n,a=4*i;let c=h.clippingState||null;s.value=c,c=l(e,u,a,d);for(let e=0;e!==a;++e)c[e]=t[e];h.clippingState=c,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=i}}}function _c(e){const t={};return{has:function(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,!!i},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function Sc(e,t,n,i){const r=new WeakMap,o=new WeakMap;function a(e){const s=e.target,c=r.get(s);null!==c.index&&t.remove(c.index);for(const e in c.attributes)t.remove(c.attributes[e]);s.removeEventListener("dispose",a),r.delete(s);const l=o.get(c);l&&(t.remove(l),o.delete(c)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const s=new(gs(n)>65535?ds:us)(n,1);s.version=a;const c=o.get(e);c&&t.remove(c),o.set(e,s)}return{get:function(e,t){let i=r.get(t);return i||(t.addEventListener("dispose",a),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ms).setFromObject(e)),i=t._bufferGeometry),r.set(t,i),n.memory.geometries++,i)},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const i=e.morphAttributes;for(const e in i){const n=i[e];for(let e=0,i=n.length;e<i;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function Mc(e,t,n,i){const r=i.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,i){e.drawElements(o,i,a,t*s),n.update(i,o,1)},this.renderInstances=function(i,c,l){if(0===l)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,c,a,i*s,l),n.update(c,o,l)}}function Tc(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ec(e,t){return e[0]-t[0]}function Ac(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Cc(e){const t={},n=new Float32Array(8),i=[];for(let e=0;e<8;e++)i[e]=[e,0];return{update:function(r,o,a,s){const c=r.morphTargetInfluences,l=void 0===c?0:c.length;let u=t[o.id];if(void 0===u){u=[];for(let e=0;e<l;e++)u[e]=[e,0];t[o.id]=u}for(let e=0;e<l;e++){const t=u[e];t[0]=e,t[1]=c[e]}u.sort(Ac);for(let e=0;e<8;e++)e<l&&u[e][1]?(i[e][0]=u[e][0],i[e][1]=u[e][1]):(i[e][0]=Number.MAX_SAFE_INTEGER,i[e][1]=0);i.sort(Ec);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let e=0;e<8;e++){const t=i[e],r=t[0],a=t[1];r!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+e)!==h[r]&&o.setAttribute("morphTarget"+e,h[r]),d&&o.getAttribute("morphNormal"+e)!==d[r]&&o.setAttribute("morphNormal"+e,d[r]),n[e]=a,p+=a):(h&&void 0!==o.getAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),d&&void 0!==o.getAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const f=o.morphTargetsRelative?1:1-p;s.getUniforms().setValue(e,"morphTargetBaseInfluence",f),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Rc(e,t,n,i){let r=new WeakMap;return{update:function(e){const o=i.render.frame,a=e.geometry,s=t.get(e,a);return r.get(s)!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),r.set(s,o)),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),s},dispose:function(){r=new WeakMap}}}function Lc(e,t,n,i,r,o,a,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:jn,a=void 0!==a?a:xi,To.call(this,e,t,n,i,r,o,a,s,c,l),this.flipY=!1}function Pc(e,t,n,i){To.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=Zn,this.minFilter=Zn,this.wrapR=Xn,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Oc(e,t,n,i){To.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=Zn,this.minFilter=Zn,this.wrapR=Xn,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}gc.physical={uniforms:Ks([gc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new bo(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ya(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:mc.meshphysical_vert,fragmentShader:mc.meshphysical_frag},Lc.prototype=Object.create(To.prototype),Lc.prototype.constructor=Lc,Lc.prototype.isCubeTexture=!0,Object.defineProperty(Lc.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Pc.prototype=Object.create(To.prototype),Pc.prototype.constructor=Pc,Pc.prototype.isDataTexture2DArray=!0,Oc.prototype=Object.create(To.prototype),Oc.prototype.constructor=Oc,Oc.prototype.isDataTexture3D=!0;const Nc=new To,kc=new Pc,Ic=new Oc,Dc=new Lc,Fc=[],zc=[],Bc=new Float32Array(16),Uc=new Float32Array(9),jc=new Float32Array(4);function Hc(e,t,n){const i=e[0];if(i<=0||i>0)return e;let r=t*n,o=Fc[r];if(void 0===o&&(o=new Float32Array(r),Fc[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function Gc(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Vc(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Wc(e,t){let n=zc[t];void 0===n&&(n=new Int32Array(t),zc[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function qc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Jc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Gc(n,t))return;e.uniform2fv(this.addr,t),Vc(n,t)}}function Xc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Gc(n,t))return;e.uniform3fv(this.addr,t),Vc(n,t)}}function Yc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Gc(n,t))return;e.uniform4fv(this.addr,t),Vc(n,t)}}function Zc(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Gc(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Vc(n,t)}else{if(Gc(n,i))return;jc.set(i),e.uniformMatrix2fv(this.addr,!1,jc),Vc(n,i)}}function Qc(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Gc(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Vc(n,t)}else{if(Gc(n,i))return;Uc.set(i),e.uniformMatrix3fv(this.addr,!1,Uc),Vc(n,i)}}function $c(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Gc(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Vc(n,t)}else{if(Gc(n,i))return;Bc.set(i),e.uniformMatrix4fv(this.addr,!1,Bc),Vc(n,i)}}function Kc(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Nc,r)}function el(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||kc,r)}function tl(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Ic,r)}function nl(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||Dc,r)}function il(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function rl(e,t){const n=this.cache;Gc(n,t)||(e.uniform2iv(this.addr,t),Vc(n,t))}function ol(e,t){const n=this.cache;Gc(n,t)||(e.uniform3iv(this.addr,t),Vc(n,t))}function al(e,t){const n=this.cache;Gc(n,t)||(e.uniform4iv(this.addr,t),Vc(n,t))}function sl(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function cl(e,t){e.uniform1fv(this.addr,t)}function ll(e,t){e.uniform1iv(this.addr,t)}function ul(e,t){e.uniform2iv(this.addr,t)}function hl(e,t){e.uniform3iv(this.addr,t)}function dl(e,t){e.uniform4iv(this.addr,t)}function pl(e,t){const n=Hc(t,this.size,2);e.uniform2fv(this.addr,n)}function fl(e,t){const n=Hc(t,this.size,3);e.uniform3fv(this.addr,n)}function ml(e,t){const n=Hc(t,this.size,4);e.uniform4fv(this.addr,n)}function gl(e,t){const n=Hc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function vl(e,t){const n=Hc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function yl(e,t){const n=Hc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function xl(e,t,n){const i=t.length,r=Wc(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTexture2D(t[e]||Nc,r[e])}function bl(e,t,n){const i=t.length,r=Wc(n,i);e.uniform1iv(this.addr,r);for(let e=0;e!==i;++e)n.safeSetTextureCube(t[e]||Dc,r[e])}function wl(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return qc;case 35664:return Jc;case 35665:return Xc;case 35666:return Yc;case 35674:return Zc;case 35675:return Qc;case 35676:return $c;case 5124:case 35670:return il;case 35667:case 35671:return rl;case 35668:case 35672:return ol;case 35669:case 35673:return al;case 5125:return sl;case 35678:case 36198:case 36298:case 36306:case 35682:return Kc;case 35679:case 36299:case 36307:return tl;case 35680:case 36300:case 36308:case 36293:return nl;case 36289:case 36303:case 36311:case 36292:return el}}(t.type)}function _l(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return cl;case 35664:return pl;case 35665:return fl;case 35666:return ml;case 35674:return gl;case 35675:return vl;case 35676:return yl;case 5124:case 35670:return ll;case 35667:case 35671:return ul;case 35668:case 35672:return hl;case 35669:case 35673:return dl;case 35678:case 36198:case 36298:case 36306:case 35682:return xl;case 35680:case 36300:case 36308:case 36293:return bl}}(t.type)}function Sl(e){this.id=e,this.seq=[],this.map={}}_l.prototype.updateCache=function(e){let t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Vc(t,e)},Sl.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}};const Ml=/([\w\d_]+)(\])?(\[|\.)?/g;function Tl(e,t){e.seq.push(t),e.map[t.id]=t}function El(e,t,n){const i=e.name,r=i.length;for(Ml.lastIndex=0;;){const o=Ml.exec(i),a=Ml.lastIndex;let s=o[1],c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===r){Tl(n,void 0===l?new wl(s,e,t):new _l(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Sl(s),Tl(n,e)),n=e}}}function Al(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);El(n,e.getUniformLocation(t,n.name),this)}}function Cl(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}Al.prototype.setValue=function(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Al.prototype.setOptional=function(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)},Al.upload=function(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,i)}},Al.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n};let Rl=0;function Ll(e){switch(e){case Or:return["Linear","( value )"];case Nr:return["sRGB","( value )"];case Ir:return["RGBE","( value )"];case Fr:return["RGBM","( value, 7.0 )"];case zr:return["RGBM","( value, 16.0 )"];case Br:return["RGBD","( value, 256.0 )"];case kr:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Dr:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Pl(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Ol(e,t){const n=Ll(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Nl(e,t){const n=Ll(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function kl(e,t){let n;switch(t){case In:n="Linear";break;case Dn:n="Reinhard";break;case Fn:n="OptimizedCineon";break;case zn:n="ACESFilmic";break;case Bn:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Il(e){return""!==e}function Dl(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Fl(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const zl=/^[ \t]*#include +<([\w\d./]+)>/gm;function Bl(e){return e.replace(zl,Ul)}function Ul(e,t){const n=mc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Bl(n)}const jl=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Hl=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function Gl(e){return e.replace(Hl,Wl).replace(jl,Vl)}function Vl(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Wl(e,t,n,i)}function Wl(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[ i \]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function ql(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Jl(e,t,n,i){const r=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const c=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===qt?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Jt?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Xt&&(t="SHADOWMAP_TYPE_VSM"),t}(n),l=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case jn:case Hn:t="ENVMAP_TYPE_CUBE";break;case Wn:case qn:t="ENVMAP_TYPE_CUBE_UV";break;case Gn:case Vn:t="ENVMAP_TYPE_EQUIREC"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Hn:case Vn:case qn:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Pn:t="ENVMAP_BLENDING_MULTIPLY";break;case On:t="ENVMAP_BLENDING_MIX";break;case Nn:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Il).join("\n")}(n),f=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),m=r.createProgram();let g,v;n.isRawShaderMaterial?(g=[f].filter(Il).join("\n"),g.length>0&&(g+="\n"),v=[p,f].filter(Il).join("\n"),v.length>0&&(v+="\n")):(g=[ql(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Il).join("\n"),v=[p,ql(n),"#define SHADER_NAME "+n.shaderName,f,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==kn?"#define TONE_MAPPING":"",n.toneMapping!==kn?mc.tonemapping_pars_fragment:"",n.toneMapping!==kn?kl("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",mc.encodings_pars_fragment,n.map?Ol("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ol("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ol("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ol("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Ol("lightMapTexelToLinear",n.lightMapEncoding):"",Nl("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Il).join("\n")),a=Bl(a),a=Dl(a,n),a=Fl(a,n),s=Bl(s),s=Dl(s,n),s=Fl(s,n),a=Gl(a),s=Gl(s),n.isWebGL2&&!n.isRawShaderMaterial&&(g=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#version 300 es\n","#define varying in","out highp vec4 pc_fragColor;","#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=v+s,x=Cl(r,35633,g+a),b=Cl(r,35632,y);if(r.attachShader(m,x),r.attachShader(m,b),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(m).trim(),t=r.getShaderInfoLog(x).trim(),n=r.getShaderInfoLog(b).trim();let i=!0,o=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const t=Pl(r,x,"vertex"),n=Pl(r,b,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(m,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,_;return r.deleteShader(x),r.deleteShader(b),this.getUniforms=function(){return void 0===w&&(w=new Al(r,m)),w},this.getAttributes=function(){return void 0===_&&(_=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r).name;n[i]=e.getAttribLocation(t,i)}return n}(r,m)),_},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Rl++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=b,this}function Xl(e,t,n,i){const r=[],o=n.isWebGL2,a=n.logarithmicDepthBuffer,s=n.floatVertexTextures,c=n.maxVertexUniforms,l=n.vertexTextures;let u=n.precision;const h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},d=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function p(e){let t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Or,t}return{getParameters:function(i,r,d,f,m,g,v){const y=f.fog,x=i.isMeshStandardMaterial?f.environment:null,b=i.envMap||x,w=h[i.type],_=v.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(s)return 1024;{const e=c,n=Math.floor((e-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}}(v):0;let S,M;if(null!==i.precision&&(u=n.getMaxPrecision(i.precision),u!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",u,"instead.")),w){const e=gc[w];S=e.vertexShader,M=e.fragmentShader}else S=i.vertexShader,M=i.fragmentShader;const T=e.getRenderTarget();return{isWebGL2:o,shaderID:w,shaderName:i.type,vertexShader:S,fragmentShader:M,defines:i.defines,isRawShaderMaterial:i.isRawShaderMaterial,isShaderMaterial:i.isShaderMaterial,precision:u,instancing:!0===v.isInstancedMesh,supportsVertexTextures:l,outputEncoding:null!==T?p(T.texture):e.outputEncoding,map:!!i.map,mapEncoding:p(i.map),matcap:!!i.matcap,matcapEncoding:p(i.matcap),envMap:!!b,envMapMode:b&&b.mapping,envMapEncoding:p(b),envMapCubeUV:!!b&&(b.mapping===Wn||b.mapping===qn),lightMap:!!i.lightMap,lightMapEncoding:p(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:p(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===Gr,tangentSpaceNormalMap:i.normalMapType===Hr,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!y,useFog:i.fog,fogExp2:y&&y.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:a,skinning:i.skinning&&_>0,maxBones:_,useVertexTexture:s,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:g,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&d.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:kn,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===Qt,flipSided:i.side===Zt,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:o||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||null!==t.get("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(void 0===t.isRawShaderMaterial){for(let e=0;e<d.length;e++)n.push(t[d[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=h[e.type];let n;if(t){const e=gc[t];n=ec.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let o;for(let e=0,t=r.length;e<t;e++){const t=r[e];if(t.cacheKey===n){o=t,++o.usedTimes;break}}return void 0===o&&(o=new Jl(e,n,t,i),r.push(o)),o},releaseProgram:function(e){if(0==--e.usedTimes){const t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},programs:r}}function Yl(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Zl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ql(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function $l(e){const t=[];let n=0;const i=[],r=[],o={id:-1};function a(i,r,a,s,c,l){let u=t[n];const h=e.get(a);return void 0===u?(u={id:i.id,object:i,geometry:r,material:a,program:h.program||o,groupOrder:s,renderOrder:i.renderOrder,z:c,group:l},t[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=c,u.group=l),n++,u}return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(e,t,n,o,s,c){const l=a(e,t,n,o,s,c);(!0===n.transparent?r:i).push(l)},unshift:function(e,t,n,o,s,c){const l=a(e,t,n,o,s,c);(!0===n.transparent?r:i).unshift(l)},finish:function(){for(let e=n,i=t.length;e<i;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){i.length>1&&i.sort(e||Zl),r.length>1&&r.sort(t||Ql)}}}function Kl(e){let t=new WeakMap;function n(e){const i=e.target;i.removeEventListener("dispose",n),t.delete(i)}return{get:function(i,r){const o=t.get(i);let a;return void 0===o?(a=new $l(e),t.set(i,new WeakMap),t.get(i).set(r,a),i.addEventListener("dispose",n)):(a=o.get(r),void 0===a&&(a=new $l(e),o.set(r,a))),a},dispose:function(){t=new WeakMap}}}function eu(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Oo,color:new Ya};break;case"SpotLight":n={position:new Oo,direction:new Oo,color:new Ya,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Oo,color:new Ya,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Oo,skyColor:new Ya,groundColor:new Ya};break;case"RectAreaLight":n={color:new Ya,position:new Oo,halfWidth:new Oo,halfHeight:new Oo}}return e[t.id]=n,n}}}let tu=0;function nu(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function iu(){const e=new eu,t=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bo};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bo,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)n.probe.push(new Oo);const i=new Oo,r=new Uo,o=new Uo;return{setup:function(a,s,c){let l=0,u=0,h=0;for(let e=0;e<9;e++)n.probe[e].set(0,0,0);let d=0,p=0,f=0,m=0,g=0,v=0,y=0,x=0;const b=c.matrixWorldInverse;a.sort(nu);for(let s=0,c=a.length;s<c;s++){const c=a[s],w=c.color,_=c.intensity,S=c.distance,M=c.shadow&&c.shadow.map?c.shadow.map.texture:null;if(c.isAmbientLight)l+=w.r*_,u+=w.g*_,h+=w.b*_;else if(c.isLightProbe)for(let e=0;e<9;e++)n.probe[e].addScaledVector(c.sh.coefficients[e],_);else if(c.isDirectionalLight){const r=e.get(c);if(r.color.copy(c.color).multiplyScalar(c.intensity),r.direction.setFromMatrixPosition(c.matrixWorld),i.setFromMatrixPosition(c.target.matrixWorld),r.direction.sub(i),r.direction.transformDirection(b),c.castShadow){const e=c.shadow,i=t.get(c);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,n.directionalShadow[d]=i,n.directionalShadowMap[d]=M,n.directionalShadowMatrix[d]=c.shadow.matrix,v++}n.directional[d]=r,d++}else if(c.isSpotLight){const r=e.get(c);if(r.position.setFromMatrixPosition(c.matrixWorld),r.position.applyMatrix4(b),r.color.copy(w).multiplyScalar(_),r.distance=S,r.direction.setFromMatrixPosition(c.matrixWorld),i.setFromMatrixPosition(c.target.matrixWorld),r.direction.sub(i),r.direction.transformDirection(b),r.coneCos=Math.cos(c.angle),r.penumbraCos=Math.cos(c.angle*(1-c.penumbra)),r.decay=c.decay,c.castShadow){const e=c.shadow,i=t.get(c);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,n.spotShadow[f]=i,n.spotShadowMap[f]=M,n.spotShadowMatrix[f]=c.shadow.matrix,x++}n.spot[f]=r,f++}else if(c.isRectAreaLight){const t=e.get(c);t.color.copy(w).multiplyScalar(_),t.position.setFromMatrixPosition(c.matrixWorld),t.position.applyMatrix4(b),o.identity(),r.copy(c.matrixWorld),r.premultiply(b),o.extractRotation(r),t.halfWidth.set(.5*c.width,0,0),t.halfHeight.set(0,.5*c.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),n.rectArea[m]=t,m++}else if(c.isPointLight){const i=e.get(c);if(i.position.setFromMatrixPosition(c.matrixWorld),i.position.applyMatrix4(b),i.color.copy(c.color).multiplyScalar(c.intensity),i.distance=c.distance,i.decay=c.decay,c.castShadow){const e=c.shadow,i=t.get(c);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,i.shadowCameraNear=e.camera.near,i.shadowCameraFar=e.camera.far,n.pointShadow[p]=i,n.pointShadowMap[p]=M,n.pointShadowMatrix[p]=c.shadow.matrix,y++}n.point[p]=i,p++}else if(c.isHemisphereLight){const t=e.get(c);t.direction.setFromMatrixPosition(c.matrixWorld),t.direction.transformDirection(b),t.direction.normalize(),t.skyColor.copy(c.color).multiplyScalar(_),t.groundColor.copy(c.groundColor).multiplyScalar(_),n.hemi[g]=t,g++}}n.ambient[0]=l,n.ambient[1]=u,n.ambient[2]=h;const w=n.hash;w.directionalLength===d&&w.pointLength===p&&w.spotLength===f&&w.rectAreaLength===m&&w.hemiLength===g&&w.numDirectionalShadows===v&&w.numPointShadows===y&&w.numSpotShadows===x||(n.directional.length=d,n.spot.length=f,n.rectArea.length=m,n.point.length=p,n.hemi.length=g,n.directionalShadow.length=v,n.directionalShadowMap.length=v,n.pointShadow.length=y,n.pointShadowMap.length=y,n.spotShadow.length=x,n.spotShadowMap.length=x,n.directionalShadowMatrix.length=v,n.pointShadowMatrix.length=y,n.spotShadowMatrix.length=x,w.directionalLength=d,w.pointLength=p,w.spotLength=f,w.rectAreaLength=m,w.hemiLength=g,w.numDirectionalShadows=v,w.numPointShadows=y,w.numSpotShadows=x,n.version=tu++)},state:n}}function ru(){const e=new iu,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function ou(){let e=new WeakMap;function t(n){const i=n.target;i.removeEventListener("dispose",t),e.delete(i)}return{get:function(n,i){let r;return!1===e.has(n)?(r=new ru,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):!1===e.get(n).has(i)?(r=new ru,e.get(n).set(i,r)):r=e.get(n).get(i),r},dispose:function(){e=new WeakMap}}}function au(e){ts.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ur,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function su(e){ts.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Oo,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}au.prototype=Object.create(ts.prototype),au.prototype.constructor=au,au.prototype.isMeshDepthMaterial=!0,au.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},su.prototype=Object.create(ts.prototype),su.prototype.constructor=su,su.prototype.isMeshDistanceMaterial=!0,su.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function cu(e,t,n){let i=new lc;const r=new bo,o=new bo,a=new Eo,s=[],c=[],l={},u={0:Zt,1:Yt,2:Qt},h=new tc({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new bo},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONAL_PASS=1;const p=new Ms;p.setAttribute("position",new os(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new Hs(p,h),m=this;function g(n,i){const r=t.update(f);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,h,f,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,d,f,null)}function v(e,t,n){const i=e<<0|t<<1|n<<2;let r=s[i];return void 0===r&&(r=new au({depthPacking:jr,morphTargets:e,skinning:t}),s[i]=r),r}function y(e,t,n){const i=e<<0|t<<1|n<<2;let r=c[i];return void 0===r&&(r=new su({morphTargets:e,skinning:t}),c[i]=r),r}function x(t,n,i,r,o,a,s){let c=null,h=v,d=t.customDepthMaterial;if(!0===r.isPointLight&&(h=y,d=t.customDistanceMaterial),void 0===d){let e=!1;!0===i.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let r=!1;!0===t.isSkinnedMesh&&(!0===i.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));c=h(e,r,!0===t.isInstancedMesh)}else c=d;if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const e=c.uuid,t=i.uuid;let n=l[e];void 0===n&&(n={},l[e]=n);let r=n[t];void 0===r&&(r=c.clone(),n[t]=r),c=r}return c.visible=i.visible,c.wireframe=i.wireframe,c.side=s===Xt?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],c.clipShadows=i.clipShadows,c.clippingPlanes=i.clippingPlanes,c.clipIntersection=i.clipIntersection,c.wireframeLinewidth=i.wireframeLinewidth,c.linewidth=i.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=o,c.farDistance=a),c}function b(n,r,o,a,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Xt)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let c=0,l=t.length;c<l;c++){const l=t[c],u=r[l.materialIndex];if(u&&u.visible){const t=x(n,i,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,i,t,n,l)}}}else if(r.visible){const t=x(n,i,r,a,o.near,o.far,s);e.renderBufferDirect(o,null,i,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)b(c[e],r,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qt,this.render=function(t,s,c){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(en),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,u=t.length;l<u;l++){const u=t[l],h=u.shadow;if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}r.copy(h.mapSize);const p=h.getFrameExtents();if(r.multiply(p),o.copy(h.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/p.x),r.x=o.x*p.x,h.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/p.y),r.y=o.y*p.y,h.mapSize.y=o.y)),null===h.map&&!h.isPointLightShadow&&this.type===Xt){const e={minFilter:ti,magFilter:ti,format:bi,stencilBuffer:!1};h.map=new Ao(r.x,r.y,e),h.map.texture.name=u.name+".shadowMap",h.mapPass=new Ao(r.x,r.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:Zn,magFilter:Zn,format:bi,stencilBuffer:!1};h.map=new Ao(r.x,r.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const f=h.getViewportCount();for(let e=0;e<f;e++){const t=h.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),h.updateMatrices(u,e),i=h.getFrustum(),b(s,c,h.camera,u,this.type)}h.isPointLightShadow||this.type!==Xt||g(h,c),h.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(l,u,h)}}function lu(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new Eo;let i=null;const r=new Eo(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),n.set(t,i,o,a),!1===r.equals(n)&&(e.clearColor(t,i,o,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?N(2929):k(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case Sn:e.depthFunc(512);break;case Mn:e.depthFunc(519);break;case Tn:e.depthFunc(513);break;case En:e.depthFunc(515);break;case An:e.depthFunc(514);break;case Cn:e.depthFunc(518);break;case Rn:e.depthFunc(516);break;case Ln:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},a=new function(){let t=!1,n=null,i=null,r=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(e){t||(e?N(2960):k(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&o===a||(e.stencilFunc(t,n,a),i=t,r=n,o=a)},setOp:function(t,n,i){a===t&&s===n&&c===i||(e.stencilOp(t,n,i),a=t,s=n,c=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,a=null,s=null,c=null,l=null}}};let s={},c=null,l=null,u=null,h=null,d=null,p=null,f=null,m=null,g=null,v=!1,y=null,x=null,b=null,w=null,_=null;const S=e.getParameter(35661);let M=!1,T=0;const E=e.getParameter(7938);-1!==E.indexOf("WebGL")?(T=parseFloat(/^WebGL\ ([0-9])/.exec(E)[1]),M=T>=1):-1!==E.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(E)[1]),M=T>=2);let A=null,C={};const R=new Eo,L=new Eo;function P(t,n,i){const r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<i;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,r);return o}const O={};function N(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function k(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}O[3553]=P(3553,3553,1),O[34067]=P(34067,34069,6),r.setClear(0,0,0,1),o.setClear(1),a.setClear(0),N(2929),o.setFunc(En),z(!1),B(Ht),N(2884),F(en);const I={[sn]:32774,[cn]:32778,[ln]:32779};if(i)I[un]=32775,I[hn]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(I[un]=e.MIN_EXT,I[hn]=e.MAX_EXT)}const D={[dn]:0,[pn]:1,[fn]:768,[gn]:770,[_n]:776,[bn]:774,[yn]:772,[mn]:769,[vn]:771,[wn]:775,[xn]:773};function F(t,n,i,r,o,a,s,c){if(t!==en){if(l||(N(3042),l=!0),t===an)o=o||n,a=a||i,s=s||r,n===h&&o===f||(e.blendEquationSeparate(I[n],I[o]),h=n,f=o),i===d&&r===p&&a===m&&s===g||(e.blendFuncSeparate(D[i],D[r],D[a],D[s]),d=i,p=r,m=a,g=s),u=t,v=null;else if(t!==u||c!==v){if(h===sn&&f===sn||(e.blendEquation(32774),h=sn,f=sn),c)switch(t){case tn:e.blendFuncSeparate(1,771,1,771);break;case nn:e.blendFunc(1,1);break;case rn:e.blendFuncSeparate(0,0,769,771);break;case on:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case tn:e.blendFuncSeparate(770,771,1,771);break;case nn:e.blendFunc(770,1);break;case rn:e.blendFunc(0,769);break;case on:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}d=null,p=null,m=null,g=null,u=t,v=c}}else l&&(k(3042),l=!1)}function z(t){y!==t&&(t?e.frontFace(2304):e.frontFace(2305),y=t)}function B(t){t!==jt?(N(2884),t!==x&&(t===Ht?e.cullFace(1029):t===Gt?e.cullFace(1028):e.cullFace(1032))):k(2884),x=t}function U(t,n,i){t?(N(32823),w===n&&_===i||(e.polygonOffset(n,i),w=n,_=i)):k(32823)}function j(t){void 0===t&&(t=33984+S-1),A!==t&&(e.activeTexture(t),A=t)}return{buffers:{color:r,depth:o,stencil:a},enable:N,disable:k,useProgram:function(t){return c!==t&&(e.useProgram(t),c=t,!0)},setBlending:F,setMaterial:function(e,t){e.side===Qt?k(2884):N(2884);let n=e.side===Zt;t&&(n=!n),z(n),e.blending===tn&&!1===e.transparent?F(en):F(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),r.setMask(e.colorWrite);const i=e.stencilWrite;a.setTest(i),i&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),U(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:z,setCullFace:B,setLineWidth:function(t){t!==b&&(M&&e.lineWidth(t),b=t)},setPolygonOffset:U,setScissorTest:function(e){e?N(3089):k(3089)},activeTexture:j,bindTexture:function(t,n){null===A&&j();let i=C[A];void 0===i&&(i={type:void 0,texture:void 0},C[A]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||O[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=C[A];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===R.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),R.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){s={},A=null,C={},c=null,u=null,y=null,x=null,r.reset(),o.reset(),a.reset()}}}function uu(e,t,n,i,r,o,a){const s=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?xo.floorPowerOfTwo:Math.floor,o=i(r*e.width),a=i(r*e.height);void 0===p&&(p=m(o,a));const s=n?m(o,a):p;s.width=o,s.height=a;return s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return xo.isPowerOfTwo(e.width)&&xo.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==Zn&&e.minFilter!==ti}function x(t,n,r,o){e.generateMipmap(t);i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function b(n,i,r){if(!1===s)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function w(e){return e===Zn||e===Qn||e===Kn?9728:9729}function _(t){const n=t.target;n.removeEventListener("dispose",_),function(t){const n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&d.delete(n),a.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(t.texture),i.remove(t)}(n),a.memory.textures--}let M=0;function T(e,t){const r=i.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void O(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function E(t,r){if(6!==t.image.length)return;const a=i.get(t);if(t.version>0&&a.__version!==t.version){P(a,t),n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);const i=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),c=t.image[0]&&t.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=i||c?c?t.image[e].image:t.image[e]:g(t.image[e],!1,!0,l);const h=u[0],d=v(h)||s,p=o.convert(t.format),f=o.convert(t.type),m=b(t.internalFormat,p,f);let w;if(L(34067,t,d),i){for(let e=0;e<6;e++){w=u[e].mipmaps;for(let i=0;i<w.length;i++){const r=w[i];t.format!==bi&&t.format!==xi?null!==p?n.compressedTexImage2D(34069+e,i,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,i,m,r.width,r.height,0,p,f,r.data)}}a.__maxMipLevel=w.length-1}else{w=t.mipmaps;for(let e=0;e<6;e++)if(c){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,p,f,u[e].data);for(let t=0;t<w.length;t++){const i=w[t].image[e].image;n.texImage2D(34069+e,t+1,m,i.width,i.height,0,p,f,i.data)}}else{n.texImage2D(34069+e,0,m,p,f,u[e]);for(let t=0;t<w.length;t++){const i=w[t];n.texImage2D(34069+e,t+1,m,p,f,i.image[e])}}a.__maxMipLevel=w.length}y(t,d)&&x(34067,t,h.width,h.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture)}function A(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}const C={[Jn]:10497,[Xn]:33071,[Yn]:33648},R={[Zn]:9728,[Qn]:9984,[Kn]:9986,[ti]:9729,[ni]:9985,[ri]:9987};function L(n,o,a){a?(e.texParameteri(n,10242,C[o.wrapS]),e.texParameteri(n,10243,C[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,C[o.wrapR]),e.texParameteri(n,10240,R[o.magFilter]),e.texParameteri(n,10241,R[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===Xn&&o.wrapT===Xn||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(o.magFilter)),e.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==Zn&&o.minFilter!==ti&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const c=t.get("EXT_texture_filter_anisotropic");if(c){if(o.type===di&&null===t.get("OES_texture_float_linear"))return;if(o.type===pi&&null===(s||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function P(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",_),t.__webglTexture=e.createTexture(),a.memory.textures++)}function O(t,i,r){let a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),P(t,i),n.activeTexture(33984+r),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);const c=function(e){return!s&&(e.wrapS!==Xn||e.wrapT!==Xn||e.minFilter!==Zn&&e.minFilter!==ti)}(i)&&!1===v(i.image),l=g(i.image,c,!1,u),h=v(l)||s,d=o.convert(i.format);let p,f=o.convert(i.type),m=b(i.internalFormat,d,f);L(a,i,h);const w=i.mipmaps;if(i.isDepthTexture)m=6402,s?m=i.type===di?36012:i.type===hi?33190:i.type===vi?35056:33189:i.type===di&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Mi&&6402===m&&i.type!==li&&i.type!==hi&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=li,f=o.convert(i.type)),i.format===Ti&&6402===m&&(m=34041,i.type!==vi&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=vi,f=o.convert(i.type))),n.texImage2D(3553,0,m,l.width,l.height,0,d,f,null);else if(i.isDataTexture)if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)p=w[e],n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,l.width,l.height,0,d,f,l.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(let e=0,t=w.length;e<t;e++)p=w[e],i.format!==bi&&i.format!==xi?null!==d?n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);t.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,l.width,l.height,l.depth,0,d,f,l.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,l.width,l.height,l.depth,0,d,f,l.data),t.__maxMipLevel=0;else if(w.length>0&&h){for(let e=0,t=w.length;e<t;e++)p=w[e],n.texImage2D(3553,e,m,d,f,p);i.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,d,f,l),t.__maxMipLevel=0;y(i,h)&&x(a,i,l.width,l.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function N(t,r,a,s){const c=o.convert(r.texture.format),l=o.convert(r.texture.type),u=b(r.texture.internalFormat,c,l);n.texImage2D(s,0,u,r.width,r.height,0,c,l,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function k(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===di?r=36012:t.type===hi&&(r=33190));const i=D(n);e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const t=D(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=o.convert(n.texture.format),r=o.convert(n.texture.type),a=b(n.texture.internalFormat,t,r);if(i){const t=D(n);e.renderbufferStorageMultisample(36161,t,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function I(t){const n=i.get(t),r=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);const r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Mi)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Ti)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)e.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=e.createRenderbuffer(),k(n.__webglDepthbuffer[i],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),k(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function D(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let F=!1,z=!1;this.allocateTextureUnit=function(){const e=M;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?O(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?O(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=E,this.setTextureCubeDynamic=A,this.setupRenderTarget=function(t){const r=i.get(t),c=i.get(t.texture);t.addEventListener("dispose",S),c.__webglTexture=e.createTexture(),a.memory.textures++;const l=!0===t.isWebGLCubeRenderTarget,u=!0===t.isWebGLMultisampleRenderTarget,h=v(t)||s;if(!s||t.texture.format!==xi||t.texture.type!==di&&t.texture.type!==pi||(t.texture.format=bi,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){r.__webglFramebuffer=[];for(let t=0;t<6;t++)r.__webglFramebuffer[t]=e.createFramebuffer()}else if(r.__webglFramebuffer=e.createFramebuffer(),u)if(s){r.__webglMultisampledFramebuffer=e.createFramebuffer(),r.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,r.__webglColorRenderbuffer);const n=o.convert(t.texture.format),i=o.convert(t.texture.type),a=b(t.texture.internalFormat,n,i),s=D(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),e.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(r.__webglDepthRenderbuffer=e.createRenderbuffer(),k(r.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,c.__webglTexture),L(34067,t.texture,h);for(let e=0;e<6;e++)N(r.__webglFramebuffer[e],t,36064,34069+e);y(t.texture,h)&&x(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,c.__webglTexture),L(3553,t.texture,h),N(r.__webglFramebuffer,t,36064,3553),y(t.texture,h)&&x(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&I(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(y(t,v(e)||s)){const r=e.isWebGLCubeRenderTarget?34067:3553,o=i.get(t).__webglTexture;n.bindTexture(r,o),x(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const r=t.width,o=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?E(e,t):A(e,t)}}function hu(e,t,n){const i=n.isWebGL2;return{convert:function(e){let n;if(e===ai)return 5121;if(e===fi)return 32819;if(e===mi)return 32820;if(e===gi)return 33635;if(e===si)return 5120;if(e===ci)return 5122;if(e===li)return 5123;if(e===ui)return 5124;if(e===hi)return 5125;if(e===di)return 5126;if(e===pi)return i?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===yi)return 6406;if(e===xi)return 6407;if(e===bi)return 6408;if(e===wi)return 6409;if(e===_i)return 6410;if(e===Mi)return 6402;if(e===Ti)return 34041;if(e===Ei)return 6403;if(e===Ai)return 36244;if(e===Ci)return 33319;if(e===Ri)return 33320;if(e===Li)return 36248;if(e===Pi)return 36249;if(e===Oi||e===Ni||e===ki||e===Ii){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Oi)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Ni)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===ki)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ii)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Di||e===Fi||e===zi||e===Bi){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===Di)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Fi)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===zi)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Bi)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Ui)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===ji||e===Hi)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===ji)return n.COMPRESSED_RGB8_ETC2;if(e===Hi)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===Gi||e===Vi||e===Wi||e===qi||e===Ji||e===Xi||e===Yi||e===Zi||e===Qi||e===$i||e===Ki||e===er||e===tr||e===nr||e===rr||e===or||e===ar||e===sr||e===cr||e===lr||e===ur||e===hr||e===dr||e===pr||e===fr||e===mr||e===gr||e===vr?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===ir?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===vi?i?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function du(e){ic.call(this),this.cameras=e||[]}function pu(){ra.call(this),this.type="Group"}function fu(){this._targetRay=null,this._grip=null,this._hand=null}function mu(e,t){const n=this;let i=null,r=1,o=null,a="local-floor",s=null;const c=[],l=new Map,u=new ic;u.layers.enable(1),u.viewport=new Eo;const h=new ic;h.layers.enable(2),h.viewport=new Eo;const d=[u,h],p=new du;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function g(e){const t=l.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function v(){l.forEach((function(e,t){e.disconnect(t)})),l.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),M.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(e){o=e,M.setContext(i),M.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function x(e){const t=i.inputSources;for(let e=0;e<c.length;e++)l.set(t[e],c[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=l.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),l.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],i=l.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=c[e];return void 0===t&&(t=new fu,c[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=c[e];return void 0===t&&(t=new fu,c[e]=t),t.getGripSpace()},this.getHand=function(e){let t=c[e];return void 0===t&&(t=new fu,c[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=function(e){if(i=e,null!==i){i.addEventListener("select",g),i.addEventListener("selectstart",g),i.addEventListener("selectend",g),i.addEventListener("squeeze",g),i.addEventListener("squeezestart",g),i.addEventListener("squeezeend",g),i.addEventListener("end",v);const e=t.getContextAttributes();!0!==e.xrCompatible&&t.makeXRCompatible();const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:r},o=new XRWebGLLayer(i,t,n);i.updateRenderState({baseLayer:o}),i.requestReferenceSpace(a).then(y),i.addEventListener("inputsourceschange",x)}};const b=new Oo,w=new Oo;function _(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){p.near=h.near=u.near=e.near,p.far=h.far=u.far=e.far,f===p.near&&m===p.far||(i.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const t=e.parent,n=p.cameras;_(p,t);for(let e=0;e<n.length;e++)_(n[e],t);e.matrixWorld.copy(p.matrixWorld);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){b.setFromMatrixPosition(t.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);const i=b.distanceTo(w),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),c=(r[9]+1)/r[5],l=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=i/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);const g=a+f,v=s+f,y=d-m,x=p+(i-m),_=c*s/v*g,S=l*s/v*g;e.projectionMatrix.makePerspective(y,x,_,S,g,v)}(p,u,h):p.projectionMatrix.copy(u.projectionMatrix),p};let S=null;const M=new hc;M.setAnimationLoop((function(t,n){if(s=n.getViewerPose(o),null!==s){const t=s.views,n=i.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let r=!1;t.length!==p.cameras.length&&(p.cameras.length=0,r=!0);for(let e=0;e<t.length;e++){const i=t[e],o=n.getViewport(i),a=d[e];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===e&&p.matrix.copy(a.matrix),!0===r&&p.cameras.push(a)}}const r=i.inputSources;for(let e=0;e<c.length;e++){const t=c[e],i=r[e];t.update(i,n,o)}S&&S(t,n)})),this.setAnimationLoop=function(e){S=e},this.dispose=function(){}}function gu(e){function t(t,n,i){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=n.envMap||i;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;var o=e.get(r).__maxMipLevel;void 0!==o&&(t.maxMipLevel.value=o)}let a,s;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?a=n.map:n.specularMap?a=n.specularMap:n.displacementMap?a=n.displacementMap:n.normalMap?a=n.normalMap:n.bumpMap?a=n.bumpMap:n.roughnessMap?a=n.roughnessMap:n.metalnessMap?a=n.metalnessMap:n.alphaMap?a=n.alphaMap:n.emissiveMap&&(a=n.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uvTransform.value.copy(a.matrix)),n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uv2Transform.value.copy(s.matrix))}function n(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Zt&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Zt&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,o,a){i.isMeshBasicMaterial?t(e,i):i.isMeshLambertMaterial?(t(e,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,i)):i.isMeshToonMaterial?(t(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Zt&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Zt&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshPhongMaterial?(t(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Zt&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Zt&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshStandardMaterial?(t(e,i,r),i.isMeshPhysicalMaterial?function(e,t,i){n(e,t,i),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===Zt&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,i,r):n(e,i,r)):i.isMeshMatcapMaterial?(t(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Zt&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Zt&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDepthMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isMeshDistanceMaterial?(t(e,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?(t(e,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Zt&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Zt&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,o,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function vu(e){const t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Or,this.physicallyCorrectLights=!1,this.toneMapping=kn,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let f=!1,m=null,g=0,v=0,y=null,x=null,b=-1,w=null,_=null;const S=new Eo,M=new Eo;let T=null,E=t.width,A=t.height,C=1,R=null,L=null;const P=new Eo(0,0,E,A),O=new Eo(0,0,E,A);let N=!1;const k=new lc,I=new wc;let D=!1,F=!1;const z=new Uo,B=new Oo,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===y?C:1}let H,G,V,W,q,J,X,Y,Z,Q,$,K,ee,te,ne,ie,re,oe,ae,se=n;function ce(e,n){for(let i=0;i<e.length;i++){const r=e[i],o=t.getContext(r,n);if(null!==o)return o}return null}try{const e={alpha:i,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",de,!1),t.addEventListener("webglcontextrestored",pe,!1),null===se){const t=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&t.shift(),se=ce(t,e),null===se)throw ce(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===se.getShaderPrecisionFormat&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function le(){H=new _c(se),G=new bc(se,H,e),!1===G.isWebGL2&&(H.get("WEBGL_depth_texture"),H.get("OES_texture_float"),H.get("OES_texture_half_float"),H.get("OES_texture_half_float_linear"),H.get("OES_standard_derivatives"),H.get("OES_element_index_uint"),H.get("OES_vertex_array_object"),H.get("ANGLE_instanced_arrays")),H.get("OES_texture_float_linear"),oe=new hu(se,H,G),V=new lu(se,H,G),V.scissor(M.copy(O).multiplyScalar(C).floor()),V.viewport(S.copy(P).multiplyScalar(C).floor()),W=new Tc(se),q=new Yl,J=new uu(se,H,V,q,G,oe,W),X=new dc(se,G),ae=new yc(se,H,X,G),Y=new Sc(se,X,W,ae),Z=new Rc(se,Y,X,W),ne=new Cc(se),Q=new Xl(p,H,G,ae),$=new gu(q),K=new Kl(q),ee=new ou,te=new vc(p,V,Z,s),ie=new xc(se,H,W,G),re=new Mc(se,H,W,G),W.programs=Q.programs,p.capabilities=G,p.extensions=H,p.properties=q,p.renderLists=K,p.state=V,p.info=W}le();const ue=new mu(p,se);this.xr=ue;const he=new cu(p,Z,G.maxTextureSize);function de(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function pe(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1,le()}function fe(e){const t=e.target;t.removeEventListener("dispose",fe),function(e){me(e),q.remove(e)}(t)}function me(e){const t=q.get(e).program;void 0!==t&&Q.releaseProgram(t)}this.shadowMap=he,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const e=H.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=H.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(E,A,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new bo),e.set(E,A)},this.setSize=function(e,n,i){ue.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,A=n,t.width=Math.floor(e*C),t.height=Math.floor(n*C),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new bo),e.set(E*C,A*C).floor()},this.setDrawingBufferSize=function(e,n,i){E=e,A=n,C=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Eo),e.copy(S)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,n,i){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,i),V.viewport(S.copy(P).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,i){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,i),V.scissor(M.copy(O).multiplyScalar(C).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){V.setScissorTest(N=e)},this.setOpaqueSort=function(e){R=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(){return te.getClearColor()},this.setClearColor=function(){te.setClearColor.apply(te,arguments)},this.getClearAlpha=function(){return te.getClearAlpha()},this.setClearAlpha=function(){te.setClearAlpha.apply(te,arguments)},this.clear=function(e,t,n){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),se.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",de,!1),t.removeEventListener("webglcontextrestored",pe,!1),K.dispose(),ee.dispose(),q.dispose(),Z.dispose(),ae.dispose(),ue.dispose(),ve.stop()},this.renderBufferImmediate=function(e,t){ae.initAttributes();const n=q.get(e);e.hasPositions&&!n.position&&(n.position=se.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=se.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=se.createBuffer()),e.hasColors&&!n.color&&(n.color=se.createBuffer());const i=t.getAttributes();e.hasPositions&&(se.bindBuffer(34962,n.position),se.bufferData(34962,e.positionArray,35048),ae.enableAttribute(i.position),se.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(se.bindBuffer(34962,n.normal),se.bufferData(34962,e.normalArray,35048),ae.enableAttribute(i.normal),se.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(se.bindBuffer(34962,n.uv),se.bufferData(34962,e.uvArray,35048),ae.enableAttribute(i.uv),se.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(se.bindBuffer(34962,n.color),se.bufferData(34962,e.colorArray,35048),ae.enableAttribute(i.color),se.vertexAttribPointer(i.color,3,5126,!1,0,0)),ae.disableUnusedAttributes(),se.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=U);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=_e(e,t,i,r);V.setMaterial(i,a);let c=n.index;const l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;let u,h=1;!0===i.wireframe&&(c=Y.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&ne.update(r,n,i,s),ae.setup(r,i,s,n,c);let d=ie;null!==c&&(u=X.get(c),d=re,d.setIndex(u));const p=null!==c?c.count:l.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(f,g),x=Math.min(p,f+m,g+v)-1,b=Math.max(0,x-y+1);if(0!==b){if(r.isMesh)!0===i.wireframe?(V.setLineWidth(i.wireframeLinewidth*j()),d.setMode(1)):d.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),V.setLineWidth(e*j()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(y,b,r.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,b,e)}else d.render(y,b)}},this.compile=function(e,t){d=ee.get(e,t),d.init(),e.traverse((function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t);const n=new WeakMap;e.traverse((function(t){let i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];!1===n.has(o)&&(we(o,e,t),n.set(o))}else!1===n.has(i)&&(we(i,e,t),n.set(i))}))};let ge=null;const ve=new hc;function ye(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=Z.update(e),r=e.material;r.visible&&h.push(e,t,r,n,B.z,null)}}else if(e.isImmediateRenderObject)i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),h.push(e,null,e.material,n,B.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||k.intersectsObject(e))){i&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=Z.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,B.z,a)}}else r.visible&&h.push(e,t,r,n,B.z,null)}const r=e.children;for(let e=0,o=r.length;e<o;e++)ye(r[e],t,n,i)}function xe(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],a=o.object,s=o.geometry,c=null===i?o.material:i,l=o.group;if(n.isArrayCamera){_=n;const e=n.cameras;for(let n=0,i=e.length;n<i;n++){const i=e[n];a.layers.test(i.layers)&&(V.viewport(S.copy(i.viewport)),d.setupLights(i),be(a,t,i,s,c,l))}}else _=null,be(a,t,n,s,c,l)}}function be(e,t,n,i,r,o){if(e.onBeforeRender(p,t,n,i,r,o),d=ee.get(t,_||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const i=_e(n,t,r,e);V.setMaterial(r),ae.reset(),function(e,t){e.render((function(e){p.renderBufferImmediate(e,t)}))}(e,i)}else p.renderBufferDirect(n,t,i,r,e,o);e.onAfterRender(p,t,n,i,r,o),d=ee.get(t,_||n)}function we(e,t,n){!0!==t.isScene&&(t=U);const i=q.get(e),r=d.state.lights,o=d.state.shadowsArray,a=r.state.version,s=Q.getParameters(e,r.state,o,t,I.numPlanes,I.numIntersection,n),c=Q.getProgramCacheKey(s);let l=i.program,u=!0;if(void 0===l)e.addEventListener("dispose",fe);else if(l.cacheKey!==c)me(e);else if(i.lightsStateVersion!==a)i.lightsStateVersion=a,u=!1;else{if(void 0!==s.shaderID)return;u=!1}u&&(s.uniforms=Q.getUniforms(e,s),e.onBeforeCompile(s,p),l=Q.acquireProgram(s,c),i.program=l,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);const h=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(let t=0;t<p.maxMorphTargets;t++)h["morphTarget"+t]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(let t=0;t<p.maxMorphNormals;t++)h["morphNormal"+t]>=0&&e.numSupportedMorphNormals++}const f=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=I.numPlanes,i.numIntersection=I.numIntersection,f.clippingPlanes=I.uniform),i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(f.ambientLightColor.value=r.state.ambient,f.lightProbe.value=r.state.probe,f.directionalLights.value=r.state.directional,f.directionalLightShadows.value=r.state.directionalShadow,f.spotLights.value=r.state.spot,f.spotLightShadows.value=r.state.spotShadow,f.rectAreaLights.value=r.state.rectArea,f.pointLights.value=r.state.point,f.pointLightShadows.value=r.state.pointShadow,f.hemisphereLights.value=r.state.hemi,f.directionalShadowMap.value=r.state.directionalShadowMap,f.directionalShadowMatrix.value=r.state.directionalShadowMatrix,f.spotShadowMap.value=r.state.spotShadowMap,f.spotShadowMatrix.value=r.state.spotShadowMatrix,f.pointShadowMap.value=r.state.pointShadowMap,f.pointShadowMatrix.value=r.state.pointShadowMatrix);const m=i.program.getUniforms(),g=Al.seqWithValue(m.seq,f);i.uniformsList=g}function _e(e,t,n,i){!0!==t.isScene&&(t=U),J.resetTextureUnits();const r=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===y?p.outputEncoding:y.texture.encoding,s=q.get(n),c=d.state.lights;if(!0===D&&(!0===F||e!==w)){const t=e===w&&n.id===b;I.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,s,t)}n.version===s.__version?void 0===s.program||n.fog&&s.fog!==r||s.environment!==o||s.needsLights&&s.lightsStateVersion!==c.state.version?we(n,t,i):void 0===s.numClippingPlanes||s.numClippingPlanes===I.numPlanes&&s.numIntersection===I.numIntersection?s.outputEncoding!==a&&we(n,t,i):we(n,t,i):(we(n,t,i),s.__version=n.version);let l=!1,u=!1,h=!1;const f=s.program,m=f.getUniforms(),g=s.uniforms;if(V.useProgram(f.program)&&(l=!0,u=!0,h=!0),n.id!==b&&(b=n.id,u=!0),l||w!==e){if(m.setValue(se,"projectionMatrix",e.projectionMatrix),G.logarithmicDepthBuffer&&m.setValue(se,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,u=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=m.map.cameraPosition;void 0!==t&&t.setValue(se,B.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&m.setValue(se,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&m.setValue(se,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){m.setOptional(se,i,"bindMatrix"),m.setOptional(se,i,"bindMatrixInverse");const e=i.skeleton;if(e){const t=e.bones;if(G.floatVertexTextures){if(void 0===e.boneTexture){let n=Math.sqrt(4*t.length);n=xo.ceilPowerOfTwo(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(e.boneMatrices);const r=new ac(i,n,n,bi,di);e.boneMatrices=i,e.boneTexture=r,e.boneTextureSize=n}m.setValue(se,"boneTexture",e.boneTexture,J),m.setValue(se,"boneTextureSize",e.boneTextureSize)}else m.setOptional(se,e,"boneMatrices")}}var v,x;return(u||s.receiveShadow!==i.receiveShadow)&&(s.receiveShadow=i.receiveShadow,m.setValue(se,"receiveShadow",i.receiveShadow)),u&&(m.setValue(se,"toneMappingExposure",p.toneMappingExposure),s.needsLights&&(x=h,(v=g).ambientLightColor.needsUpdate=x,v.lightProbe.needsUpdate=x,v.directionalLights.needsUpdate=x,v.directionalLightShadows.needsUpdate=x,v.pointLights.needsUpdate=x,v.pointLightShadows.needsUpdate=x,v.spotLights.needsUpdate=x,v.spotLightShadows.needsUpdate=x,v.rectAreaLights.needsUpdate=x,v.hemisphereLights.needsUpdate=x),r&&n.fog&&$.refreshFogUniforms(g,r),$.refreshMaterialUniforms(g,n,o,C,A),void 0!==g.ltc_1&&(g.ltc_1.value=uc.LTC_1),void 0!==g.ltc_2&&(g.ltc_2.value=uc.LTC_2),Al.upload(se,s.uniformsList,g,J)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Al.upload(se,s.uniformsList,g,J),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&m.setValue(se,"center",i.center),m.setValue(se,"modelViewMatrix",i.modelViewMatrix),m.setValue(se,"normalMatrix",i.normalMatrix),m.setValue(se,"modelMatrix",i.matrixWorld),f}ve.setAnimationLoop((function(e){ue.isPresenting||ge&&ge(e)})),"undefined"!=typeof window&&ve.setContext(window),this.setAnimationLoop=function(e){ge=e,ue.setAnimationLoop(e),null===e?ve.stop():ve.start()},this.render=function(e,t){let n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===f)return;ae.resetDefaultState(),b=-1,w=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ue.enabled&&!0===ue.isPresenting&&(t=ue.getCamera(t)),!0===e.isScene&&e.onBeforeRender(p,e,t,n||y),d=ee.get(e,t),d.init(),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(z),F=this.localClippingEnabled,D=I.init(this.clippingPlanes,F,t),h=K.get(e,t),h.init(),ye(e,t,0,p.sortObjects),h.finish(),!0===p.sortObjects&&h.sort(R,L),!0===D&&I.beginShadows();const r=d.state.shadowsArray;he.render(r,e,t),d.setupLights(t),!0===D&&I.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),te.render(h,e,t,i);const o=h.opaque,a=h.transparent;o.length>0&&xe(o,e,t),a.length>0&&xe(a,e,t),!0===e.isScene&&e.onAfterRender(p,e,t),null!==y&&(J.updateRenderTargetMipmap(y),J.updateMultisampleRenderTarget(y)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),h=null,d=null},this.setFramebuffer=function(e){m!==e&&null===y&&se.bindFramebuffer(36160,e),m=e},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTarget=function(e,t,n){y=e,g=t,v=n,e&&void 0===q.get(e).__webglFramebuffer&&J.setupRenderTarget(e);let i=m,r=!1;if(e){const n=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=n[t||0],r=!0):i=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:n,S.copy(e.viewport),M.copy(e.scissor),T=e.scissorTest}else S.copy(P).multiplyScalar(C).floor(),M.copy(O).multiplyScalar(C).floor(),T=N;if(x!==i&&(se.bindFramebuffer(36160,i),x=i),V.viewport(S),V.scissor(M),V.setScissorTest(T),r){const i=q.get(e.texture);se.framebufferTexture2D(36160,36064,34069+(t||0),i.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,i,r,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){let a=!1;s!==x&&(se.bindFramebuffer(36160,s),a=!0);try{const s=e.texture,c=s.format,l=s.type;if(c!==bi&&oe.convert(c)!==se.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===ai||oe.convert(l)===se.getParameter(35738)||l===di&&(G.isWebGL2||H.get("OES_texture_float")||H.get("WEBGL_color_buffer_float"))||l===pi&&(G.isWebGL2?H.get("EXT_color_buffer_float"):H.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===se.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&se.readPixels(t,n,i,r,oe.convert(c),oe.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&se.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),o=Math.floor(t.image.height*i),a=oe.convert(t.format);J.setTexture2D(t,0),se.copyTexImage2D(3553,n,a,e.x,e.y,r,o,0),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){void 0===i&&(i=0);const r=t.image.width,o=t.image.height,a=oe.convert(n.format),s=oe.convert(n.type);J.setTexture2D(n,0),se.pixelStorei(37440,n.flipY),se.pixelStorei(37441,n.premultiplyAlpha),se.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?se.texSubImage2D(3553,i,e.x,e.y,r,o,a,s,t.image.data):t.isCompressedTexture?se.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):se.texSubImage2D(3553,i,e.x,e.y,a,s,t.image),0===i&&n.generateMipmaps&&se.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(e){J.setTexture2D(e,0),V.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function yu(e){vu.call(this,e)}function xu(e,t){this.name="",this.color=new Ya(e),this.density=void 0!==t?t:25e-5}function bu(e,t,n){this.name="",this.color=new Ya(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function wu(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=ao,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xo.generateUUID()}du.prototype=Object.assign(Object.create(ic.prototype),{constructor:du,isArrayCamera:!0}),pu.prototype=Object.assign(Object.create(ra.prototype),{constructor:pu,isGroup:!0}),Object.assign(fu.prototype,{constructor:fu,getHandSpace:function(){if(null===this._hand&&(this._hand=new pu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){let e=new pu;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new pu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new pu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,o=null;const a=this._targetRay,s=this._grip,c=this._hand;if(e)if(e.hand){o=!0;for(let i=0;i<=window.XRHand.LITTLE_PHALANX_TIP;i++)if(e.hand[i]){let r=t.getJointPose(e.hand[i],n);const o=c.joints[i];null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=r.radius),o.visible=null!==r;const a=c.joints[window.XRHand.INDEX_PHALANX_TIP],s=c.joints[window.XRHand.THUMB_PHALANX_TIP],l=a.position.distanceTo(s.position),u=.02,h=.005;c.inputState.pinching&&l>u+h?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&l<=u-h&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==a&&(i=t.getPose(e.targetRaySpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==s&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==c&&(c.visible=null!==o),this}}),Object.assign(mu.prototype,go.prototype),yu.prototype=Object.assign(Object.create(vu.prototype),{constructor:yu,isWebGL1Renderer:!0}),Object.assign(xu.prototype,{isFogExp2:!0,clone:function(){return new xu(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(bu.prototype,{isFog:!0,clone:function(){return new bu(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(wu.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(wu.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xo.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new wu(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xo.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const _u=new Oo;function Su(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Mu(e){ts.call(this),this.type="SpriteMaterial",this.color=new Ya(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}let Tu;Object.defineProperties(Su.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(Su.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)_u.x=this.getX(t),_u.y=this.getY(t),_u.z=this.getZ(t),_u.applyMatrix4(e),this.setXYZ(t,_u.x,_u.y,_u.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new os(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Su(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Mu.prototype=Object.create(ts.prototype),Mu.prototype.constructor=Mu,Mu.prototype.isSpriteMaterial=!0,Mu.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};const Eu=new Oo,Au=new Oo,Cu=new Oo,Ru=new bo,Lu=new bo,Pu=new Uo,Ou=new Oo,Nu=new Oo,ku=new Oo,Iu=new bo,Du=new bo,Fu=new bo;function zu(e){if(ra.call(this),this.type="Sprite",void 0===Tu){Tu=new Ms;const e=new wu(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Tu.setIndex([0,1,2,0,2,3]),Tu.setAttribute("position",new Su(e,3,0,!1)),Tu.setAttribute("uv",new Su(e,2,3,!1))}this.geometry=Tu,this.material=void 0!==e?e:new Mu,this.center=new bo(.5,.5)}function Bu(e,t,n,i,r,o){Ru.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Lu.x=o*Ru.x-r*Ru.y,Lu.y=r*Ru.x+o*Ru.y):Lu.copy(Ru),e.copy(t),e.x+=Lu.x,e.y+=Lu.y,e.applyMatrix4(Pu)}zu.prototype=Object.assign(Object.create(ra.prototype),{constructor:zu,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Au.setFromMatrixScale(this.matrixWorld),Pu.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Au.multiplyScalar(-Cu.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;Bu(Ou.set(-.5,-.5,0),Cu,o,Au,i,r),Bu(Nu.set(.5,-.5,0),Cu,o,Au,i,r),Bu(ku.set(.5,.5,0),Cu,o,Au,i,r),Iu.set(0,0),Du.set(1,0),Fu.set(1,1);let a=e.ray.intersectTriangle(Ou,Nu,ku,!1,Eu);if(null===a&&(Bu(Nu.set(-.5,.5,0),Cu,o,Au,i,r),Du.set(0,1),a=e.ray.intersectTriangle(Ou,ku,Nu,!1,Eu),null===a))return;const s=e.ray.origin.distanceTo(Eu);s<e.near||s>e.far||t.push({distance:s,point:Eu.clone(),uv:Wa.getUV(Eu,Ou,Nu,ku,Iu,Du,Fu,new bo),face:null,object:this})},copy:function(e){return ra.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});const Uu=new Oo,ju=new Oo;function Hu(){ra.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Gu(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Hs.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Uo,this.bindMatrixInverse=new Uo}Hu.prototype=Object.assign(Object.create(ra.prototype),{constructor:Hu,isLOD:!0,copy:function(e){ra.prototype.copy.call(this,e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){Uu.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Uu);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){Uu.setFromMatrixPosition(e.matrixWorld),ju.setFromMatrixPosition(this.matrixWorld);const n=Uu.distanceTo(ju)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){const t=ra.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,i=n.length;e<i;e++){const i=n[e];t.object.levels.push({object:i.object.uuid,distance:i.distance})}return t}}),Gu.prototype=Object.assign(Object.create(Hs.prototype),{constructor:Gu,isSkinnedMesh:!0,copy:function(e){return Hs.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new Eo,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Hs.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new Oo,t=new Eo,n=new Eo,i=new Oo,r=new Uo;return function(o,a){const s=this.skeleton,c=this.geometry;t.fromBufferAttribute(c.attributes.skinIndex,o),n.fromBufferAttribute(c.attributes.skinWeight,o),e.fromBufferAttribute(c.attributes.position,o).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let o=0;o<4;o++){const c=n.getComponent(o);if(0!==c){const n=t.getComponent(o);r.multiplyMatrices(s.bones[n].matrixWorld,s.boneInverses[n]),a.addScaledVector(i.copy(e).applyMatrix4(r),c)}}return a.applyMatrix4(this.bindMatrixInverse)}}()});const Vu=new Uo,Wu=new Uo;function qu(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Uo)}}function Ju(){ra.call(this),this.type="Bone"}Object.assign(qu.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const t=new Uo;this.bones[e]&&t.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(t)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=e.length;i<r;i++){const r=e[i]?e[i].matrixWorld:Wu;Vu.multiplyMatrices(r,t[i]),Vu.toArray(n,16*i)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new qu(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Ju.prototype=Object.assign(Object.create(ra.prototype),{constructor:Ju,isBone:!0});const Xu=new Uo,Yu=new Uo,Zu=[],Qu=new Hs;function $u(e,t,n){Hs.call(this,e,t),this.instanceMatrix=new os(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function Ku(e){ts.call(this),this.type="LineBasicMaterial",this.color=new Ya(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}$u.prototype=Object.assign(Object.create(Hs.prototype),{constructor:$u,isInstancedMesh:!0,copy:function(e){return Hs.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(Qu.geometry=this.geometry,Qu.material=this.material,void 0!==Qu.material)for(let r=0;r<i;r++){this.getMatrixAt(r,Xu),Yu.multiplyMatrices(n,Xu),Qu.matrixWorld=Yu,Qu.raycast(e,Zu);for(let e=0,n=Zu.length;e<n;e++){const n=Zu[e];n.instanceId=r,n.object=this,t.push(n)}Zu.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),Ku.prototype=Object.create(ts.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isLineBasicMaterial=!0,Ku.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const eh=new Oo,th=new Oo,nh=new Uo,ih=new La,rh=new _a;function oh(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ra.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ms,this.material=void 0!==t?t:new Ku,this.updateMorphTargets()}oh.prototype=Object.assign(Object.create(ra.prototype),{constructor:oh,isLine:!0,copy:function(e){return ra.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)eh.fromBufferAttribute(t,e-1),th.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=eh.distanceTo(th);e.setAttribute("lineDistance",new ps(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let e=1,i=t.length;e<i;e++)n[e]=n[e-1],n[e]+=t[e-1].distanceTo(t[e])}return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),rh.copy(n.boundingSphere),rh.applyMatrix4(i),rh.radius+=r,!1===e.ray.intersectsSphere(rh))return;nh.getInverse(i),ih.copy(e.ray).applyMatrix4(nh);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Oo,c=new Oo,l=new Oo,u=new Oo,h=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position.array;if(null!==i){const n=i.array;for(let i=0,o=n.length-1;i<o;i+=h){const o=n[i],h=n[i+1];s.fromArray(r,3*o),c.fromArray(r,3*h);if(ih.distanceSqToSegment(s,c,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(u);d<e.near||d>e.far||t.push({distance:d,point:l.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let n=0,i=r.length/3-1;n<i;n+=h){s.fromArray(r,3*n),c.fromArray(r,3*n+3);if(ih.distanceSqToSegment(s,c,u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(u);i<e.near||i>e.far||t.push({distance:i,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const i=n.vertices,r=i.length;for(let n=0;n<r-1;n+=h){if(ih.distanceSqToSegment(i[n],i[n+1],u,l)>a)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const ah=new Oo,sh=new Oo;function ch(e,t){oh.call(this,e,t),this.type="LineSegments"}function lh(e,t){oh.call(this,e,t),this.type="LineLoop"}function uh(e){ts.call(this),this.type="PointsMaterial",this.color=new Ya(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}ch.prototype=Object.assign(Object.create(oh.prototype),{constructor:ch,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)ah.fromBufferAttribute(t,e),sh.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+ah.distanceTo(sh);e.setAttribute("lineDistance",new ps(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let e=0,i=t.length;e<i;e+=2)ah.copy(t[e]),sh.copy(t[e+1]),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+ah.distanceTo(sh)}return this}}),lh.prototype=Object.assign(Object.create(oh.prototype),{constructor:lh,isLineLoop:!0}),uh.prototype=Object.create(ts.prototype),uh.prototype.constructor=uh,uh.prototype.isPointsMaterial=!0,uh.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const hh=new Uo,dh=new La,ph=new _a,fh=new Oo;function mh(e,t){ra.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ms,this.material=void 0!==t?t:new uh,this.updateMorphTargets()}function gh(e,t,n,i,r,o,a){const s=dh.distanceSqToPoint(e);if(s<n){const n=new Oo;dh.closestPointToPoint(e,n),n.applyMatrix4(i);const c=r.ray.origin.distanceTo(n);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}function vh(e,t,n,i,r,o,a,s,c){To.call(this,e,t,n,i,r,o,a,s,c),this.format=void 0!==a?a:xi,this.minFilter=void 0!==o?o:ti,this.magFilter=void 0!==r?r:ti,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){l.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}function yh(e,t,n,i,r,o,a,s,c,l,u,h){To.call(this,null,o,a,s,c,l,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function xh(e,t,n,i,r,o,a,s,c){To.call(this,e,t,n,i,r,o,a,s,c),this.needsUpdate=!0}function bh(e,t,n,i,r,o,a,s,c,l){if((l=void 0!==l?l:Mi)!==Mi&&l!==Ti)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Mi&&(n=li),void 0===n&&l===Ti&&(n=vi),To.call(this,null,i,r,o,a,s,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Zn,this.minFilter=void 0!==s?s:Zn,this.flipY=!1,this.generateMipmaps=!1}function wh(e){Ms.call(this),this.type="WireframeGeometry";const t=[],n=[0,0],i={},r=["a","b","c"];if(e&&e.isGeometry){const o=e.faces;for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0;e<3;e++){const o=t[r[e]],a=t[r[(e+1)%3]];n[0]=Math.min(o,a),n[1]=Math.max(o,a);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const n in i){const r=i[n];let o=e.vertices[r.index1];t.push(o.x,o.y,o.z),o=e.vertices[r.index2],t.push(o.x,o.y,o.z)}}else if(e&&e.isBufferGeometry){let r=new Oo;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,t=s.length;e<t;++e){const t=s[e],r=t.start;for(let e=r,o=r+t.count;e<o;e+=3)for(let t=0;t<3;t++){const r=a.getX(e+t),o=a.getX(e+(t+1)%3);n[0]=Math.min(r,o),n[1]=Math.max(r,o);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const e in i){const n=i[e];r.fromBufferAttribute(o,n.index1),t.push(r.x,r.y,r.z),r.fromBufferAttribute(o,n.index2),t.push(r.x,r.y,r.z)}}else{const n=e.attributes.position;for(let e=0,i=n.count/3;e<i;e++)for(let i=0;i<3;i++){const o=3*e+i;r.fromBufferAttribute(n,o),t.push(r.x,r.y,r.z);const a=3*e+(i+1)%3;r.fromBufferAttribute(n,a),t.push(r.x,r.y,r.z)}}}this.setAttribute("position",new ps(t,3))}function _h(e,t,n){Ys.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Sh(e,t,n)),this.mergeVertices()}function Sh(e,t,n){Ms.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],o=[],a=[],s=1e-5,c=new Oo,l=new Oo,u=new Oo,h=new Oo,d=new Oo;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=t+1;for(let i=0;i<=n;i++){const p=i/n;for(let n=0;n<=t;n++){const i=n/t;e(i,p,l),r.push(l.x,l.y,l.z),i-s>=0?(e(i-s,p,u),h.subVectors(l,u)):(e(i+s,p,u),h.subVectors(u,l)),p-s>=0?(e(i,p-s,u),d.subVectors(l,u)):(e(i,p+s,u),d.subVectors(u,l)),c.crossVectors(h,d).normalize(),o.push(c.x,c.y,c.z),a.push(i,p)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*p+n,r=e*p+n+1,o=(e+1)*p+n+1,a=(e+1)*p+n;i.push(t,r,a),i.push(r,o,a)}this.setIndex(i),this.setAttribute("position",new ps(r,3)),this.setAttribute("normal",new ps(o,3)),this.setAttribute("uv",new ps(a,2))}function Mh(e,t,n,i){Ys.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Th(e,t,n,i)),this.mergeVertices()}function Th(e,t,n,i){Ms.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;const r=[],o=[];function a(e,t,n,i){const r=Math.pow(2,i),o=[];for(let i=0;i<=r;i++){o[i]=[];const a=e.clone().lerp(n,i/r),s=t.clone().lerp(n,i/r),c=r-i;for(let e=0;e<=c;e++)o[i][e]=0===e&&i===r?a:a.clone().lerp(s,e/c)}for(let e=0;e<r;e++)for(let t=0;t<2*(r-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(o[e][n+1]),s(o[e+1][n]),s(o[e][n])):(s(o[e][n+1]),s(o[e+1][n+1]),s(o[e+1][n]))}}function s(e){r.push(e.x,e.y,e.z)}function c(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function l(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Oo,i=new Oo,r=new Oo;for(let o=0;o<t.length;o+=3)c(t[o+0],n),c(t[o+1],i),c(t[o+2],r),a(n,i,r,e)}(i=i||0),function(e){const t=new Oo;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new Oo;for(let n=0;n<r.length;n+=3){e.x=r[n+0],e.y=r[n+1],e.z=r[n+2];const i=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(i,1-a)}var t;(function(){const e=new Oo,t=new Oo,n=new Oo,i=new Oo,a=new bo,s=new bo,c=new bo;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),i.copy(e).add(t).add(n).divideScalar(3);const p=u(i);l(a,d+0,e,p),l(s,d+2,t,p),l(c,d+4,n,p)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new ps(r,3)),this.setAttribute("normal",new ps(r.slice(),3)),this.setAttribute("uv",new ps(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Eh(e,t){Ys.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ah(e,t)),this.mergeVertices()}function Ah(e,t){Th.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ch(e,t){Ys.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Rh(e,t)),this.mergeVertices()}function Rh(e,t){Th.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Lh(e,t){Ys.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ph(e,t)),this.mergeVertices()}function Ph(e,t){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Th.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Oh(e,t){Ys.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Nh(e,t)),this.mergeVertices()}function Nh(e,t){const n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];Th.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function kh(e,t,n,i,r,o){Ys.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new Ih(e,t,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Ih(e,t,n,i,r){Ms.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Oo,s=new Oo,c=new bo;let l=new Oo;const u=[],h=[],d=[],p=[];function f(r){l=e.getPointAt(r/t,l);const c=o.normals[r],d=o.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),o=-Math.cos(t);s.x=o*c.x+r*d.x,s.y=o*c.y+r*d.y,s.z=o*c.z+r*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=l.x+n*s.x,a.y=l.y+n*s.y,a.z=l.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)c.x=e/t,c.y=n/i,d.push(c.x,c.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),o=(i+1)*e+t,a=(i+1)*(e-1)+t;p.push(n,r,a),p.push(r,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new ps(u,3)),this.setAttribute("normal",new ps(h,3)),this.setAttribute("uv",new ps(d,2))}function Dh(e,t,n,i,r,o,a){Ys.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Fh(e,t,n,i,r,o)),this.mergeVertices()}function Fh(e,t,n,i,r,o){Ms.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;const a=[],s=[],c=[],l=[],u=new Oo,h=new Oo,d=new Oo,p=new Oo,f=new Oo,m=new Oo,g=new Oo;for(let a=0;a<=n;++a){const y=a/n*r*Math.PI*2;v(y,r,o,e,d),v(y+.01,r,o,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,o=-t*Math.cos(r),p=t*Math.sin(r);u.x=d.x+(o*g.x+p*f.x),u.y=d.y+(o*g.y+p*f.y),u.z=d.z+(o*g.z+p*f.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(a/n),l.push(e/i)}}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),o=(i+1)*e+t,s=(i+1)*(e-1)+t;a.push(n,r,s),a.push(r,o,s)}function v(e,t,n,i,r){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,c=Math.cos(s);r.x=i*(2+c)*.5*o,r.y=i*(2+c)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new ps(s,3)),this.setAttribute("normal",new ps(c,3)),this.setAttribute("uv",new ps(l,2))}function zh(e,t,n,i,r){Ys.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Bh(e,t,n,i,r)),this.mergeVertices()}function Bh(e,t,n,i,r){Ms.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;const o=[],a=[],s=[],c=[],l=new Oo,u=new Oo,h=new Oo;for(let o=0;o<=n;o++)for(let d=0;d<=i;d++){const p=d/i*r,f=o/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),a.push(u.x,u.y,u.z),l.x=e*Math.cos(p),l.y=e*Math.sin(p),h.subVectors(u,l).normalize(),s.push(h.x,h.y,h.z),c.push(d/i),c.push(o/n)}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){const n=(i+1)*e+t-1,r=(i+1)*(e-1)+t-1,a=(i+1)*(e-1)+t,s=(i+1)*e+t;o.push(n,r,s),o.push(r,a,s)}this.setIndex(o),this.setAttribute("position",new ps(a,3)),this.setAttribute("normal",new ps(s,3)),this.setAttribute("uv",new ps(c,2))}mh.prototype=Object.assign(Object.create(ra.prototype),{constructor:mh,isPoints:!0,copy:function(e){return ra.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),ph.copy(n.boundingSphere),ph.applyMatrix4(i),ph.radius+=r,!1===e.ray.intersectsSphere(ph))return;hh.getInverse(i),dh.copy(e.ray).applyMatrix4(hh);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position.array;if(null!==r){const n=r.array;for(let r=0,s=n.length;r<s;r++){const s=n[r];fh.fromArray(o,3*s),gh(fh,s,a,i,e,t,this)}}else for(let n=0,r=o.length/3;n<r;n++)fh.fromArray(o,3*n),gh(fh,n,a,i,e,t,this)}else{const r=n.vertices;for(let n=0,o=r.length;n<o;n++)gh(r[n],n,a,i,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),vh.prototype=Object.assign(Object.create(To.prototype),{constructor:vh,isVideoTexture:!0,update:function(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),yh.prototype=Object.create(To.prototype),yh.prototype.constructor=yh,yh.prototype.isCompressedTexture=!0,xh.prototype=Object.create(To.prototype),xh.prototype.constructor=xh,xh.prototype.isCanvasTexture=!0,bh.prototype=Object.create(To.prototype),bh.prototype.constructor=bh,bh.prototype.isDepthTexture=!0,wh.prototype=Object.create(Ms.prototype),wh.prototype.constructor=wh,_h.prototype=Object.create(Ys.prototype),_h.prototype.constructor=_h,Sh.prototype=Object.create(Ms.prototype),Sh.prototype.constructor=Sh,Mh.prototype=Object.create(Ys.prototype),Mh.prototype.constructor=Mh,Th.prototype=Object.create(Ms.prototype),Th.prototype.constructor=Th,Eh.prototype=Object.create(Ys.prototype),Eh.prototype.constructor=Eh,Ah.prototype=Object.create(Th.prototype),Ah.prototype.constructor=Ah,Ch.prototype=Object.create(Ys.prototype),Ch.prototype.constructor=Ch,Rh.prototype=Object.create(Th.prototype),Rh.prototype.constructor=Rh,Lh.prototype=Object.create(Ys.prototype),Lh.prototype.constructor=Lh,Ph.prototype=Object.create(Th.prototype),Ph.prototype.constructor=Ph,Oh.prototype=Object.create(Ys.prototype),Oh.prototype.constructor=Oh,Nh.prototype=Object.create(Th.prototype),Nh.prototype.constructor=Nh,kh.prototype=Object.create(Ys.prototype),kh.prototype.constructor=kh,Ih.prototype=Object.create(Ms.prototype),Ih.prototype.constructor=Ih,Ih.prototype.toJSON=function(){const e=Ms.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Dh.prototype=Object.create(Ys.prototype),Dh.prototype.constructor=Dh,Fh.prototype=Object.create(Ms.prototype),Fh.prototype.constructor=Fh,zh.prototype=Object.create(Ys.prototype),zh.prototype.constructor=zh,Bh.prototype=Object.create(Ms.prototype),Bh.prototype.constructor=Bh;const Uh=function(e,t,n){n=n||2;let i,r,o,a,s,c,l,u=t&&t.length,h=u?t[0]*n:e.length,d=jh(e,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(e,t,n,i){let r,o,a,s,c,l=[];for(r=0,o=t.length;r<o;r++)a=t[r]*i,s=r<o-1?t[r+1]*i:e.length,c=jh(e,a,s,i,!1),c===c.next&&(c.steiner=!0),l.push($h(c));for(l.sort(Xh),r=0;r<l.length;r++)Yh(l[r],n),n=Hh(n,n.next);return n}(e,t,d,n)),e.length>80*n){i=o=e[0],r=a=e[1];for(let t=n;t<h;t+=n)s=e[t],c=e[t+1],s<i&&(i=s),c<r&&(r=c),s>o&&(o=s),c>a&&(a=c);l=Math.max(o-i,a-r),l=0!==l?1/l:0}return Gh(d,p,n,i,r,l),p};function jh(e,t,n,i,r){let o,a;if(r===function(e,t,n,i){let r=0;for(let o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)a=cd(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=cd(o,e[o],e[o+1],a);return a&&nd(a,a.next)&&(ld(a),a=a.next),a}function Hh(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!nd(i,i.next)&&0!==td(i.prev,i,i.next))i=i.next;else{if(ld(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Gh(e,t,n,i,r,o,a){if(!e)return;!a&&o&&function(e,t,n,i){let r=e;do{null===r.z&&(r.z=Qh(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,o,a,s,c,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ,i);t++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(e,i,r,o);let s,c,l=e;for(;e.prev!==e.next;)if(s=e.prev,c=e.next,o?Wh(e,i,r,o):Vh(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),ld(e),e=c.next,l=c.next;else if((e=c)===l){a?1===a?Gh(e=qh(Hh(e),t,n),t,n,i,r,o,2):2===a&&Jh(e,t,n,i,r,o):Gh(Hh(e),t,n,i,r,o,1);break}}function Vh(e){let t=e.prev,n=e,i=e.next;if(td(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(Kh(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&td(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Wh(e,t,n,i){let r=e.prev,o=e,a=e.next;if(td(r,o,a)>=0)return!1;let s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,c=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=Qh(s,c,t,n,i),d=Qh(l,u,t,n,i),p=e.prevZ,f=e.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&Kh(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&td(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&Kh(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&td(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&Kh(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&td(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&Kh(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&td(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function qh(e,t,n){let i=e;do{let r=i.prev,o=i.next.next;!nd(r,o)&&id(r,i,i.next,o)&&ad(r,o)&&ad(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),ld(i),ld(i.next),i=e=o),i=i.next}while(i!==e);return Hh(i)}function Jh(e,t,n,i,r,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&ed(a,e)){let s=sd(a,e);return a=Hh(a,a.next),s=Hh(s,s.next),Gh(a,t,n,i,r,o),void Gh(s,t,n,i,r,o)}e=e.next}a=a.next}while(a!==e)}function Xh(e,t){return e.x-t.x}function Yh(e,t){if(t=function(e,t){let n,i=t,r=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){let e=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=r&&e>a){if(a=e,e===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n;let s,c=n,l=n.x,u=n.y,h=1/0;i=n;do{r>=i.x&&i.x>=l&&r!==i.x&&Kh(o<u?r:a,o,l,u,o<u?a:r,o,i.x,i.y)&&(s=Math.abs(o-i.y)/(r-i.x),ad(i,e)&&(s<h||s===h&&(i.x>n.x||i.x===n.x&&Zh(n,i)))&&(n=i,h=s)),i=i.next}while(i!==c);return n}(e,t)){const n=sd(t,e);Hh(t,t.next),Hh(n,n.next)}}function Zh(e,t){return td(e.prev,e,t.prev)<0&&td(t.next,e,e.next)<0}function Qh(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function $h(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Kh(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function ed(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&id(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ad(e,t)&&ad(t,e)&&function(e,t){let n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(td(e.prev,e,t.prev)||td(e,t.prev,t))||nd(e,t)&&td(e.prev,e,e.next)>0&&td(t.prev,t,t.next)>0)}function td(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function nd(e,t){return e.x===t.x&&e.y===t.y}function id(e,t,n,i){const r=od(td(e,t,n)),o=od(td(e,t,i)),a=od(td(n,i,e)),s=od(td(n,i,t));return r!==o&&a!==s||(!(0!==r||!rd(e,n,t))||(!(0!==o||!rd(e,i,t))||(!(0!==a||!rd(n,e,i))||!(0!==s||!rd(n,t,i)))))}function rd(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function od(e){return e>0?1:e<0?-1:0}function ad(e,t){return td(e.prev,e,e.next)<0?td(e,t,e.next)>=0&&td(e,e.prev,t)>=0:td(e,t,e.prev)<0||td(e,e.next,t)<0}function sd(e,t){let n=new ud(e.i,e.x,e.y),i=new ud(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function cd(e,t,n,i){const r=new ud(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ld(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ud(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const hd={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return hd.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];dd(e),pd(n,e);let o=e.length;t.forEach(dd);for(let e=0;e<t.length;e++)i.push(o),o+=t[e].length,pd(n,t[e]);const a=Uh(n,i);for(let e=0;e<a.length;e+=3)r.push(a.slice(e,e+3));return r}};function dd(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function pd(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function fd(e,t){Ys.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new md(e,t)),this.mergeVertices()}function md(e,t){Ms.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let t=0,n=e.length;t<n;t++){o(e[t])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let c=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:gd;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);let g,v,y,x,b,w=!1;f&&(g=f.getSpacedPoints(s),w=!0,l=!1,v=f.computeFrenetFrames(s,!1),y=new Oo,x=new Oo,b=new Oo),l||(p=0,u=0,h=0,d=0);const _=e.extractPoints(a);let S=_.shape;const M=_.holes;if(!hd.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];hd.isClockWise(t)&&(M[e]=t.reverse())}}const T=hd.triangulateShape(S,M),E=S;for(let e=0,t=M.length;e<t;e++){const t=M[e];S=S.concat(t)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const C=S.length,R=T.length;function L(e,t,n){let i,r,o;const a=e.x-t.x,s=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=a*a+s*s,h=a*l-s*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),p=t.x-s/h,f=t.y+a/h,m=((n.x-l/d-p)*l-(n.y+c/d-f)*c)/(a*l-s*c);i=p+a*m-e.x,r=f+s*m-e.y;const g=i*i+r*r;if(g<=2)return new bo(i,r);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?c>Number.EPSILON&&(e=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(l)&&(e=!0),e?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new bo(i/o,r/o)}const P=[];for(let e=0,t=E.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),P[e]=L(E[e],E[n],E[i]);const O=[];let N,k=P.concat();for(let e=0,t=M.length;e<t;e++){const t=M[e];N=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),N[e]=L(t[e],t[i],t[r]);O.push(N),k=k.concat(N)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=E.length;e<t;e++){const t=A(E[e],P[e],i);F(t.x,t.y,-n)}for(let e=0,t=M.length;e<t;e++){const t=M[e];N=O[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],N[e],i);F(r.x,r.y,-n)}}}const I=h+d;for(let e=0;e<C;e++){const t=l?A(S[e],k[e],I):S[e];w?(x.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(x).add(y),F(b.x,b.y,b.z)):F(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<C;t++){const n=l?A(S[t],k[t],I):S[t];w?(x.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),b.copy(g[e]).add(x).add(y),F(b.x,b.y,b.z)):F(n.x,n.y,c/s*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=E.length;e<t;e++){const t=A(E[e],P[e],i);F(t.x,t.y,c+n)}for(let e=0,t=M.length;e<t;e++){const t=M[e];N=O[e];for(let e=0,r=t.length;e<r;e++){const r=A(t[e],N[e],i);w?F(r.x,r.y+g[s-1].y,g[s-1].x+n):F(r.x,r.y,c+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=C*e,o=C*(e+1);B(t+i+n,t+r+n,t+r+o,t+i+o)}}}function F(e,t,n){o.push(e),o.push(t),o.push(n)}function z(e,t,r){U(e),U(t),U(r);const o=i.length/3,a=m.generateTopUV(n,i,o-3,o-2,o-1);j(a[0]),j(a[1]),j(a[2])}function B(e,t,r,o){U(e),U(t),U(o),U(t),U(r),U(o);const a=i.length/3,s=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function U(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function j(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(l){let e=0,t=C*e;for(let e=0;e<R;e++){const n=T[e];z(n[2]+t,n[1]+t,n[0]+t)}e=s+2*p,t=C*e;for(let e=0;e<R;e++){const n=T[e];z(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<R;e++){const t=T[e];z(t[2],t[1],t[0])}for(let e=0;e<R;e++){const t=T[e];z(t[0]+C*s,t[1]+C*s,t[2]+C*s)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;D(E,t),t+=E.length;for(let e=0,n=M.length;e<n;e++){const n=M[e];D(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new ps(i,3)),this.setAttribute("uv",new ps(r,2)),this.computeVertexNormals()}fd.prototype=Object.create(Ys.prototype),fd.prototype.constructor=fd,fd.prototype.toJSON=function(){const e=Ys.prototype.toJSON.call(this);return vd(this.parameters.shapes,this.parameters.options,e)},md.prototype=Object.create(Ms.prototype),md.prototype.constructor=md,md.prototype.toJSON=function(){const e=Ms.prototype.toJSON.call(this);return vd(this.parameters.shapes,this.parameters.options,e)};const gd={generateTopUV:function(e,t,n,i,r){const o=t[3*n],a=t[3*n+1],s=t[3*i],c=t[3*i+1],l=t[3*r],u=t[3*r+1];return[new bo(o,a),new bo(s,c),new bo(l,u)]},generateSideWallUV:function(e,t,n,i,r,o){const a=t[3*n],s=t[3*n+1],c=t[3*n+2],l=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<.01?[new bo(a,1-c),new bo(l,1-h),new bo(d,1-f),new bo(m,1-v)]:[new bo(s,1-c),new bo(u,1-h),new bo(p,1-f),new bo(g,1-v)]}};function vd(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){const i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function yd(e,t){Ys.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new xd(e,t)),this.mergeVertices()}function xd(e,t){const n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ys;const i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),md.call(this,i,t),this.type="TextBufferGeometry"}function bd(e,t,n,i,r,o,a){Ys.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new wd(e,t,n,i,r,o,a)),this.mergeVertices()}function wd(e,t,n,i,r,o,a){Ms.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;const s=Math.min(o+a,Math.PI);let c=0;const l=[],u=new Oo,h=new Oo,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let y=0;0==d&&0==o?y=.5/t:d==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(i+s*r)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(i+s*r)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),g.push(c++)}l.push(g)}for(let e=0;e<n;e++)for(let i=0;i<t;i++){const t=l[e][i+1],r=l[e][i],a=l[e+1][i],c=l[e+1][i+1];(0!==e||o>0)&&d.push(t,r,c),(e!==n-1||s<Math.PI)&&d.push(r,a,c)}this.setIndex(d),this.setAttribute("position",new ps(p,3)),this.setAttribute("normal",new ps(f,3)),this.setAttribute("uv",new ps(m,2))}function _d(e,t,n,i,r,o){Ys.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Sd(e,t,n,i,r,o)),this.mergeVertices()}function Sd(e,t,n,i,r,o){Ms.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},e=e||.5,t=t||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;const a=[],s=[],c=[],l=[];let u=e;const h=(t-e)/(i=void 0!==i?Math.max(1,i):1),d=new Oo,p=new bo;for(let e=0;e<=i;e++){for(let e=0;e<=n;e++){const i=r+e/n*o;d.x=u*Math.cos(i),d.y=u*Math.sin(i),s.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,l.push(p.x,p.y)}u+=h}for(let e=0;e<i;e++){const t=e*(n+1);for(let e=0;e<n;e++){const i=e+t,r=i,o=i+n+1,s=i+n+2,c=i+1;a.push(r,o,c),a.push(o,s,c)}}this.setIndex(a),this.setAttribute("position",new ps(s,3)),this.setAttribute("normal",new ps(c,3)),this.setAttribute("uv",new ps(l,2))}function Md(e,t,n,i){Ys.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new Td(e,t,n,i)),this.mergeVertices()}function Td(e,t,n,i){Ms.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=xo.clamp(i,0,2*Math.PI);const r=[],o=[],a=[],s=1/t,c=new Oo,l=new bo;for(let r=0;r<=t;r++){const u=n+r*s*i,h=Math.sin(u),d=Math.cos(u);for(let n=0;n<=e.length-1;n++)c.x=e[n].x*h,c.y=e[n].y,c.z=e[n].x*d,o.push(c.x,c.y,c.z),l.x=r/t,l.y=n/(e.length-1),a.push(l.x,l.y)}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const i=t+n*e.length,o=i,a=i+e.length,s=i+e.length+1,c=i+1;r.push(o,a,c),r.push(a,s,c)}if(this.setIndex(r),this.setAttribute("position",new ps(o,3)),this.setAttribute("uv",new ps(a,2)),this.computeVertexNormals(),i===2*Math.PI){const n=this.attributes.normal.array,i=new Oo,r=new Oo,o=new Oo,a=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)i.x=n[s+0],i.y=n[s+1],i.z=n[s+2],r.x=n[a+s+0],r.y=n[a+s+1],r.z=n[a+s+2],o.addVectors(i,r).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}function Ed(e,t){Ys.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Ad(e,t)),this.mergeVertices()}function Ad(e,t){Ms.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;const n=[],i=[],r=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))c(e);else for(let t=0;t<e.length;t++)c(e[t]),this.addGroup(a,s,t),a+=s,s=0;function c(e){const a=i.length/3,c=e.extractPoints(t);let l=c.shape;const u=c.holes;!1===hd.isClockWise(l)&&(l=l.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===hd.isClockWise(t)&&(u[e]=t.reverse())}const h=hd.triangulateShape(l,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];l=l.concat(t)}for(let e=0,t=l.length;e<t;e++){const t=l[e];i.push(t.x,t.y,0),r.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],i=t[0]+a,r=t[1]+a,o=t[2]+a;n.push(i,r,o),s+=3}}this.setIndex(n),this.setAttribute("position",new ps(i,3)),this.setAttribute("normal",new ps(r,3)),this.setAttribute("uv",new ps(o,2))}function Cd(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Rd(e,t){Ms.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;const n=[],i=Math.cos(xo.DEG2RAD*t),r=[0,0],o={};let a,s,c;const l=["a","b","c"];let u;e.isBufferGeometry?(u=new Ys,u.fromBufferGeometry(e)):u=e.clone(),u.mergeVertices(),u.computeFaceNormals();const h=u.vertices,d=u.faces;for(let e=0,t=d.length;e<t;e++){const t=d[e];for(let n=0;n<3;n++)a=t[l[n]],s=t[l[(n+1)%3]],r[0]=Math.min(a,s),r[1]=Math.max(a,s),c=r[0]+","+r[1],void 0===o[c]?o[c]={index1:r[0],index2:r[1],face1:e,face2:void 0}:o[c].face2=e}for(c in o){const e=o[c];if(void 0===e.face2||d[e.face1].normal.dot(d[e.face2].normal)<=i){let t=h[e.index1];n.push(t.x,t.y,t.z),t=h[e.index2],n.push(t.x,t.y,t.z)}}this.setAttribute("position",new ps(n,3))}function Ld(e,t,n,i,r,o,a,s){Ys.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Pd(e,t,n,i,r,o,a,s)),this.mergeVertices()}function Pd(e,t,n,i,r,o,a,s){Ms.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};const c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;const l=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){let r,o;const f=new bo,v=new Oo;let y=0;const x=!0===n?e:t,b=!0===n?1:-1;r=p;for(let e=1;e<=i;e++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;o=p;for(let e=0;e<=i;e++){const t=e/i*s+a,n=Math.cos(t),r=Math.sin(t);v.x=x*r,v.y=m*b,v.z=x*n,u.push(v.x,v.y,v.z),h.push(0,b,0),f.x=.5*n+.5,f.y=.5*r*b+.5,d.push(f.x,f.y),p++}for(let e=0;e<i;e++){const t=r+e,i=o+e;!0===n?l.push(i,i+1,t):l.push(i+1,i,t),y+=3}c.addGroup(g,y,!0===n?1:2),g+=y}!function(){const o=new Oo,v=new Oo;let y=0;const x=(t-e)/n;for(let c=0;c<=r;c++){const l=[],g=c/r,y=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*s+a,c=Math.sin(r),f=Math.cos(r);v.x=y*c,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),o.set(c,x,f).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),l.push(p++)}f.push(l)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=f[t][e],i=f[t+1][e],r=f[t+1][e+1],o=f[t][e+1];l.push(n,i,o),l.push(i,r,o),y+=6}c.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(l),this.setAttribute("position",new ps(u,3)),this.setAttribute("normal",new ps(h,3)),this.setAttribute("uv",new ps(d,2))}function Od(e,t,n,i,r,o,a){Ld.call(this,0,e,t,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function Nd(e,t,n,i,r,o,a){Pd.call(this,0,e,t,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function kd(e,t,n,i){Ys.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Id(e,t,n,i)),this.mergeVertices()}function Id(e,t,n,i){Ms.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;const r=[],o=[],a=[],s=[],c=new Oo,l=new bo;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let r=0,u=3;r<=t;r++,u+=3){const h=n+r/t*i;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),a.push(0,0,1),l.x=(o[u]/e+1)/2,l.y=(o[u+1]/e+1)/2,s.push(l.x,l.y)}for(let e=1;e<=t;e++)r.push(e,e+1,0);this.setIndex(r),this.setAttribute("position",new ps(o,3)),this.setAttribute("normal",new ps(a,3)),this.setAttribute("uv",new ps(s,2))}yd.prototype=Object.create(Ys.prototype),yd.prototype.constructor=yd,xd.prototype=Object.create(md.prototype),xd.prototype.constructor=xd,bd.prototype=Object.create(Ys.prototype),bd.prototype.constructor=bd,wd.prototype=Object.create(Ms.prototype),wd.prototype.constructor=wd,_d.prototype=Object.create(Ys.prototype),_d.prototype.constructor=_d,Sd.prototype=Object.create(Ms.prototype),Sd.prototype.constructor=Sd,Md.prototype=Object.create(Ys.prototype),Md.prototype.constructor=Md,Td.prototype=Object.create(Ms.prototype),Td.prototype.constructor=Td,Ed.prototype=Object.create(Ys.prototype),Ed.prototype.constructor=Ed,Ed.prototype.toJSON=function(){const e=Ys.prototype.toJSON.call(this);return Cd(this.parameters.shapes,e)},Ad.prototype=Object.create(Ms.prototype),Ad.prototype.constructor=Ad,Ad.prototype.toJSON=function(){const e=Ms.prototype.toJSON.call(this);return Cd(this.parameters.shapes,e)},Rd.prototype=Object.create(Ms.prototype),Rd.prototype.constructor=Rd,Ld.prototype=Object.create(Ys.prototype),Ld.prototype.constructor=Ld,Pd.prototype=Object.create(Ms.prototype),Pd.prototype.constructor=Pd,Od.prototype=Object.create(Ld.prototype),Od.prototype.constructor=Od,Nd.prototype=Object.create(Pd.prototype),Nd.prototype.constructor=Nd,kd.prototype=Object.create(Ys.prototype),kd.prototype.constructor=kd,Id.prototype=Object.create(Ms.prototype),Id.prototype.constructor=Id;var Dd=Object.freeze({__proto__:null,WireframeGeometry:wh,ParametricGeometry:_h,ParametricBufferGeometry:Sh,TetrahedronGeometry:Eh,TetrahedronBufferGeometry:Ah,OctahedronGeometry:Ch,OctahedronBufferGeometry:Rh,IcosahedronGeometry:Lh,IcosahedronBufferGeometry:Ph,DodecahedronGeometry:Oh,DodecahedronBufferGeometry:Nh,PolyhedronGeometry:Mh,PolyhedronBufferGeometry:Th,TubeGeometry:kh,TubeBufferGeometry:Ih,TorusKnotGeometry:Dh,TorusKnotBufferGeometry:Fh,TorusGeometry:zh,TorusBufferGeometry:Bh,TextGeometry:yd,TextBufferGeometry:xd,SphereGeometry:bd,SphereBufferGeometry:wd,RingGeometry:_d,RingBufferGeometry:Sd,PlaneGeometry:pc,PlaneBufferGeometry:fc,LatheGeometry:Md,LatheBufferGeometry:Td,ShapeGeometry:Ed,ShapeBufferGeometry:Ad,ExtrudeGeometry:fd,ExtrudeBufferGeometry:md,EdgesGeometry:Rd,ConeGeometry:Od,ConeBufferGeometry:Nd,CylinderGeometry:Ld,CylinderBufferGeometry:Pd,CircleGeometry:kd,CircleBufferGeometry:Id,BoxGeometry:Zs,BoxBufferGeometry:Qs});function Fd(e){ts.call(this),this.type="ShadowMaterial",this.color=new Ya(0),this.transparent=!0,this.setValues(e)}function zd(e){tc.call(this,e),this.type="RawShaderMaterial"}function Bd(e){ts.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ya(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ya(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hr,this.normalScale=new bo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function Ud(e){Bd.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new bo(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function jd(e){ts.call(this),this.type="MeshPhongMaterial",this.color=new Ya(16777215),this.specular=new Ya(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ya(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hr,this.normalScale=new bo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Hd(e){ts.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ya(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ya(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hr,this.normalScale=new bo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Gd(e){ts.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hr,this.normalScale=new bo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Vd(e){ts.call(this),this.type="MeshLambertMaterial",this.color=new Ya(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ya(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Wd(e){ts.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ya(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hr,this.normalScale=new bo(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function qd(e){Ku.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Fd.prototype=Object.create(ts.prototype),Fd.prototype.constructor=Fd,Fd.prototype.isShadowMaterial=!0,Fd.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.color.copy(e.color),this},zd.prototype=Object.create(tc.prototype),zd.prototype.constructor=zd,zd.prototype.isRawShaderMaterial=!0,Bd.prototype=Object.create(ts.prototype),Bd.prototype.constructor=Bd,Bd.prototype.isMeshStandardMaterial=!0,Bd.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},Ud.prototype=Object.create(Bd.prototype),Ud.prototype.constructor=Ud,Ud.prototype.isMeshPhysicalMaterial=!0,Ud.prototype.copy=function(e){return Bd.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Ya).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},jd.prototype=Object.create(ts.prototype),jd.prototype.constructor=jd,jd.prototype.isMeshPhongMaterial=!0,jd.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Hd.prototype=Object.create(ts.prototype),Hd.prototype.constructor=Hd,Hd.prototype.isMeshToonMaterial=!0,Hd.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Gd.prototype=Object.create(ts.prototype),Gd.prototype.constructor=Gd,Gd.prototype.isMeshNormalMaterial=!0,Gd.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Vd.prototype=Object.create(ts.prototype),Vd.prototype.constructor=Vd,Vd.prototype.isMeshLambertMaterial=!0,Vd.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Wd.prototype=Object.create(ts.prototype),Wd.prototype.constructor=Wd,Wd.prototype.isMeshMatcapMaterial=!0,Wd.prototype.copy=function(e){return ts.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},qd.prototype=Object.create(Ku.prototype),qd.prototype.constructor=qd,qd.prototype.isLineDashedMaterial=!0,qd.prototype.copy=function(e){return Ku.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Jd=Object.freeze({__proto__:null,ShadowMaterial:Fd,SpriteMaterial:Mu,RawShaderMaterial:zd,ShaderMaterial:tc,PointsMaterial:uh,MeshPhysicalMaterial:Ud,MeshStandardMaterial:Bd,MeshPhongMaterial:jd,MeshToonMaterial:Hd,MeshNormalMaterial:Gd,MeshLambertMaterial:Vd,MeshDepthMaterial:au,MeshDistanceMaterial:su,MeshBasicMaterial:ns,MeshMatcapMaterial:Wd,LineDashedMaterial:qd,LineBasicMaterial:Ku,Material:ts});const Xd={arraySlice:function(e,t,n){return Xd.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,a=0;a!==i;++o){const i=n[o]*t;for(let n=0;n!==t;++n)r[a++]=e[i+n]}return r},flattenJSON:function(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(t.push(o.time),n.push(a)),o=e[r++]}while(void 0!==o)},subclip:function(e,t,n,i,r){r=r||30;const o=e.clone();o.name=t;const a=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],s=t.getValueSize(),c=[],l=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*r;if(!(o<n||o>=i)){c.push(t.times[e]);for(let n=0;n<s;++n)l.push(t.values[e*s+n])}}0!==c.length&&(t.times=Xd.convertArray(c,t.times.constructor),t.values=Xd.convertArray(l,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let e=0;e<o.tracks.length;++e)s>o.tracks[e].times[0]&&(s=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t,n,i){void 0===t&&(t=0),void 0===n&&(n=e),(void 0===i||i<=0)&&(i=30);const r=e.tracks.length,o=t/i;for(let t=0;t<r;++t){const i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const a=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===a)continue;const s=i.getValueSize(),c=i.times.length-1;let l;if(o<=i.times[0])l=Xd.arraySlice(i.values,0,i.valueSize);else if(o>=i.times[c]){const e=c*s;l=Xd.arraySlice(i.values,e)}else{const e=i.createInterpolant();e.evaluate(o),l=e.resultBuffer}if("quaternion"===r){new Ro(l[0],l[1],l[2],l[3]).normalize().conjugate().toArray(l)}const u=a.times.length;for(let e=0;e<u;++e){const t=e*s;if("quaternion"===r)Ro.multiplyQuaternionsFlat(a.values,t,l,0,a.values,t);else for(let e=0;e<s;++e)a.values[t+e]-=l[e]}}return e.blendMode=Cr,e}};function Yd(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Zd(e,t,n,i){Yd.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Qd(e,t,n,i){Yd.call(this,e,t,n,i)}function $d(e,t,n,i){Yd.call(this,e,t,n,i)}function Kd(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Xd.convertArray(t,this.TimeBufferType),this.values=Xd.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function ep(e,t,n){Kd.call(this,e,t,n)}function tp(e,t,n,i){Kd.call(this,e,t,n,i)}function np(e,t,n,i){Kd.call(this,e,t,n,i)}function ip(e,t,n,i){Yd.call(this,e,t,n,i)}function rp(e,t,n,i){Kd.call(this,e,t,n,i)}function op(e,t,n,i){Kd.call(this,e,t,n,i)}function ap(e,t,n,i){Kd.call(this,e,t,n,i)}function sp(e,t,n,i){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.blendMode=void 0!==i?i:Ar,this.uuid=xo.generateUUID(),this.duration<0&&this.resetDuration()}function cp(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return np;case"vector":case"vector2":case"vector3":case"vector4":return ap;case"color":return tp;case"quaternion":return rp;case"bool":case"boolean":return ep;case"string":return op}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Xd.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Yd.prototype,{evaluate:function(e){let t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(e>=r)break e;{const a=t[1];e<a&&(n=2,r=a);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Yd.prototype,{beforeStart_:Yd.prototype.copySampleValue_,afterEnd_:Yd.prototype.copySampleValue_}),Zd.prototype=Object.assign(Object.create(Yd.prototype),{constructor:Zd,DefaultSettings_:{endingStart:Mr,endingEnd:Mr},intervalChanged_:function(e,t,n){let i=this.parameterPositions,r=e-2,o=e+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case Tr:r=e,a=2*t-n;break;case Er:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Tr:o=e,s=2*n-t;break;case Er:o=1,s=n+i[1]-i[0];break;default:o=e-1,s=t}const c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-n),this._offsetPrev=r*l,this._offsetNext=o*l},interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let e=0;e!==a;++e)r[e]=g*o[l+e]+v*o[c+e]+y*o[s+e]+x*o[u+e];return r}}),Qd.prototype=Object.assign(Object.create(Yd.prototype),{constructor:Qd,interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=(n-t)/(i-t),u=1-l;for(let e=0;e!==a;++e)r[e]=o[c+e]*u+o[s+e]*l;return r}}),$d.prototype=Object.assign(Object.create(Yd.prototype),{constructor:$d,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Kd,{toJSON:function(e){const t=e.constructor;let n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Xd.convertArray(e.times,Array),values:Xd.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}}),Object.assign(Kd.prototype,{constructor:Kd,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:_r,InterpolantFactoryMethodDiscrete:function(e){return new $d(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Qd(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Zd(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case wr:t=this.InterpolantFactoryMethodDiscrete;break;case _r:t=this.InterpolantFactoryMethodLinear;break;case Sr:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wr;case this.InterpolantFactoryMethodLinear:return _r;case this.InterpolantFactoryMethodSmooth:return Sr}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this},scale:function(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=Xd.arraySlice(n,r,o),this.values=Xd.arraySlice(this.values,r*e,o*e)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==o&&o>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,o),e=!1;break}o=i}if(void 0!==i&&Xd.isTypedArray(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e},optimize:function(){const e=Xd.arraySlice(this.times),t=Xd.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Sr,r=e.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==s[0]))if(i)r=!0;else{const e=a*n,i=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[o+a]){r=!0;break}}}if(r){if(a!==o){e[o]=e[a];const i=a*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,a=0;a!==n;++a)t[i+a]=t[e+a];++o}return o!==e.length?(this.times=Xd.arraySlice(e,0,o),this.values=Xd.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this},clone:function(){const e=Xd.arraySlice(this.times,0),t=Xd.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),ep.prototype=Object.assign(Object.create(Kd.prototype),{constructor:ep,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:wr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),tp.prototype=Object.assign(Object.create(Kd.prototype),{constructor:tp,ValueTypeName:"color"}),np.prototype=Object.assign(Object.create(Kd.prototype),{constructor:np,ValueTypeName:"number"}),ip.prototype=Object.assign(Object.create(Yd.prototype),{constructor:ip,interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(i-t);let c=e*a;for(let e=c+a;c!==e;c+=4)Ro.slerpFlat(r,0,o,c-a,o,c,s);return r}}),rp.prototype=Object.assign(Object.create(Kd.prototype),{constructor:rp,ValueTypeName:"quaternion",DefaultInterpolation:_r,InterpolantFactoryMethodLinear:function(e){return new ip(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),op.prototype=Object.assign(Object.create(Kd.prototype),{constructor:op,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:wr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ap.prototype=Object.assign(Object.create(Kd.prototype),{constructor:ap,ValueTypeName:"vector"}),Object.assign(sp,{parse:function(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(cp(n[e]).scale(i));return new sp(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push(Kd.toJSON(n[e]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){const r=t.length,o=[];for(let e=0;e<r;e++){let a=[],s=[];a.push((e+r-1)%r,e,(e+1)%r),s.push(0,1,0);const c=Xd.getKeyframeOrder(a);a=Xd.sortedArray(a,1,c),s=Xd.sortedArray(s,1,c),i||0!==a[0]||(a.push(r),s.push(s[0])),o.push(new np(".morphTargetInfluences["+t[e].name+"]",a,s).scale(1/n))}return new sp(e,-1,o)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(r);if(o&&o.length>1){const e=o[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const o=[];for(const e in i)o.push(sp.CreateFromMorphTargetSequence(e,i[e],t,n));return o},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const o=[],a=[];Xd.flattenJSON(n,o,a,i),0!==o.length&&r.push(new e(t,o,a))}},i=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const c=e.hierarchy||[];for(let e=0;e<c.length;e++){const r=c[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),o.push(i.morphTarget===n?1:0)}i.push(new np(".morphTargetInfluence["+n+"]",e,o))}s=e.length*(o||1)}else{const o=".bones["+t[e].name+"]";n(ap,o+".position",r,"pos",i),n(rp,o+".quaternion",r,"rot",i),n(ap,o+".scale",r,"scl",i)}}if(0===i.length)return null;return new sp(r,s,i,a)}}),Object.assign(sp.prototype,{resetDuration:function(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new sp(this.name,this.duration,e,this.blendMode)}});const lp={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function up(e,t,n){const i=this;let r=!1,o=0,a=0,s=void 0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){const t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){const n=c[t],i=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}const hp=new up;function dp(e){this.manager=void 0!==e?e:hp,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(dp.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const pp={};function fp(e){dp.call(this,e)}function mp(e){dp.call(this,e)}function gp(e){dp.call(this,e)}function vp(e){dp.call(this,e)}function yp(e){dp.call(this,e)}function xp(e){dp.call(this,e)}function bp(e){dp.call(this,e)}function wp(){this.type="Curve",this.arcLengthDivisions=200}function _p(e,t,n,i,r,o,a,s){wp.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Sp(e,t,n,i,r,o){_p.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}function Mp(){let e=0,t=0,n=0,i=0;function r(r,o,a,s){e=r,t=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,a,s){let c=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(i-t)/(a+s)+(i-n)/s;c*=a,l*=a,r(t,n,c,l)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}fp.prototype=Object.assign(Object.create(dp.prototype),{constructor:fp,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=lp.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;if(void 0!==pp[e])return void pp[e].push({onLoad:t,onProgress:n,onError:i});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let i;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);i="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;i=t.parseFromString(s,n);break;case"json":i=JSON.parse(s);break;default:i=s}setTimeout((function(){t&&t(i),r.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{pp[e]=[],pp[e].push({onLoad:t,onProgress:n,onError:i}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,i=pp[e];if(delete pp[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),lp.add(e,n);for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onLoad&&t.onLoad(n)}r.manager.itemEnd(e)}else{for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=pp[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onProgress&&i.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=pp[e];delete pp[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=pp[e];delete pp[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return r.manager.itemStart(e),s},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),mp.prototype=Object.assign(Object.create(dp.prototype),{constructor:mp,load:function(e,t,n,i){const r=this,o=new fp(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const i=sp.parse(e[n]);t.push(i)}return t}}),gp.prototype=Object.assign(Object.create(dp.prototype),{constructor:gp,load:function(e,t,n,i){const r=this,o=[],a=new yh;a.image=o;const s=new fp(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader);let c=0;function l(l){s.load(e[l],(function(e){const n=r.parse(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(a.minFilter=ti),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,i)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)l(t);else s.load(e,(function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=ti),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,i);return a}}),vp.prototype=Object.assign(Object.create(dp.prototype),{constructor:vp,load:function(e,t,n,i){const r=this,o=new ac,a=new fp(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.load(e,(function(e){const n=r.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Xn,o.wrapT=void 0!==n.wrapT?n.wrapT:Xn,o.magFilter=void 0!==n.magFilter?n.magFilter:ti,o.minFilter=void 0!==n.minFilter?n.minFilter:ti,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=ri),1===n.mipmapCount&&(o.minFilter=ti),o.needsUpdate=!0,t&&t(o,n))}),n,i),o}}),yp.prototype=Object.assign(Object.create(dp.prototype),{constructor:yp,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=lp.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),lp.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}),xp.prototype=Object.assign(Object.create(dp.prototype),{constructor:xp,load:function(e,t,n,i){const r=new Lc,o=new yp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){r.images[n]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let t=0;t<e.length;++t)s(t);return r}}),bp.prototype=Object.assign(Object.create(dp.prototype),{constructor:bp,load:function(e,t,n,i){const r=new To,o=new yp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){r.image=n;const i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?xi:bi,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}),Object.assign(wp.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i,r=0,o=n.length;i=t||e*n[o-1];let a,s=0,c=o-1;for(;s<=c;)if(r=Math.floor(s+(c-s)/2),a=n[r]-i,a<0)s=r+1;else{if(!(a>0)){c=r;break}c=r-1}if(r=c,n[r]===i)return r/(o-1);const l=n[r];return(r+(i-l)/(n[r+1]-l))/(o-1)},getTangent:function(e,t){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);const r=this.getPoint(n),o=this.getPoint(i),a=t||(r.isVector2?new bo:new Oo);return a.copy(o).sub(r).normalize(),a},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new Oo,i=[],r=[],o=[],a=new Oo,s=new Uo;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new Oo),i[t].normalize()}r[0]=new Oo,o[0]=new Oo;let c=Number.MAX_VALUE;const l=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),o[t]=o[t-1].clone(),a.crossVectors(i[t-1],i[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(xo.clamp(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(s.makeRotationAxis(a,e))}o[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(xo.clamp(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),_p.prototype=Object.create(wp.prototype),_p.prototype.constructor=_p,_p.prototype.isEllipseCurve=!0,_p.prototype.getPoint=function(e,t){const n=t||new bo,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const a=this.aStartAngle+e*r;let s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,i=c-this.aY;s=n*e-i*t+this.aX,c=n*t+i*e+this.aY}return n.set(s,c)},_p.prototype.copy=function(e){return wp.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},_p.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},_p.prototype.fromJSON=function(e){return wp.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Sp.prototype=Object.create(_p.prototype),Sp.prototype.constructor=Sp,Sp.prototype.isArcCurve=!0;const Tp=new Oo,Ep=new Mp,Ap=new Mp,Cp=new Mp;function Rp(e,t,n,i){wp.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function Lp(e,t,n,i,r){const o=.5*(i-t),a=.5*(r-n),s=e*e;return(2*n-2*i+o+a)*(e*s)+(-3*n+3*i-2*o-a)*s+o*e+n}function Pp(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Op(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function Np(e,t,n,i){wp.call(this),this.type="CubicBezierCurve",this.v0=e||new bo,this.v1=t||new bo,this.v2=n||new bo,this.v3=i||new bo}function kp(e,t,n,i){wp.call(this),this.type="CubicBezierCurve3",this.v0=e||new Oo,this.v1=t||new Oo,this.v2=n||new Oo,this.v3=i||new Oo}function Ip(e,t){wp.call(this),this.type="LineCurve",this.v1=e||new bo,this.v2=t||new bo}function Dp(e,t){wp.call(this),this.type="LineCurve3",this.v1=e||new Oo,this.v2=t||new Oo}function Fp(e,t,n){wp.call(this),this.type="QuadraticBezierCurve",this.v0=e||new bo,this.v1=t||new bo,this.v2=n||new bo}function zp(e,t,n){wp.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Oo,this.v1=t||new Oo,this.v2=n||new Oo}function Bp(e){wp.call(this),this.type="SplineCurve",this.points=e||[]}Rp.prototype=Object.create(wp.prototype),Rp.prototype.constructor=Rp,Rp.prototype.isCatmullRomCurve3=!0,Rp.prototype.getPoint=function(e,t){const n=t||new Oo,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e;let a,s,c,l,u=Math.floor(o),h=o-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/r)+1)*r:0===h&&u===r-1&&(u=r-2,h=1),this.closed||u>0?a=i[(u-1)%r]:(Tp.subVectors(i[0],i[1]).add(i[0]),a=Tp),s=i[u%r],c=i[(u+1)%r],this.closed||u+2<r?l=i[(u+2)%r]:(Tp.subVectors(i[r-1],i[r-2]).add(i[r-1]),l=Tp),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(s),e),n=Math.pow(s.distanceToSquared(c),e),i=Math.pow(c.distanceToSquared(l),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Ep.initNonuniformCatmullRom(a.x,s.x,c.x,l.x,t,n,i),Ap.initNonuniformCatmullRom(a.y,s.y,c.y,l.y,t,n,i),Cp.initNonuniformCatmullRom(a.z,s.z,c.z,l.z,t,n,i)}else"catmullrom"===this.curveType&&(Ep.initCatmullRom(a.x,s.x,c.x,l.x,this.tension),Ap.initCatmullRom(a.y,s.y,c.y,l.y,this.tension),Cp.initCatmullRom(a.z,s.z,c.z,l.z,this.tension));return n.set(Ep.calc(h),Ap.calc(h),Cp.calc(h)),n},Rp.prototype.copy=function(e){wp.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Rp.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Rp.prototype.fromJSON=function(e){wp.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Oo).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Np.prototype=Object.create(wp.prototype),Np.prototype.constructor=Np,Np.prototype.isCubicBezierCurve=!0,Np.prototype.getPoint=function(e,t){const n=t||new bo,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Op(e,i.x,r.x,o.x,a.x),Op(e,i.y,r.y,o.y,a.y)),n},Np.prototype.copy=function(e){return wp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Np.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Np.prototype.fromJSON=function(e){return wp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},kp.prototype=Object.create(wp.prototype),kp.prototype.constructor=kp,kp.prototype.isCubicBezierCurve3=!0,kp.prototype.getPoint=function(e,t){const n=t||new Oo,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Op(e,i.x,r.x,o.x,a.x),Op(e,i.y,r.y,o.y,a.y),Op(e,i.z,r.z,o.z,a.z)),n},kp.prototype.copy=function(e){return wp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},kp.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},kp.prototype.fromJSON=function(e){return wp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ip.prototype=Object.create(wp.prototype),Ip.prototype.constructor=Ip,Ip.prototype.isLineCurve=!0,Ip.prototype.getPoint=function(e,t){const n=t||new bo;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ip.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ip.prototype.getTangent=function(e,t){const n=t||new bo;return n.copy(this.v2).sub(this.v1).normalize(),n},Ip.prototype.copy=function(e){return wp.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ip.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ip.prototype.fromJSON=function(e){return wp.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Dp.prototype=Object.create(wp.prototype),Dp.prototype.constructor=Dp,Dp.prototype.isLineCurve3=!0,Dp.prototype.getPoint=function(e,t){const n=t||new Oo;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Dp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Dp.prototype.copy=function(e){return wp.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Dp.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Dp.prototype.fromJSON=function(e){return wp.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Fp.prototype=Object.create(wp.prototype),Fp.prototype.constructor=Fp,Fp.prototype.isQuadraticBezierCurve=!0,Fp.prototype.getPoint=function(e,t){const n=t||new bo,i=this.v0,r=this.v1,o=this.v2;return n.set(Pp(e,i.x,r.x,o.x),Pp(e,i.y,r.y,o.y)),n},Fp.prototype.copy=function(e){return wp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Fp.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Fp.prototype.fromJSON=function(e){return wp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},zp.prototype=Object.create(wp.prototype),zp.prototype.constructor=zp,zp.prototype.isQuadraticBezierCurve3=!0,zp.prototype.getPoint=function(e,t){const n=t||new Oo,i=this.v0,r=this.v1,o=this.v2;return n.set(Pp(e,i.x,r.x,o.x),Pp(e,i.y,r.y,o.y),Pp(e,i.z,r.z,o.z)),n},zp.prototype.copy=function(e){return wp.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},zp.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},zp.prototype.fromJSON=function(e){return wp.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Bp.prototype=Object.create(wp.prototype),Bp.prototype.constructor=Bp,Bp.prototype.isSplineCurve=!0,Bp.prototype.getPoint=function(e,t){const n=t||new bo,i=this.points,r=(i.length-1)*e,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],c=i[o],l=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Lp(a,s.x,c.x,l.x,u.x),Lp(a,s.y,c.y,l.y,u.y)),n},Bp.prototype.copy=function(e){wp.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this},Bp.prototype.toJSON=function(){const e=wp.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e},Bp.prototype.fromJSON=function(e){wp.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new bo).fromArray(n))}return this};var Up=Object.freeze({__proto__:null,ArcCurve:Sp,CatmullRomCurve3:Rp,CubicBezierCurve:Np,CubicBezierCurve3:kp,EllipseCurve:_p,LineCurve:Ip,LineCurve3:Dp,QuadraticBezierCurve:Fp,QuadraticBezierCurve3:zp,SplineCurve:Bp});function jp(){wp.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Hp(e){jp.call(this),this.type="Path",this.currentPoint=new bo,e&&this.setFromPoints(e)}function Gp(e){Hp.call(this,e),this.uuid=xo.generateUUID(),this.type="Shape",this.holes=[]}function Vp(e,t){ra.call(this),this.type="Light",this.color=new Ya(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Wp(e,t,n){Vp.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ra.DefaultUp),this.updateMatrix(),this.groundColor=new Ya(t)}function qp(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new bo(512,512),this.map=null,this.mapPass=null,this.matrix=new Uo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new lc,this._frameExtents=new bo(1,1),this._viewportCount=1,this._viewports=[new Eo(0,0,1,1)]}function Jp(){qp.call(this,new ic(50,1,.5,500))}function Xp(e,t,n,i,r,o){Vp.call(this,e,t),this.type="SpotLight",this.position.copy(ra.DefaultUp),this.updateMatrix(),this.target=new ra,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Jp}function Yp(){qp.call(this,new ic(90,1,.5,500)),this._frameExtents=new bo(4,2),this._viewportCount=6,this._viewports=[new Eo(2,1,1,1),new Eo(0,1,1,1),new Eo(3,1,1,1),new Eo(1,1,1,1),new Eo(3,0,1,1),new Eo(1,0,1,1)],this._cubeDirections=[new Oo(1,0,0),new Oo(-1,0,0),new Oo(0,0,1),new Oo(0,0,-1),new Oo(0,1,0),new Oo(0,-1,0)],this._cubeUps=[new Oo(0,1,0),new Oo(0,1,0),new Oo(0,1,0),new Oo(0,1,0),new Oo(0,0,1),new Oo(0,0,-1)]}function Zp(e,t,n,i){Vp.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Yp}function Qp(e,t,n,i,r,o){nc.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function $p(){qp.call(this,new Qp(-5,5,5,-5,.5,500))}function Kp(e,t){Vp.call(this,e,t),this.type="DirectionalLight",this.position.copy(ra.DefaultUp),this.updateMatrix(),this.target=new ra,this.shadow=new $p}function ef(e,t){Vp.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function tf(e,t,n,i){Vp.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function nf(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Oo)}function rf(e,t){Vp.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new nf}function of(e){dp.call(this,e),this.textures={}}jp.prototype=Object.assign(Object.create(wp.prototype),{constructor:jp,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ip(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const e=n[i]-t,r=this.curves[i],o=r.getLength(),a=0===o?0:1-e/o;return r.getPointAt(a)}i++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const i=s[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){wp.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=wp.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){wp.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Up[n.type]).fromJSON(n))}return this}}),Hp.prototype=Object.assign(Object.create(jp.prototype),{constructor:Hp,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new Ip(this.currentPoint.clone(),new bo(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){const r=new Fp(this.currentPoint.clone(),new bo(e,t),new bo(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,o){const a=new Np(this.currentPoint.clone(),new bo(e,t),new bo(n,i),new bo(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this},splineThru:function(e){const t=new Bp([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,i,r,o),this},absarc:function(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this},ellipse:function(e,t,n,i,r,o,a,s){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,i,r,o,a,s),this},absellipse:function(e,t,n,i,r,o,a,s){const c=new _p(e,t,n,i,r,o,a,s);if(this.curves.length>0){const e=c.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this},copy:function(e){return jp.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=jp.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return jp.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Gp.prototype=Object.assign(Object.create(Hp.prototype),{constructor:Gp,getPointsHoles:function(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Hp.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){const e=Hp.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Hp.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Hp).fromJSON(n))}return this}}),Vp.prototype=Object.assign(Object.create(ra.prototype),{constructor:Vp,isLight:!0,copy:function(e){return ra.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=ra.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Wp.prototype=Object.assign(Object.create(Vp.prototype),{constructor:Wp,isHemisphereLight:!0,copy:function(e){return Vp.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(qp.prototype,{_projScreenMatrix:new Uo,_lightPositionWorld:new Oo,_lookTarget:new Oo,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Jp.prototype=Object.assign(Object.create(qp.prototype),{constructor:Jp,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=2*xo.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),qp.prototype.updateMatrices.call(this,e)}}),Xp.prototype=Object.assign(Object.create(Vp.prototype),{constructor:Xp,isSpotLight:!0,copy:function(e){return Vp.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Yp.prototype=Object.assign(Object.create(qp.prototype),{constructor:Yp,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);const n=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),Zp.prototype=Object.assign(Object.create(Vp.prototype),{constructor:Zp,isPointLight:!0,copy:function(e){return Vp.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Qp.prototype=Object.assign(Object.create(nc.prototype),{constructor:Qp,isOrthographicCamera:!0,copy:function(e,t){return nc.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=ra.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),$p.prototype=Object.assign(Object.create(qp.prototype),{constructor:$p,isDirectionalLightShadow:!0,updateMatrices:function(e){qp.prototype.updateMatrices.call(this,e)}}),Kp.prototype=Object.assign(Object.create(Vp.prototype),{constructor:Kp,isDirectionalLight:!0,copy:function(e){return Vp.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ef.prototype=Object.assign(Object.create(Vp.prototype),{constructor:ef,isAmbientLight:!0}),tf.prototype=Object.assign(Object.create(Vp.prototype),{constructor:tf,isRectAreaLight:!0,copy:function(e){return Vp.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=Vp.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(nf.prototype,{isSphericalHarmonics3:!0,set:function(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*i*1.092548),t.addScaledVector(o[5],i*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],n*r*1.092548),t.addScaledVector(o[8],.546274*(n*n-i*i)),t},getIrradianceAt:function(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*i),t.addScaledVector(o[5],.858086*i*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*n*r),t.addScaledVector(o[8],.429043*(n*n-i*i)),t},add:function(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this},scale:function(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}),Object.assign(nf,{getBasisAt:function(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}),rf.prototype=Object.assign(Object.create(Vp.prototype),{constructor:rf,isLightProbe:!0,copy:function(e){return Vp.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=Vp.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),of.prototype=Object.assign(Object.create(dp.prototype),{constructor:of,load:function(e,t,n,i){const r=this,o=new fp(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=new Jd[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new Ya).setHex(e.sheen)),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.vertexTangents&&(i.vertexTangents=e.vertexTangents),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const r=e.uniforms[t];switch(i.uniforms[t]={},r.type){case"t":i.uniforms[t].value=n(r.value);break;case"c":i.uniforms[t].value=(new Ya).setHex(r.value);break;case"v2":i.uniforms[t].value=(new bo).fromArray(r.value);break;case"v3":i.uniforms[t].value=(new Oo).fromArray(r.value);break;case"v4":i.uniforms[t].value=(new Eo).fromArray(r.value);break;case"m3":i.uniforms[t].value=(new wo).fromArray(r.value);case"m4":i.uniforms[t].value=(new Uo).fromArray(r.value);break;default:i.uniforms[t].value=r.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)i.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new bo).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new bo).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});const af={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function sf(){Ms.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function cf(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),os.call(this,e,t,n),this.meshPerAttribute=i||1}function lf(e){dp.call(this,e)}sf.prototype=Object.assign(Object.create(Ms.prototype),{constructor:sf,isInstancedBufferGeometry:!0,copy:function(e){return Ms.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=Ms.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),cf.prototype=Object.assign(Object.create(os.prototype),{constructor:cf,isInstancedBufferAttribute:!0,copy:function(e){return os.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=os.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),lf.prototype=Object.assign(Object.create(dp.prototype),{constructor:lf,load:function(e,t,n,i){const r=this,o=new fp(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)},parse:function(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],o=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers[t],r=new Uint32Array(i).buffer;return n[t]=r,r}(e,r.buffer),a=new wu(new uf[r.type](o),r.stride);return a.uuid=r.uuid,t[i]=a,a}const r=e.isInstancedBufferGeometry?new sf:new Ms,o=e.data.index;if(void 0!==o){const e=new uf[o.type](o.array);r.setIndex(new os(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let o;if(n.isInterleavedBufferAttribute){o=new Su(i(e.data,n.data),n.itemSize,n.offset,n.normalized)}else{const e=new uf[n.type](n.array);o=new(n.isInstancedBufferAttribute?cf:os)(e,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),r.setAttribute(t,o)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];let a;if(r.isInterleavedBufferAttribute){a=new Su(i(e.data,r.data),r.itemSize,r.offset,r.normalized)}else{a=new os(new uf[r.type](r.array),r.itemSize,r.normalized)}void 0!==r.name&&(a.name=r.name),o.push(a)}r.morphAttributes[t]=o}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(let e=0,t=c.length;e!==t;++e){const t=c[e];r.addGroup(t.start,t.count,t.materialIndex)}const l=e.data.boundingSphere;if(void 0!==l){const e=new Oo;void 0!==l.center&&e.fromArray(l.center),r.boundingSphere=new _a(e,l.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}});const uf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function hf(e){dp.call(this,e)}hf.prototype=Object.assign(Object.create(dp.prototype),{constructor:hf,load:function(e,t,n,i){const r=this,o=""===this.path?af.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new fp(r.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)},parse:function(e,t){const n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,i,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new Gp).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){const n={};let i;if(void 0!==e){const r=new lf;for(let o=0,a=e.length;o<a;o++){let a;const s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Dd[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Dd[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Dd[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Dd[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Dd[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Dd[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Dd[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Dd[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Dd[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Dd[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Dd[s.type]((new Up[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Dd[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Dd[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];i.push(n)}a=new Dd[s.type](i,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];i.push(n)}const e=s.options.extrudePath;void 0!==e&&(s.options.extrudePath=(new Up[e.type]).fromJSON(e)),a=new Dd[s.type](i,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n},parseMaterials:function(e,t){const n={},i={};if(void 0!==e){const r=new of;r.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const i=o.materials[t];void 0===n[i.uuid]&&(n[i.uuid]=r.parse(i)),e.push(n[i.uuid])}i[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i},parseAnimations:function(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n],r=sp.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){const n=this,i={};let r;function o(e){return n.manager.itemStart(e),r.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){const a=new up(t);r=new yp(a),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){i[r.uuid]=[];for(let e=0,t=a.length;e<t;e++){const t=a[e],s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t;i[r.uuid].push(o(s))}}else{const e=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r.url)?r.url:n.resourcePath+r.url;i[r.uuid]=o(e)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,o=e.length;r<o;r++){const o=e[r];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image),a=Array.isArray(t[o.image])?new Lc(t[o.image]):new To(t[o.image]),a.needsUpdate=!0,a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,df)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],pf),a.wrapT=n(o.wrap[1],pf)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,ff)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,ff)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),i[o.uuid]=a}return i},parseObject:function(e,t,n){let i,r,o;function a(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new oa,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new Ya(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new bu(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new xu(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new ic(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Qp(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new ef(e.color,e.intensity);break;case"DirectionalLight":i=new Kp(e.color,e.intensity);break;case"PointLight":i=new Zp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new tf(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Xp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Wp(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new rf).fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":r=a(e.geometry),o=s(e.material),i=new Hs(r,o);break;case"InstancedMesh":r=a(e.geometry),o=s(e.material);const t=e.count,n=e.instanceMatrix;i=new $u(r,o,t),i.instanceMatrix=new os(new Float32Array(n.array),16);break;case"LOD":i=new Hu;break;case"Line":i=new oh(a(e.geometry),s(e.material),e.mode);break;case"LineLoop":i=new lh(a(e.geometry),s(e.material));break;case"LineSegments":i=new ch(a(e.geometry),s(e.material));break;case"PointCloud":case"Points":i=new mh(a(e.geometry),s(e.material));break;case"Sprite":i=new zu(s(e.material));break;case"Group":i=new pu;break;default:i=new ra}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const r=e.children;for(let e=0;e<r.length;e++)i.add(this.parseObject(r[e],t,n))}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}});const df={UVMapping:Un,CubeReflectionMapping:jn,CubeRefractionMapping:Hn,EquirectangularReflectionMapping:Gn,EquirectangularRefractionMapping:Vn,CubeUVReflectionMapping:Wn,CubeUVRefractionMapping:qn},pf={RepeatWrapping:Jn,ClampToEdgeWrapping:Xn,MirroredRepeatWrapping:Yn},ff={NearestFilter:Zn,NearestMipmapNearestFilter:Qn,NearestMipmapLinearFilter:Kn,LinearFilter:ti,LinearMipmapNearestFilter:ni,LinearMipmapLinearFilter:ri};function mf(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),dp.call(this,e),this.options={premultiplyAlpha:"none"}}function gf(){this.type="ShapePath",this.color=new Ya,this.subPaths=[],this.currentPath=null}function vf(e){this.type="Font",this.data=e}function yf(e,t,n,i,r){const o=r.glyphs[e]||r.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");const a=new gf;let s,c,l,u,h,d,p,f;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,o=e.length;r<o;){switch(e[r++]){case"m":s=e[r++]*t+n,c=e[r++]*t+i,a.moveTo(s,c);break;case"l":s=e[r++]*t+n,c=e[r++]*t+i,a.lineTo(s,c);break;case"q":l=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,a.quadraticCurveTo(h,d,l,u);break;case"b":l=e[r++]*t+n,u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,p=e[r++]*t+n,f=e[r++]*t+i,a.bezierCurveTo(h,d,p,f,l,u)}}}return{offsetX:o.ha*t,path:a}}function xf(e){dp.call(this,e)}let bf;mf.prototype=Object.assign(Object.create(dp.prototype),{constructor:mf,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=lp.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,r.options)})).then((function(n){lp.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}),Object.assign(gf.prototype,{moveTo:function(e,t){return this.currentPath=new Hp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new Gp;r.curves=i.curves,t.push(r)}return t}function i(e,t){const n=t.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=t[r],a=t[o],s=a.x-n.x,c=a.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=t[o],s=-s,a=t[r],c=-c),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=c*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return i}const r=hd.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,s,c,l=[];if(1===o.length)return s=o[0],c=new Gp,c.curves=s.curves,l.push(c),l;let u=!r(o[0].getPoints());u=e?!u:u;const h=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let t=0,n=o.length;t<n;t++)s=o[t],p=s.getPoints(),a=r(p),a=e?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new Gp,p:p},d[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:p[0]});if(!d[0])return n(o);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let n=0,r=d.length;n<r;n++){const r=m[n];for(let o=0;o<r.length;o++){const a=r[o];let s=!0;for(let r=0;r<d.length;r++)i(a.p,d[r].p)&&(n!==r&&t.push({froms:n,tos:r,hole:o}),s?(s=!1,h[r].push(a)):e=!0);s&&h[n].push(a)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){c=d[e].s,l.push(c),f=m[e];for(let e=0,t=f.length;e<t;e++)c.holes.push(f[e].h)}return l}}),Object.assign(vf.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);const n=[],i=function(e,t,n){const i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[];let s=0,c=0;for(let e=0;e<i.length;e++){const t=i[e];if("\n"===t)s=0,c-=o;else{const e=yf(t,r,s,c,n);s+=e.offsetX,a.push(e.path)}}return a}(e,t,this.data);for(let e=0,t=i.length;e<t;e++)Array.prototype.push.apply(n,i[e].toShapes());return n}}),xf.prototype=Object.assign(Object.create(dp.prototype),{constructor:xf,load:function(e,t,n,i){const r=this,o=new fp(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new vf(e)}});const wf={getContext:function(){return void 0===bf&&(bf=new(window.AudioContext||window.webkitAudioContext)),bf},setContext:function(e){bf=e}};function _f(e){dp.call(this,e)}function Sf(e,t,n){rf.call(this,void 0,n);const i=(new Ya).set(e),r=(new Ya).set(t),o=new Oo(i.r,i.g,i.b),a=new Oo(r.r,r.g,r.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}function Mf(e,t){rf.call(this,void 0,t);const n=(new Ya).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}_f.prototype=Object.assign(Object.create(dp.prototype),{constructor:_f,load:function(e,t,n,i){const r=this,o=new fp(r.manager);o.setResponseType("arraybuffer"),o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.load(e,(function(n){try{const e=n.slice(0);wf.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}}),n,i)}}),Sf.prototype=Object.assign(Object.create(rf.prototype),{constructor:Sf,isHemisphereLightProbe:!0,copy:function(e){return rf.prototype.copy.call(this,e),this},toJSON:function(e){return rf.prototype.toJSON.call(this,e)}}),Mf.prototype=Object.assign(Object.create(rf.prototype),{constructor:Mf,isAmbientLightProbe:!0,copy:function(e){return rf.prototype.copy.call(this,e),this},toJSON:function(e){return rf.prototype.toJSON.call(this,e)}});const Tf=new Uo,Ef=new Uo;function Af(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ic,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ic,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Cf(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Af.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),i=t.eyeSep/2,r=i*t.near/t.focus,o=t.near*Math.tan(xo.DEG2RAD*t.fov*.5)/t.zoom;let a,s;Ef.elements[12]=-i,Tf.elements[12]=i,a=-o*t.aspect+r,s=o*t.aspect+r,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*t.aspect-r,s=o*t.aspect-r,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ef),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Tf)}}),Object.assign(Cf.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});const Rf=new Oo,Lf=new Ro,Pf=new Oo,Of=new Oo;function Nf(){ra.call(this),this.type="AudioListener",this.context=wf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Cf}function kf(e){ra.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Nf.prototype=Object.assign(Object.create(ra.prototype),{constructor:Nf,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){ra.prototype.updateMatrixWorld.call(this,e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Rf,Lf,Pf),Of.set(0,0,-1).applyQuaternion(Lf),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Rf.x,e),t.positionY.linearRampToValueAtTime(Rf.y,e),t.positionZ.linearRampToValueAtTime(Rf.z,e),t.forwardX.linearRampToValueAtTime(Of.x,e),t.forwardY.linearRampToValueAtTime(Of.y,e),t.forwardZ.linearRampToValueAtTime(Of.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Rf.x,Rf.y,Rf.z),t.setOrientation(Of.x,Of.y,Of.z,n.x,n.y,n.z)}}),kf.prototype=Object.assign(Object.create(ra.prototype),{constructor:kf,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});const If=new Oo,Df=new Ro,Ff=new Oo,zf=new Oo;function Bf(e){kf.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Uf(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function jf(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Bf.prototype=Object.assign(Object.create(kf.prototype),{constructor:Bf,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(ra.prototype.updateMatrixWorld.call(this,e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(If,Df,Ff),zf.set(0,0,1).applyQuaternion(Df);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(If.x,e),t.positionY.linearRampToValueAtTime(If.y,e),t.positionZ.linearRampToValueAtTime(If.z,e),t.orientationX.linearRampToValueAtTime(zf.x,e),t.orientationY.linearRampToValueAtTime(zf.y,e),t.orientationZ.linearRampToValueAtTime(zf.z,e)}else t.setPosition(If.x,If.y,If.z),t.setOrientation(zf.x,zf.y,zf.z)}}),Object.assign(Uf.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(jf.prototype,{accumulate:function(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==i;++e)n[r+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=o},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){a.setValue(n,i);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]},_slerp:function(e,t,n,i){Ro.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){const o=this._workIndex*r;Ro.multiplyQuaternionsFlat(e,o,e,t,e,n),Ro.slerpFlat(e,t,e,t,e,o,i)},_lerp:function(e,t,n,i,r){const o=1-i;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*o+e[n+a]*i}},_lerpAdditive:function(e,t,n,i,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[n+o]*i}}});const Hf=new RegExp("[\\[\\]\\.:\\/]","g"),Gf="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Vf=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Wf=/(WCOD+)?/.source.replace("WCOD",Gf),qf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Jf=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Xf=new RegExp("^"+Vf+Wf+qf+Jf+"$"),Yf=["material","materials","bones"];function Zf(e,t,n){const i=n||Qf.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Qf(e,t,n){this.path=t,this.parsedPath=n||Qf.parseTrackName(t),this.node=Qf.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function $f(){this.uuid=xo.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}function Kf(e,t,n,i){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=i||t.blendMode;const r=t.tracks,o=r.length,a=new Array(o),s={endingStart:Mr,endingEnd:Mr};for(let e=0;e!==o;++e){const t=r[e].createInterpolant(null);a[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=xr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function em(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function tm(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function nm(e,t,n){wu.call(this,e,t),this.meshPerAttribute=n||1}function im(e,t,n,i){this.ray=new La(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Vo,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function rm(e,t){return e.distance-t.distance}function om(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)om(i[e],t,n,!0)}}Object.assign(Zf.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Qf,{Composite:Zf,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Qf.Composite(e,t,n):new Qf(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Hf,"")},parseTrackName:function(e){const t=Xf.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Yf.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(Qf.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Qf.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Qf.prototype,{_getValue_unbound:Qf.prototype.getValue,_setValue_unbound:Qf.prototype.setValue}),Object.assign($f.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let a=void 0,s=e.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)r[e].push(new Qf(u,n[e],i[e]))}else if(d<c){a=e[d];const s=--c,l=e[s];t[l.uuid]=d,e[d]=l,t[h]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=r[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new Qf(u,n[e],i[e])),t[s]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,c=t[s];if(void 0!==c&&c>=r){const o=r++,l=e[o];t[l.uuid]=c,e[c]=l,t[s]=o,e[o]=a;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[c];t[c]=i,t[o]=r}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,c=t[s];if(void 0!==c)if(delete t[s],c<r){const a=--r,s=e[a],l=--o,u=e[l];t[s.uuid]=c,e[c]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[l];t[c]=i,t[a]=r,t.pop()}}else{const r=--o,a=e[r];t[a.uuid]=c,e[c]=a,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[c]=t[r],t.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){let n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,n[e]=i,o.push(e),a.push(t),r.push(u);for(let n=l,i=s.length;n!==i;++n){const i=s[n];u[n]=new Qf(i,e,t)}return u},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(Kf.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,o=n/i;e.warp(1,r,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){const i=this._mixer,r=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,c=a.sampleValues;return s[0]=r,s[1]=r+n,c[0]=e/o,c[1]=t/o,this},stopWarping:function(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case Cr:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);break;case Ar:default:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulate(i,a)}}},_updateWeight:function(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const o=n===br;if(0===e)return-1===r?i:o&&1==(1&r)?t-i:i;if(n===yr){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1==(1&r))return t-i}return i},_setEndings:function(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Tr,i.endingEnd=Tr):(i.endingStart=e?this.zeroSlopeAtStart?Tr:Mr:Er,i.endingEnd=t?this.zeroSlopeAtEnd?Tr:Mr:Er)},_scheduleFading:function(e,t,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=n,this}}),em.prototype=Object.assign(Object.create(go.prototype),{constructor:em,_bindAction:function(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName;let l=c[s];void 0===l&&(l={},c[s]=l);for(let e=0;e!==r;++e){const r=i[e],c=r.name;let u=l[c];if(void 0!==u)o[e]=u;else{if(u=o[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,c));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;u=new jf(Qf.create(n,c,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,c),o[e]=u}a[e].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Qd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const i=t||this._root,r=i.uuid;let o="string"==typeof e?sp.findByName(i,e):e;const a=null!==o?o.uuid:e;let s=this._actionsByClip[a],c=null;if(void 0===n&&(n=null!==o?o.blendMode:Ar),void 0!==s){const e=s.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;c=s.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const l=new Kf(this,o,t,n);return this._bindAction(l,c),this._addInactiveAction(l,a,r),l},existingAction:function(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?sp.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let a=0;a!==n;++a){t[a]._update(i,e,r,o)}const a=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)a[e].apply(o);return this},setTime:function(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,o=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),tm.prototype.clone=function(){return new tm(void 0===this.value.clone?this.value:this.value.clone())},nm.prototype=Object.assign(Object.create(wu.prototype),{constructor:nm,isInstancedInterleavedBuffer:!0,copy:function(e){return wu.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=wu.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=wu.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.assign(im.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const i=n||[];return om(e,this,i,t),i.sort(rm),i},intersectObjects:function(e,t,n){const i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let n=0,r=e.length;n<r;n++)om(e[n],this,i,t);return i.sort(rm),i}});class am{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(xo.clamp(t/this.radius,-1,1))),this}}function sm(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}Object.assign(sm.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});const cm=new bo;function lm(e,t){this.min=void 0!==e?e:new bo(1/0,1/0),this.max=void 0!==t?t:new bo(-1/0,-1/0)}Object.assign(lm.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){const n=cm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new bo),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new bo),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new bo),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new bo),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return cm.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});const um=new Oo,hm=new Oo;function dm(e,t){this.start=void 0!==e?e:new Oo,this.end=void 0!==t?t:new Oo}function pm(e){ra.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Object.assign(dm.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Oo),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Oo),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Oo),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){um.subVectors(e,this.start),hm.subVectors(this.end,this.start);const n=hm.dot(hm);let i=hm.dot(um)/n;return t&&(i=xo.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){const i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Oo),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),pm.prototype=Object.create(ra.prototype),pm.prototype.constructor=pm,pm.prototype.isImmediateRenderObject=!0;const fm=new Oo;function mm(e,t){ra.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new Ms,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const r=e/n*Math.PI*2,o=t/n*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new ps(i,3));const r=new Ku({fog:!1,toneMapped:!1});this.cone=new ch(n,r),this.add(this.cone),this.update()}mm.prototype=Object.create(ra.prototype),mm.prototype.constructor=mm,mm.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},mm.prototype.update=function(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),fm.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(fm),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};const gm=new Oo,vm=new Uo,ym=new Uo;function xm(e){const t=function e(t){const n=[];t&&t.isBone&&n.push(t);for(let i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new Ms,i=[],r=[],o=new Ya(0,0,1),a=new Ya(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new ps(i,3)),n.setAttribute("color",new ps(r,3));const s=new Ku({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});ch.call(this,n,s),this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function bm(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;const i=new wd(t,4,2),r=new ns({wireframe:!0,fog:!1,toneMapped:!1});Hs.call(this,i,r),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}xm.prototype=Object.create(ch.prototype),xm.prototype.constructor=xm,xm.prototype.isSkeletonHelper=!0,xm.prototype.updateMatrixWorld=function(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");ym.getInverse(this.root.matrixWorld);for(let e=0,n=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(vm.multiplyMatrices(ym,r.matrixWorld),gm.setFromMatrixPosition(vm),i.setXYZ(n,gm.x,gm.y,gm.z),vm.multiplyMatrices(ym,r.parent.matrixWorld),gm.setFromMatrixPosition(vm),i.setXYZ(n+1,gm.x,gm.y,gm.z),n+=2)}n.getAttribute("position").needsUpdate=!0,ra.prototype.updateMatrixWorld.call(this,e)},bm.prototype=Object.create(Hs.prototype),bm.prototype.constructor=bm,bm.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},bm.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};const wm=new Oo,_m=new Ya,Sm=new Ya;function Mm(e,t,n){ra.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new Rh(t);i.rotateY(.5*Math.PI),this.material=new ns({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new os(o,3)),this.add(new Hs(i,this.material)),this.update()}function Tm(e,t,n,i){e=e||10,t=t||10,n=new Ya(void 0!==n?n:4473924),i=new Ya(void 0!==i?i:8947848);const r=t/2,o=e/t,a=e/2,s=[],c=[];for(let e=0,l=0,u=-a;e<=t;e++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const t=e===r?n:i;t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3}const l=new Ms;l.setAttribute("position",new ps(s,3)),l.setAttribute("color",new ps(c,3));const u=new Ku({vertexColors:!0,toneMapped:!1});ch.call(this,l,u),this.type="GridHelper"}function Em(e,t,n,i,r,o){e=e||10,t=t||16,n=n||8,i=i||64,r=new Ya(void 0!==r?r:4473924),o=new Ya(void 0!==o?o:8947848);const a=[],s=[];for(let n=0;n<=t;n++){const i=n/t*(2*Math.PI),c=Math.sin(i)*e,l=Math.cos(i)*e;a.push(0,0,0),a.push(c,0,l);const u=1&n?r:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const c=1&t?r:o,l=e-e/n*t;for(let e=0;e<i;e++){let t=e/i*(2*Math.PI),n=Math.sin(t)*l,r=Math.cos(t)*l;a.push(n,0,r),s.push(c.r,c.g,c.b),t=(e+1)/i*(2*Math.PI),n=Math.sin(t)*l,r=Math.cos(t)*l,a.push(n,0,r),s.push(c.r,c.g,c.b)}}const c=new Ms;c.setAttribute("position",new ps(a,3)),c.setAttribute("color",new ps(s,3));const l=new Ku({vertexColors:!0,toneMapped:!1});ch.call(this,c,l),this.type="PolarGridHelper"}Mm.prototype=Object.create(ra.prototype),Mm.prototype.constructor=Mm,Mm.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Mm.prototype.update=function(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");_m.copy(this.light.color),Sm.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?_m:Sm;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(wm.setFromMatrixPosition(this.light.matrixWorld).negate())},Tm.prototype=Object.create(ch.prototype),Tm.prototype.constructor=Tm,Em.prototype=Object.create(ch.prototype),Em.prototype.constructor=Em;const Am=new Oo,Cm=new Oo,Rm=new Oo;function Lm(e,t,n){ra.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let i=new Ms;i.setAttribute("position",new ps([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Ku({fog:!1,toneMapped:!1});this.lightPlane=new oh(i,r),this.add(this.lightPlane),i=new Ms,i.setAttribute("position",new ps([0,0,0,0,0,1],3)),this.targetLine=new oh(i,r),this.add(this.targetLine),this.update()}Lm.prototype=Object.create(ra.prototype),Lm.prototype.constructor=Lm,Lm.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Lm.prototype.update=function(){Am.setFromMatrixPosition(this.light.matrixWorld),Cm.setFromMatrixPosition(this.light.target.matrixWorld),Rm.subVectors(Cm,Am),this.lightPlane.lookAt(Cm),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Cm),this.targetLine.scale.z=Rm.length()};const Pm=new Oo,Om=new nc;function Nm(e){const t=new Ms,n=new Ku({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={},a=new Ya(16755200),s=new Ya(16711680),c=new Ya(43775),l=new Ya(16777215),u=new Ya(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new ps(i,3)),t.setAttribute("color",new ps(r,3)),ch.call(this,t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function km(e,t,n,i,r,o,a){Pm.set(r,o,a).unproject(i);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],Pm.x,Pm.y,Pm.z)}}Nm.prototype=Object.create(ch.prototype),Nm.prototype.constructor=Nm,Nm.prototype.update=function(){const e=this.geometry,t=this.pointMap;Om.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),km("c",t,e,Om,0,0,-1),km("t",t,e,Om,0,0,1),km("n1",t,e,Om,-1,-1,-1),km("n2",t,e,Om,1,-1,-1),km("n3",t,e,Om,-1,1,-1),km("n4",t,e,Om,1,1,-1),km("f1",t,e,Om,-1,-1,1),km("f2",t,e,Om,1,-1,1),km("f3",t,e,Om,-1,1,1),km("f4",t,e,Om,1,1,1),km("u1",t,e,Om,.7,1.1,-1),km("u2",t,e,Om,-.7,1.1,-1),km("u3",t,e,Om,0,2,-1),km("cf1",t,e,Om,-1,0,1),km("cf2",t,e,Om,1,0,1),km("cf3",t,e,Om,0,-1,1),km("cf4",t,e,Om,0,1,1),km("cn1",t,e,Om,-1,0,-1),km("cn2",t,e,Om,1,0,-1),km("cn3",t,e,Om,0,-1,-1),km("cn4",t,e,Om,0,1,-1),e.getAttribute("position").needsUpdate=!0};const Im=new xa;function Dm(e,t){this.object=e,void 0===t&&(t=16776960);const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Ms;r.setIndex(new os(n,1)),r.setAttribute("position",new os(i,3)),ch.call(this,r,new Ku({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Fm(e,t){this.type="Box3Helper",this.box=e,void 0===t&&(t=16776960);const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Ms;i.setIndex(new os(n,1)),i.setAttribute("position",new ps([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ch.call(this,i,new Ku({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function zm(e,t,n){this.plane=e,this.size=void 0===t?1:t;const i=void 0!==n?n:16776960,r=new Ms;r.setAttribute("position",new ps([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),oh.call(this,r,new Ku({color:i,toneMapped:!1})),this.type="PlaneHelper";const o=new Ms;o.setAttribute("position",new ps([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Hs(o,new ns({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}Dm.prototype=Object.create(ch.prototype),Dm.prototype.constructor=Dm,Dm.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Im.setFromObject(this.object),Im.isEmpty())return;const t=Im.min,n=Im.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()},Dm.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Dm.prototype.copy=function(e){return ch.prototype.copy.call(this,e),this.object=e.object,this},Fm.prototype=Object.create(ch.prototype),Fm.prototype.constructor=Fm,Fm.prototype.updateMatrixWorld=function(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),ra.prototype.updateMatrixWorld.call(this,e))},zm.prototype=Object.create(oh.prototype),zm.prototype.constructor=zm,zm.prototype.updateMatrixWorld=function(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Zt:Yt,this.lookAt(this.plane.normal),ra.prototype.updateMatrixWorld.call(this,e)};const Bm=new Oo;let Um,jm;function Hm(e,t,n,i,r,o){ra.call(this),this.type="ArrowHelper",void 0===e&&(e=new Oo(0,0,1)),void 0===t&&(t=new Oo(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===Um&&(Um=new Ms,Um.setAttribute("position",new ps([0,0,0,0,1,0],3)),jm=new Pd(0,.5,1,5,1),jm.translate(0,-.5,0)),this.position.copy(t),this.line=new oh(Um,new Ku({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Hs(jm,new ns({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}function Gm(e){const t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Ms;n.setAttribute("position",new ps(t,3)),n.setAttribute("color",new ps([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));const i=new Ku({vertexColors:!0,toneMapped:!1});ch.call(this,n,i),this.type="AxesHelper"}Hm.prototype=Object.create(ra.prototype),Hm.prototype.constructor=Hm,Hm.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Bm.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Bm,t)}},Hm.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Hm.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Hm.prototype.copy=function(e){return ra.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Gm.prototype=Object.create(ch.prototype),Gm.prototype.constructor=Gm;const Vm=Math.pow(2,8),Wm=[.125,.215,.35,.446,.526,.582],qm=5+Wm.length,Jm={[Or]:0,[Nr]:1,[Ir]:2,[Fr]:3,[zr]:4,[Br]:5,[kr]:6},Xm=new Qp,{_lodPlanes:Ym,_sizeLods:Zm,_sigmas:Qm}=function(){const e=[],t=[],n=[];let i=8;for(let r=0;r<qm;r++){const o=Math.pow(2,i);t.push(o);let a=1/o;r>4?a=Wm[r-8+4-1]:0==r&&(a=0),n.push(a);const s=1/(o-1),c=-s/2,l=1+s/2,u=[c,c,l,c,l,l,c,c,l,l,c,l],h=6,d=6,p=3,f=2,m=1,g=new Float32Array(p*d*h),v=new Float32Array(f*d*h),y=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(i,p*d*e),v.set(u,f*d*e);const r=[e,e,e,e,e,e];y.set(r,m*d*e)}const x=new Ms;x.setAttribute("position",new os(g,p)),x.setAttribute("uv",new os(v,f)),x.setAttribute("faceIndex",new os(y,m)),e.push(x),i>4&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}();let $m=null;const Km=(1+Math.sqrt(5))/2,eg=1/Km,tg=[new Oo(1,1,1),new Oo(-1,1,1),new Oo(1,1,-1),new Oo(-1,1,-1),new Oo(0,Km,eg),new Oo(0,Km,-eg),new Oo(eg,0,Km),new Oo(-eg,0,Km),new Oo(Km,eg,0),new Oo(-Km,eg,0)];function ng(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new Oo(0,1,0);return new zd({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Jm[Or]},outputEncoding:{value:Jm[Or]}},vertexShader:cg(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${lg()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:en,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function ig(e){return void 0!==e&&e.type===ai&&(e.encoding===Or||e.encoding===Nr||e.encoding===kr)}function rg(e){const t=new Ao(3*Vm,3*Vm,e);return t.texture.mapping=Wn,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function og(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function ag(){return new zd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new bo(1,1)},inputEncoding:{value:Jm[Or]},outputEncoding:{value:Jm[Or]}},vertexShader:cg(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${lg()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:en,depthTest:!1,depthWrite:!1})}function sg(){return new zd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Jm[Or]},outputEncoding:{value:Jm[Or]}},vertexShader:cg(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${lg()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:en,depthTest:!1,depthWrite:!1})}function cg(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function lg(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function ug(e,t,n,i,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Ka(e,t,n,r,o,a)}ng.prototype={constructor:ng,fromScene:function(e,t=0,n=.1,i=100){$m=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r},fromEquirectangular:function(e){return this._fromTexture(e)},fromCubemap:function(e){return this._fromTexture(e)},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=sg(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=ag(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Ym.length;e++)Ym[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget($m),e.scissorTest=!1,og(e,0,0,e.width,e.height)},_fromTexture:function(e){$m=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t},_allocateTargets:function(e){const t={magFilter:Zn,minFilter:Zn,generateMipmaps:!1,type:ai,format:Si,encoding:ig(e)?e.encoding:Ir,depthBuffer:!1,stencilBuffer:!1},n=rg(t);return n.depthBuffer=!e,this._pingPongRenderTarget=rg(t),n},_compileMaterial:function(e){const t=new Hs(Ym[0],e);this._renderer.compile(t,Xm)},_sceneToCubeUV:function(e,t,n,i){const r=new ic(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,c=s.outputEncoding,l=s.toneMapping,u=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=kn,s.outputEncoding=Or;let d=e.background;if(d&&d.isColor){d.convertSRGBToLinear();const t=Math.max(d.r,d.g,d.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);d=d.multiplyScalar(Math.pow(2,-n));const i=(n+128)/255;s.setClearColor(d,i),e.background=null}for(let t=0;t<6;t++){const n=t%3;0==n?(r.up.set(0,o[t],0),r.lookAt(a[t],0,0)):1==n?(r.up.set(0,0,o[t]),r.lookAt(0,a[t],0)):(r.up.set(0,o[t],0),r.lookAt(0,0,a[t])),og(i,n*Vm,t>2?Vm:0,Vm,Vm),s.setRenderTarget(i),s.render(e,r)}s.toneMapping=l,s.outputEncoding=c,s.setClearColor(u,h)},_textureToCubeUV:function(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=sg()):null==this._equirectShader&&(this._equirectShader=ag());const i=e.isCubeTexture?this._cubemapShader:this._equirectShader,r=new Hs(Ym[0],i),o=i.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Jm[e.encoding],o.outputEncoding.value=Jm[t.texture.encoding],og(t,0,0,3*Vm,2*Vm),n.setRenderTarget(t),n.render(r,Xm)},_applyPMREM:function(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<qm;t++){const n=Math.sqrt(Qm[t]*Qm[t]-Qm[t-1]*Qm[t-1]),i=tg[(t-1)%tg.length];this._blur(e,t-1,t,n,i)}t.autoClear=n},_blur:function(e,t,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)},_halfBlur:function(e,t,n,i,r,o,a){const s=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new Hs(Ym[i],c),u=c.uniforms,h=Zm[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0==e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=Jm[e.texture.encoding],u.outputEncoding.value=Jm[e.texture.encoding];const v=Zm[i];og(t,3*Math.max(0,Vm-2*v),(0===i?0:2*Vm)+2*v*(i>4?i-8+4:0),3*v,2*v),s.setRenderTarget(t),s.render(l,Xm)}};const hg=0,dg=1,pg=0,fg=1,mg=2;function gg(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function vg(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function yg(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new mh(e,t)}function xg(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new zu(e)}function bg(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new mh(e,t)}function wg(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new uh(e)}function _g(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new uh(e)}function Sg(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new uh(e)}function Mg(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Oo(e,t,n)}function Tg(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new os(e,t).setUsage(so)}function Eg(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new as(e,t)}function Ag(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ss(e,t)}function Cg(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new cs(e,t)}function Rg(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ls(e,t)}function Lg(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new us(e,t)}function Pg(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new hs(e,t)}function Og(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new ds(e,t)}function Ng(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ps(e,t)}function kg(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new fs(e,t)}function Ig(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Rp.call(this,e),this.type="catmullrom",this.closed=!0}function Dg(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Rp.call(this,e),this.type="catmullrom"}function Fg(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Rp.call(this,e),this.type="catmullrom"}function zg(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Gm(e)}function Bg(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Dm(e,t)}function Ug(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ch(new Rd(e.geometry),new Ku({color:void 0!==t?t:16777215}))}function jg(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ch(new wh(e.geometry),new Ku({color:void 0!==t?t:16777215}))}function Hg(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new fp(e)}function Gg(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new vp(e)}function Vg(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new oc(e,n)}wp.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(wp.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(jp.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new Ys;for(let n=0,i=e.length;n<i;n++){const i=e[n];t.vertices.push(new Oo(i.x,i.y,i.z||0))}return t}}),Object.assign(Hp.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Ig.prototype=Object.create(Rp.prototype),Dg.prototype=Object.create(Rp.prototype),Fg.prototype=Object.create(Rp.prototype),Object.assign(Fg.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Tm.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},xm.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(dp.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),af.extractUrlBase(e)}}),dp.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(hf.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(lm.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(xa.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(_a.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),lc.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},dm.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(xo,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),xo.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),xo.ceilPowerOfTwo(e)}}),Object.assign(wo.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Uo.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Oo).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)}}),ka.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Ro.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(La.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Wa.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Wa,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Wa.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Wa.getNormal(e,t,n,i)}}),Object.assign(Gp.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new fd(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ed(this,e)}}),Object.assign(bo.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Oo.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Eo.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ys.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(ra.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(ra.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Hs.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Hs.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Rr},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Hu.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(qu.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Gu.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(wp.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ic.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Vp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(os.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===so},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(so)}}}),Object.assign(os.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?so:ao),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ms.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new os(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Ms.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(sf.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(im.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(wu.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===so},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(wu.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?so:ao),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(md.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(tm.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ts.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ya}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===$t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(jd.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ud.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(tc.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(vu.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(vu.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Nr:Or}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(cu.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ao.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(kf.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new _f).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Uf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},rc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};const Wg={merge:function(e,t,n){let i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function qg(){console.error("THREE.CanvasRenderer has been removed")}function Jg(){console.error("THREE.JSONLoader has been removed.")}So.crossOrigin=void 0,So.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new bp;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},So.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new xp;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},So.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},So.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Xg={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Yg(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zt}}));var Zg=n(38),Qg=n.n(Zg),$g=n(39),Kg=n.n($g),ev=n(7),tv=n.n(ev);function nv(e,t){var n=e.__state.conversionName.toString(),i=Math.round(e.r),r=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),c=e.s.toFixed(1),l=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var u=e.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===n?"rgb("+i+","+r+","+o+")":"CSS_RGBA"===n?"rgba("+i+","+r+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+i+","+r+","+o+"]":"RGBA_ARRAY"===n?"["+i+","+r+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+c+",v:"+l+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+c+",v:"+l+",a:"+a+"}":"unknown format"}var iv=Array.prototype.forEach,rv=Array.prototype.slice,ov={BREAK:{},extend:function(e){return this.each(rv.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(rv.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=rv.call(arguments);return function(){for(var t=rv.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(iv&&e.forEach&&e.forEach===iv)e.forEach(t,n);else if(e.length===e.length+0){var i,r=void 0;for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i=void 0;return function(){var r=this,o=arguments;function a(){i=null,n||e.apply(r,o)}var s=n||!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(r,o)}},toArray:function(e){return e.toArray?e.toArray():rv.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},av=[{litmus:ov.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:nv},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:nv},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:nv},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:nv}}},{litmus:ov.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:ov.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:ov.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(ov.isNumber(e.r)&&ov.isNumber(e.g)&&ov.isNumber(e.b)&&ov.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(ov.isNumber(e.r)&&ov.isNumber(e.g)&&ov.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(ov.isNumber(e.h)&&ov.isNumber(e.s)&&ov.isNumber(e.v)&&ov.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(ov.isNumber(e.h)&&ov.isNumber(e.s)&&ov.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],sv=void 0,cv=void 0,lv=function(){cv=!1;var e=arguments.length>1?ov.toArray(arguments):arguments[0];return ov.each(av,(function(t){if(t.litmus(e))return ov.each(t.conversions,(function(t,n){if(sv=t.read(e),!1===cv&&!1!==sv)return cv=sv,sv.conversionName=n,sv.conversion=t,ov.BREAK})),ov.BREAK})),cv},uv=void 0,hv={hsv_to_rgb:function(e,t,n){var i=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-r*t),s=n*(1-(1-r)*t),c=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][i];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(e,t,n){var i=Math.min(e,t,n),r=Math.max(e,t,n),o=r-i,a=void 0;return 0===r?{h:NaN,s:0,v:0}:(a=e===r?(t-n)/o:t===r?2+(n-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/r,v:r/255})},rgb_to_hex:function(e,t,n){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,t),i=this.hex_with_component(i,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(uv=8*t)|e&~(255<<uv)}},dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},fv=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),mv=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},gv=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},vv=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},yv=function(){function e(){if(pv(this,e),this.__state=lv.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return fv(e,[{key:"toString",value:function(){return nv(this)}},{key:"toHexString",value:function(){return nv(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function xv(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||yv.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(yv.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function bv(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||yv.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(yv.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}yv.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=hv.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");ov.extend(e.__state,hv.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},yv.recalculateHSV=function(e){var t=hv.rgb_to_hsv(e.r,e.g,e.b);ov.extend(e.__state,{s:t.s,v:t.v}),ov.isNaN(t.h)?ov.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},yv.COMPONENTS=["r","g","b","h","s","v","hex","a"],xv(yv.prototype,"r",2),xv(yv.prototype,"g",1),xv(yv.prototype,"b",0),bv(yv.prototype,"h"),bv(yv.prototype,"s"),bv(yv.prototype,"v"),Object.defineProperty(yv.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(yv.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=hv.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var wv=function(){function e(t,n){pv(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return fv(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),_v={};ov.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){ov.each(e,(function(e){_v[e]=t}))}));var Sv=/(\d+(\.\d+)?)px/;function Mv(e){if("0"===e||ov.isUndefined(e))return 0;var t=e.match(Sv);return ov.isNull(t)?0:parseFloat(t[1])}var Tv={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var i=n,r=t;ov.isUndefined(r)&&(r=!0),ov.isUndefined(i)&&(i=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,i){var r=n||{},o=_v[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=r.x||r.clientX||0,c=r.y||r.clientY||0;a.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,s,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=a.initKeyboardEvent||a.initKeyEvent;ov.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:a.initEvent(t,r.bubbles||!1,r.cancelable||!0)}ov.defaults(a,i),e.dispatchEvent(a)},bind:function(e,t,n,i){var r=i||!1;return e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),Tv},unbind:function(e,t,n,i){var r=i||!1;return e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),Tv},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Tv},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),i=n.indexOf(t);-1!==i&&(n.splice(i,1),e.className=n.join(" "))}else e.className=void 0;return Tv},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return Mv(t["border-left-width"])+Mv(t["border-right-width"])+Mv(t["padding-left"])+Mv(t["padding-right"])+Mv(t.width)},getHeight:function(e){var t=getComputedStyle(e);return Mv(t["border-top-width"])+Mv(t["border-bottom-width"])+Mv(t["padding-top"])+Mv(t["padding-bottom"])+Mv(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},Ev=function(e){function t(e,n){pv(this,t);var i=vv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),Tv.bind(i.__checkbox,"change",(function(){r.setValue(!r.__prev)}),!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return gv(t,e),fv(t,[{key:"setValue",value:function(e){var n=mv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),mv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(wv),Av=function(e){function t(e,n,i){pv(this,t);var r=vv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i,a=r;if(r.__select=document.createElement("select"),ov.isArray(o)){var s={};ov.each(o,(function(e){s[e]=e})),o=s}return ov.each(o,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),r.updateDisplay(),Tv.bind(r.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),r.domElement.appendChild(r.__select),r}return gv(t,e),fv(t,[{key:"setValue",value:function(e){var n=mv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return Tv.isActive(this.__select)?this:(this.__select.value=this.getValue(),mv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(wv),Cv=function(e){function t(e,n){pv(this,t);var i=vv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;function o(){r.setValue(r.__input.value)}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),Tv.bind(i.__input,"keyup",o),Tv.bind(i.__input,"change",o),Tv.bind(i.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),Tv.bind(i.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return gv(t,e),fv(t,[{key:"updateDisplay",value:function(){return Tv.isActive(this.__input)||(this.__input.value=this.getValue()),mv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(wv);function Rv(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var Lv=function(e){function t(e,n,i){pv(this,t);var r=vv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i||{};return r.__min=o.min,r.__max=o.max,r.__step=o.step,ov.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=Rv(r.__impliedStep),r}return gv(t,e),fv(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),mv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=Rv(e),this}}]),t}(wv);var Pv=function(e){function t(e,n,i){pv(this,t);var r=vv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));r.__truncationSuspended=!1;var o=r,a=void 0;function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function c(e){var t=a-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),a=e.clientY}function l(){Tv.unbind(window,"mousemove",c),Tv.unbind(window,"mouseup",l),s()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Tv.bind(r.__input,"change",(function(){var e=parseFloat(o.__input.value);ov.isNaN(e)||o.setValue(e)})),Tv.bind(r.__input,"blur",(function(){s()})),Tv.bind(r.__input,"mousedown",(function(e){Tv.bind(window,"mousemove",c),Tv.bind(window,"mouseup",l),a=e.clientY})),Tv.bind(r.__input,"keydown",(function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,s())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return gv(t,e),fv(t,[{key:"updateDisplay",value:function(){var e,n,i;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,i=Math.pow(10,n),Math.round(e*i)/i),mv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Lv);function Ov(e,t,n,i,r){return i+(e-t)/(n-t)*(r-i)}var Nv=function(e){function t(e,n,i,r,o){pv(this,t);var a=vv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:i,max:r,step:o})),s=a;function c(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(Ov(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function l(){Tv.unbind(window,"mousemove",c),Tv.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function u(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(Ov(t,n.left,n.right,s.__min,s.__max))}function h(){Tv.unbind(window,"touchmove",u),Tv.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),Tv.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),Tv.bind(window,"mousemove",c),Tv.bind(window,"mouseup",l),c(e)})),Tv.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;Tv.bind(window,"touchmove",u),Tv.bind(window,"touchend",h),u(e)})),Tv.addClass(a.__background,"slider"),Tv.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return gv(t,e),fv(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",mv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Lv),kv=function(e){function t(e,n,i){pv(this,t);var r=vv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===i?"Fire":i,Tv.bind(r.__button,"click",(function(e){return e.preventDefault(),o.fire(),!1})),Tv.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return gv(t,e),fv(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(wv),Iv=function(e){function t(e,n){pv(this,t);var i=vv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));i.__color=new yv(i.getValue()),i.__temp=new yv(0);var r=i;i.domElement=document.createElement("div"),Tv.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",Tv.bind(i.__input,"keydown",(function(e){13===e.keyCode&&h.call(this)})),Tv.bind(i.__input,"blur",h),Tv.bind(i.__selector,"mousedown",(function(){Tv.addClass(this,"drag").bind(window,"mouseup",(function(){Tv.removeClass(r.__selector,"drag")}))})),Tv.bind(i.__selector,"touchstart",(function(){Tv.addClass(this,"drag").bind(window,"touchend",(function(){Tv.removeClass(r.__selector,"drag")}))}));var o,a=document.createElement("div");function s(e){p(e),Tv.bind(window,"mousemove",p),Tv.bind(window,"touchmove",p),Tv.bind(window,"mouseup",l),Tv.bind(window,"touchend",l)}function c(e){f(e),Tv.bind(window,"mousemove",f),Tv.bind(window,"touchmove",f),Tv.bind(window,"mouseup",u),Tv.bind(window,"touchend",u)}function l(){Tv.unbind(window,"mousemove",p),Tv.unbind(window,"touchmove",p),Tv.unbind(window,"mouseup",l),Tv.unbind(window,"touchend",l),d()}function u(){Tv.unbind(window,"mousemove",f),Tv.unbind(window,"touchmove",f),Tv.unbind(window,"mouseup",u),Tv.unbind(window,"touchend",u),d()}function h(){var e=lv(this.value);!1!==e?(r.__color.__state=e,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function d(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,i=n.clientX,o=n.clientY,a=(i-t.left)/(t.right-t.left),s=1-(o-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),r.__color.v=s,r.__color.s=a,r.setValue(r.__color.toOriginal()),!1}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return ov.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),ov.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),ov.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),ov.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),ov.extend(a.style,{width:"100%",height:"100%",background:"none"}),Fv(a,"top","rgba(0,0,0,0)","#000"),ov.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=i.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",ov.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),Tv.bind(i.__saturation_field,"mousedown",s),Tv.bind(i.__saturation_field,"touchstart",s),Tv.bind(i.__field_knob,"mousedown",s),Tv.bind(i.__field_knob,"touchstart",s),Tv.bind(i.__hue_field,"mousedown",c),Tv.bind(i.__hue_field,"touchstart",c),i.__saturation_field.appendChild(a),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return gv(t,e),fv(t,[{key:"updateDisplay",value:function(){var e=lv(this.getValue());if(!1!==e){var t=!1;ov.each(yv.COMPONENTS,(function(n){if(!ov.isUndefined(e[n])&&!ov.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&ov.extend(this.__color.__state,e)}ov.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,i=255-n;ov.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Fv(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),ov.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}}]),t}(wv),Dv=["-moz-","-o-","-webkit-","-ms-",""];function Fv(e,t,n,i){e.style.background="",ov.each(Dv,(function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+i+" 100%); "}))}var zv=function(e,t){var n=t||document,i=document.createElement("style");i.type="text/css",i.innerHTML=e;var r=n.getElementsByTagName("head")[0];try{r.appendChild(i)}catch(e){}},Bv='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',Uv=function(e,t){var n=e[t];return ov.isArray(arguments[2])||ov.isObject(arguments[2])?new Av(e,t,arguments[2]):ov.isNumber(n)?ov.isNumber(arguments[2])&&ov.isNumber(arguments[3])?ov.isNumber(arguments[4])?new Nv(e,t,arguments[2],arguments[3],arguments[4]):new Nv(e,t,arguments[2],arguments[3]):ov.isNumber(arguments[4])?new Pv(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Pv(e,t,{min:arguments[2],max:arguments[3]}):ov.isString(n)?new Cv(e,t):ov.isFunction(n)?new kv(e,t,""):ov.isBoolean(n)?new Ev(e,t):null};var jv=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},Hv=function(){function e(){pv(this,e),this.backgroundElement=document.createElement("div"),ov.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Tv.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),ov.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;Tv.bind(this.backgroundElement,"click",(function(){t.hide()}))}return fv(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),ov.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",Tv.unbind(e.domElement,"webkitTransitionEnd",t),Tv.unbind(e.domElement,"transitionend",t),Tv.unbind(e.domElement,"oTransitionEnd",t)};Tv.bind(this.domElement,"webkitTransitionEnd",t),Tv.bind(this.domElement,"transitionend",t),Tv.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Tv.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Tv.getHeight(this.domElement)/2+"px"}}]),e}();zv(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var Gv=function(){try{return!!window.localStorage}catch(e){return!1}}(),Vv=void 0,Wv=!0,qv=void 0,Jv=!1,Xv=[],Yv=function e(t){var n=this,i=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Tv.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=ov.defaults(i,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),i=ov.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),ov.isUndefined(i.load)?i.load={preset:"Default"}:i.preset&&(i.load.preset=i.preset),ov.isUndefined(i.parent)&&i.hideable&&Xv.push(this),i.resizable=ov.isUndefined(i.parent)&&i.resizable,i.autoPlace&&ov.isUndefined(i.scrollable)&&(i.scrollable=!0);var r,o=Gv&&"true"===localStorage.getItem(ty(this,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:i.load.preset},set:function(e){n.parent?n.getRoot().preset=e:i.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return i.width},set:function(e){i.width=e,ay(n,e)}},name:{get:function(){return i.name},set:function(e){i.name=e,s&&(s.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(t){i.closed=t,i.closed?Tv.addClass(n.__ul,e.CLASS_CLOSED):Tv.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return o},set:function(e){Gv&&(o=e,e?Tv.bind(window,"unload",a):Tv.unbind(window,"unload",a),localStorage.setItem(ty(n,"isLocal"),e))}}}),ov.isUndefined(i.parent)){if(this.closed=i.closed||!1,Tv.addClass(this.domElement,e.CLASS_MAIN),Tv.makeSelectable(this.domElement,!1),Gv&&o){n.useLocalStorage=!0;var c=localStorage.getItem(ty(this,"gui"));c&&(i.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,Tv.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),i.closeOnTop?(Tv.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Tv.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Tv.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===i.closed&&(i.closed=!0);var l=document.createTextNode(i.name);Tv.addClass(l,"controller-name"),s=Zv(n,l);Tv.addClass(this.__ul,e.CLASS_CLOSED),Tv.addClass(s,"title"),Tv.bind(s,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),i.closed||(this.closed=!1)}i.autoPlace&&(ov.isUndefined(i.parent)&&(Wv&&(qv=document.createElement("div"),Tv.addClass(qv,"dg"),Tv.addClass(qv,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(qv),Wv=!1),qv.appendChild(this.domElement),Tv.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||ay(n,i.width)),this.__resizeHandler=function(){n.onResizeDebounced()},Tv.bind(window,"resize",this.__resizeHandler),Tv.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Tv.bind(this.__ul,"transitionend",this.__resizeHandler),Tv.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&oy(this),a=function(){Gv&&"true"===localStorage.getItem(ty(n,"isLocal"))&&localStorage.setItem(ty(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,i.parent||((r=n.getRoot()).width+=1,ov.defer((function(){r.width-=1})))};function Zv(e,t,n){var i=document.createElement("li");return t&&i.appendChild(t),n?e.__ul.insertBefore(i,n):e.__ul.appendChild(i),e.onResize(),i}function Qv(e){Tv.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&Tv.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function $v(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function Kv(e,t){var n=e.getRoot(),i=n.__rememberedObjects.indexOf(t.object);if(-1!==i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o.Default)return;a=o.Default}if(a[i]&&void 0!==a[i][t.property]){var s=a[i][t.property];t.initialValue=s,t.setValue(s)}}}}function ey(e,t,n,i){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var r=void 0;if(i.color)r=new Iv(t,n);else{var o=[t,n].concat(i.factoryArgs);r=Uv.apply(e,o)}i.before instanceof wv&&(i.before=i.before.__li),Kv(e,r),Tv.addClass(r.domElement,"c");var a=document.createElement("span");Tv.addClass(a,"property-name"),a.innerHTML=r.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(r.domElement);var c=Zv(e,s,i.before);return Tv.addClass(c,Yv.CLASS_CONTROLLER_ROW),r instanceof Iv?Tv.addClass(c,"color"):Tv.addClass(c,dv(r.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,ov.extend(n,{options:function(t){if(arguments.length>1){var i=n.__li.nextElementSibling;return n.remove(),ey(e,n.object,n.property,{before:i,factoryArgs:[ov.toArray(arguments)]})}if(ov.isArray(t)||ov.isObject(t)){var r=n.__li.nextElementSibling;return n.remove(),ey(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Nv){var i=new Pv(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});ov.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],r=i[e];n[e]=i[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(i,e),t.apply(n,e)}})),Tv.addClass(t,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof Pv){var r=function(t){if(ov.isNumber(n.__min)&&ov.isNumber(n.__max)){var i=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=ey(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(i),r&&o.listen(),o}return t};n.min=ov.compose(r,n.min),n.max=ov.compose(r,n.max)}else n instanceof Ev?(Tv.bind(t,"click",(function(){Tv.fakeEvent(n.__checkbox,"click")})),Tv.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof kv?(Tv.bind(t,"click",(function(){Tv.fakeEvent(n.__button,"click")})),Tv.bind(t,"mouseover",(function(){Tv.addClass(n.__button,"hover")})),Tv.bind(t,"mouseout",(function(){Tv.removeClass(n.__button,"hover")}))):n instanceof Iv&&(Tv.addClass(t,"color"),n.updateDisplay=ov.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=ov.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&$v(e.getRoot(),!0),t}),n.setValue)}(e,c,r),e.__controllers.push(r),r}function ty(e,t){return document.location.href+"."+t}function ny(e,t,n){var i=document.createElement("option");i.innerHTML=t,i.value=t,e.__preset_select.appendChild(i),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function iy(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ry(e){var t=e.__save_row=document.createElement("li");Tv.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),Tv.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",Tv.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",Tv.addClass(i,"button"),Tv.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",Tv.addClass(r,"button"),Tv.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",Tv.addClass(o,"button"),Tv.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?ov.each(e.load.remembered,(function(t,n){ny(e,n,n===e.preset)})):ny(e,"Default",!1),Tv.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(o),Gv){var s=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ty(0,"isLocal"))&&c.setAttribute("checked","checked"),iy(e,s),Tv.bind(c,"change",(function(){e.useLocalStorage=!e.useLocalStorage,iy(e,s)}))}var l=document.getElementById("dg-new-constructor");Tv.bind(l,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||Vv.hide()})),Tv.bind(n,"click",(function(){l.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Vv.show(),l.focus(),l.select()})),Tv.bind(i,"click",(function(){e.save()})),Tv.bind(r,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),Tv.bind(o,"click",(function(){e.revert()}))}function oy(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function i(){Tv.removeClass(e.__closeButton,Yv.CLASS_DRAG),Tv.unbind(window,"mousemove",n),Tv.unbind(window,"mouseup",i)}function r(r){return r.preventDefault(),t=r.clientX,Tv.addClass(e.__closeButton,Yv.CLASS_DRAG),Tv.bind(window,"mousemove",n),Tv.bind(window,"mouseup",i),!1}e.__resize_handle=document.createElement("div"),ov.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Tv.bind(e.__resize_handle,"mousedown",r),Tv.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function ay(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function sy(e,t){var n={};return ov.each(e.__rememberedObjects,(function(i,r){var o={},a=e.__rememberedObjectIndecesToControllers[r];ov.each(a,(function(e,n){o[n]=t?e.initialValue:e.getValue()})),n[r]=o})),n}Yv.toggleHide=function(){Jv=!Jv,ov.each(Xv,(function(e){e.domElement.style.display=Jv?"none":""}))},Yv.CLASS_AUTO_PLACE="a",Yv.CLASS_AUTO_PLACE_CONTAINER="ac",Yv.CLASS_MAIN="main",Yv.CLASS_CONTROLLER_ROW="cr",Yv.CLASS_TOO_TALL="taller-than-window",Yv.CLASS_CLOSED="closed",Yv.CLASS_CLOSE_BUTTON="close-button",Yv.CLASS_CLOSE_TOP="close-top",Yv.CLASS_CLOSE_BOTTOM="close-bottom",Yv.CLASS_DRAG="drag",Yv.DEFAULT_WIDTH=245,Yv.TEXT_CLOSED="Close Controls",Yv.TEXT_OPEN="Open Controls",Yv._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||Yv.toggleHide()},Tv.bind(window,"keydown",Yv._keydownHandler,!1),ov.extend(Yv.prototype,{add:function(e,t){return ey(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return ey(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;ov.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&qv.removeChild(this.domElement);var e=this;ov.each(this.__folders,(function(t){e.removeFolder(t)})),Tv.unbind(window,"keydown",Yv._keydownHandler,!1),Qv(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new Yv(t);this.__folders[e]=n;var i=Zv(this,n.domElement);return Tv.addClass(i,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],Qv(e);var t=this;ov.each(e.__folders,(function(t){e.removeFolder(t)})),ov.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Tv.getOffset(e.__ul).top,n=0;ov.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=Tv.getHeight(t))})),window.innerHeight-t-20<n?(Tv.addClass(e.domElement,Yv.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(Tv.removeClass(e.domElement,Yv.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&ov.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:ov.debounce((function(){this.onResize()}),50),remember:function(){if(ov.isUndefined(Vv)&&((Vv=new Hv).domElement.innerHTML=Bv),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;ov.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&ry(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&ay(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=sy(this)),e.folders={},ov.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=sy(this),$v(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=sy(this,!0)),this.load.remembered[e]=sy(this),this.preset=e,ny(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){ov.each(this.__controllers,(function(t){this.getRoot().load.remembered?Kv(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),ov.each(this.__folders,(function(e){e.revert(e)})),e||$v(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&jv.call(window,(function(){e(t)}));ov.each(t,(function(e){e.updateDisplay()}))}(this.__listening)},updateDisplay:function(){ov.each(this.__controllers,(function(e){e.updateDisplay()})),ov.each(this.__folders,(function(e){e.updateDisplay()}))}});var cy,ly,uy,hy={color:{Color:yv,math:hv,interpret:lv},controllers:{Controller:wv,BooleanController:Ev,OptionController:Av,StringController:Cv,NumberController:Lv,NumberControllerBox:Pv,NumberControllerSlider:Nv,FunctionController:kv,ColorController:Iv},dom:{dom:Tv},gui:{GUI:Yv},GUI:Yv},dy=n(40),py=n.n(dy),fy=n(41),my=n.n(fy),gy=function(){function e(t){var n=t.audioElement,i=t.audioSrc,r=t.fftSize,o=void 0===r?64:r,a=t.dataLength,s=void 0===a?110:a;l()(this,e),this.fftSize=o,this.audioElement=n,this.configElement(i),this.context=new AudioContext,this.offlineContext=new OfflineAudioContext(2,1764e3,44100),this.source=this.context.createMediaElementSource(this.audioElement),this.analyser=this.context.createAnalyser(),this.source.connect(this.analyser),this.source.connect(this.context.destination),this.frequencyData=new Uint8Array(s),this.play()}return h()(e,[{key:"minDecibels",get:function(){return this.analyser.minDecibels},set:function(e){this.analyser.minDecibels=e}},{key:"maxDecibels",get:function(){return this.analyser.maxDecibels},set:function(e){this.analyser.maxDecibels=e}},{key:"close",value:function(){this.context&&this.context.close()}},{key:"setSmoothingTimeConstant",value:function(e){this.analyser.smoothingTimeConstant=e}},{key:"configElement",value:function(e){var t=this.audioElement;t.crossOrigin="anonymous",t.type="audio/mp3",t.src=e}},{key:"play",value:function(){this.audioElement.play()}},{key:"pause",value:function(){this.audioElement.pause()}},{key:"stop",value:function(){this.pause(),this.audioElement.currentTime=0}},{key:"volume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.audioElement.volume=e}},{key:"getByteFrequencyData",value:function(){this.analyser.getByteFrequencyData(this.frequencyData)}},{key:"getAverageFrequency",value:function(){return this.frequencyData.reduce((function(e,t){return e+=t}),0)/(this.frequencyData.length-1)}},{key:"createGain",value:function(){return this.context.createGain()}},{key:"createBiquadFilter",value:function(){return this.context.createBiquadFilter()}}]),e}(),vy={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function yy(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(yy.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),yy.FullScreenQuad=(cy=new Qp(-1,1,1,-1,0,1),ly=new fc(2,2),uy=function(e){this._mesh=new Hs(ly,e)},Object.defineProperty(uy.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(uy.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,cy)}}),uy);var xy=function(e,t){yy.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof tc?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=ec.clone(e.uniforms),this.material=new tc({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new yy.FullScreenQuad(this.material)};xy.prototype=Object.assign(Object.create(yy.prototype),{constructor:xy,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var by=function(e,t){yy.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};by.prototype=Object.assign(Object.create(yy.prototype),{constructor:by,render:function(e,t,n){var i,r,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(i=0,r=1):(i=1,r=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,i,4294967295),a.buffers.stencil.setClear(r),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var wy=function(){yy.call(this),this.needsSwap=!1};wy.prototype=Object.create(yy.prototype),Object.assign(wy.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var _y=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:ti,magFilter:ti,format:bi,stencilBuffer:!1},i=e.getSize(new bo);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new Ao(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===vy&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===xy&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new xy(vy),this.clock=new Cf};Object.assign(_y.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,i=this.renderer.getRenderTarget(),r=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==by&&(t instanceof by?r=!0:t instanceof wy&&(r=!1))}this.renderer.setRenderTarget(i)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new bo);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var Sy=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(Sy.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),Sy.FullScreenQuad=function(){var e=new Qp(-1,1,1,-1,0,1),t=new fc(2,2),n=function(e){this._mesh=new Hs(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}();var My=function(e,t,n,i,r){yy.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};My.prototype=Object.assign(Object.create(yy.prototype),{constructor:My,render:function(e,t,n){var i,r,o,a=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(i=e.getClearColor().getHex(),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(i,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=a}});var Ty=function(){function e(t){l()(this,e),this.context=t,this.composer=new _y(t.renderer),this.addPass(new My(t.scene,t.camera))}return h()(e,[{key:"resize",value:function(e,t){this.composer.setSize(e,t)}},{key:"addPass",value:function(e){this.composer.addPass(e)}},{key:"render",value:function(){this.composer.render()}}]),e}();function Ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ey(Object(n),!0).forEach((function(t){be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ey(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Ry=my()(i),Ly=function(e){p()(n,e);var t=Cy(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};l()(this,n),r=t.call(this);var a=Ay({cameraNear:.1,cameraFar:1e3},o);r.isInitiated=!1,r.frag="",r.vert="",r.audioElement=i,r.audioSrc="",r.audio=null,r.startTime=Date.now(),r.canvas=e,r.mouse={},r.gui={},r.stats={},r.scene={},r.camera={},r.scene=new oa,a.fog&&(r.scene.fog=a.fog);var s=window.innerWidth/window.innerHeight;r.camera=new ic(75,s,a.cameraNear,a.cameraFar),r.camera.position.set(0,1,-3),r.camera.lookAt(new Oo),r.renderer=new vu({canvas:r.canvas,antialias:!0,alpha:!1,stencil:!1}),r.renderer.outputEncoding=Nr,r.renderer.setSize(window.innerWidth,window.innerHeight),r.renderer.setClearColor(16768477);var c=Math.min(1.5,window.devicePixelRatio);return r.renderer.setPixelRatio(c),window.scene=r.scene,r.controls=new Ry(r.camera,r.renderer.domElement),r.pp=new Ty(tv()(r)),r}return h()(n,[{key:"clear",value:function(){}},{key:"triggerUnmount",value:function(){this.isInitiated&&this.unmount()}},{key:"init",value:function(){}},{key:"draw",value:function(){}},{key:"render",value:function(){this.init(),this.draw(),this.isInitiated=!0}},{key:"clearScene",value:function(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0])}},{key:"initAudio",value:function(e){var t=Ay({audioElement:this.audioElement,audioSrc:this.audioSrc,camera:this.camera},e);this.audio=new gy(t)}},{key:"createDatGUI",value:function(){this.gui=new hy.GUI}},{key:"createStats",value:function(){this.stats=new py.a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)}},{key:"createMouseListener",value:function(){var e=this;this.mouse=new bo,this.canvas.addEventListener("mousemove",(function(t){e.mouse.x=t.clientX/e.canvas.width*2-1,e.mouse.y=-t.clientY/e.canvas.height*2+1}))}},{key:"resize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.pp.resize(e,t),this.customResize(e,t)}},{key:"customResize",value:function(e,t){}},{key:"setCameraPos",value:function(e,t,n){this.camera.position.set(e,t,n)}},{key:"lookAt",value:function(e,t,n){this.camera.lookAt(e,t,n)}},{key:"setClearColor",value:function(e){this.renderer.setClearColor(e)}},{key:"disableOrbitControls",value:function(){this.controls.enabled=!1}},{key:"getUTime",value:function(){return(Date.now()-this.startTime)/1e3}}]),n}(go),Py={clamp:function(e,t,n){return Math.min(Math.max(n,e),t)},remap:function(e,t,n,i,r){return n+(i-n)*(r-e)/(t-e)},remapFreq:function(e,t,n){return Py.remap(0,255,e,t,n)},toRadians:function(e){return e*Math.PI/180},calcCircumference:function(e){return 2*Math.PI*e},getCenter:function(e){return(new xa).setFromObject(e).getCenter()},randomFloatBetween:function(e,t){return Math.random()*(t-e)+e},randomIntBetween:function(e,t){return Math.round(Py.randomFloatBetween(e,t))},randomBool:function(){return Math.random()>=.5},weightedRandomBool:function(e){return Math.random()<=e},randomSign:function(){return Math.random()>=.5?1:-1},lerp:function(e,t,n){return e*(1-n)+t*n},shaderParse:function(e){return e.replace(/\/\/\s?chunk\(\s?(\w+)\s?\);/g,(function(e,t){return mc[t]+"\n"}))}},Oy=Py;function Ny(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var ky=function(e){p()(n,e);var t=Ny(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).geometry={},i.material={},i.spotLight={},i.ambientLight={},i.isMouseDown=!1,i.displacement=0,i.displacementInc=.02,i}return h()(n,[{key:"unmount",value:function(){this.geometry.dispose(),this.material.dispose(),this.clearScene()}},{key:"init",value:function(){var e=this;this.disableOrbitControls(),this.setClearColor(15854571),this.setCameraPos(0,2,-6),this.createCenterPiece(),this.createMouseListener(),this.canvas.addEventListener("mousedown",(function(t){e.isMouseDown=!0})),this.canvas.addEventListener("mouseup",(function(t){e.isMouseDown=!1})),this.canvas.addEventListener("touchstart",(function(t){e.isMouseDown=!0})),this.canvas.addEventListener("touchend",(function(t){e.isMouseDown=!1}))}},{key:"createCenterPiece",value:function(){this.geometry=new Lh(1,2),this.geometry.computeFlatVertexNormals(),this.material=new zd({vertexShader:Qg.a,fragmentShader:Kg.a,uniforms:{u_displacement:{type:"f",value:0},u_should_explode:{type:"bool",value:!0}}});var e=new Hs(this.geometry,this.material);this.scene.add(e)}},{key:"createSpehereGeometry",value:function(){for(var e=0,t=0,n=Oy.toRadians(1.8),i=new Ms,r=[],o=0;o<200;o++)r.push(5*Math.cos(e)*Math.sin(t),5*Math.sin(e)*Math.sin(t),5*Math.cos(t)),e+=n,t+=n;var a=new os(new Float32Array(r),3);return i.addAttribute("position",a),i}},{key:"draw",value:function(){var e=this;this.isMouseDown?this.displacement=Math.min(1,this.displacement+this.displacementInc):this.displacement=Math.max(0,this.displacement-this.displacementInc),this.material.uniforms.u_displacement.value=this.displacement,this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);n(121),n(122);function Iy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Dy={cameraNear:.01,cameraFar:200},Fy=function(e){p()(n,e);var t=Iy(n);function n(e){var i;return l()(this,n),(i=t.call(this,e,null,Dy)).curve={},i.spline={},i.tunnel={},i.tube={},i.texture={},i.tubeGeometry={},i.tubeMaterial={},i.tubeSpeed=.02,i}return h()(n,[{key:"unmount",value:function(){this.texture.dispose(),this.tube.geometry.dispose(),this.tube.material.dispose(),this.clearScene()}},{key:"init",value:function(){this.setCameraPos(0,0,1.3),this.setClearColor(15854571),this.createLight(),this.createFog(),this.createCurve(),this.createSpline(),this.createTube(),this.disableOrbitControls()}},{key:"createLight",value:function(){var e=new Wp(16777147,8943993,.9);this.scene.add(e);var t=new Kp(16777215,.8);this.scene.add(t)}},{key:"createFog",value:function(){this.scene.fog=new bu(2236962,.6,2.8)}},{key:"createTube",value:function(){this.tubeGeometry=this.createTubeGeometry(),this.tubeMaterial=this.createTubeMaterial(),this.wrapTubeMaterialMap(),this.tube=new Hs(this.tubeGeometry,this.tubeMaterial),this.scene.add(this.tube)}},{key:"createCurve",value:function(){for(var e=[],t=0;t<5;t+=1)e.push(new Oo(0,0,t/4*2.5));e[4].y=-.06,this.curve=new Rp(e)}},{key:"createSpline",value:function(){var e=new Ku,t=new Ys;t.vertices=this.curve.getPoints(70),this.spline=new oh(t,e)}},{key:"createTubeGeometry",value:function(){return new kh(this.curve,70,.02,50,!1)}},{key:"createTubeMaterial",value:function(){return this.texture=(new bp).load(Ce.T007),new ns({side:Zt,map:this.texture})}},{key:"wrapTubeMaterialMap",value:function(){this.tubeMaterial.map.wrapS=Jn,this.tubeMaterial.map.wrapT=Jn,this.tubeMaterial.map.repeat.set(20,1)}},{key:"updateMaterialOffset",value:function(){this.tubeMaterial.map.offset.x+=this.tubeSpeed}},{key:"draw",value:function(){var e=this;this.updateMaterialOffset(),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var zy=n(42),By=n.n(zy),Uy=n(43),jy=n.n(Uy),Hy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;l()(this,e),this.geometry=new Zs(2.5,3.5,2.5),this.material=new zd({vertexShader:By.a,fragmentShader:jy.a,uniforms:{uTime:{type:"f",value:i},uFreq:{type:"f",value:n}}}),this.mesh=new Hs(this.geometry,this.material);var r=t.x,o=t.y,a=t.z;this.mesh.position.set(r,o,a)}return h()(e,[{key:"update",value:function(e,t){this.material.uniforms.uFreq.value=e,this.material.uniforms.uTime.value=t}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updatePos",value:function(){}},{key:"updateUniforms",value:function(){}}]),e}();function Gy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Vy=function(e){p()(n,e);var t=Gy(n);function n(e,i){var r;return l()(this,n),(r=t.call(this,e,i)).audioSrc=Me.S008,r.graph=new pu,r.fftSize=512,r.layer0={nodes:[],group:new pu},r.layer1={nodes:[],group:new pu},r.layer2={nodes:[],group:new pu},r.clock=new Cf,r}return h()(n,[{key:"unmount",value:function(){this.audio.close(),this.layer0.nodes.forEach((function(e){return e.dispose()})),this.layer1.nodes.forEach((function(e){return e.dispose()})),this.layer2.nodes.forEach((function(e){return e.dispose()})),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setClearColor(15854571),this.setCameraPos(-20,50,10);var e={fftSize:this.fftSize};this.initAudio(e),this.initNodes()}},{key:"initNodes",value:function(){for(var e,t=this.audio.frequencyData.length,n=Math.floor(Math.sqrt(t)),i=-70,r=0;r<t;r++)r%n==0&&(e=0,i+=5),this.createNode({x:e,y:0,z:i},this.layer0),this.createNode({x:e,y:8,z:i},this.layer1),this.createNode({x:e,y:16,z:i},this.layer2),e+=5;var o=new pu;o.add(this.layer0.group),o.add(this.layer1.group),o.add(this.layer2.group),this.lookAt(Oy.getCenter(o)),this.scene.add(o)}},{key:"createNode",value:function(e,t){var n=new Hy(e);t.group.add(n.mesh),t.nodes.push(n)}},{key:"updateNodes",value:function(){var e=this,t=this.clock.getElapsedTime();this.audio.frequencyData.forEach((function(n,i){e.layer0.nodes[i].update(n,t),e.layer1.nodes[i].update(n,t),e.layer2.nodes[i].update(n,t)}))}},{key:"draw",value:function(){var e=this;this.audio.getByteFrequencyData(),this.updateNodes(),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);function Wy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var qy=[4521898,10140831,14516224],Jy=function(e){p()(n,e);var t=Wy(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).curve={},i.line={},i.tube={},i.dirLightPositive={},i.dirLightNegative={},i.lightRight={},i.lightLeft={},i.cameraPosOnCurve=0,i.cameraIncrement=.001,i}return h()(n,[{key:"unmount",value:function(){this.tube.geometry.dispose(),this.tube.material.dispose(),this.clearScene()}},{key:"init",value:function(){this.setClearColor(13422540),this.setCameraPos(0,50,-100),this.createLights(),this.scene.fog=new xu(13627375,.05),this.curve=new Rp(this.getInitialCurvePoints()),this.createTunnel()}},{key:"createLights",value:function(){this.dirLightPositive=new Kp(qy[0],.5),this.scene.add(this.dirLightPositive),this.dirLightNegative=new Kp(qy[0],.5),this.scene.add(this.dirLightNegative),this.lightRight=new Zp(qy[1],2,15),this.scene.add(this.lightRight),this.lightLeft=new Zp(qy[2],3,15),this.scene.add(this.lightLeft)}},{key:"getInitialCurvePoints",value:function(){return[new Oo(0,0,0),new Oo(-60,0,-22),new Oo(-80,0,10),new Oo(-30,30,60),new Oo(15,0,70),new Oo(35,0,60),new Oo(50,0,22),new Oo(0,0,0)]}},{key:"createLine",value:function(){var e=this.curve.getPoints(50),t=(new Ms).setFromPoints(e),n=new Ku({color:16711680});this.line=new oh(t,n),this.scene.add(this.line)}},{key:"createTunnel",value:function(){var e=new kh(this.curve,70,5,10,!0),t=(new bp).load(Ce.T009);t.wrapT=Jn,t.wrapS=Jn;var n=new Vd({color:16777215,opacity:1,map:t,side:Zt});this.tube=new Hs(e,n),this.scene.add(this.tube)}},{key:"moveCamera",value:function(){this.cameraPosOnCurve+=this.cameraIncrement;var e=this.getPoint(this.cameraPosOnCurve),t=e.x,n=e.y,i=e.z;this.setCameraPos(t,n,i);var r=this.getPoint(this.cameraPosOnCurve+this.cameraIncrement);this.camera.lookAt(r);var o=r.x,a=r.y,s=r.z;this.dirLightNegative.position.set(o,a-1,s-1),this.dirLightPositive.position.set(o,a+1,s+1),this.lightLeft.position.set(o+2,a-3,s+2),this.lightRight.position.set(o-2,a-3,s-2)}},{key:"getPoint",value:function(e){return this.curve.getPointAt((e%1).toFixed(5))}},{key:"draw",value:function(){var e=this;this.renderer.render(this.scene,this.camera),this.moveCamera(),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var Xy=function(){function e(t){var n=this;l()(this,e),this.onMouseMove=function(e){n.mouse.x=e.clientX/n.context.canvas.width*2-1,n.mouse.y=-e.clientY/n.context.canvas.height*2+1},this.context=t,this.intersection=void 0,this.mouse=new bo,this.raycaster=new im,this.context.canvas.addEventListener("mousemove",this.onMouseMove,!1)}return h()(e,[{key:"dispose",value:function(){this.context.canvas.removeEventListener("mousemove",this.onMouseMove,!1)}},{key:"update",value:function(){this.raycaster.setFromCamera(this.mouse,this.context.camera);var e=this.raycaster.intersectObjects(this.context.lines.children);this.intersection=e[0]}}]),e}(),Yy=[[.96,.72,.84],[.96,.83,.68],[.93,.92,.61],[.79,.95,.67],[.36,.91,.95],[.6,.73,.96],[.8,.73,1]],Zy=n(13),Qy=n.n(Zy),$y=n(44),Ky=n.n($y),ex=n(45),tx=n.n(ex),nx=function(){function e(t){var n=t.width,i=t.height,r=t.color,o=t.isInteractable;l()(this,e),this.isInteractable=o,this.isActive=!1,this.noise=new Oo(0,0,0),this.maxNoise=new Oo(Oy.randomFloatBetween(1.5,2),Oy.randomFloatBetween(1,2),Oy.randomFloatBetween(8,10)),this.noiseIncrement=new Oo(Oy.randomFloatBetween(.05,.1),Oy.randomFloatBetween(.05,.1),Oy.randomFloatBetween(.5,1)),this.noiseDecrement=new Oo(.1*this.noiseIncrement.x,.1*this.noiseIncrement.y,.1*this.noiseIncrement.z),this.amp=0,this.maxAmp=Oy.randomFloatBetween(1.7,2),this.ampIncrement=Oy.randomFloatBetween(.01,.05),this.ampDecrement=.6*this.ampIncrement,this.time=0,this.timeIncrement=1/16;this.geometry=new pc(n,i,1.2*n,1.2*i),this.material=new zd({fragmentShader:tx.a,vertexShader:Ky.a,uniforms:{uNoise:{value:this.noise},uTime:{value:0},uAmp:{value:this.amp},uColor:{value:r}},side:Qt,flatShading:!0}),this.pivot=new Hs(this.geometry,this.material),this.pivot.rotation.x+=Math.PI/2}return h()(e,[{key:"uuid",get:function(){return this.pivot.uuid}},{key:"position",get:function(){return this.pivot.position}},{key:"rotation",get:function(){return this.pivot.rotation}},{key:"uniforms",get:function(){return this.material.uniforms}},{key:"setActive",value:function(e){this.isActive=e}},{key:"updateMatrix",value:function(){this.pivot.updateWorldMatrix()}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.isInteractable&&(this.isActive?(this.noise.set(Math.min(this.maxNoise.x,this.noise.x+this.noiseIncrement.x),Math.min(this.maxNoise.y,this.noise.y+this.noiseIncrement.y),Math.min(this.maxNoise.z,this.noise.z+this.noiseIncrement.z)),this.amp=Math.min(this.maxAmp,this.amp+this.ampIncrement),this.time+=this.timeIncrement):(this.noise.set(Math.max(0,this.noise.x-this.noiseDecrement.x),Math.max(0,this.noise.y-this.noiseDecrement.y),Math.max(0,this.noise.z-this.noiseDecrement.z)),this.amp=Math.max(0,this.amp-this.ampDecrement),this.time=Math.max(0,this.time-this.timeIncrement)),this.uniforms.uTime.value=this.time,this.uniforms.uNoise.value=this.noise,this.uniforms.uAmp.value=this.amp)}}]),e}(),ix=function(){function e(){l()(this,e),this.numRepititions=6,this.lineWidth=50,this.lineHeight=4,this.padding=.15,this.lines=[],this.linesMap={},this.pivot=new pu,this.createLines(),this.createInActiveLines()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"children",get:function(){return this.pivot.children}},{key:"dispose",value:function(){this.lines.forEach((function(e){return e.dispose()}))}},{key:"createLines",value:function(){for(var e=this,t=this.lineHeight+this.padding,n=-Math.floor((Yy.length-1)/2)*t*this.numRepititions,i=0;i<this.numRepititions;i++)Yy.forEach((function(i){var r=new nx({width:e.lineWidth,height:e.lineHeight,color:i,isInteractable:!0});r.position.z=n,e.lines.push(r),e.pivot.add(r.pivot),e.linesMap[r.uuid]=r,n+=t}))}},{key:"createInActiveLines",value:function(){for(var e=this,t=this.lineHeight+this.padding,n=-Math.floor((Yy.length-1)/2)*t*this.numRepititions,i=0;i<this.numRepititions;i++)Yy.forEach((function(i){var r=new nx({width:e.lineWidth,height:e.lineHeight,color:i,isInteractable:!1});r.rotation.y+=Math.PI/2,r.position.set(-e.lineWidth/2,e.lineWidth/2,n),e.lines.push(r),e.pivot.add(r.pivot),e.linesMap[r.uuid]=r,n+=t}))}},{key:"setActive",value:function(e){this.lines.forEach((function(t){t.uuid===e?t.setActive(!0):t.setActive(!1)}))}},{key:"update",value:function(){this.lines.forEach((function(e){return e.update()}))}}]),e}();function rx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var ox=function(e){p()(n,e);var t=rx(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).lines=new ix,i.mouse=new Xy(tv()(i)),i}return h()(n,[{key:"unmount",value:function(){this.mouse.dispose(),this.lines.dispose(),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setClearColor(5592405),this.setCameraPos(27.5,3.2,-.5),this.lookAt(0,0,0),this.scene.add(this.lines.pivot)}},{key:"draw",value:function(){var e=this;this.renderer.render(this.scene,this.camera),this.mouse.update(),this.mouse.intersection?this.lines.setActive(this.mouse.intersection.object.uuid):this.lines.setActive(void 0),this.lines.update(),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var ax=n(46),sx=n.n(ax),cx=n(47),lx=n.n(cx);function ux(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ux(Object(n),!0).forEach((function(t){be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ux(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dx=function(){function e(t){var n=t.shapeTexture,i=t.noiseTexture,r=t.centerCoord,o=void 0===r?new Oo:r,a=t.angle;l()(this,e),this.minY=-50,this.maxY=-35,this.centerCoord=new Oo(o.x,Oy.randomFloatBetween(this.minY,this.maxY),o.z),this.minRadius=Oy.randomFloatBetween(40,50),this.maxRadius=Oy.randomFloatBetween(70,90),this.radius=70,this.angle=a,this.angleVelocity=Oy.randomFloatBetween(.001,.005),this.yVelocity=Oy.randomFloatBetween(.01,.04);var s=Oy.randomFloatBetween(70,90);this.geometry=new pc(s,s,3*s,3*s),this.material=new tc({vertexShader:lx.a,fragmentShader:sx.a,uniforms:hx(hx({},ec.clone(gc.sprite.uniforms)),{},{uTime:{value:0},uTxtShape:{value:n},uTxtCloudNoise:{value:i},uFac1:{value:Oy.randomFloatBetween(8,10)},uFac2:{value:Oy.randomFloatBetween(2,3)},uTimeFactor1:{value:Oy.randomFloatBetween(.001,.007)},uTimeFactor2:{value:Oy.randomFloatBetween(1e-4,.003)},uDisplStrenght1:{value:Oy.randomFloatBetween(.04,.08)},uDisplStrenght2:{value:Oy.randomFloatBetween(.02,.15)}}),transparent:!0,side:Qt}),this.pivot=new Hs(this.geometry,this.material),this.updatePostion()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updateRadius",value:function(){this.radius=Oy.remap(this.minY,this.maxY,this.minRadius,this.maxRadius,this.centerCoord.y)}},{key:"updatePostion",value:function(){this.position.x=this.centerCoord.x+this.radius*Math.cos(this.angle),this.position.z=this.centerCoord.z+this.radius*Math.sin(this.angle),this.centerCoord.y+=this.yVelocity,this.position.y=this.centerCoord.y}},{key:"update",value:function(e){this.material.uniforms.uTime.value=e}}]),e}(),px=function(){function e(t){var n=t.numClouds,i=void 0===n?10:n;l()(this,e),this.rotationVelocity=.001,this.numClouds=i,this.clouds=[],this.pivot=new pu,this.createClouds()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.clouds.forEach((function(e){return e.dispose()}))}},{key:"createClouds",value:function(){for(var e=new bp,t=e.load(Ce.T011a),n=e.load(Ce.T011b),i=2*Math.PI/this.numClouds,r=0;r<this.numClouds;r++){var o=r*i,a=new dx({shapeTexture:t,noiseTexture:n,centerCoord:this.position,angle:o});this.clouds.push(a),this.pivot.add(a.pivot)}}},{key:"update",value:function(e){this.pivot.rotation.y+=this.rotationVelocity,this.clouds.forEach((function(t){return t.update(e)}))}}]),e}(),fx={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ya(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},mx=function(e,t,n,i){yy.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=i,this.resolution=void 0!==e?new bo(e.x,e.y):new bo(256,256),this.clearColor=new Ya(0,0,0);var r={minFilter:ti,magFilter:ti,format:bi};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new Ao(o,a,r),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var c=new Ao(o,a,r);c.texture.name="UnrealBloomPass.h"+s,c.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(c);var l=new Ao(o,a,r);l.texture.name="UnrealBloomPass.v"+s,l.texture.generateMipmaps=!1,this.renderTargetsVertical.push(l),o=Math.round(o/2),a=Math.round(a/2)}void 0===fx&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var u=fx;this.highPassUniforms=ec.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new tc({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var h=[3,5,7,9,11];for(o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new bo(o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Oo(1,1,1),new Oo(1,1,1),new Oo(1,1,1),new Oo(1,1,1),new Oo(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===vy&&console.error("UnrealBloomPass relies on CopyShader");var d=vy;this.copyUniforms=ec.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new tc({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:nn,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new Ya,this.oldClearAlpha=1,this.basic=new ns,this.fsQuad=new yy.FullScreenQuad(null)};mx.prototype=Object.assign(Object.create(yy.prototype),{constructor:mx,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(var r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(n,i),this.renderTargetsVertical[r].setSize(n,i),this.separableBlurMaterials[r].uniforms.texSize.value=new bo(n,i),n=Math.round(n/2),i=Math.round(i/2)},render:function(e,t,n,i,r){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),r&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var a=this.renderTargetBright,s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[s].uniforms.direction.value=mx.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[s]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=mx.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[s]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o},getSeperableBlurMaterial:function(e){return new tc({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new bo(.5,.5)},direction:{value:new bo(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new tc({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),mx.BlurDirectionX=new bo(1,0),mx.BlurDirectionY=new bo(0,1);var gx=0,vx=1,yx=function(){function e(t){l()(this,e),this.context=t,this.pp=new Ty(this.context),this.bloomPass={},this.init()}return h()(e,[{key:"resize",value:function(){this.pp.resize()}},{key:"init",value:function(){this.createBloom()}},{key:"createBloom",value:function(){var e=.7,t=0,n=0,i=this.context.canvas,r=new bo(i.width,i.height);this.bloomPass=new mx(r,1.5,.4,.85),this.bloomPass.threshold=t,this.bloomPass.strength=e,this.bloomPass.radius=n,this.pp.composer.addPass(this.bloomPass)}},{key:"render",value:function(){this.context.renderer.autoClear=!1,this.context.renderer.clear(),this.context.camera.layers.set(vx),this.pp.render(),this.context.renderer.clearDepth(),this.context.camera.layers.set(gx),this.context.renderer.render(this.context.scene,this.context.camera)}}]),e}(),xx=n(48),bx=n.n(xx),wx=n(49),_x=n.n(wx),Sx=function(){function e(t){l()(this,e),this.minY=0,this.maxY=60,this.centerCoord={x:t.x,y:Oy.randomFloatBetween(this.minY,this.maxY),z:t.z},this.radius=Oy.randomFloatBetween(25,40),this.angle=Oy.randomFloatBetween(0,2*Math.PI),this.yVelocity=Oy.randomFloatBetween(.01,.05),this.angleVelocity=Oy.randomFloatBetween(.005,.03),this.rotateVelocity=Oy.randomFloatBetween(.01,.03),this.geometry=this.createShardGeometry(Oy.randomFloatBetween(.01,.04)),this.material=new zd({side:Qt,uniforms:{},fragmentShader:bx.a,vertexShader:_x.a}),this.pivot=new Hs(this.geometry,this.material),this.setPosition(this.getInitialCoord()),this.pivot.doubleSide=!0,this.pivot.rotation.y=Math.PI/2,this.pivot.layers.enable(vx)}return h()(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createShardGeometry",value:function(){var e=new Ms,t=new Float32Array([-.5,.5,0,2,2,0,.5,-.5,0,-2,-2,0]),n=new Float32Array([0,0,1,0,1,1,0,1]),i=new Uint32Array([0,2,1,0,3,2]);return e.setAttribute("position",new os(t,3)),e.setAttribute("uv",new os(n,2)),e.setIndex(new os(i,1)),e}},{key:"getInitialCoord",value:function(){var e=this.centerCoord,t=e.x,n=e.y,i=e.z;return{x:t+this.radius*Math.cos(this.angle),y:n,z:i+this.radius*Math.sin(this.angle)}}},{key:"update",value:function(){this.updateRotation(),this.updatePosition()}},{key:"updateRotation",value:function(){this.pivot.rotation.x+=this.rotateVelocity,this.pivot.rotation.y+=this.rotateVelocity,this.pivot.rotation.z+=this.rotateVelocity}},{key:"updatePosition",value:function(){this.incrementCenterY(),this.angle+=this.angleVelocity;var e=this.centerCoord,t=e.x,n=e.y,i=e.z,r={x:t+this.radius*Math.cos(this.angle),y:n,z:i+this.radius*Math.sin(this.angle)};this.setPosition(r)}},{key:"incrementCenterY",value:function(){(this.centerCoord.y>=this.maxY||this.centerCoord.y<=this.minY)&&(this.yVelocity=-this.yVelocity),this.centerCoord.y+=this.yVelocity}},{key:"setPosition",value:function(e){var t=e.x,n=e.y,i=e.z;this.pivot.position.set(t,n,i)}},{key:"setRotation",value:function(){}}]),e}(),Mx=function(){function e(t){var n=t.num,i=void 0===n?10:n;l()(this,e),this.numShards=i,this.shards=[],this.pivot=new pu,this.createPetals()}return h()(e,[{key:"dispose",value:function(){this.shards.forEach((function(e){return e.dispose()}))}},{key:"createPetals",value:function(){for(var e=0;e<this.numShards;e++){var t=new Sx({x:0,y:0,z:0});this.shards.push(t),this.pivot.add(t.pivot)}}},{key:"update",value:function(){this.shards.forEach((function(e){return e.update()}))}}]),e}(),Tx=function(){function e(t){l()(this,e);var n=new ng(t);n.compileCubemapShader();var i=n.fromScene(this.getEnvScene(),.04);this.cubeMap=i.texture}return h()(e,[{key:"envMap",get:function(){return this.cubeMap}},{key:"dispose",value:function(){this.light1.geometry.dispose(),this.light1.material.dispose(),this.light2.geometry.dispose(),this.light2.material.dispose(),this.light3.geometry.dispose(),this.light3.material.dispose(),this.light4.geometry.dispose(),this.light4.material.dispose()}},{key:"getEnvScene",value:function(){var e=new oa,t=new Qs;t.deleteAttribute("uv");var n=new Hs(t,new Bd({metalness:0,side:Zt}));n.scale.setScalar(10),e.add(n);var i=new ef(new Ya(11184895).convertGammaToLinear(2.2),.5);e.add(i);var r=new Vd({color:255,emissive:11184895,emissiveIntensity:20});return this.light1=new Hs(t,r),this.light1.position.set(5,-2,0),this.light1.scale.set(.1,2,1),e.add(this.light1),this.light2=new Hs(t,r),this.light2.position.set(0,5,2),this.light2.scale.set(.5,.5,.5),e.add(this.light2),this.light3=new Hs(t,r),this.light3.position.set(3.5,-1,-5),this.light3.scale.set(2,2,2),e.add(this.light3),this.light4=new Hs(t,r),this.light4.position.set(-5,2,0),this.light4.scale.set(2,2,2),e.add(this.light4),e}},{key:"update",value:function(){}}]),e}(),Ex=function(){function e(t){var n=t.environment,i=t.size,r=void 0===i?20:i;l()(this,e),this.environment=n,this.size=r,this.rotationVelocity=-.003,this.crystal={},this.pivot=new pu,this.init()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"rotation",get:function(){return this.pivot.rotation}},{key:"dispose",value:function(){this.crystal.geometry.dispose(),this.crystal.material.dispose()}},{key:"init",value:function(){this.createCrystal(),this.pivot.add(this.crystal)}},{key:"createCrystal",value:function(){var e=new Ud({metalness:.4,roughness:0,opacity:.85,transparent:!0,envMap:this.environment.envMap,side:Qt,sheen:new Ya(255).convertGammaToLinear(2.2),color:new Ya(16777215).convertGammaToLinear(2.2),refractionRatio:.625}),t=new Ys,n=this.createHalf(),i=(new xa).setFromObject(n);n.position.y+=i.max.y-i.min.y,n.updateMatrixWorld();var r=this.createHalf();r.rotation.x+=Oy.toRadians(180),r.updateMatrix(),t.merge(n.geometry,n.matrix),t.merge(r.geometry,r.matrix),this.crystal=new Hs(t,e)}},{key:"createHalf",value:function(){return new Hs(new Od(this.size,1.5*this.size,4),new ns({color:16777215}))}},{key:"update",value:function(){this.pivot.rotation.y+=this.rotationVelocity}}]),e}();function Ax(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Cx=function(e){p()(n,e);var t=Ax(n);function n(e){var i;return l()(this,n),(i=t.call(this,e,null)).time=50,i.timeIncrement=1,i.composer={},i.environment=new Tx(i.renderer),i.crystal=new Ex({environment:i.environment,size:20}),i.shards=new Mx({num:8}),i.clouds=new px({numClouds:10}),i.effectManager=new yx(tv()(i)),i}return h()(n,[{key:"unmount",value:function(){this.environment.dispose(),this.crystal.dispose(),this.shards.dispose(),this.clouds.dispose(),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setClearColor(1118481),this.setCameraPos(-100,100,150),this.lookAt(0,0,0,0),this.crystal.position.set(0,5,0),this.scene.add(this.crystal.pivot),this.scene.add(this.clouds.pivot),this.scene.add(this.shards.pivot)}},{key:"draw",value:function(){var e=this;this.time+=this.timeIncrement,this.shards.update(),this.crystal.update(),this.clouds.update(this.time),this.effectManager.render(),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var Rx=n(50),Lx=n.n(Rx),Px=n(51),Ox=n.n(Px);function Nx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var kx=function(e){p()(n,e);var t=Nx(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).interactRadius=.2,i.amp=3.5,i.planeNoise=new Oo(1,2,2),i.planeGeometry={},i.planeMaterial={},i.plane={},i.raycaster={},i.isMousedown=!1,i.reveal=0,i.revealIncrement=.01,i.rotateionSensitivity=60,i.rotationRadius=80,i.rotationRange={minX:-100,maxX:100},i}return h()(n,[{key:"unmount",value:function(){this.planeGeometry.dispose(),this.planeMaterial.dispose(),this.clearScene()}},{key:"init",value:function(){var e=this;this.disableOrbitControls(),this.setClearColor(12303189),this.setCameraPos(0,0,-this.rotationRadius),this.lookAt(0,0,0),this.raycaster=new im,this.createMouseListener(),this.createPlane(),this.canvas.addEventListener("mousedown",(function(t){e.isMousedown=!0})),this.canvas.addEventListener("mouseup",(function(t){e.isMousedown=!1})),this.canvas.addEventListener("touchstart",(function(t){e.isMousedown=!0})),this.canvas.addEventListener("touchend",(function(t){e.isMousedown=!1}))}},{key:"createPlane",value:function(){this.planeGeometry=new pc(90,90,108,108);var e=So.loadTexture(Ce.T012a),t=So.loadTexture(Ce.T012b);this.planeMaterial=new zd({side:Qt,transparent:!0,fragmentShader:Qy()(Lx.a),vertexShader:Qy()(Ox.a),shading:$t,uniforms:{u_time:{type:"f",value:0},u_amp:{type:"f",value:this.amp},u_noise:{type:"v3",value:this.planeNoise},u_texture_a:{type:"t",value:e},u_texture_b:{type:"t",value:t},u_mix_value:{type:"f",value:this.reveal}}}),this.plane=new Hs(this.planeGeometry,this.planeMaterial),this.scene.add(this.plane)}},{key:"offsetCamera",value:function(){var e=this.rotationRange,t=e.minX,n=e.maxX,i=Oy.clamp(t,n,this.mouse.x*this.rotateionSensitivity),r=Oy.toRadians(i),o=this.getCircleCoord({x:0,y:0,z:0},this.rotationRadius,r),a=o.x,s=o.z;this.setCameraPos(a,0,-s),this.lookAt(0,0,0)}},{key:"getCircleCoord",value:function(e,t,n){return{x:e.x+t*Math.sin(n),y:0,z:e.y+t*Math.cos(n)}}},{key:"draw",value:function(){var e=this;this.renderer.render(this.scene,this.camera),this.offsetCamera(),this.planeMaterial.uniforms.u_time.value=this.getUTime(),this.planeMaterial.uniforms.u_amp.value=this.amp,this.isMousedown&&this.reveal<1&&(this.reveal+=this.revealIncrement),!this.isMousedown&&this.reveal>0&&(this.reveal-=this.revealIncrement),this.planeMaterial.uniforms.u_mix_value.value=this.reveal,requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var Ix=function(){function e(){l()(this,e),this.ambient=new ef(16777215,.05),this.directional=new Kp(16777215,.2),this.directional.position.set(0,50,0)}return h()(e,[{key:"update",value:function(){}}]),e}(),Dx=function(){function e(t){var n=t.width,i=void 0===n?100:n,r=t.height,o=void 0===r?100:r,a=t.depth,s=void 0===a?100:a,c=t.color,u=void 0===c?0:c,h=t.material;l()(this,e),this.width=i,this.height=o,this.depth=s,this.color=u,this.geometry=new Zs(this.width,this.height,this.depth),this.geometry.faces.splice(4,2),this.geometry.faces.splice(6,2),this.pivot=new Hs(this.geometry,h);var d=(new xa).setFromObject(this.pivot);this.min=d.min,this.max=d.max}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.geometry.dispose()}},{key:"getZCoord",value:function(e){var t=this.height*e;return this.min.z+t}}]),e}(),Fx=function(){function e(t){var n=t.numSteps,i=void 0===n?5:n,r=t.width,o=void 0===r?10:r,a=t.material;l()(this,e),this.numSteps=i,this.stepDepth=2,this.stepHeight=1.1,this.stepWidth=o,this.stepGeometry=new Zs(this.stepWidth,this.stepHeight,this.stepDepth),this.geometry=new Ys,this.createSteps(),this.material=a,this.pivot=new Hs(this.geometry,this.material)}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"width",get:function(){return this.stepWidth}},{key:"height",get:function(){return this.numSteps*this.stepHeight}},{key:"depth",get:function(){return this.numSteps*this.stepDepth-this.stepDepth/2}},{key:"matrix",get:function(){return this.pivot.matrix}},{key:"dispose",value:function(){this.geometry.dispose()}},{key:"createSteps",value:function(){for(var e=this.stepHeight/2,t=0,n=new Hs(this.stepGeometry,this.material),i=0;i<this.numSteps;i++){var r=n.clone();r.position.set(0,e,t),r.updateMatrix(),this.geometry.merge(r.geometry,r.matrix),e+=this.stepHeight,t-=this.stepDepth}}},{key:"updateMatrix",value:function(){this.pivot.updateMatrix()}}]),e}(),zx=function(){function e(t){var n=t.numSteps,i=void 0===n?5:n,r=t.width,o=void 0===r?10:r,a=t.material;l()(this,e),this.material=a,this.width=o,this.platformDepth=20,this.geometry=new Ys,this.stairs=new Fx({numSteps:i,width:o,material:this.material}),this.addPlatform(),this.addStairs(),this.pivot=new Hs(this.geometry,this.material),this.pivot.castShadow=!0,this.pivot.receiveShadow=!0,this.bbox=(new xa).setFromObject(this.pivot),this.min=this.bbox.min,this.max=this.bbox.max}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"depth",get:function(){return this.bbox.max.z-this.bbox.min.z}},{key:"height",get:function(){return this.bbox.max.y-this.bbox.min.y}},{key:"dispose",value:function(){this.geometry.dispose(),this.stairs.dispose()}},{key:"addPlatform",value:function(){var e=new Hs(new Zs(this.stairs.width,this.stairs.height,this.platformDepth),this.material);e.position.set(0,this.stairs.height/2,this.platformDepth/2),e.updateMatrix(),this.geometry.merge(e.geometry,e.matrix)}},{key:"addStairs",value:function(){this.stairs.position.z+=this.stairs.depth+this.platformDepth,this.stairs.updateMatrix(),this.geometry.merge(this.stairs.geometry,this.stairs.matrix)}}]),e}(),Bx=function(){function e(t){var n=t.height,i=void 0===n?10:n,r=t.width,o=void 0===r?5:r,a=t.depth,s=void 0===a?5:a,c=t.material;l()(this,e),this.height=i,this.width=o,this.depth=s,this.radius=this.width/2,this.geometry=new Ys,this.createCrown(),this.createSupports(),this.material=c,this.pivot=new Hs(this.geometry,this.material),this.pivot.receiveShadow=!0,this.bbox=(new xa).setFromObject(this.pivot)}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"matrix",get:function(){return this.pivot.matrix}},{key:"dispose",value:function(){this.geometry.dispose()}},{key:"updateMatrix",value:function(){this.pivot.updateMatrix()}},{key:"createCrown",value:function(){var e=new Hs(new Ld(this.radius,this.radius,this.depth,8*this.radius,1,!0,0,Math.PI),this.material);e.rotation.x+=Math.PI/2,e.rotation.y+=Math.PI/2,e.position.y+=this.height-this.radius,e.updateMatrix(),this.geometry.merge(e.geometry,e.matrix)}},{key:"createSupports",value:function(){var e=this.height-this.radius,t=new Hs(new pc(this.depth,e),this.material);t.rotation.y+=Math.PI/2;var n=t.clone();t.position.x-=this.width/2,n.position.x+=this.width/2,t.position.y=e/2,n.position.y=e/2,t.updateMatrix(),n.updateMatrix(),this.geometry.merge(t.geometry,t.matrix),this.geometry.merge(n.geometry,n.matrix)}}]),e}(),Ux=function(){function e(t){var n=t.width,i=void 0===n?10:n,r=t.height,o=void 0===r?10:r;l()(this,e),this.intensityIncrement=.01,this.maxIntensity=6,this.minIntensity=0,this.width=i,this.height=o,this.radius=this.width/2,this.geometry=new Ys,this.backMaterial=new ns({color:16773103}),this.createGeometry(),this.backing=new Hs(this.geometry,this.backMaterial),this.backing.intensity=1,this.pivot=new pu,this.pivot.add(this.backing),this.light={},this.setupLight(),this.pivot.add(this.light),this.bbox=new xa,this.helper=new mm(this.light,16711680)}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.pivot.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}},{key:"createFaces",value:function(){var e=new Hs(this.geometry,new ns({color:16711680,side:Qt}));this.backing.add(e);var t=new Hs(this.geometry,this.backMaterial);e.add(t)}},{key:"createGeometry",value:function(){var e=this.height-this.radius,t=new Hs(new kd(this.radius,8*this.radius,0,Math.PI),this.backMaterial);t.position.y+=e,t.updateMatrix(),this.geometry.merge(t.geometry,t.matrix);var n=new Hs(new pc(this.width,e),this.backMaterial);n.position.y+=e/2,n.updateMatrix(),this.geometry.merge(n.geometry,n.matrix)}},{key:"setupLight",value:function(){this.light=new Xp(16755440,1.5),this.light.angle=Oy.toRadians(40),this.light.distance=150,this.light.decay=2}},{key:"update",value:function(){(this.pivot.intensity>=this.maxIntensity||this.pivot.intensity<=this.minIntensity)&&(this.intensityIncrement=-this.intensityIncrement),this.pivot.intensity+=this.intensityIncrement}}]),e}(),jx=function(){function e(){l()(this,e),this.progressX=0,this.progressY=0,this.progressZ=0,this.progressVelocityX=Oy.randomFloatBetween(.004,.007),this.progressVelocityY=Oy.randomFloatBetween(.006,.009),this.progressVelocityZ=Oy.randomFloatBetween(.004,.007),this.signX=Oy.randomBool()?1:-1,this.signY=Oy.weightedRandomBool(.1)?1:-1,this.signZ=1,this.startX=0,this.endX=Oy.randomFloatBetween(2,11),this.startY=0,this.endY=Oy.randomFloatBetween(5,50),this.startZ=0,this.endZ=150,this.startWingAngle=Oy.toRadians(0),this.endWingAngle=Oy.toRadians(80),this.wingVelocity=Oy.randomFloatBetween(.2,.5),this.rightWing={},this.leftWing={},this.geometry=new Ys,this.material=new ns({color:16755455,side:Qt}),this.pivot=new pu,this.createGeometry(),this.pivot.rotation.y=Math.PI/2}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createWingGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Ys;return t.vertices.push(new Oo(-1,1,0),new Oo(-1,-1,0),new Oo(1,-1,0)),t.faces.push(new Ka(0,1,2)),t.computeBoundingSphere(),t.applyMatrix4((new Uo).makeTranslation(-1,1,0)),t.scale(e,e,e),t}},{key:"createGeometry",value:function(){var e=this.createWingGeometry(1);this.rightWing=new Hs(e,this.material),this.leftWing=new Hs(e,this.material),this.leftWing=new Hs(e,this.material),this.rightWing=new Hs(e,this.material),this.leftWing.rotation.x+=Oy.toRadians(-45),this.rightWing.rotation.x+=Oy.toRadians(45),this.pivot.add(this.rightWing),this.pivot.add(this.leftWing)}},{key:"updateWings",value:function(){(this.rightWing.rotation.x>this.maxWingAngle||this.rightWing.rotation.x<this.minWingAngle)&&(this.wingVelocity=-this.wingVelocity),this.leftWing.rotation.x-=this.wingVelocity,this.rightWing.rotation.x+=this.wingVelocity}},{key:"getXPos",value:function(){return this.signX*Oy.remap(0,1,this.startX,this.endX,this.progressX)}},{key:"getYPos",value:function(){return this.signY*Oy.remap(0,1,this.startY,this.endY,this.progressY)}},{key:"getZPos",value:function(){return this.signZ*Oy.remap(0,1,this.startZ,this.endZ,this.progressZ)}},{key:"update",value:function(){this.progressX<1&&(this.progressX+=this.progressVelocityX),this.progressY<1&&(this.progressY+=this.progressVelocityY),this.progressZ<1&&(this.progressZ+=this.progressVelocityZ),this.progressX>=1&&this.progressY>=1&&this.progressZ>=1&&(this.progressX=0,this.progressY=0,this.progressZ=0),this.updateWings(),this.position.x=this.getXPos(),this.position.y=this.getYPos(),this.position.z=this.getZPos()}}]),e}(),Hx=function(){function e(){l()(this,e),this.numBats=Oy.randomFloatBetween(8,12),this.bats=[],this.pivot=new pu,this.createBats()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.bats.forEach((function(e){return e.dispose()}))}},{key:"createBats",value:function(){for(var e=0;e<this.numBats;e++){var t=new jx;this.pivot.add(t.pivot),this.bats.push(t)}}},{key:"update",value:function(){this.bats.forEach((function(e){return e.update()}))}}]),e}(),Gx=function(){function e(t){var n=t.numArcs,i=void 0===n?5:n,r=t.arcMaxHeight,o=void 0===r?20:r,a=t.arcMinHeight,s=void 0===a?15:a,c=t.arcWidth,u=void 0===c?5:c,h=t.arcDepth,d=void 0===h?5:h,p=t.gap,f=void 0===p?2:p,m=t.material;l()(this,e),this.arcMaxHeight=o,this.arcMinHeight=s,this.arcWidth=u,this.arcDepth=d,this.gap=f,this.numArcs=i,this.arcs=[],this.arcLights=[],this.bats=[],this.geometry=new Ys,this.material=m,this.pivot=new pu,this.frame=new Hs(this.geometry,this.material),this.frame.castShadow=!0,this.frame.receiveShadow=!0,this.pivot.add(this.frame),this.createArcs()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.geometry.dispose(),this.arcs.forEach((function(e){return e.dispose()})),this.arcLights.forEach((function(e){return e.dispose()})),this.bats.forEach((function(e){return e.dispose()}))}},{key:"createArcs",value:function(){for(var e=Math.floor(this.numArcs/2),t=this.arcMinHeight,n=(this.arcMaxHeight-this.arcMinHeight)/e,i=-((this.arcWidth+this.gap)*this.numArcs-(this.arcWidth+this.gap)/2-this.gap)/2,r=this.gap+this.arcWidth,o=0;o<this.numArcs;o++)this.createArc({height:t,x:i,y:0,z:this.arcDepth/2}),this.createArcLight({height:t,x:i,y:0,z:0}),this.createBats({x:i,y:t/2,z:this.arcDepth/2}),o===e&&(n*=-1),t+=n,i+=r}},{key:"createArc",value:function(e){var t=e.height,n=e.x,i=e.y,r=e.z,o=new Bx({height:t,width:this.arcWidth,depth:this.arcDepth,material:this.material});o.position.set(n,i,r),o.updateMatrix(),this.geometry.merge(o.geometry,o.matrix),this.arcs.push(o)}},{key:"createArcLight",value:function(e){var t=e.height,n=e.x,i=e.y,r=e.z,o=new Ux({height:t,width:this.arcWidth,depth:this.arcDepth});o.position.set(n,i,r),this.pivot.add(o.pivot),this.arcLights.push(o)}},{key:"createBats",value:function(e){var t=e.x,n=e.y,i=e.z,r=new Hx;r.position.set(t,n,i),this.pivot.add(r.pivot),this.bats.push(r)}},{key:"update",value:function(){this.arcLights.forEach((function(e){return e.update()})),this.bats.forEach((function(e){return e.update()}))}}]),e}();function Vx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Wx=function(e){p()(n,e);var t=Vx(n);function n(e){var i;return l()(this,n),(i=t.call(this,e)).cameraDistance=100,i.sceneCenter={x:0,y:0,z:0},i.lights=new Ix,i.envMaterial=new Bd({color:16777215,roughness:0,metalness:0,side:Qt}),i.skybox=new Dx({width:300,height:200,depth:150,material:i.envMaterial}),i.platform=new zx({numSteps:35,width:1*i.skybox.width,material:i.envMaterial}),i.entrance=new Gx({numArcs:5,arcMaxHeight:80,arcMinHeight:50,arcWidth:15,arcDepth:5,gap:7,material:i.envMaterial}),i}return h()(n,[{key:"unmount",value:function(){this.envMaterial.dispose(),this.platform.dispose(),this.entrance.dispose(),this.skybox.dispose(),this.clearScene()}},{key:"init",value:function(){var e=this;this.disableOrbitControls(),this.setClearColor(0),this.setCameraPos(0,31,this.skybox.max.z),this.lookAt(new Oo(0,this.platform.max.y,this.skybox.min.z+40)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=qt,this.renderer.outputEncoding=Nr;this.entrance.position.set(0,this.platform.height,this.skybox.min.z+.1),this.platform.position.z=this.skybox.min.z+.1,this.skybox.position.y=this.skybox.height/2,this.scene.add(this.lights.ambient),this.scene.add(this.lights.directional),this.scene.add(this.skybox.pivot),this.scene.add(this.platform.pivot),this.scene.add(this.entrance.pivot),this.entrance.arcLights.forEach((function(t){e.scene.add(t.helper)}))}},{key:"draw",value:function(){var e=this;this.renderer.render(this.scene,this.camera),this.entrance.update(),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var qx=function(){function e(t){l()(this,e),this.context=t,this.spectrumStart=t.spectrumStart;var n=t.numFrequencyNodes-1;this.bassWeight=(this.spectrumStart.midrange-this.spectrumStart.bass)/n,this.midrangeWeight=(this.spectrumStart.highrange-this.spectrumStart.midrange)/n,this.highrangeWeight=(n-this.spectrumStart.highrange)/n,this.bassAverages=[],this.midrangeAverages=[],this.highrangeAverages=[],this.overallAverages=[]}return h()(e,[{key:"latestBassAverage",get:function(){return this.bassAverages[this.bassAverages.length-1]}},{key:"latestMidrangeAverage",get:function(){return this.midrangeAverages[this.midrangeAverages.length-1]}},{key:"latestHighrangeAverage",get:function(){return this.highrangeAverages[this.highrangeAverages.length-1]}},{key:"latestOverallAverage",get:function(){return this.overallAverages[this.overallAverages.length-1]}},{key:"update",value:function(){this.updateBassAverage(),this.updateMidrangeAverage(),this.updateHighrangeAverage(),this.updateOverallAverage()}},{key:"updateBassAverage",value:function(){for(var e=this.spectrumStart,t=e.bass,n=e.midrange,i=0,r=t;r<n;r++)i+=this.context.audio.frequencyData[r];i/=n-t,this.bassAverages.push(i)}},{key:"updateMidrangeAverage",value:function(){for(var e=this.spectrumStart,t=e.midrange,n=e.highrange,i=0,r=t;r<n;r++)i+=this.context.audio.frequencyData[r];i/=n-t,this.midrangeAverages.push(i)}},{key:"updateHighrangeAverage",value:function(){for(var e=this.spectrumStart.highrange,t=this.context.numFrequencyNodes-1,n=0,i=e;i<t;i++)n+=this.context.audio.frequencyData[i];n/=t-e,this.highrangeAverages.push(n)}},{key:"updateOverallAverage",value:function(){this.overallAverages.push(this.bassAverages[this.bassAverages.length-1]*this.bassWeight+this.midrangeAverages[this.midrangeAverages.length-1]*this.midrangeWeight+this.highrangeAverages[this.highrangeAverages.length-1]*this.highrangeWeight)}}]),e}(),Jx={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float damp;","uniform sampler2D tOld;","uniform sampler2D tNew;","varying vec2 vUv;","vec4 when_gt( vec4 x, float y ) {","\treturn max( sign( x - y ), 0.0 );","}","void main() {","\tvec4 texelOld = texture2D( tOld, vUv );","\tvec4 texelNew = texture2D( tNew, vUv );","\ttexelOld *= damp * when_gt( texelOld, 0.1 );","\tgl_FragColor = max(texelNew, texelOld);","}"].join("\n")},Xx=function(e){yy.call(this),void 0===Jx&&console.error("AfterimagePass relies on AfterimageShader"),this.shader=Jx,this.uniforms=ec.clone(this.shader.uniforms),this.uniforms.damp.value=void 0!==e?e:.96,this.textureComp=new Ao(window.innerWidth,window.innerHeight,{minFilter:ti,magFilter:Zn,format:bi}),this.textureOld=new Ao(window.innerWidth,window.innerHeight,{minFilter:ti,magFilter:Zn,format:bi}),this.shaderMaterial=new tc({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new yy.FullScreenQuad(this.shaderMaterial);var t=new ns;this.copyFsQuad=new yy.FullScreenQuad(t)};Xx.prototype=Object.assign(Object.create(yy.prototype),{constructor:Xx,render:function(e,t,n){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=n.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));var i=this.textureOld;this.textureOld=this.textureComp,this.textureComp=i},setSize:function(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}});["varying vec2 vUv;","void main() {"," vUv = uv;"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["varying vec2 vUv;","uniform sampler2D tInput;","void main() {","\tgl_FragColor = vec4( 1.0 ) - texture2D( tInput, vUv );","}"].join("\n"),new Oo,["varying vec2 vUv;","void main() {"," vUv = uv;"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["#define TAPS_PER_PASS 6.0","varying vec2 vUv;","uniform sampler2D tInput;","uniform vec3 vSunPositionScreenSpace;","uniform float fStepSize;","void main() {","\tvec2 delta = vSunPositionScreenSpace.xy - vUv;","\tfloat dist = length( delta );","\tvec2 stepv = fStepSize * delta / dist;","\tfloat iters = dist/fStepSize;","\tvec2 uv = vUv.xy;","\tfloat col = 0.0;","\tfloat f = min( 1.0, max( vSunPositionScreenSpace.z / 1000.0, 0.0 ) );","\tif ( 0.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 1.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 2.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 3.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 4.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tif ( 5.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;","\tuv += stepv;","\tgl_FragColor = vec4( col/TAPS_PER_PASS );","\tgl_FragColor.a = 1.0;","}"].join("\n"),["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["varying vec2 vUv;","uniform sampler2D tColors;","uniform sampler2D tGodRays;","uniform float fGodRayIntensity;","void main() {","\tgl_FragColor = texture2D( tColors, vUv ) + fGodRayIntensity * vec4( 1.0 - texture2D( tGodRays, vUv ).r );","\tgl_FragColor.a = 1.0;","}"].join("\n"),new Oo,new Ya(16772608),new Ya(0),["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["varying vec2 vUv;","uniform vec3 vSunPositionScreenSpace;","uniform float fAspect;","uniform vec3 sunColor;","uniform vec3 bgColor;","void main() {","\tvec2 diff = vUv - vSunPositionScreenSpace.xy;","\tdiff.x *= fAspect;","\tfloat prop = clamp( length( diff ) / 0.5, 0.0, 1.0 );","\tprop = 0.35 * pow( 1.0 - prop, 3.0 );","\tgl_FragColor.xyz = ( vSunPositionScreenSpace.z > 0.0 ) ? mix( sunColor, bgColor, 1.0 - prop ) : bgColor;","\tgl_FragColor.w = 1.0;","}"].join("\n");var Yx=0,Zx=1,Qx=function(){function e(t){l()(this,e),this.context=t,this.pp=new Ty(this.context),this.bloomPass=null,this.afterImagePass=null,this.init()}return h()(e,[{key:"onResize",value:function(e,t){this.pp.resize(e,t)}},{key:"init",value:function(){this.afterImagePass=new Xx(.6),this.pp.composer.addPass(this.afterImagePass),this.bloomPass=new mx(new bo(window.innerWidth,window.innerHeight),1.5,.4,.85),this.bloomPass.strength=1.5,this.bloomPass.radius=0,this.bloomPass.threshold=0,this.pp.composer.addPass(this.bloomPass)}},{key:"initGodRays",value:function(){}},{key:"update",value:function(){}},{key:"render",value:function(){this.context.renderer.autoClear=!1,this.context.renderer.clear(),this.context.camera.layers.set(Zx),this.pp.render(),this.context.renderer.clearDepth(),this.context.camera.layers.set(Yx),this.context.renderer.render(this.context.scene,this.context.camera)}}]),e}(),$x=function(){function e(t){l()(this,e),this.freqIndex=t,this.size=Oy.randomFloatBetween(10,16),this.rotation=2*Math.random()*Math.PI,this.yMin=-Oy.randomFloatBetween(0,1),this.yMax=Oy.randomFloatBetween(18,23),this.yIncrementMin=Oy.randomFloatBetween(1e-4,3e-4),this.yIncrementMax=Oy.randomFloatBetween(.05,.1),this.radiusMin=Oy.randomFloatBetween(5,7),this.radiusMax=this.radiusMin+Oy.randomFloatBetween(20,22),this.radius=Oy.randomFloatBetween(this.radiusMin,this.radiusMax),this.angle=Oy.randomFloatBetween(0,2*Math.PI),this.minAngleIncrement=Oy.randomFloatBetween(Oy.toRadians(.01),Oy.toRadians(.05)),this.maxAngleIncrement=this.minAngleIncrement+Oy.randomFloatBetween(Oy.toRadians(.3),Oy.toRadians(.7)),this.centerCoord=new Oo(0,0,0);var n=this.calcCircleCoord(),i=n.x,r=n.y,o=n.z;this.position=new Oo(i,r,o),this.alpha=0}return h()(e,[{key:"calcCircleCoord",value:function(e){var t=this.position&&this.position.y?this.position.y:Oy.randomFloatBetween(this.yMin,this.yMax);t>=this.yMax?t=this.yMin:t+=Oy.remapFreq(this.yIncrementMin,this.yIncrementMax,e);return{x:this.centerCoord.x+this.radius*Math.cos(this.angle),y:t,z:this.centerCoord.z+this.radius*Math.sin(this.angle)}}},{key:"updateAlpha",value:function(){var e=Oy.remap(this.yMin,this.yMax,0,1,this.position.y);this.alpha=e<.5?Oy.remap(this.yMin,this.yMax,0,1,this.position.y):1-Oy.remap(this.yMin,this.yMax,0,1,this.position.y)}},{key:"updateRadius",value:function(){this.radius=Oy.remap(this.yMin,this.yMax,this.radiusMin,this.radiusMax,this.yMax-this.position.y)}},{key:"update",value:function(e,t){var n=Oy.remapFreq(this.minAngleIncrement,this.maxAngleIncrement,e);this.angle+=n;var i=this.calcCircleCoord(e),r=i.x,o=i.y,a=i.z;this.position.set(r,o,a),this.updateAlpha(),this.updateRadius(e)}}]),e}(),Kx=n(52),eb=n.n(Kx),tb=n(53),nb=n.n(tb),ib=function(){return window.innerHeight/(2*Math.tan(30*Math.PI/180))},rb=function(){function e(t){l()(this,e),this.context=t,this.numParticles=t.numFrequencyNodes,this.particles=[],this.geometry=new Ms,this.createParticles(),this.material=new zd({depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0,vertexShader:nb.a,fragmentShader:eb.a,uniforms:{diffuseTexture:{value:(new bp).load(Ce.T014Smoke)},pointMultiplier:{value:ib()}}}),this.mesh=new mh(this.geometry,this.material),this.geometry.computeBoundingBox(),this.geometry.computeBoundingSphere()}return h()(e,[{key:"position",get:function(){return this.mesh.position}},{key:"uniforms",get:function(){return this.material.uniforms}},{key:"onResize",value:function(){this.material.uniforms.pointMultiplier.value=ib()}},{key:"createParticles",value:function(){for(var e=[],t=[],n=0;n<this.numParticles;n++){var i=Oy.randomIntBetween(0,this.context.spectrumStart.midrange),r=new $x(i);this.particles.push(r),e.push(r.yMin),t.push(r.yMax)}this.geometry.setAttribute("yMin",new ps(e,1)),this.geometry.setAttribute("yMax",new ps(t,1))}},{key:"updateParticles",value:function(e){var t=[],n=[],i=[],r=[];this.particles.forEach((function(o){o.update(e),t.push(o.position.x,o.position.y,o.position.z),n.push(o.size),i.push(o.rotation),r.push(o.alpha)})),this.geometry.setAttribute("position",new ps(t,3)),this.geometry.setAttribute("size",new ps(n,1)),this.geometry.setAttribute("angle",new ps(i,1)),this.geometry.setAttribute("alpha",new ps(r,1)),this.geometry.setAttribute("freq",new ps(this.context.audio.frequencyData,1))}},{key:"update",value:function(e){var t=this,n=[],i=[],r=[],o=[],a=[];this.particles.forEach((function(s){var c=t.context.audio.frequencyData[s.freqIndex];a.push(c),s.update(c,e),n.push(s.position.x,s.position.y,s.position.z),i.push(s.size),r.push(s.rotation),o.push(s.alpha)})),this.geometry.setAttribute("position",new ps(n,3)),this.geometry.setAttribute("size",new ps(i,1)),this.geometry.setAttribute("angle",new ps(r,1)),this.geometry.setAttribute("alpha",new ps(o,1)),this.geometry.setAttribute("freq",new ps(a,1))}}]),e}(),ob=function(){function e(t){l()(this,e),this.freqIndex=t,this.position={x:0,y:0,z:0},this.alpha=0,this.centerCoord={x:0,y:0,z:0},this.yMin=-Oy.randomFloatBetween(3,5),this.yMax=Oy.randomFloatBetween(35,40),this.yIncrementMin=Oy.randomFloatBetween(5e-4,9e-4),this.yIncrementMax=this.yIncrementMin+Oy.randomFloatBetween(.1,.5),this.radiusMin=Oy.randomFloatBetween(1,3),this.radiusMax=this.radiusMin+Oy.randomFloatBetween(20,40),this.minAngleIncrement=Oy.randomFloatBetween(Oy.toRadians(.008),Oy.toRadians(.01)),this.maxAngleIncrement=this.minAngleIncrement+Oy.randomFloatBetween(Oy.toRadians(3.2),Oy.toRadians(3.7)),this.angle=Oy.randomFloatBetween(0,2*Math.PI)}return h()(e,[{key:"updatePosition",value:function(e){var t=this.position.y;this.position.y>=this.yMax?t=this.yMin:t+=Oy.remapFreq(this.yIncrementMin,this.yIncrementMax,e);var n=Oy.remapFreq(this.minAngleIncrement,this.maxAngleIncrement,e);this.angle+=n;var i=Oy.remap(this.yMin,this.yMax,this.radiusMin,this.radiusMax,this.yMax-this.position.y);this.position={x:this.centerCoord.x+i*Math.cos(this.angle),y:t,z:this.centerCoord.z+i*Math.sin(this.angle)}}},{key:"updateAlphas",value:function(e){var t=Oy.remap(this.yMin,this.yMax,0,1,this.position.y),n=Oy.remap(this.yMin,this.yMax,0,1);t>.5&&(n=1-n);var i=Oy.remapFreq(0,1,e);this.alpha=Math.min(n,i)}},{key:"update",value:function(e){this.updatePosition(e),this.updateAlphas(e)}}]),e}(),ab=n(54),sb=n.n(ab),cb=n(55),lb=n.n(cb),ub=function(){return window.innerHeight/(2*Math.tan(30*Math.PI/180))},hb=function(){function e(t){l()(this,e),this.context=t,this.numParticles=60,this.particles=[],this.geometry=new Ms,this.material=new zd({depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0,vertexShader:lb.a,fragmentShader:sb.a,uniforms:{uPointMultiplier:{value:ub()}}}),this.mesh=new mh(this.geometry,this.material),this.createParticles()}return h()(e,[{key:"position",get:function(){return this.mesh.position}},{key:"uniforms",get:function(){return this.material.uniforms}},{key:"onResize",value:function(){this.uniforms.uPointMultiplier.value=ub()}},{key:"createParticles",value:function(){for(var e=0;e<this.numParticles;e++){var t=Oy.randomIntBetween(this.context.spectrumStart.midrange,this.context.spectrumStart.highrange),n=new ob(t);this.particles.push(n),this.updateAttributes()}}},{key:"updateAttributes",value:function(){var e=this;if(this.context.audio){var t=[],n=[],i=[];this.particles.forEach((function(r){var o=e.context.audio.frequencyData[r.freqIndex];r.update(o);var a=r.position;t.push(a.x,a.y,a.z),n.push(r.alpha),i.push(o)})),this.geometry.setAttribute("position",new ps(t,3)),this.geometry.setAttribute("alpha",new ps(n,1)),this.geometry.setAttribute("freq",new ps(i,1))}}},{key:"update",value:function(){this.updateAttributes()}}]),e}(),db=n(56),pb=n.n(db),fb=n(57),mb=n.n(fb),gb=function(){return window.innerHeight/(2*Math.tan(30*Math.PI/180))},vb=function(){function e(t){l()(this,e),this.context=t,this.numParticles=40,this.particles=[],this.geometry=new Ms,this.material=new zd({depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0,vertexShader:mb.a,fragmentShader:pb.a,uniforms:{uPointMultiplier:{value:gb()}}}),this.mesh=new mh(this.geometry,this.material),this.createParticles()}return h()(e,[{key:"position",get:function(){return this.mesh.position}},{key:"uniforms",get:function(){return this.material.uniforms}},{key:"onResize",value:function(){this.uniforms.uPointMultiplier.value=gb()}},{key:"createParticles",value:function(){for(var e=0;e<this.numParticles;e++){var t=Oy.randomIntBetween(this.context.spectrumStart.midrange,this.context.spectrumStart.highrange),n=new ob(t);this.particles.push(n),this.updateAttributes()}}},{key:"updateAttributes",value:function(){var e=this;if(this.context.audio){var t=[],n=[],i=[];this.particles.forEach((function(r){var o=e.context.audio.frequencyData[r.freqIndex];r.update(o);var a=r.position;t.push(a.x,a.y,a.z),n.push(r.alpha),i.push(o)})),this.geometry.setAttribute("position",new ps(t,3)),this.geometry.setAttribute("alpha",new ps(n,1)),this.geometry.setAttribute("freq",new ps(i,1))}}},{key:"update",value:function(){this.updateAttributes()}}]),e}(),yb=n(58),xb=n.n(yb),bb=n(59),wb=n.n(bb),_b=function(){function e(t){l()(this,e),this.context=t,this.geometry=new Ld(8,30,80,80,80,!0),this.geometry.applyMatrix4((new Uo).makeTranslation(0,-this.geometry.parameters.height/2,0)),this.geometry.applyMatrix4((new Uo).makeRotationX(-Math.PI/2)),this.material=new tc({fragmentShader:xb.a,vertexShader:wb.a,transparent:!0,depthWrite:!1,uniforms:{attenuation:{value:70},anglePower:{value:15},spotPosition:{value:new Oo(0,0,0)},freq:{value:0}}}),this.mesh=new Hs(this.geometry,this.material),this.uniforms.spotPosition.value=this.mesh.position}return h()(e,[{key:"uniforms",get:function(){return this.material.uniforms}},{key:"position",get:function(){return this.mesh.position}},{key:"lookAt",value:function(e,t,n){this.mesh.lookAt(e,t,n)}},{key:"update",value:function(){this.uniforms.freq.value=this.context.beatManager.latestMidrangeAverage}}]),e}();function Sb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var Mb=function(e){p()(n,e);var t=Sb(n);function n(e,i){var r;return l()(this,n),(r=t.call(this,e,i,{cameraNear:1,cameraFar:3500})).audioSrc=Me.S014,r.clock=new Cf,r.effectManager=new Qx(tv()(r)),r.spectrumStart={bass:0,midrange:28,highrange:185},r.numFrequencyNodes=300,r.beatManager=new qx(tv()(r)),r.composer={},r.pp=new Ty(tv()(r)),r.renderPass={},r.clock=new Cf,r.fftSize=512,r.bars=[],r.smoke=new rb(tv()(r)),r.spirits=new hb(tv()(r)),r.spot=new _b(tv()(r)),r.spiritsAlt=new vb(tv()(r)),r}return h()(n,[{key:"unmount",value:function(){this.audio.close(),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setCameraPos(0,25,-65),this.lookAt(0,0,0),this.setClearColor(0);var e={fftSize:this.fftSize,dataLength:this.numFrequencyNodes};this.initAudio(e),this.audio.setSmoothingTimeConstant(.75),this.audio.volume(1),this.scene.add(this.smoke.mesh),this.scene.add(this.spirits.mesh),this.scene.add(this.spiritsAlt.mesh),this.scene.add(this.spot.mesh),this.render.toneMappingExposure=.15,this.smoke.position.set(0,-22,0),this.spirits.position.set(0,-22,0),this.spiritsAlt.position.set(0,-22,0),this.spot.position.set(-20,50,0),this.spot.lookAt(-2,0,0),this.spirits.mesh.layers.set(Zx),this.spiritsAlt.mesh.layers.set(Zx)}},{key:"customResize",value:function(e,t){this.smoke.onResize(),this.spirits.onResize(),this.spiritsAlt.onResize(),this.effectManager.onResize(e,t)}},{key:"draw",value:function(){var e=this;this.audio.getByteFrequencyData(),this.beatManager.update(),this.effectManager.update();var t=this.clock.getElapsedTime()||0;this.smoke.update(t),this.spirits.update(t),this.spot.update(t),this.spiritsAlt.update(t),this.effectManager.render(),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var Tb=n(60),Eb=n.n(Tb),Ab=n(61),Cb=n.n(Ab),Rb=function(){function e(t){var n=t.radius,i=void 0===n?0:n,r=t.angle,o=void 0===r?0:r;l()(this,e),this.radius=i,this.angle=o,this.minAngleIncrement=Oy.randomFloatBetween(Oy.toRadians(0),Oy.toRadians(0)),this.maxAngleIncrement=Oy.randomFloatBetween(Oy.toRadians(.5),Oy.toRadians(3)),this.geometry=this.createGeometry(.1);var a=this.createMaterialConfig();this.material=new zd(a),this.mesh=new Hs(this.geometry,this.material)}return h()(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createMaterialConfig",value:function(){var e=new Oo(Oy.randomSign()*Oy.randomFloatBetween(20,80),Oy.randomSign()*Oy.randomFloatBetween(20,80),Oy.randomSign()*Oy.randomFloatBetween(20,80)),t=new Oo(Oy.randomSign()*Oy.randomFloatBetween(20,80),Oy.randomSign()*Oy.randomFloatBetween(20,80),Oy.randomSign()*Oy.randomFloatBetween(20,80));return{transparent:!0,vertexShader:Cb.a,fragmentShader:Eb.a,uniforms:{u_freq:{type:"f",value:0},u_time:{type:"f",value:0},u_rotate_speed:{type:"v3",value:e},u_translate_speed:{type:"v3",value:t},u_angle:{type:"f",value:this.angle},u_radius:{type:"f",value:this.radius}},side:Qt}}},{key:"createGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Gp;t.moveTo(0,0),t.bezierCurveTo(50,100,-50,100,0,0);var n={depth:1,bevelEnabled:!0,bevelSegments:2,steps:2,bevelSize:15,bevelThickness:.5},i=new fd(t,n);return i.scale(e,e,e),i}},{key:"frequencyToAngleIncrement",value:function(e){return this.remap(0,255,this.minAngleIncrement,this.maxAngleIncrement,e)}},{key:"fequencyToRotationSpeed",value:function(e){}},{key:"remap",value:function(e,t,n,i,r){return n+(i-n)*(r-e)/(t-e)}},{key:"update",value:function(e,t){this.material.uniforms.u_time.value=t,this.material.uniforms.u_freq.value=e,this.material.uniforms.u_angle.value+=this.frequencyToAngleIncrement(e)}}]),e}(),Lb=n(62),Pb=n.n(Lb),Ob=n(63),Nb=n.n(Ob),kb=function(){function e(t){var n=t.width,i=void 0===n?0:n,r=t.radius,o=void 0===r?0:r,a=t.angle,s=void 0===a?0:a;l()(this,e),this.geometry=new pc(i,i,2,2),this.material=new zd({fragmentShader:Pb.a,vertexShader:Nb.a,transparent:!0,side:Qt,uniforms:{u_freq:{type:"f",value:0},u_angle:{type:"f",value:s},u_radius:{type:"f",value:o}}}),this.mesh=new Hs(this.geometry,this.material),this.mesh.rotation.x+=Math.PI/2}return h()(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"setPosition",value:function(e,t,n){this.mesh.position.set(e,t,n)}},{key:"setRotation",value:function(e,t,n){this.mesh.rotation.set(e,t,n)}},{key:"update",value:function(e){this.material.uniforms.u_freq.value=e}}]),e}(),Ib=n(64),Db=n.n(Ib),Fb=n(65),zb=n.n(Fb),Bb=function(){function e(t){var n=t.numPoints,i=void 0===n?0:n;l()(this,e),this.numPoints=i,this.particles=[],this.geometry=new Ys,this.createParticles();var r=(new bp).load(Ce.T015),o=new Oo(Oy.randomFloatBetween(.01,.1),Oy.randomFloatBetween(.01,.1),Oy.randomFloatBetween(.01,.1)),a=window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth,s=Oy.randomFloatBetween(.01,.05)*a,c=Oy.randomFloatBetween(.1,.15)*a;this.material=new zd({fragmentShader:Db.a,vertexShader:zb.a,uniforms:{u_freq:{type:"f",value:0},u_time:{type:"f",value:0},u_texture:{type:"t",value:r},u_translate_speed:{type:"v3",value:o},u_max_screen_dimension:{type:"f",value:a},u_min_size:{type:"f",value:s},u_max_size:{type:"f",value:c}},transparent:!0,depthWrite:!1,blending:rn}),this.mesh=new mh(this.geometry,this.material)}return h()(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createParticles",value:function(){for(var e=0;e<this.numPoints;e++){var t={position:new Oo(Oy.randomFloatBetween(-5,5),Oy.randomFloatBetween(-5,5),Oy.randomFloatBetween(-5,5)),velocity:new Oo(Oy.randomFloatBetween(-.1,.1),.6,Oy.randomFloatBetween(-.1,.1)),acceleration:new Oo(0,-.001,0)};this.particles.push(t),this.geometry.vertices.push(t.position)}}},{key:"update",value:function(e,t){this.material.uniforms.u_freq.value=e,this.material.uniforms.u_time.value=t,this.mesh.geometry.verticesNeedUpdate=!0,this.mesh.rotation.x+=.001,this.mesh.rotation.y+=.002}}]),e}(),Ub=n(66),jb=n.n(Ub),Hb=n(67),Gb=n.n(Hb),Vb=function(){function e(t){var n,i=t.minZ,r=void 0===i?0:i,o=t.maxZ,a=void 0===o?0:o;l()(this,e),this.minZ=r,this.maxZ=a,this.positionZ=Oy.randomFloatBetween(this.minZ,this.maxZ),this.radius=Oy.randomFloatBetween(50,100),this.angle=Oy.randomFloatBetween(0,2*Math.PI);var s=new Oo(Oy.randomSign()*Oy.randomFloatBetween(20,80),Oy.randomSign()*Oy.randomFloatBetween(20,80),Oy.randomSign()*Oy.randomFloatBetween(20,80)),c=new Oo(Oy.randomSign()*Oy.randomFloatBetween(20,80),Oy.randomSign()*Oy.randomFloatBetween(20,80),Oy.randomSign()*Oy.randomFloatBetween(20,80));this.incrementSign=Oy.randomSign(),this.minRotationIncrement=Oy.randomFloatBetween(Oy.toRadians(0),Oy.toRadians(0)),this.maxRotationIncrement=Oy.randomFloatBetween(Oy.toRadians(1),Oy.toRadians(2)),this.minAngleIncrement=Oy.randomFloatBetween(Oy.toRadians(0),Oy.toRadians(0)),this.maxAngleIncrement=Oy.randomFloatBetween(Oy.toRadians(1),Oy.toRadians(2));var u=Oy.randomFloatBetween(.1,.3);this.geometry=this.createGeometry(u);var h=new Oo(this.getRandomAngle(),this.getRandomAngle(),this.getRandomAngle());this.material=new zd((n={side:Qt,transparent:!0,fragmentShader:jb.a,vertexShader:Gb.a,uniforms:{u_freq:{type:"f",value:0},u_time:{type:"f",value:0},u_rotation:{type:"v3",value:h},u_min_angle_increment:{type:"f",value:this.minRotationIncrement},u_max_angle_increment:{type:"f",value:this.maxRotationIncrement},u_increment_sign:{type:"f",value:this.incrementSign},u_rotate_speed:{type:"v3",value:s},u_translate_speed:{type:"v3",value:c},u_angle:{type:"f",value:this.angle},u_radius:{type:"f",value:this.radius},u_position_z:{type:"f",value:this.positionZ}}},be()(n,"side",Qt),be()(n,"transparent",!0),n)),this.mesh=new Hs(this.geometry,this.material)}return h()(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Gp;t.moveTo(0,0),t.bezierCurveTo(25,50,-25,50,0,0);var n={depth:1,bevelEnabled:!0,bevelSegments:2,steps:2,bevelSize:15,bevelThickness:0},i=new fd(t,n);return i.scale(e,e,e),i}},{key:"getRandomAngle",value:function(){return Oy.randomFloatBetween(0,2*Math.PI)}},{key:"remap",value:function(e,t,n,i,r){return n+(i-n)*(r-e)/(t-e)}},{key:"remapFreq",value:function(e,t,n){return this.remap(0,255,e,t,n)}},{key:"frequencyToAngleIncrement",value:function(e){return this.remap(0,255,this.minRotationIncrement,this.maxRotationIncrement,e)}},{key:"setPosition",value:function(e,t,n){this.mesh.position.set(e,t,n)}},{key:"update",value:function(e,t){this.material.uniforms.u_freq.value=e,this.material.uniforms.u_time.value=t,this.material.uniforms.u_rotation.value.y+=this.incrementSign*this.frequencyToAngleIncrement(e),this.material.uniforms.u_rotation.value.z+=this.incrementSign*this.frequencyToAngleIncrement(e),this.material.uniforms.u_angle.value-=this.remapFreq(this.minAngleIncrement,this.maxAngleIncrement,e),this.positionZ-=this.remapFreq(0,1,e),this.positionZ<this.minZ&&(this.positionZ=this.maxZ),this.material.uniforms.u_position_z.value=this.positionZ}}]),e}();function Wb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var qb=function(e){p()(n,e);var t=Wb(n);function n(e,i){var r;return l()(this,n),(r=t.call(this,e,i)).audioSrc=Me.S015,r.numFrequencyNodes=25,r.fftSize=512,r.clock=new Cf,r.cameraPositionZ=-200,r.numLeaves=r.numFrequencyNodes,r.leaves=[],r.sphereRadius=5,r.numNodes=100,r.pillarNodes=[],r.numTiles=r.numFrequencyNodes,r.tiles=[],r.orb={},r.numPoints=r.numFrequencyNodes,r.shards=[],r.numShards=r.numFrequencyNodes,r}return h()(n,[{key:"unmount",value:function(){this.audio.close(),this.leaves.forEach((function(e){return e.dispose()})),this.tiles.forEach((function(e){return e.dispose()})),this.shards.forEach((function(e){return e.dispose()})),this.orb.dispose(),this.clearScene()}},{key:"init",value:function(){this.disableOrbitControls(),this.setCameraPos(0,0,this.cameraPositionZ),this.lookAt(0,0,0),this.setClearColor(16777215);var e={fftSize:this.fftSize,dataLength:this.numFrequencyNodes};this.initAudio(e),this.createTiles(),this.createLeaves(),this.createOrb(),this.createShards()}},{key:"createLeaves",value:function(){for(var e=0,t=2*Math.PI/this.numLeaves,n=0;n<this.numLeaves;n++){var i=new Rb({radius:50,angle:e});this.leaves.push(i),this.scene.add(i.mesh),e+=t}}},{key:"createTiles",value:function(){for(var e=0,t=2*Math.PI/this.numTiles,n=0;n<this.numTiles;n++){var i=new kb({width:30,radius:80,angle:e});this.tiles.push(i),this.scene.add(i.mesh),e+=t}}},{key:"createOrb",value:function(){this.orb=new Bb({numPoints:this.numPoints,numFrequencyNodes:this.numFrequencyNodes}),this.scene.add(this.orb.mesh)}},{key:"createShards",value:function(){for(var e=0;e<this.numShards;e++){var t=new Vb({minZ:1.2*this.cameraPositionZ,maxZ:1.2*-this.cameraPositionZ});this.scene.add(t.mesh),this.shards.push(t)}}},{key:"draw",value:function(){var e=this,t=this.clock.getElapsedTime();this.audio.getByteFrequencyData(),this.audio.frequencyData.forEach((function(n,i){e.tiles[i].update(n),e.leaves[i].update(n,t),e.shards[i].update(n,t)})),this.orb.update(this.audio.frequencyData,t),this.orb.update(this.audio.getAverageFrequency(),t),this.renderer.render(this.scene,this.camera),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var Jb=function(){function e(t){l()(this,e),this.context=t,this.camera=t.camera,this.radius=18,this.angleVelocity=-.001,this.minAngleVelocity=-5e-4,this.maxAngleVelocity=-.0025,this.angle=0,this.centerCoord=new Oo(0,8,0),this.target=new Oo}return h()(e,[{key:"position",get:function(){return this.camera.position}},{key:"updatePosition",value:function(){this.position.set(this.centerCoord.x+this.radius*Math.cos(this.angle),this.centerCoord.y,this.centerCoord.z+this.radius*Math.sin(this.angle))}},{key:"getAngleVelocity",value:function(){var e=this.context.beatManager.overallAverages;return Oy.remap(0,255,this.minAngleVelocity,this.maxAngleVelocity,e[e.length-1])}},{key:"update",value:function(){this.angle+=this.getAngleVelocity(),this.updatePosition(),this.camera.lookAt(this.target)}}]),e}();function Xb(e){e=e||{},this.name=e.name,this.type=e.type,this.node=e.node,this.needsUpdate=e.needsUpdate}Object.defineProperties(Xb.prototype,{value:{get:function(){return this.node.value},set:function(e){this.node.value=e}}});var Yb={elements:["x","y","z","w"],addShortcuts:function(){function e(e,t,n){return n?{get:function(){return this[e][t][n]},set:function(i){this[e][t][n]=i}}:{get:function(){return this[e][t]},set:function(n){this[e][t]=n}}}return function(t,n,i){for(var r={},o=0;o<i.length;++o){var a=i[o].split("."),s=a[0],c=a[1];r[s]=e(n,s,c)}Object.defineProperties(t,r)}}()},Zb={nodes:{},keywords:{},add:function(e){this.nodes[e.name]=e},addKeyword:function(e,t,n){n=void 0===n||n,this.keywords[e]={callback:t,cache:n}},remove:function(e){delete this.nodes[e.name]},removeKeyword:function(e){delete this.keywords[e]},get:function(e){return this.nodes[e]},getKeyword:function(e,t){return this.keywords[e].callback.call(this,t)},getKeywordData:function(e){return this.keywords[e]},contains:function(e){return void 0!==this.nodes[e]},containsKeyword:function(e){return void 0!==this.keywords[e]}};function Qb(e){this.uuid=xo.generateUUID(),this.name="",this.type=e,this.userData={}}function $b(e,t){Qb.call(this,e),t=t||{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}Qb.prototype={constructor:Qb,isNode:!0,hashProperties:void 0,analyze:function(e,t){t=t||{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1},analyzeAndFlow:function(e,t,n){return n=n||{},this.analyze(e,n),this.flow(e,t,n)},flow:function(e,t,n){n=n||{},e.addFlow(n.slot,n.cache,n.context);var i={};return i.result=this.build(e,t),i.code=e.clearNodeCode(),i.extra=e.context.extra,e.removeFlow(),i},build:function(e,t,n){t=t||this.getType(e,t);var i=e.getNodeData(n||this);return e.analyzing&&this.appendDepsNode(e,i,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)},generate:function(){},getHash:function(){var e,t,n="{";for(e in this)(t=this[e])instanceof Qb&&(n+='"'+e+'":'+t.getHash()+",");if(this.hashProperties)for(var i=0;i<this.hashProperties.length;i++)t=this[e=this.hashProperties[i]],n+='"'+e+'":"'+String(t)+'",';return n+='"id":"'+this.uuid+'"}'},appendDepsNode:function(e,t,n){t.deps=(t.deps||0)+1;var i=e.getTypeLength(n);(i>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=i,t.output=n)},setName:function(e){return this.name=e,this},getName:function(){return this.name},getType:function(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type},getJSONNode:function(e){if(!(void 0===e||"string"==typeof e)&&void 0!==e.nodes[this.uuid])return e.nodes[this.uuid]},copy:function(e){return void 0!==e.name&&(this.name=e.name),void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},createJSONNode:function(e){var t=void 0===e||"string"==typeof e,n={};if("string"!=typeof this.nodeType)throw new Error("Node does not allow serialization.");return n.uuid=this.uuid,n.nodeType=this.nodeType,""!==this.name&&(n.name=this.name),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.nodes[this.uuid]=n),n},toJSON:function(e){return this.getJSONNode(e)||this.createJSONNode(e)}},$b.prototype=Object.create(Qb.prototype),$b.prototype.constructor=$b,$b.prototype.build=function(e,t,n,i){if(t=t||this.getType(e),this.getShared(e,t)){var r=this.getUnique(e,t);r&&void 0===this.constructor.uuid&&(this.constructor.uuid=xo.generateUUID()),n=e.getUuid(n||this.getUuid(),!r);var o=e.getNodeData(n),a=o.output||this.getType(e);if(e.analyzing)return(o.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,o,t),this.generate(e,t,n)):Qb.prototype.build.call(this,e,t,n);if(r)return o.name=o.name||Qb.prototype.build.call(this,e,t,n),o.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||1===o.deps))return Qb.prototype.build.call(this,e,t,n);n=this.getUuid(!1);var s=this.getTemp(e,n);if(s)return e.format(s,a,t);s=$b.prototype.generate.call(this,e,t,n,o.output,i);var c=this.generate(e,a,n);return e.addNodeCode(s+" = "+c+";"),e.format(s,a,t)}return Qb.prototype.build.call(this,e,t,n)},$b.prototype.getShared=function(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared},$b.prototype.getUnique=function(){return this.unique},$b.prototype.setLabel=function(e){return this.label=e,this},$b.prototype.getLabel=function(){return this.label},$b.prototype.getUuid=function(e){var t=(e||null==e)&&this.constructor.uuid||this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t},$b.prototype.getTemp=function(e,t){t=t||this.uuid;var n=e.getVars()[t];return n?n.name:void 0},$b.prototype.generate=function(e,t,n,i,r){return this.getShared(e,t)||console.error("THREE.TempNode is not shared!"),n=n||this.uuid,e.getTempVar(n,i||this.getType(e),r,this.getLabel()).name};var Kb=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,ew=/[a-z_0-9]+/gi;function tw(e,t,n,i,r){this.isMethod=void 0===r,this.isInterface=!1,$b.call(this,r),this.parse(e,t,n,i)}tw.prototype=Object.create($b.prototype),tw.prototype.constructor=tw,tw.prototype.nodeType="Function",tw.prototype.useKeywords=!0,tw.prototype.getShared=function(){return!this.isMethod},tw.prototype.getType=function(e){return e.getTypeByFormat(this.type)},tw.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},tw.prototype.getIncludeByName=function(e){for(var t=this.includes.length;t--;)if(this.includes[t].name===e)return this.includes[t]},tw.prototype.generate=function(e,t){for(var n=0,i=this.src,r=0;r<this.includes.length;r++)e.include(this.includes[r],this);for(var o in this.extensions)e.extensions[o]=!0;for(var a=[];s=ew.exec(this.src);)a.push(s);for(r=0;r<a.length;r++){var s,c=(s=a[r])[0],l=!this.isMethod||!this.getInputByName(c),u=c;if(this.keywords[c]||this.useKeywords&&l&&Zb.containsKeyword(c)){var h=this.keywords[c];if(!h){var d=Zb.getKeywordData(c);d.cache&&(h=e.keywords[c]),h=h||Zb.getKeyword(c,e),d.cache&&(e.keywords[c]=h)}u=h.build(e)}c!==u&&(i=i.substring(0,s.index+n)+u+i.substring(s.index+c.length+n),n+=u.length-c.length),void 0===this.getIncludeByName(u)&&Zb.contains(u)&&e.include(Zb.get(u))}return"source"===t?i:this.isMethod?(this.isInterface||e.include(this,!1,i),this.name):e.format("( "+i+" )",this.getType(e),t)},tw.prototype.parse=function(e,t,n,i){if(this.src=e||"",this.includes=t||[],this.extensions=n||{},this.keywords=i||{},this.isMethod){var r=this.src.match(Kb);if(this.inputs=[],r&&4==r.length){this.type=r[1],this.name=r[2];var o=r[3].match(ew);if(o)for(var a=0;a<o.length;){var s,c,l=o[a++];"in"===l||"out"===l||"inout"===l?s=o[a++]:(s=l,l=""),c=o[a++],this.inputs.push({name:c,type:s,qualifier:l})}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}},tw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.isMethod=e.isMethod,this.useKeywords=e.useKeywords,this.parse(e.src,e.includes,e.extensions,e.keywords),void 0!==e.type&&(this.type=e.type),this},tw.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){for(var n in(t=this.createJSONNode(e)).src=this.src,t.isMethod=this.isMethod,t.useKeywords=this.useKeywords,this.isMethod||(t.type=this.type),t.extensions=JSON.parse(JSON.stringify(this.extensions)),t.keywords={},this.keywords)t.keywords[n]=this.keywords[n].toJSON(e).uuid;if(this.includes.length){t.includes=[];for(var i=0;i<this.includes.length;i++)t.includes.push(this.includes[i].toJSON(e).uuid)}}return t};var nw=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i;function iw(e,t){$b.call(this),this.parse(e||iw.PI,t)}iw.PI="PI",iw.PI2="PI2",iw.RECIPROCAL_PI="RECIPROCAL_PI",iw.RECIPROCAL_PI2="RECIPROCAL_PI2",iw.LOG2="LOG2",iw.EPSILON="EPSILON",iw.prototype=Object.create($b.prototype),iw.prototype.constructor=iw,iw.prototype.nodeType="Const",iw.prototype.getType=function(e){return e.getTypeByFormat(this.type)},iw.prototype.parse=function(e,t){this.src=e||"";var n,i,r="",o=this.src.match(nw);this.useDefine=t||"#"===this.src.charAt(0),o&&o.length>1?(i=o[1],n=o[2],r=o[3]):(n=this.src,i="f"),this.name=n,this.type=i,this.value=r},iw.prototype.build=function(e,t){return"source"!==t?(e.include(this),e.format(this.name,this.getType(e),t)):this.value?this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";":this.useDefine?this.src:void 0},iw.prototype.generate=function(e,t){return e.format(this.name,this.getType(e),t)},iw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.parse(e.src,e.useDefine),this},iw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src,!0===t.useDefine&&(t.useDefine=!0)),t};var rw,ow,aw,sw,cw,lw,uw,hw,dw,pw,fw,mw,gw,vw,yw=/^struct\s*([a-z_0-9]+)\s*{\s*((.|\n)*?)}/gim,xw=/\s*(\w*?)\s*(\w*?)(\=|\;)/gim;function bw(e){$b.call(this),this.parse(e)}function ww(e,t){(t=t||{}).shared=void 0!==t.shared&&t.shared,$b.call(this,e,t),this.readonly=!1}function _w(e,t){ww.call(this,"v2"),this.value=e instanceof bo?e:new bo(e,t)}function Sw(e,t,n){ww.call(this,"v3"),this.value=e instanceof Oo?e:new Oo(e,t,n)}function Mw(e,t,n,i){ww.call(this,"v4"),this.value=e instanceof Eo?e:new Eo(e,t,n,i)}function Tw(e){$b.call(this,"v2",{shared:!1}),this.index=e||0}function Ew(e){ww.call(this,"f"),this.value=e||0}function Aw(e,t,n,i,r){tw.call(this,e,r,i,n,t)}function Cw(e,t){$b.call(this,"v4"),this.input=e,this.method=t||Cw.LINEAR_TO_LINEAR}function Rw(e,t,n,i){ww.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new Tw,this.bias=n,this.project=void 0!==i&&i}function Lw(e){$b.call(this,"v3"),this.scope=e||Lw.LOCAL}function Pw(e){$b.call(this,"v3"),this.scope=e||Pw.VIEW}function Ow(e){$b.call(this,"v3"),this.scope=e||Ow.CUBE}function Nw(e,t,n){ww.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new Ow,this.bias=n}function kw(e,t){$b.call(this),this.setFunction(e,t)}function Iw(e,t,n){$b.call(this),this.a=e,this.b=t,this.op=n}function Dw(e,t,n,i){$b.call(this),this.a=e,"string"!=typeof t?this.b=t:i=t,"string"!=typeof n?this.c=n:i=n,this.method=i}function Fw(e,t,n){$b.call(this,"v4"),this.value=e,this.uv=t,this.bias=n}function zw(e,t,n){$b.call(this,"v4"),this.value=e,this.radianceNode=new Fw(this.value,t||new Ow(Ow.VECTOR),n),this.irradianceNode=new Fw(this.value,new Pw(Pw.WORLD),new Ew(1).setReadonly(!0))}bw.prototype=Object.create($b.prototype),bw.prototype.constructor=bw,bw.prototype.nodeType="Struct",bw.prototype.getType=function(e){return e.getTypeByFormat(this.name)},bw.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},bw.prototype.generate=function(e,t){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)},bw.prototype.parse=function(e){this.src=e||"",this.inputs=[];var t=yw.exec(this.src);if(t){for(var n,i=t[2];n=xw.exec(i);)this.inputs.push({type:n[1],name:n[2]});this.name=t[1]}else this.name="";this.type=this.name},bw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src),t},ww.prototype=Object.create($b.prototype),ww.prototype.constructor=ww,ww.prototype.setReadonly=function(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this},ww.prototype.getReadonly=function(){return this.readonly},ww.prototype.copy=function(e){return $b.prototype.copy.call(this,e),void 0!==e.readonly&&(this.readonly=e.readonly),this},ww.prototype.createJSONNode=function(e){var t=$b.prototype.createJSONNode.call(this,e);return!0===this.readonly&&(t.readonly=this.readonly),t},ww.prototype.generate=function(e,t,n,i,r,o){n=e.getUuid(n||this.getUuid()),i=i||this.getType(e);var a=e.getNodeData(n);return this.getReadonly(e)&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,i,r,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,r,o,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,r,o,this.getLabel())),e.format(a.fragment.name,i,t))},_w.prototype=Object.create(ww.prototype),_w.prototype.constructor=_w,_w.prototype.nodeType="Vector2",Yb.addShortcuts(_w.prototype,"value",["x","y"]),_w.prototype.generateReadonly=function(e,t,n,i){return e.format("vec2( "+this.x+", "+this.y+" )",i,t)},_w.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.value.copy(e),this},_w.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,!0===this.readonly&&(t.readonly=!0)),t},Sw.prototype=Object.create(ww.prototype),Sw.prototype.constructor=Sw,Sw.prototype.nodeType="Vector3",Yb.addShortcuts(Sw.prototype,"value",["x","y","z"]),Sw.prototype.generateReadonly=function(e,t,n,i){return e.format("vec3( "+this.x+", "+this.y+", "+this.z+" )",i,t)},Sw.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.value.copy(e),this},Sw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,!0===this.readonly&&(t.readonly=!0)),t},Mw.prototype=Object.create(ww.prototype),Mw.prototype.constructor=Mw,Mw.prototype.nodeType="Vector4",Yb.addShortcuts(Mw.prototype,"value",["x","y","z","w"]),Mw.prototype.generateReadonly=function(e,t,n,i){return e.format("vec4( "+this.x+", "+this.y+", "+this.z+", "+this.w+" )",i,t)},Mw.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.value.copy(e),this},Mw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,!0===this.readonly&&(t.readonly=!0)),t},Tw.prototype=Object.create($b.prototype),Tw.prototype.constructor=Tw,Tw.prototype.nodeType="UV",Tw.prototype.generate=function(e,t){e.requires.uv[this.index]=!0;var n=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(i,this.getType(e),t)},Tw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.index=e.index,this},Tw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},Zb.addKeyword("uv",(function(){return new Tw})),Zb.addKeyword("uv2",(function(){return new Tw(1)})),Ew.prototype=Object.create(ww.prototype),Ew.prototype.constructor=Ew,Ew.prototype.nodeType="Float",Ew.prototype.generateReadonly=function(e,t,n,i){return e.format(this.value+(this.value%1?"":".0"),i,t)},Ew.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.value=e.value,this},Ew.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},Aw.prototype=Object.create(tw.prototype),Aw.prototype.constructor=Aw,Aw.prototype.nodeType="Expression",Cw.Nodes=(rw=new tw(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),ow=new tw(["vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );","}"].join("\n")),aw=new tw(["vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );","}"].join("\n")),sw=new tw(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),cw=new tw(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n")),lw=new tw(["vec4 RGBEToLinear( in vec4 value ) {","\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );","}"].join("\n")),uw=new tw(["vec4 LinearToRGBE( in vec4 value ) {","\tfloat maxComponent = max( max( value.r, value.g ), value.b );","\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );","\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );","}"].join("\n")),hw=new tw(["vec3 RGBMToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.xyz * value.w * maxRange, 1.0 );","}"].join("\n")),dw=new tw(["vec3 LinearToRGBM( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );","\tM            = ceil( M * 255.0 ) / 255.0;","\treturn vec4( value.rgb / ( M * maxRange ), M );","}"].join("\n")),pw=new tw(["vec3 RGBDToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );","}"].join("\n")),fw=new tw(["vec3 LinearToRGBD( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat D      = max( maxRange / maxRGB, 1.0 );","\tD            = clamp( floor( D ) / 255.0, 0.0, 1.0 );","\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );","}"].join("\n")),mw=new iw("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );"),gw=new tw(["vec4 LinearToLogLuv( in vec4 value ) {","\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;","\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));","\tvec4 vResult;","\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;","\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;","\tvResult.w = fract(Le);","\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;","\treturn vResult;","}"].join("\n"),[mw]),vw=new iw("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );"),{LinearToLinear:rw,GammaToLinear:ow,LinearToGamma:aw,sRGBToLinear:sw,LinearTosRGB:cw,RGBEToLinear:lw,LinearToRGBE:uw,RGBMToLinear:hw,LinearToRGBM:dw,RGBDToLinear:pw,LinearToRGBD:fw,cLogLuvM:mw,LinearToLogLuv:gw,cLogLuvInverseM:vw,LogLuvToLinear:new tw(["vec4 LogLuvToLinear( in vec4 value ) {","\tfloat Le = value.z * 255.0 + value.w;","\tvec3 Xp_Y_XYZp;","\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);","\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;","\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;","\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;","\treturn vec4( max(vRGB, 0.0), 1.0 );","}"].join("\n"),[vw])}),Cw.LINEAR_TO_LINEAR="LinearToLinear",Cw.GAMMA_TO_LINEAR="GammaToLinear",Cw.LINEAR_TO_GAMMA="LinearToGamma",Cw.SRGB_TO_LINEAR="sRGBToLinear",Cw.LINEAR_TO_SRGB="LinearTosRGB",Cw.RGBE_TO_LINEAR="RGBEToLinear",Cw.LINEAR_TO_RGBE="LinearToRGBE",Cw.RGBM_TO_LINEAR="RGBMToLinear",Cw.LINEAR_TO_RGBM="LinearToRGBM",Cw.RGBD_TO_LINEAR="RGBDToLinear",Cw.LINEAR_TO_RGBD="LinearToRGBD",Cw.LINEAR_TO_LOG_LUV="LinearToLogLuv",Cw.LOG_LUV_TO_LINEAR="LogLuvToLinear",Cw.getEncodingComponents=function(e){switch(e){case Or:return["Linear"];case Nr:return["sRGB"];case Ir:return["RGBE"];case Fr:return["RGBM",new Ew(7).setReadonly(!0)];case zr:return["RGBM",new Ew(16).setReadonly(!0)];case Br:return["RGBD",new Ew(256).setReadonly(!0)];case kr:return["Gamma",new Aw("float( GAMMA_FACTOR )","f")]}},Cw.prototype=Object.create($b.prototype),Cw.prototype.constructor=Cw,Cw.prototype.nodeType="ColorSpace",Cw.prototype.hashProperties=["method"],Cw.prototype.generate=function(e,t){var n=this.input.build(e,"v4"),i=this.getType(e),r=Cw.Nodes[this.method],o=e.include(r);if(o===Cw.LINEAR_TO_LINEAR)return e.format(n,i,t);if(2===r.inputs.length){var a=this.factor.build(e,"f");return e.format(o+"( "+n+", "+a+" )",i,t)}return e.format(o+"( "+n+" )",i,t)},Cw.prototype.fromEncoding=function(e){var t=Cw.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]},Cw.prototype.fromDecoding=function(e){var t=Cw.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]},Cw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.input=e.input,this.method=e.method,this},Cw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).input=this.input.toJSON(e).uuid,t.method=this.method),t},Rw.prototype=Object.create(ww.prototype),Rw.prototype.constructor=Rw,Rw.prototype.nodeType="Texture",Rw.prototype.getTexture=function(e,t){return ww.prototype.generate.call(this,e,t,this.value.uuid,"t")},Rw.prototype.generate=function(e,t){if("sampler2D"===t)return this.getTexture(e,t);var n,i,r=this.getTexture(e,t),o=this.uv.build(e,this.project?"v4":"v2"),a=this.bias?this.bias.build(e,"f"):void 0;void 0===a&&e.context.bias&&(a=e.context.bias.setTexture(this).build(e,"f")),n=this.project?"texture2DProj":a?"tex2DBias":"tex2D",i=a?n+"( "+r+", "+o+", "+a+" )":n+"( "+r+", "+o+" )";var s={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace||new Cw(new Aw("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(i),i=this.colorSpace.build(e,c),e.removeContext(),e.format(i,c,t)},Rw.prototype.copy=function(e){return ww.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),void 0!==e.project&&(this.project=e.project),this},Rw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.value&&(t.value=this.value.uuid),t.uv=this.uv.toJSON(e).uuid,t.project=this.project,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},Lw.LOCAL="local",Lw.WORLD="world",Lw.VIEW="view",Lw.PROJECTION="projection",Lw.prototype=Object.create($b.prototype),Lw.prototype.constructor=Lw,Lw.prototype.nodeType="Position",Lw.prototype.getType=function(){switch(this.scope){case Lw.PROJECTION:return"v4"}return this.type},Lw.prototype.getShared=function(){switch(this.scope){case Lw.LOCAL:case Lw.WORLD:return!1}return!0},Lw.prototype.generate=function(e,t){var n;switch(this.scope){case Lw.LOCAL:e.isShader("vertex")?n="transformed":(e.requires.position=!0,n="vPosition");break;case Lw.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,n="vWPosition";break;case Lw.VIEW:n=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Lw.PROJECTION:n=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(n,this.getType(e),t)},Lw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.scope=e.scope,this},Lw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},Zb.addKeyword("position",(function(){return new Lw})),Zb.addKeyword("worldPosition",(function(){return new Lw(Lw.WORLD)})),Zb.addKeyword("viewPosition",(function(){return new Lw(Lw.VIEW)})),Pw.LOCAL="local",Pw.WORLD="world",Pw.VIEW="view",Pw.prototype=Object.create($b.prototype),Pw.prototype.constructor=Pw,Pw.prototype.nodeType="Normal",Pw.prototype.getShared=function(){return this.scope===Pw.WORLD},Pw.prototype.build=function(e,t,n,i){var r=e.context[this.scope+"Normal"];return r?r.build(e,t,n,i):$b.prototype.build.call(this,e,t,n)},Pw.prototype.generate=function(e,t){var n;switch(this.scope){case Pw.VIEW:n=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case Pw.LOCAL:e.isShader("vertex")?n="objectNormal":(e.requires.normal=!0,n="vObjectNormal");break;case Pw.WORLD:e.isShader("vertex")?n="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,n="vWNormal")}return e.format(n,this.getType(e),t)},Pw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.scope=e.scope,this},Pw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},Zb.addKeyword("viewNormal",(function(){return new Pw(Pw.VIEW)})),Zb.addKeyword("localNormal",(function(){return new Pw(Pw.NORMAL)})),Zb.addKeyword("worldNormal",(function(){return new Pw(Pw.WORLD)})),Ow.CUBE="cube",Ow.SPHERE="sphere",Ow.VECTOR="vector",Ow.prototype=Object.create($b.prototype),Ow.prototype.constructor=Ow,Ow.prototype.nodeType="Reflect",Ow.prototype.getUnique=function(e){return!e.context.viewNormal},Ow.prototype.getType=function(){switch(this.scope){case Ow.SPHERE:return"v2"}return this.type},Ow.prototype.generate=function(e,t){var n=this.getUnique(e);if(e.isShader("fragment")){var i;switch(this.scope){case Ow.VECTOR:var r=new Pw(Pw.VIEW),o=e.context.roughness,a=r.build(e,"v3"),s=new Lw(Lw.VIEW).build(e,"v3"),c=o?o.build(e,"f"):void 0,l=`reflect( -normalize( ${s} ), ${a} )`;c&&(l=`normalize( mix( ${l}, ${a}, ${c} * ${c} ) )`);var u=`inverseTransformDirection( ${l}, viewMatrix )`;n?(e.addNodeCode(`vec3 reflectVec = ${u};`),i="reflectVec"):i=u;break;case Ow.CUBE:u="vec3( -"+(h=new Ow(Ow.VECTOR).build(e,"v3"))+".x, "+h+".yz )";n?(e.addNodeCode(`vec3 reflectCubeVec = ${u};`),i="reflectCubeVec"):i=u;break;case Ow.SPHERE:var h;u="normalize( ( viewMatrix * vec4( "+(h=new Ow(Ow.VECTOR).build(e,"v3"))+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(e.addNodeCode(`vec2 reflectSphereVec = ${u};`),i="reflectSphereVec"):i=u}return e.format(i,this.getType(e),t)}return console.warn("THREE.ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)},Ow.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},Nw.prototype=Object.create(ww.prototype),Nw.prototype.constructor=Nw,Nw.prototype.nodeType="CubeTexture",Nw.prototype.getTexture=function(e,t){return ww.prototype.generate.call(this,e,t,this.value.uuid,"tc")},Nw.prototype.generate=function(e,t){if("samplerCube"===t)return this.getTexture(e,t);var n,i=this.getTexture(e,t),r=this.uv.build(e,"v3"),o=this.bias?this.bias.build(e,"f"):void 0;void 0===o&&e.context.bias&&(o=e.context.bias.setTexture(this).build(e,"f")),n=o?"texCubeBias( "+i+", "+r+", "+o+" )":"texCube( "+i+", "+r+" )";var a={include:e.isShader("vertex"),ignoreCache:!0},s=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace||new Cw(new Aw("",s)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(n),n=this.colorSpace.build(e,s),e.removeContext(),e.format(n,s,t)},Nw.prototype.copy=function(e){return ww.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),this},Nw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.uuid,t.uv=this.uv.toJSON(e).uuid,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},kw.prototype=Object.create($b.prototype),kw.prototype.constructor=kw,kw.prototype.nodeType="FunctionCall",kw.prototype.setFunction=function(e,t){this.value=e,this.inputs=t||[]},kw.prototype.getFunction=function(){return this.value},kw.prototype.getType=function(e){return this.value.getType(e)},kw.prototype.generate=function(e,t){for(var n=this.getType(e),i=this.value,r=i.build(e,t)+"( ",o=[],a=0;a<i.inputs.length;a++){var s=i.inputs[a],c=this.inputs[a]||this.inputs[s.name];o.push(c.build(e,e.getTypeByFormat(s.type)))}return r+=o.join(", ")+" )",e.format(r,n,t)},kw.prototype.copy=function(e){for(var t in $b.prototype.copy.call(this,e),e.inputs)this.inputs[t]=e.inputs[t];return this.value=e.value,this},kw.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){var n=this.value;if((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,n.inputs.length){t.inputs={};for(var i=0;i<n.inputs.length;i++){var r=n.inputs[i],o=this.inputs[i]||this.inputs[r.name];t.inputs[r.name]=o.toJSON(e).uuid}}}return t},Iw.ADD="+",Iw.SUB="-",Iw.MUL="*",Iw.DIV="/",Iw.prototype=Object.create($b.prototype),Iw.prototype.constructor=Iw,Iw.prototype.nodeType="Operator",Iw.prototype.getType=function(e){var t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t},Iw.prototype.generate=function(e,t){var n=this.getType(e),i=this.a.build(e,n),r=this.b.build(e,n);return e.format("( "+i+" "+this.op+" "+r+" )",n,t)},Iw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op,this},Iw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op),t},Dw.RAD="radians",Dw.DEG="degrees",Dw.EXP="exp",Dw.EXP2="exp2",Dw.LOG="log",Dw.LOG2="log2",Dw.SQRT="sqrt",Dw.INV_SQRT="inversesqrt",Dw.FLOOR="floor",Dw.CEIL="ceil",Dw.NORMALIZE="normalize",Dw.FRACT="fract",Dw.SATURATE="saturate",Dw.SIN="sin",Dw.COS="cos",Dw.TAN="tan",Dw.ASIN="asin",Dw.ACOS="acos",Dw.ARCTAN="atan",Dw.ABS="abs",Dw.SIGN="sign",Dw.LENGTH="length",Dw.NEGATE="negate",Dw.INVERT="invert",Dw.MIN="min",Dw.MAX="max",Dw.MOD="mod",Dw.STEP="step",Dw.REFLECT="reflect",Dw.DISTANCE="distance",Dw.DOT="dot",Dw.CROSS="cross",Dw.POW="pow",Dw.MIX="mix",Dw.CLAMP="clamp",Dw.REFRACT="refract",Dw.SMOOTHSTEP="smoothstep",Dw.FACEFORWARD="faceforward",Dw.prototype=Object.create($b.prototype),Dw.prototype.constructor=Dw,Dw.prototype.nodeType="Math",Dw.prototype.hashProperties=["method"],Dw.prototype.getNumInputs=function(){switch(this.method){case Dw.MIX:case Dw.CLAMP:case Dw.REFRACT:case Dw.SMOOTHSTEP:case Dw.FACEFORWARD:return 3;case Dw.MIN:case Dw.MAX:case Dw.MOD:case Dw.STEP:case Dw.REFLECT:case Dw.DISTANCE:case Dw.DOT:case Dw.CROSS:case Dw.POW:return 2;default:return 1}},Dw.prototype.getInputType=function(e){var t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>i?this.a.getType(e):n>i?this.b.getType(e):this.c.getType(e)},Dw.prototype.getType=function(e){switch(this.method){case Dw.LENGTH:case Dw.DISTANCE:case Dw.DOT:return"f";case Dw.CROSS:return"v3"}return this.getInputType(e)},Dw.prototype.generate=function(e,t){var n,i,r,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,c=this.getInputType(e),l=this.getType(e);switch(this.method){case Dw.NEGATE:return e.format("( -"+this.a.build(e,c)+" )",c,t);case Dw.INVERT:return e.format("( 1.0 - "+this.a.build(e,c)+" )",c,t);case Dw.CROSS:n=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case Dw.STEP:n=this.a.build(e,1===o?"f":c),i=this.b.build(e,c);break;case Dw.MIN:case Dw.MAX:case Dw.MOD:n=this.a.build(e,c),i=this.b.build(e,1===a?"f":c);break;case Dw.REFRACT:n=this.a.build(e,c),i=this.b.build(e,c),r=this.c.build(e,"f");break;case Dw.MIX:n=this.a.build(e,c),i=this.b.build(e,c),r=this.c.build(e,1===s?"f":c);break;default:n=this.a.build(e,c),this.b&&(i=this.b.build(e,c)),this.c&&(r=this.c.build(e,c))}var u=[];u.push(n),i&&u.push(i),r&&u.push(r);var h=this.getNumInputs(e);if(u.length!==h)throw Error(`Arguments not match used in "${this.method}". Require ${h}, currently ${u.length}.`);return e.format(this.method+"( "+u.join(", ")+" )",l,t)},Dw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.c=e.c,this.method=e.method,this},Dw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,this.b&&(t.b=this.b.toJSON(e).uuid),this.c&&(t.c=this.c.toJSON(e).uuid),t.method=this.method),t},Fw.Nodes=function(){var e=new bw("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new iw("float cubeUV_maxMipLevel 8.0",!0),n=new iw("float cubeUV_minMipLevel 4.0",!0),i=new iw("float cubeUV_maxTileSize 256.0",!0),r=new iw("float cubeUV_minTileSize 16.0",!0),o=new tw("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");o.useKeywords=!1;var a=new tw("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");a.useKeywords=!1;var s=new tw("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,o,a,t,n,i,r]);s.useKeywords=!1;var c=new iw("float r0 1.0",!0),l=new iw("float v0 0.339",!0),u=new iw("float m0 -2.0",!0);return{bilinearCubeUV:s,roughnessToMip:new tw("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[c,l,u,new iw("float r1 0.8",!0),new iw("float v1 0.276",!0),new iw("float m1 -1.0",!0),new iw("float r4 0.4",!0),new iw("float v4 0.046",!0),new iw("float m4 2.0",!0),new iw("float r5 0.305",!0),new iw("float v5 0.016",!0),new iw("float m5 3.0",!0),new iw("float r6 0.21",!0),new iw("float v6 0.0038",!0),new iw("float m6 4.0",!0)]),m0:u,cubeUV_maxMipLevel:t}}(),Fw.prototype=Object.create($b.prototype),Fw.prototype.constructor=Fw,Fw.prototype.nodeType="TextureCubeUV",Fw.prototype.bilinearCubeUV=function(e,t,n,i){var r=new kw(Fw.Nodes.bilinearCubeUV,[t,n,i]);this.colorSpaceTL=this.colorSpaceTL||new Cw(new Aw("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(r.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR||new Cw(new Aw("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(r.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL||new Cw(new Aw("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(r.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR||new Cw(new Aw("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(r.build(e)+".br");var o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new Aw(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Aw(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Aw(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Aw(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();var a=new Aw("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=r,a},Fw.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=this.uv,i=this.bias||e.context.roughness,r=new Dw(new kw(Fw.Nodes.roughnessToMip,[i]),Fw.Nodes.m0,Fw.Nodes.cubeUV_maxMipLevel,Dw.CLAMP),o=new Dw(r,Dw.FLOOR),a=new Dw(r,Dw.FRACT),s=new Dw(this.bilinearCubeUV(e,this.value,n,o),this.bilinearCubeUV(e,this.value,n,new Iw(o,new Ew(1).setReadonly(!0),Iw.ADD)),a,Dw.MIX);return e.format(s.build(e),"v4",t)}return console.warn("THREE.TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},Fw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.bias=this.bias.toJSON(e).uuid),t},zw.prototype=Object.create($b.prototype),zw.prototype.constructor=zw,zw.prototype.nodeType="TextureCube",zw.prototype.generate=function(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("THREE.TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))},zw.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.value=e.value,this},zw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t};var Bw=Yb.elements,Uw=["float","vec2","vec3","vec4"],jw={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b"},Hw={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4"};function Gw(){this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.requires={uv:[],color:[],lights:!1,fog:!1,transparent:!1,irradiance:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:"",fragment:""},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={},this.updaters=[],this.nodes=[],this.analyzing=!1}function Vw(e,t,n){ww.call(this,"c"),this.value=e instanceof Ya?e:new Ya(e||0,t,n)}function Ww(e){Qb.call(this,"v4"),this.value=e}function qw(e,t){tc.call(this),this.vertex=e||new Ww(new Lw(Lw.PROJECTION)),this.fragment=t||new Ww(new Vw(16711680)),this.updaters=[]}function Jw(e){Rw.call(this,void 0,e)}function Xw(){xy.call(this),this.name="",this.uuid=xo.generateUUID(),this.userData={},this.textureID="renderTexture",this.input=new Jw,this.material=new qw,this.needsUpdate=!0}function Yw(e,t){Qb.call(this,e),this.value=t}function Zw(e,t){Qb.call(this,t),this.name=e}function Qw(e){this.time=void 0!==e?e:0,this.id=0}function $w(e){ww.call(this,"b"),this.value=Boolean(e)}function Kw(e){ww.call(this,"i"),this.value=Math.floor(e||0)}function e_(e){ww.call(this,"m3"),this.value=e||new wo}function t_(e){ww.call(this,"m4"),this.value=e||new Uo}function n_(e){$b.call(this,"v4"),e&&this.setMirror(e)}function i_(e,t,n){ww.call(this,n),this.object=e,this.property=t}function r_(e,t,n,i){i=i||{},this.input=n,this.clear=void 0===i.clear||i.clear,this.renderTarget=new Ao(e,t,i),this.material=new qw,this.camera=new Qp(-1,1,1,-1,0,1),this.scene=new oa,this.quad=new Hs(new fc(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.render=!0,Rw.call(this,this.renderTarget.texture)}Gw.prototype={constructor:Gw,build:function(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(var n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){var i=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this},buildShader:function(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")},setMaterial:function(e,t){return this.material=e,this.renderer=t,this.requires.lights=e.lights,this.requires.fog=e.fog,this.mergeDefines(e.defines),this},addFlow:function(e,t,n){return this.addSlot(e).addCache(t).addContext(n)},removeFlow:function(){return this.removeSlot().removeCache().removeContext()},addCache:function(e){return this.cache=e||"",this.caches.push(this.cache),this},removeCache:function(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this},addContext:function(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this},removeContext:function(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this},addSlot:function(e){return this.slot=e||"",this.slots.push(this.slot),this},removeSlot:function(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this},addVertexCode:function(e){this.addCode(e,"vertex")},addFragmentCode:function(e){this.addCode(e,"fragment")},addCode:function(e,t){this.code[t||this.shader]+=e+"\n"},addVertexNodeCode:function(e){this.addNodeCode(e,"vertex")},addFragmentNodeCode:function(e){this.addNodeCode(e,"fragment")},addNodeCode:function(e,t){this.nodeCode[t||this.shader]+=e+"\n"},clearNodeCode:function(e){e=e||this.shader;var t=this.nodeCode[e];return this.nodeCode[e]="",t},clearVertexNodeCode:function(){return this.clearNodeCode("vertex")},clearFragmentNodeCode:function(){return this.clearNodeCode("fragment")},addVertexFinalCode:function(e){this.addFinalCode(e,"vertex")},addFragmentFinalCode:function(e){this.addFinalCode(e,"fragment")},addFinalCode:function(e,t){this.finalCode[t||this.shader]+=e+"\n"},addVertexParsCode:function(e){this.addParsCode(e,"vertex")},addFragmentParsCode:function(e){this.addParsCode(e,"fragment")},addParsCode:function(e,t){this.parsCode[t||this.shader]+=e+"\n"},addVaryCode:function(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)},isCache:function(e){return-1!==this.caches.indexOf(e)},isSlot:function(e){return-1!==this.slots.indexOf(e)},define:function(e,t){this.defines[e]=void 0===t?1:t},require:function(e){this.requires[e]=!0},isDefined:function(e){return void 0!==this.defines[e]},getVar:function(e,t,n,i="varying",r="V",o=""){var a=this.getVars(i),s=a[e];if(!s){var c=a.length;s={name:n||"node"+r+c+(o?"_"+o:""),type:t},a.push(s),a[e]=s}return s},getTempVar:function(e,t,n,i){return this.getVar(e,t,n,this.shader,"T",i)},getAttribute:function(e,t){if(!this.attributes[e]){var n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]},getCode:function(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")},getVarListCode:function(e,t){t=t||"";for(var n="",i=0,r=e.length;i<r;++i){var o=e[i],a=o.type,s=o.name,c=this.getFormatByType(a);if(void 0===c)throw new Error("Node pars "+c+" not found.");n+=t+" "+c+" "+s+";\n"}return n},getVars:function(e){return this.inputs.vars[e||this.shader]},getNodeData:function(e){var t=e.isNode?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}},createUniform:function(e,t,n,i,r,o){var a=this.inputs.uniforms,s=a.list.length,c=new Xb({type:t,name:i||"nodeU"+s+(o?"_"+o:""),node:n,needsUpdate:r});return a.list.push(c),a[e].push(c),a[e][c.name]=c,this.uniforms[c.name]=c,c},createVertexUniform:function(e,t,n,i,r){return this.createUniform("vertex",e,t,n,i,r)},createFragmentUniform:function(e,t,n,i,r){return this.createUniform("fragment",e,t,n,i,r)},include:function(e,t,n){var i;if(e="string"==typeof e?Zb.get(e):e,!1===this.context.include)return e.name;e instanceof tw?i=this.includes.functions:e instanceof iw?i=this.includes.consts:e instanceof bw&&(i=this.includes.structs);var r=i[this.shader]=i[this.shader]||[];if(e){var o=r[e.name];if(o||(o=r[e.name]={node:e,deps:[]},r.push(o),o.src=e.build(this,"source")),e instanceof tw&&t&&r[t.name]&&-1==r[t.name].deps.indexOf(e)&&(r[t.name].deps.push(e),e.includes&&e.includes.length)){var a=0;do{this.include(e.includes[a++],t)}while(a<e.includes.length)}return n&&(o.src=n),e.name}throw new Error("Include not found.")},colorToVectorProperties:function(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")},colorToVector:function(e){return e.replace(/c/g,"v3")},getIncludes:function(e,t){return this.includes[e][t||this.shader]},getIncludesCode:function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,n){if(!(r=this.getIncludes(t,n)))return"";for(var i="",r=r.sort(e),o=0;o<r.length;o++)r[o].src&&(i+=r[o].src+"\n");return i}}(),getConstructorFromLength:function(e){return Uw[e-1]},isTypeMatrix:function(e){return/^m/.test(e)},getTypeLength:function(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))},getTypeFromLength:function(e){return 1===e?"f":"v"+e},findNode:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(void 0!==t&&t.isNode)return t}},resolve:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(void 0!==t){if(t.isNode)return t;if(t.isTexture)switch(t.mapping){case jn:case Hn:return new Nw(t);case Wn:case qn:return new zw(new Rw(t));default:return new Rw(t)}else{if(t.isVector2)return new _w(t);if(t.isVector3)return new Sw(t);if(t.isVector4)return new Mw(t)}}}},format:function(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e},getTypeByFormat:function(e){return jw[e]||e},getFormatByType:function(e){return Hw[e]||e},getUuid:function(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e},getElementByIndex:function(e){return Bw[e]},getIndexByElement:function(e){return Bw.indexOf(e)},isShader:function(e){return this.shader===e},setShader:function(e){return this.shader=e,this},mergeDefines:function(e){for(var t in e)this.defines[t]=e[t];return this.defines},mergeUniform:function(e){for(var t in e)this.uniforms[t]=e[t];return this.uniforms},getTextureEncodingFromMap:function(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Or,t===Or&&this.context.gamma&&(t=kr),t}},Vw.prototype=Object.create(ww.prototype),Vw.prototype.constructor=Vw,Vw.prototype.nodeType="Color",Yb.addShortcuts(Vw.prototype,"value",["r","g","b"]),Vw.prototype.generateReadonly=function(e,t,n,i){return e.format("vec3( "+this.r+", "+this.g+", "+this.b+" )",i,t)},Vw.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.value.copy(e),this},Vw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).r=this.r,t.g=this.g,t.b=this.b,!0===this.readonly&&(t.readonly=!0)),t},Ww.prototype=Object.create(Qb.prototype),Ww.prototype.constructor=Ww,Ww.prototype.nodeType="Raw",Ww.prototype.generate=function(e){var t=this.value.analyzeAndFlow(e,this.type),n=t.code+"\n";return e.isShader("vertex")?n+="gl_Position = "+t.result+";":n+="gl_FragColor = "+t.result+";",n},Ww.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),this.value=e.value,this},Ww.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t},qw.prototype=Object.create(tc.prototype),qw.prototype.constructor=qw,qw.prototype.type="NodeMaterial",qw.prototype.isNodeMaterial=!0,Object.defineProperties(qw.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){!0===e&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}}),qw.prototype.onBeforeCompile=function(e,t){var n=t.properties.get(this);this.version!==n.__version&&(this.build({renderer:t}),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader)},qw.prototype.customProgramCacheKey=function(){return this.getHash()},qw.prototype.getHash=function(){var e="{";return e+='"vertex":'+this.vertex.getHash()+",",e+='"fragment":'+this.fragment.getHash(),e+="}"},qw.prototype.updateFrame=function(e){for(var t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])},qw.prototype.build=function(e){var t=(e=e||{}).builder||new Gw;return t.setMaterial(this,e.renderer),t.build(this.vertex,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters,this.fog=t.requires.fog,this.lights=t.requires.lights,this.transparent=t.requires.transparent||this.blending>tn,this},qw.prototype.copy=function(e){var t=this.uuid;for(var n in e)this[n]=e[n];return this.uuid=t,void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},qw.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.materials&&(e.materials={}),!e.materials[this.uuid]){var t={};t.uuid=this.uuid,t.type=this.type,e.materials[t.uuid]=t,""!==this.name&&(t.name=this.name),void 0!==this.size&&(t.size=this.size),void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==tn&&(t.blending=this.blending),!0===this.flatShading&&(t.flatShading=this.flatShading),this.side!==Yt&&(t.side=this.side),this.vertexColors!==pg&&(t.vertexColors=this.vertexColors),this.depthFunc!==En&&(t.depthFunc=this.depthFunc),!1===this.depthTest&&(t.depthTest=this.depthTest),!1===this.depthWrite&&(t.depthWrite=this.depthWrite),1!==this.linewidth&&(t.linewidth=this.linewidth),void 0!==this.dashSize&&(t.dashSize=this.dashSize),void 0!==this.gapSize&&(t.gapSize=this.gapSize),void 0!==this.scale&&(t.scale=this.scale),!0===this.dithering&&(t.dithering=!0),!0===this.wireframe&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(t.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(t.wireframeLinejoin=this.wireframeLinejoin),this.alphaTest>0&&(t.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(t.premultipliedAlpha=this.premultipliedAlpha),!0===this.morphTargets&&(t.morphTargets=!0),!0===this.skinning&&(t.skinning=!0),!1===this.visible&&(t.visible=!1),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.fog=this.fog,t.lights=this.lights,t.vertex=this.vertex.toJSON(e).uuid,t.fragment=this.fragment.toJSON(e).uuid}return e.material=this.uuid,e},Jw.prototype=Object.create(Rw.prototype),Jw.prototype.constructor=Jw,Jw.prototype.nodeType="Screen",Jw.prototype.getUnique=function(){return!0},Jw.prototype.getTexture=function(e,t){return ww.prototype.generate.call(this,e,t,this.getUuid(),"t","renderTexture")},Xw.prototype=Object.create(xy.prototype),Xw.prototype.constructor=Xw,Xw.prototype.render=function(){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.input,this.needsUpdate=!1),this.uniforms=this.material.uniforms,xy.prototype.render.apply(this,arguments)},Xw.prototype.copy=function(e){return this.input=e.input,this},Xw.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.passes&&(e.passes={}),!e.passes[this.uuid]){var t={};t.uuid=this.uuid,t.type="NodePass",e.passes[this.uuid]=t,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.input=this.input.toJSON(e).uuid}return e.pass=this.uuid,e},Yw.prototype=Object.create(Qb.prototype),Yw.prototype.constructor=Yw,Yw.prototype.nodeType="Var",Yw.prototype.getType=function(e){return e.getTypeByFormat(this.type)},Yw.prototype.generate=function(e,t){var n=e.getVar(this.uuid,this.type);return this.value&&e.isShader("vertex")&&e.addNodeCode(n.name+" = "+this.value.build(e,this.getType(e))+";"),e.format(n.name,this.getType(e),t)},Yw.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),this.type=e.type,this.value=e.value,this},Yw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type,this.value&&(t.value=this.value.toJSON(e).uuid)),t},Zw.prototype=Object.create(Qb.prototype),Zw.prototype.constructor=Zw,Zw.prototype.nodeType="Attribute",Zw.prototype.getAttributeType=function(e){return"number"==typeof this.type?e.getConstructorFromLength(this.type):this.type},Zw.prototype.getType=function(e){var t=this.getAttributeType(e);return e.getTypeByFormat(t)},Zw.prototype.generate=function(e,t){var n=this.getAttributeType(e),i=e.getAttribute(this.name,n),r=e.isShader("vertex")?this.name:i.varying.name;return e.format(r,this.getType(e),t)},Zw.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),this.type=e.type,this},Zw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type),t},Qw.prototype={constructor:Qw,update:function(e){return++this.id,this.time+=e,this.delta=e,this},setRenderer:function(e){return this.renderer=e,this},setRenderTexture:function(e){return this.renderTexture=e,this},updateNode:function(e){return e.frameId===this.id||(e.updateFrame(this),e.frameId=this.id),this}},$w.prototype=Object.create(ww.prototype),$w.prototype.constructor=$w,$w.prototype.nodeType="Bool",$w.prototype.generateReadonly=function(e,t,n,i){return e.format(this.value,i,t)},$w.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.value=e.value,this},$w.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},Kw.prototype=Object.create(ww.prototype),Kw.prototype.constructor=Kw,Kw.prototype.nodeType="Int",Kw.prototype.generateReadonly=function(e,t,n,i){return e.format(this.value,i,t)},Kw.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.value=e.value,this},Kw.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},e_.prototype=Object.create(ww.prototype),e_.prototype.constructor=e_,e_.prototype.nodeType="Matrix3",Object.defineProperties(e_.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),e_.prototype.generateReadonly=function(e,t,n,i){return e.format("mat3( "+this.value.elements.join(", ")+" )",i,t)},e_.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.value.fromArray(e.elements),this},e_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},t_.prototype=Object.create(ww.prototype),t_.prototype.constructor=t_,t_.prototype.nodeType="Matrix4",Object.defineProperties(t_.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),t_.prototype.generateReadonly=function(e,t,n,i){return e.format("mat4( "+this.value.elements.join(", ")+" )",i,t)},t_.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.scope.value.fromArray(e.elements),this},t_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},n_.prototype=Object.create($b.prototype),n_.prototype.constructor=n_,n_.prototype.nodeType="Reflector",n_.prototype.setMirror=function(e){this.mirror=e,this.textureMatrix=new t_(this.mirror.material.uniforms.textureMatrix.value),this.localPosition=new Lw(Lw.LOCAL),this.uv=new Iw(this.textureMatrix,this.localPosition,Iw.MUL),this.uvResult=new Iw(null,this.uv,Iw.ADD),this.texture=new Rw(this.mirror.material.uniforms.tDiffuse.value,this.uv,null,!0)},n_.prototype.generate=function(e,t){return e.isShader("fragment")?(this.uvResult.a=this.offset,this.texture.uv=this.offset?this.uvResult:this.uv,"sampler2D"===t?this.texture.build(e,t):e.format(this.texture.build(e,this.type),this.type,t)):(console.warn("THREE.ReflectorNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.type,t))},n_.prototype.copy=function(e){return ww.prototype.copy.call(this,e),this.scope.mirror=e.mirror,this},n_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).mirror=this.mirror.uuid,this.offset&&(t.offset=this.offset.toJSON(e).uuid)),t},i_.prototype=Object.create(ww.prototype),i_.prototype.constructor=i_,i_.prototype.nodeType="Property",Object.defineProperties(i_.prototype,{value:{get:function(){return this.object[this.property]},set:function(e){this.object[this.property]=e}}}),i_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,t.property=this.property),t},r_.prototype=Object.create(Rw.prototype),r_.prototype.constructor=r_,r_.prototype.nodeType="RTT",r_.prototype.build=function(e,t,n){var i=new Gw;return i.nodes=e.nodes,i.updaters=e.updaters,this.material.fragment.value=this.input,this.material.build({builder:i}),Rw.prototype.build.call(this,e,t,n)},r_.prototype.updateFramesaveTo=function(e){if(this.saveTo.render=!1,this.saveTo!==this.saveToCurrent){this.saveToMaterial&&this.saveToMaterial.dispose();var t=new qw;t.fragment.value=this,t.build();var n=new oa,i=new Hs(new fc(2,2),t);i.frustumCulled=!1,n.add(i),this.saveToScene=n,this.saveToMaterial=t}this.saveToCurrent=this.saveTo,e.renderer.setRenderTarget(this.saveTo.renderTarget),this.saveTo.clear&&e.renderer.clear(),e.renderer.render(this.saveToScene,this.camera)},r_.prototype.updateFrame=function(e){e.renderer?(this.saveTo&&!1===this.saveTo.render&&this.updateFramesaveTo(e),this.render&&(this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=e.renderTexture),e.renderer.setRenderTarget(this.renderTarget),this.clear&&e.renderer.clear(),e.renderer.render(this.scene,this.camera)),this.saveTo&&!0===this.saveTo.render&&this.updateFramesaveTo(e)):console.warn("RTTNode need a renderer in NodeFrame")},r_.prototype.copy=function(e){return Rw.prototype.copy.call(this,e),this.saveTo=e.saveTo,this},r_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=Rw.prototype.toJSON.call(this,e),this.saveTo&&(t.saveTo=this.saveTo.toJSON(e).uuid)),t};var o_,a_=["color","color2"],s_=["vColor","vColor2"];function c_(e){$b.call(this,"v4",{shared:!1}),this.index=e||0}function l_(e,t){$b.call(this,"v3"),this.setScope(e||l_.POSITION),this.setCamera(t)}function u_(e){$b.call(this,"v3",{shared:!1}),this.scope=e||u_.TOTAL}function h_(){_w.call(this),this.size=new bo}function d_(e){$b.call(this,"v2"),this.resolution=e||new h_}function p_(e,t,n,i,r){$b.call(this),this.a=e,this.b=t,this.op=n,this.ifNode=i,this.elseNode=r}function f_(e){$b.call(this,"f"),this.uv=e||new Tw}function m_(e){$b.call(this,"f"),this.uv=e||new Tw}function g_(e,t){$b.call(this,"v3"),this.value=e,this.scale=t||new _w(1,1)}function v_(e,t){$b.call(this,"v3"),this.value=e,this.scale=t||new Ew(1),this.toNormalMap=!1}function y_(e,t){Qb.call(this),this.code=e,this.value=t}c_.prototype=Object.create($b.prototype),c_.prototype.constructor=c_,c_.prototype.nodeType="Colors",c_.prototype.generate=function(e,t){e.requires.color[this.index]=!0;var n=e.isShader("vertex")?a_[this.index]:s_[this.index];return e.format(n,this.getType(e),t)},c_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.index=e.index,this},c_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},l_.Nodes={depthColor:new tw(["float depthColor( float mNear, float mFar ) {","\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\treturn 1.0 - smoothstep( mNear, mFar, depth );","}"].join("\n"))},l_.POSITION="position",l_.DEPTH="depth",l_.TO_VERTEX="toVertex",l_.prototype=Object.create($b.prototype),l_.prototype.constructor=l_,l_.prototype.nodeType="Camera",l_.prototype.setCamera=function(e){this.camera=e,this.updateFrame=void 0!==e?this.onUpdateFrame:void 0},l_.prototype.setScope=function(e){switch(this.scope){case l_.DEPTH:delete this.near,delete this.far}switch(this.scope=e,e){case l_.DEPTH:var t=this.camera;this.near=new Ew(t?t.near:1),this.far=new Ew(t?t.far:1200)}},l_.prototype.getType=function(){switch(this.scope){case l_.DEPTH:return"f"}return this.type},l_.prototype.getUnique=function(){switch(this.scope){case l_.DEPTH:case l_.TO_VERTEX:return!0}return!1},l_.prototype.getShared=function(){switch(this.scope){case l_.POSITION:return!1}return!0},l_.prototype.generate=function(e,t){var n;switch(this.scope){case l_.POSITION:n="cameraPosition";break;case l_.DEPTH:n=e.include(l_.Nodes.depthColor)+"( "+this.near.build(e,"f")+", "+this.far.build(e,"f")+" )";break;case l_.TO_VERTEX:n="normalize( "+new Lw(Lw.WORLD).build(e,"v3")+" - cameraPosition )"}return e.format(n,this.getType(e),t)},l_.prototype.onUpdateFrame=function(){switch(this.scope){case l_.DEPTH:var e=this.camera;this.near.value=e.near,this.far.value=e.far}},l_.prototype.copy=function(e){switch($b.prototype.copy.call(this,e),this.setScope(e.scope),e.camera&&this.setCamera(e.camera),e.scope){case l_.DEPTH:this.near.number=e.near,this.far.number=e.far}return this},l_.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)switch((t=this.createJSONNode(e)).scope=this.scope,this.camera&&(t.camera=this.camera.uuid),this.scope){case l_.DEPTH:t.near=this.near.value,t.far=this.far.value}return t},u_.TOTAL="total",u_.prototype=Object.create($b.prototype),u_.prototype.constructor=u_,u_.prototype.nodeType="Light",u_.prototype.generate=function(e,t){return e.isCache("light")?e.format("reflectedLight.directDiffuse",this.type,t):(console.warn('THREE.LightNode is only compatible in "light" channel.'),e.format("vec3( 0.0 )",this.type,t))},u_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.scope=e.scope,this},u_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},h_.prototype=Object.create(_w.prototype),h_.prototype.constructor=h_,h_.prototype.nodeType="Resolution",h_.prototype.updateFrame=function(e){if(e.renderer){e.renderer.getSize(this.size);var t=e.renderer.getPixelRatio();this.x=this.size.width*t,this.y=this.size.height*t}else console.warn("ResolutionNode need a renderer in NodeFrame")},h_.prototype.copy=function(e){return _w.prototype.copy.call(this,e),this.renderer=e.renderer,this},h_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).renderer=this.renderer.uuid),t},d_.prototype=Object.create($b.prototype),d_.prototype.constructor=d_,d_.prototype.nodeType="ScreenUV",d_.prototype.generate=function(e,t){var n;return e.isShader("fragment")?n="( gl_FragCoord.xy / "+this.resolution.build(e,"v2")+")":(console.warn("THREE.ScreenUVNode is not compatible with "+e.shader+" shader."),n="vec2( 0.0 )"),e.format(n,this.getType(e),t)},d_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.resolution=e.resolution,this},d_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).resolution=this.resolution.toJSON(e).uuid),t},p_.EQUAL="==",p_.NOT_EQUAL="!=",p_.GREATER=">",p_.GREATER_EQUAL=">=",p_.LESS="<",p_.LESS_EQUAL="<=",p_.prototype=Object.create($b.prototype),p_.prototype.constructor=p_,p_.prototype.nodeType="Cond",p_.prototype.getType=function(e){if(this.ifNode){var t=this.ifNode.getType(e),n=this.elseNode.getType(e);return e.getTypeLength(n)>e.getTypeLength(t)?n:t}return"b"},p_.prototype.getCondType=function(e){return e.getTypeLength(this.b.getType(e))>e.getTypeLength(this.a.getType(e))?this.b.getType(e):this.a.getType(e)},p_.prototype.generate=function(e,t){var n,i=this.getType(e),r=this.getCondType(e),o=this.a.build(e,r),a=this.b.build(e,r);if(this.ifNode){var s=this.ifNode.build(e,i),c=this.elseNode.build(e,i);n="( "+[o,this.op,a,"?",s,":",c].join(" ")+" )"}else n="( "+o+" "+this.op+" "+a+" )";return e.format(n,this.getType(e),t)},p_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op,this.ifNode=e.ifNode,this.elseNode=e.elseNode,this},p_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op,t.ifNode&&(t.ifNode=this.ifNode.toJSON(e).uuid),t.elseNode&&(t.elseNode=this.elseNode.toJSON(e).uuid)),t},f_.prototype=Object.create($b.prototype),f_.prototype.constructor=f_,f_.prototype.nodeType="Noise",f_.Nodes={snoise:new tw(["float snoise(vec2 co) {","\treturn fract( sin( dot( co.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );","}"].join("\n"))},f_.prototype.generate=function(e,t){var n=e.include(f_.Nodes.snoise);return e.format(n+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},f_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.uv=e.uv,this},f_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},m_.prototype=Object.create($b.prototype),m_.prototype.constructor=m_,m_.prototype.nodeType="Noise",m_.Nodes={checker:new tw(["float checker( vec2 uv ) {","\tfloat cx = floor( uv.x );","\tfloat cy = floor( uv.y ); ","\tfloat result = mod( cx + cy, 2.0 );","\treturn sign( result );","}"].join("\n"))},m_.prototype.generate=function(e,t){var n=e.include(m_.Nodes.checker);return e.format(n+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},m_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.uv=e.uv,this},m_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},g_.Nodes={perturbNormal2Arb:new tw("vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 map, vec2 vUv, vec2 normalScale ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = map * 2.0 - 1.0;\n\n\t\tmapN.xy *= normalScale;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t// Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331\n\n\t\t\tif ( dot( cross( S, T ), N ) < 0.0 ) mapN.xy *= - 1.0;\n\n\t\t#else\n\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}",null,{derivatives:!0})},g_.prototype=Object.create($b.prototype),g_.prototype.constructor=g_,g_.prototype.nodeType="NormalMap",g_.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=e.include(g_.Nodes.perturbNormal2Arb);this.normal=this.normal||new Pw,this.position=this.position||new Lw(Lw.VIEW),this.uv=this.uv||new Tw;var i=this.scale.build(e,"v2");return e.material.side===Zt&&(i="-"+i),e.format(n+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+this.value.build(e,"v3")+", "+this.uv.build(e,"v2")+", "+i+" )",this.getType(e),t)}return console.warn("THREE.NormalMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},g_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale,this},g_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},v_.Nodes={dHdxy_fwd:o_=new tw(["vec2 dHdxy_fwd( sampler2D bumpMap, vec2 vUv, float bumpScale ) {","\tvec2 dSTdx = dFdx( vUv );","\tvec2 dSTdy = dFdy( vUv );","\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;","\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","\treturn vec2( dBx, dBy );","}"].join("\n"),null,{derivatives:!0}),perturbNormalArb:new tw(["vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );","\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );","\tvec3 vN = surf_norm;","\tvec3 R1 = cross( vSigmaY, vN );","\tvec3 R2 = cross( vN, vSigmaX );","\tfloat fDet = dot( vSigmaX, R1 );","\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );","\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","\treturn normalize( abs( fDet ) * surf_norm - vGrad );","}"].join("\n"),[o_],{derivatives:!0}),bumpToNormal:new tw(["vec3 bumpToNormal( sampler2D bumpMap, vec2 uv, float scale ) {","\tvec2 dSTdx = dFdx( uv );","\tvec2 dSTdy = dFdy( uv );","\tfloat Hll = texture2D( bumpMap, uv ).x;","\tfloat dBx = texture2D( bumpMap, uv + dSTdx ).x - Hll;","\tfloat dBy = texture2D( bumpMap, uv + dSTdy ).x - Hll;","\treturn vec3( .5 - ( dBx * scale ), .5 - ( dBy * scale ), 1.0 );","}"].join("\n"),null,{derivatives:!0})},v_.prototype=Object.create($b.prototype),v_.prototype.constructor=v_,v_.prototype.nodeType="BumpMap",v_.prototype.hashProperties=["toNormalMap"],v_.prototype.generate=function(e,t){if(e.isShader("fragment")){if(this.toNormalMap){var n=e.include(v_.Nodes.bumpToNormal);return e.format(n+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )",this.getType(e),t)}var i=e.include(v_.Nodes.dHdxy_fwd),r=e.include(v_.Nodes.perturbNormalArb);this.normal=this.normal||new Pw,this.position=this.position||new Lw(Lw.VIEW);var o=i+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )";return e.format(r+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+o+" )",this.getType(e),t)}return console.warn("THREE.BumpMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},v_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale,this},v_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},y_.prototype=Object.create(Qb.prototype),y_.prototype.constructor=y_,y_.prototype.nodeType="Bypass",y_.prototype.getType=function(e){return this.value?this.value.getType(e):e.isShader("fragment")?"f":"void"},y_.prototype.generate=function(e,t){var n=this.code.build(e,t)+";";return e.addNodeCode(n),e.isShader("vertex")?this.value?this.value.build(e,t):void 0:this.value?this.value.build(e,t):e.format("0.0","f",t)},y_.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),this.code=e.code,this.value=e.value,this},y_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).code=this.code.toJSON(e).uuid,this.value&&(t.value=this.value.toJSON(e).uuid)),t};var x_,b_=Yb.elements;function w_(e,t,n,i){$b.call(this,"f"),this.x=e,this.y=t,this.z=n,this.w=i}function __(e,t){Qb.call(this),this.node=e,this.components=t||"x"}function S_(e,t,n){Ew.call(this),this.scale=void 0!==e?e:1,this.scope=t||S_.GLOBAL,this.timeScale=void 0!==n?n:void 0!==e}function M_(e,t){Sw.call(this),this.params={},this.velocity=new Oo,this.setTarget(e),this.setParams(t)}function T_(e,t){Aw.call(this,"( uvTransform * vec3( uvNode, 1 ) ).xy","vec2"),this.uv=e||new Tw,this.position=t||new e_}function E_(e){Ew.call(this),this.texture=e,this.maxMIPLevel=0}function A_(e,t){$b.call(this,"f"),this.roughness=e,this.texture=t,this.maxMIPLevel=void 0}function C_(e){$b.call(this),this.slots=e||{}}function R_(e,t,n,i){$b.call(this,"v4"),this.value=e,this.uv=t||new Tw,this.radius=n||new _w(1,1),this.size=i,this.blurX=!0,this.blurY=!0,this.horizontal=new Ew(1/64),this.vertical=new Ew(1/64)}function L_(e){$b.call(this,"f"),this.rgb=e}function P_(e,t,n){$b.call(this,"v3"),this.rgb=e,this.adjustment=t,this.method=n||P_.SATURATION}function O_(){Qb.call(this),this.color=new Vw(16777215)}function N_(){Qb.call(this),this.color=new Vw(15658734),this.spherical=!0}function k_(){Qb.call(this),this.color=new Vw(15658734),this.specular=new Vw(1118481),this.shininess=new Ew(30)}function I_(){Qb.call(this),this.color=new Vw(16777215),this.roughness=new Ew(1),this.metalness=new Ew(0)}function D_(){I_.call(this),this.properties={color:new Ya(16777215),roughness:.5,metalness:.5,normalScale:new bo(1,1)},this.inputs={color:new i_(this.properties,"color","c"),roughness:new i_(this.properties,"roughness","f"),metalness:new i_(this.properties,"metalness","f"),normalScale:new i_(this.properties,"normalScale","v2")}}function F_(){var e=new O_;qw.call(this,e,e),this.type="BasicNodeMaterial"}function z_(){var e=new N_;qw.call(this,e,e),this.type="SpriteNodeMaterial"}function B_(){var e=new k_;qw.call(this,e,e),this.type="PhongNodeMaterial"}function U_(){var e=new I_;qw.call(this,e,e),this.type="StandardNodeMaterial"}function j_(){var e=new D_;qw.call(this,e,e),this.type="MeshStandardNodeMaterial"}function H_(e,t){if(void 0===t){var n={minFilter:ti,magFilter:ti,format:bi,stencilBuffer:!1},i=e.getDrawingBufferSize(new bo);t=new Ao(i.width,i.height,n)}this.renderer=e,this.renderTarget=t,this.output=new Jw,this.material=new qw,this.camera=new Qp(-1,1,1,-1,0,1),this.scene=new oa,this.quad=new Hs(new fc(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.needsUpdate=!0}w_.prototype=Object.create($b.prototype),w_.prototype.constructor=w_,w_.prototype.nodeType="Join",w_.prototype.getNumElements=function(){for(var e=b_.length;e--;)if(void 0!==this[b_[e]]){++e;break}return Math.max(e,2)},w_.prototype.getType=function(e){return e.getTypeFromLength(this.getNumElements())},w_.prototype.generate=function(e,t){for(var n=this.getType(e),i=this.getNumElements(),r=[],o=0;o<i;o++){var a=this[b_[o]];r.push(a?a.build(e,"f"):"0.0")}var s=(i>1?e.getConstructorFromLength(i):"")+"( "+r.join(", ")+" )";return e.format(s,n,t)},w_.prototype.copy=function(e){for(var t in $b.prototype.copy.call(this,e),e.inputs)this[t]=e.inputs[t];return this},w_.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){(t=this.createJSONNode(e)).inputs={};for(var n=this.getNumElements(),i=0;i<n;i++){var r=this[b_[i]];r&&(t.inputs[b_[i]]=r.toJSON(e).uuid)}}return t},__.prototype=Object.create(Qb.prototype),__.prototype.constructor=__,__.prototype.nodeType="Switch",__.prototype.getType=function(e){return e.getTypeFromLength(this.components.length)},__.prototype.generate=function(e,t){var n=this.node.getType(e),i=this.node.build(e,n),r=e.getTypeLength(n)-1;if(r>0){var o,a=0,s=e.colorToVectorProperties(this.components),c=s.length;for(o=0;o<c;o++)a=Math.max(a,e.getIndexByElement(s.charAt(o)));for(a>r&&(a=r),i+=".",o=0;o<c;o++){var l=e.getIndexByElement(s.charAt(o));l>a&&(l=a),i+=e.getElementByIndex(l)}return e.format(i,this.getType(e),t)}return e.format(i,n,t)},__.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),this.node=e.node,this.components=e.components,this},__.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).node=this.node.toJSON(e).uuid,t.components=this.components),t},S_.GLOBAL="global",S_.LOCAL="local",S_.DELTA="delta",S_.prototype=Object.create(Ew.prototype),S_.prototype.constructor=S_,S_.prototype.nodeType="Timer",S_.prototype.getReadonly=function(){return!1},S_.prototype.getUnique=function(){return this.timeScale&&(this.scope===S_.GLOBAL||this.scope===S_.DELTA)},S_.prototype.updateFrame=function(e){var t=this.timeScale?this.scale:1;switch(this.scope){case S_.LOCAL:this.value+=e.delta*t;break;case S_.DELTA:this.value=e.delta*t;break;default:this.value=e.time*t}},S_.prototype.copy=function(e){return Ew.prototype.copy.call(this,e),this.scope=e.scope,this.scale=e.scale,this.timeScale=e.timeScale,this},S_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope,t.scale=this.scale,t.timeScale=this.timeScale),t},Zb.addKeyword("time",(function(){return new S_})),M_.prototype=Object.create(Sw.prototype),M_.prototype.constructor=M_,M_.prototype.nodeType="Velocity",M_.prototype.getReadonly=function(){return!1},M_.prototype.setParams=function(e){switch(this.params.type){case"elastic":delete this.moment,delete this.speed,delete this.springVelocity,delete this.lastVelocity}switch(this.params=e||{},this.params.type){case"elastic":this.moment=new Oo,this.speed=new Oo,this.springVelocity=new Oo,this.lastVelocity=new Oo}},M_.prototype.setTarget=function(e){this.target&&(delete this.position,delete this.oldPosition),this.target=e,e&&(this.position=e.getWorldPosition(this.position||new Oo),this.oldPosition=this.position.clone())},M_.prototype.updateFrameVelocity=function(){this.target&&(this.position=this.target.getWorldPosition(this.position||new Oo),this.velocity.subVectors(this.position,this.oldPosition),this.oldPosition.copy(this.position))},M_.prototype.updateFrame=function(e){switch(this.updateFrameVelocity(e),this.params.type){case"elastic":var t=e.delta*(this.params.fps||60),n=Math.pow(this.params.spring,t),i=Math.pow(this.params.damping,t);this.velocity.multiplyScalar(Math.exp(-this.params.damping*t)),this.velocity.add(this.springVelocity),this.velocity.add(this.speed.multiplyScalar(i).multiplyScalar(1-n)),this.speed.subVectors(this.velocity,this.lastVelocity),this.springVelocity.add(this.speed),this.springVelocity.multiplyScalar(n),this.moment.add(this.springVelocity),this.moment.multiplyScalar(i),this.lastVelocity.copy(this.velocity),this.value.copy(this.moment);break;default:this.value.copy(this.velocity)}},M_.prototype.copy=function(e){return Sw.prototype.copy.call(this,e),e.target&&this.setTarget(e.target),this.setParams(e.params),this},M_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.target&&(t.target=this.target.uuid),t.params=JSON.parse(JSON.stringify(this.params))),t},T_.prototype=Object.create(Aw.prototype),T_.prototype.constructor=T_,T_.prototype.nodeType="UVTransform",T_.prototype.generate=function(e,t){return this.keywords.uvNode=this.uv,this.keywords.uvTransform=this.position,Aw.prototype.generate.call(this,e,t)},T_.prototype.setUvTransform=function(e,t,n,i,r,o,a){o=void 0!==o?o:.5,a=void 0!==a?a:.5,this.position.value.setUvTransform(e,t,n,i,r,o,a)},T_.prototype.copy=function(e){return Aw.prototype.copy.call(this,e),this.uv=e.uv,this.position=e.position,this},T_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid,t.position=this.position.toJSON(e).uuid),t},E_.prototype=Object.create(Ew.prototype),E_.prototype.constructor=E_,E_.prototype.nodeType="MaxMIPLevel",Object.defineProperties(E_.prototype,{value:{get:function(){if(0===this.maxMIPLevel){var e=this.texture.value.image;Array.isArray(e)&&(e=e[0]),this.maxMIPLevel=void 0!==e?Math.log(Math.max(e.width,e.height))*Math.LOG2E:0}return this.maxMIPLevel},set:function(){}}}),E_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture.uuid),t},A_.Nodes={getSpecularMIPLevel:new tw(["float getSpecularMIPLevel( const in float roughness, const in float maxMIPLevelScalar ) {","\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );","\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );","\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );","}"].join("\n"))},A_.prototype=Object.create($b.prototype),A_.prototype.constructor=A_,A_.prototype.nodeType="SpecularMIPLevel",A_.prototype.setTexture=function(e){return this.texture=e,this},A_.prototype.generate=function(e,t){if(e.isShader("fragment")){this.maxMIPLevel=this.maxMIPLevel||new E_,this.maxMIPLevel.texture=this.texture;var n=e.include(A_.Nodes.getSpecularMIPLevel);return e.format(n+"( "+this.roughness.build(e,"f")+", "+this.maxMIPLevel.build(e,"f")+" )",this.type,t)}return console.warn("THREE.SpecularMIPLevelNode is not compatible with "+e.shader+" shader."),e.format("0.0",this.type,t)},A_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.texture=e.texture,this.roughness=e.roughness,this},A_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture,t.roughness=this.roughness),t},C_.prototype=Object.create($b.prototype),C_.prototype.constructor=C_,C_.prototype.nodeType="SubSlot",C_.prototype.getType=function(e,t){return t},C_.prototype.generate=function(e,t){return this.slots[e.slot]?this.slots[e.slot].build(e,t):e.format("0.0","f",t)},C_.prototype.copy=function(e){for(var t in $b.prototype.copy.call(this,e),e.slots)this.slots[t]=e.slots[t];return this},C_.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)for(var n in(t=this.createJSONNode(e)).slots={},this.slots){var i=this.slots[n];i&&(t.slots[n]=i.toJSON(e).uuid)}return t},R_.Nodes={blurX:new tw(["vec4 blurX( sampler2D tex, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( tex, vec2( uv.x - 4.0 * s, uv.y ) ) * 0.051;","\tsum += texture2D( tex, vec2( uv.x - 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x - 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x - 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( tex, vec2( uv.x + 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x + 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x + 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x + 4.0 * s, uv.y ) ) * 0.051;","\treturn sum * .667;","}"].join("\n")),blurY:new tw(["vec4 blurY( sampler2D tex, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( tex, vec2( uv.x, uv.y - 4.0 * s ) ) * 0.051;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 3.0 * s ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 2.0 * s ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 1.0 * s ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 1.0 * s ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 2.0 * s ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 3.0 * s ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 4.0 * s ) ) * 0.051;","\treturn sum * .667;","}"].join("\n"))},R_.prototype=Object.create($b.prototype),R_.prototype.constructor=R_,R_.prototype.nodeType="Blur",R_.prototype.hashProperties=["blurX","blurY"],R_.prototype.updateFrame=function(){if(this.size)this.horizontal.value=this.radius.x/this.size.x,this.vertical.value=this.radius.y/this.size.y;else if(this.value.value&&this.value.value.image){var e=this.value.value.image;this.horizontal.value=this.radius.x/e.width,this.vertical.value=this.radius.y/e.height}},R_.prototype.generate=function(e,t){if(e.isShader("fragment")){var n,i=[],r=e.include(R_.Nodes.blurX),o=e.include(R_.Nodes.blurY);return this.blurX&&i.push(r+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.horizontal.build(e,"f")+" )"),this.blurY&&i.push(o+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.vertical.build(e,"f")+" )"),n=2==i.length?"( "+i.join(" + ")+" / 2.0 )":i.length?"( "+i[0]+" )":"vec4( 0.0 )",e.format(n,this.getType(e),t)}return console.warn("THREE.BlurNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},R_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.value=e.value,this.uv=e.uv,this.radius=e.radius,void 0!==e.size&&(this.size=new bo(e.size.x,e.size.y)),this.blurX=e.blurX,this.blurY=e.blurY,this},R_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.radius=this.radius.toJSON(e).uuid,this.size&&(t.size={x:this.size.x,y:this.size.y}),t.blurX=this.blurX,t.blurY=this.blurY),t},L_.Nodes={LUMA:x_=new iw("vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )"),luminance:new tw(["float luminance( vec3 rgb ) {","\treturn dot( rgb, LUMA );","}"].join("\n"),[x_])},L_.prototype=Object.create($b.prototype),L_.prototype.constructor=L_,L_.prototype.nodeType="Luminance",L_.prototype.generate=function(e,t){var n=e.include(L_.Nodes.luminance);return e.format(n+"( "+this.rgb.build(e,"v3")+" )",this.getType(e),t)},L_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.rgb=e.rgb,this},L_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid),t},P_.Nodes={hue:new tw(["vec3 hue(vec3 rgb, float adjustment) {","\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);","\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);","\tvec3 yiq = RGBtoYIQ * rgb;","\tfloat hue = atan(yiq.z, yiq.y) + adjustment;","\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);","\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));","}"].join("\n")),saturation:new tw(["vec3 saturation(vec3 rgb, float adjustment) {","\tvec3 intensity = vec3( luminance( rgb ) );","\treturn mix( intensity, rgb, adjustment );","}"].join("\n"),[L_.Nodes.luminance]),vibrance:new tw(["vec3 vibrance(vec3 rgb, float adjustment) {","\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;","\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));","\tfloat amt = (mx - average) * (-3.0 * adjustment);","\treturn mix(rgb.rgb, vec3(mx), amt);","}"].join("\n"))},P_.SATURATION="saturation",P_.HUE="hue",P_.VIBRANCE="vibrance",P_.BRIGHTNESS="brightness",P_.CONTRAST="contrast",P_.prototype=Object.create($b.prototype),P_.prototype.constructor=P_,P_.prototype.nodeType="ColorAdjustment",P_.prototype.hashProperties=["method"],P_.prototype.generate=function(e,t){var n=this.rgb.build(e,"v3"),i=this.adjustment.build(e,"f");switch(this.method){case P_.BRIGHTNESS:return e.format("( "+n+" + "+i+" )",this.getType(e),t);case P_.CONTRAST:return e.format("( "+n+" * "+i+" )",this.getType(e),t)}var r=e.include(P_.Nodes[this.method]);return e.format(r+"( "+n+", "+i+" )",this.getType(e),t)},P_.prototype.copy=function(e){return $b.prototype.copy.call(this,e),this.rgb=e.rgb,this.adjustment=e.adjustment,this.method=e.method,this},P_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid,t.adjustment=this.adjustment.toJSON(e).uuid,t.method=this.method),t},O_.prototype=Object.create(Qb.prototype),O_.prototype.constructor=O_,O_.prototype.nodeType="Basic",O_.prototype.generate=function(e){var t;if(e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0,i=["vec3 transformed = position;"];n?i.push(n.code,n.result?"gl_Position = projectionMatrix * modelViewMatrix * vec4("+n.result+", 1.0);":""):i.push("gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed, 1.0);"),t=i.join("\n")}else{this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.mask&&this.mask.analyze(e);var r=this.color.flow(e,"c",{slot:"color"}),o=this.alpha?this.alpha.flow(e,"f"):void 0,a=this.mask?this.mask.flow(e,"b"):void 0;e.requires.transparent=void 0!==o;i=[r.code];a&&i.push(a.code,"if ( ! "+a.result+" ) discard;"),o&&i.push(o.code,"#ifdef ALPHATEST"," if ( "+o.result+" <= ALPHATEST ) discard;","#endif"),o?i.push("gl_FragColor = vec4("+r.result+", "+o.result+" );"):i.push("gl_FragColor = vec4("+r.result+", 1.0 );"),t=i.join("\n")}return t},O_.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),this.color=e.color,e.position&&(this.position=e.position),e.alpha&&(this.alpha=e.alpha),e.mask&&(this.mask=e.mask),this},O_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).color=this.color.toJSON(e).uuid,this.position&&(t.position=this.position.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.mask&&(t.mask=this.mask.toJSON(e).uuid)),t},N_.prototype=Object.create(Qb.prototype),N_.prototype.constructor=N_,N_.prototype.nodeType="Sprite",N_.prototype.build=function(e){if(e.define("SPRITE"),e.requires.lights=!1,e.requires.transparent=void 0!==this.alpha,e.isShader("vertex")){var t=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(ec.merge([uc.fog])),e.addParsCode(["#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n")),o=["#include <clipping_planes_fragment>","#include <begin_vertex>"],t&&o.push(t.code,t.result?"transformed = "+t.result+";":""),o.push("#include <project_vertex>","#include <fog_vertex>","mat4 modelViewMtx = modelViewMatrix;","mat4 modelMtx = modelMatrix;","modelMtx[3][0] = 0.0;","modelMtx[3][1] = 0.0;","modelMtx[3][2] = 0.0;"),this.spherical||o.push("modelMtx[1][1] = 1.0;"),o.push("modelViewMtx[0][0] = 1.0;","modelViewMtx[0][1] = 0.0;","modelViewMtx[0][2] = 0.0;"),this.spherical&&o.push("modelViewMtx[1][0] = 0.0;","modelViewMtx[1][1] = 1.0;","modelViewMtx[1][2] = 0.0;"),o.push("modelViewMtx[2][0] = 0.0;","modelViewMtx[2][1] = 0.0;","modelViewMtx[2][2] = 1.0;","gl_Position = projectionMatrix * modelViewMtx * modelMtx * vec4( transformed, 1.0 );","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","#include <fog_vertex>")}else{e.addParsCode(["#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>"].join("\n")),e.addCode(["#include <clipping_planes_fragment>","#include <logdepthbuf_fragment>"].join("\n")),this.mask&&this.mask.analyze(e),this.alpha&&this.alpha.analyze(e),this.color.analyze(e,{slot:"color"});var n=this.mask?this.mask.flow(e,"b"):void 0,i=this.alpha?this.alpha.flow(e,"f"):void 0,r=this.color.flow(e,"c",{slot:"color"}),o=[];n&&o.push(n.code,"if ( ! "+n.result+" ) discard;"),i?o.push(i.code,"#ifdef ALPHATEST","if ( "+i.result+" <= ALPHATEST ) discard;","#endif",r.code,"gl_FragColor = vec4( "+r.result+", "+i.result+" );"):o.push(r.code,"gl_FragColor = vec4( "+r.result+", 1.0 );"),o.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>")}return o.join("\n")},N_.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,void 0!==e.spherical&&(this.spherical=e.spherical),e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),this},N_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,!1===this.spherical&&(t.spherical=!1),this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid)),t},k_.prototype=Object.create(Qb.prototype),k_.prototype.constructor=k_,k_.prototype.nodeType="Phong",k_.prototype.build=function(e){var t;if(e.define("PHONG"),e.requires.lights=!0,e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(ec.merge([uc.fog,uc.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];n&&i.push(n.code,n.result?"transformed = "+n.result+";":""),i.push("\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),t=i.join("\n")}else{this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.alpha&&this.alpha.analyze(e),this.normal&&this.normal.analyze(e),this.light&&this.light.analyze(e,{cache:"light"}),this.ao&&this.ao.analyze(e),this.ambient&&this.ambient.analyze(e),this.shadow&&this.shadow.analyze(e),this.emissive&&this.emissive.analyze(e,{slot:"emissive"}),this.environment&&this.environment.analyze(e,{slot:"environment"}),this.environmentAlpha&&this.environment&&this.environmentAlpha.analyze(e);var r=this.mask?this.mask.flow(e,"b"):void 0,o=this.color.flow(e,"c",{slot:"color"}),a=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),c=this.alpha?this.alpha.flow(e,"f"):void 0,l=this.normal?this.normal.flow(e,"v3"):void 0,u=this.light?this.light.flow(e,"v3",{cache:"light"}):void 0,h=this.ao?this.ao.flow(e,"f"):void 0,d=this.ambient?this.ambient.flow(e,"c"):void 0,p=this.shadow?this.shadow.flow(e,"c"):void 0,f=this.emissive?this.emissive.flow(e,"c",{slot:"emissive"}):void 0,m=this.environment?this.environment.flow(e,"c",{slot:"environment"}):void 0,g=this.environmentAlpha&&this.environment?this.environmentAlpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n"));i=["#include <normal_fragment_begin>","\tBlinnPhongMaterial material;"];r&&i.push(r.code,"if ( ! "+r.result+" ) discard;"),i.push(o.code,"\tvec3 diffuseColor = "+o.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",a.code,"\tvec3 specular = "+a.result+";",s.code,"\tfloat shininess = max( 0.0001, "+s.result+" );","\tfloat specularStrength = 1.0;"),c&&i.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),l&&i.push(l.code,"normal = "+l.result+";"),i.push("material.diffuseColor = "+(u?"vec3( 1.0 )":"diffuseColor")+";"),i.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u&&(i.push(u.code,"reflectedLight.directDiffuse = "+u.result+";"),i.push("reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),h&&i.push(h.code,"reflectedLight.indirectDiffuse *= "+h.result+";"),d&&i.push(d.code,"reflectedLight.indirectDiffuse += "+d.result+";"),p&&i.push(p.code,"reflectedLight.directDiffuse *= "+p.result+";","reflectedLight.directSpecular *= "+p.result+";"),f&&i.push(f.code,"reflectedLight.directDiffuse += "+f.result+";"),i.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),m&&(i.push(m.code),g?i.push(g.code,"outgoingLight = mix( outgoingLight, "+m.result+", "+g.result+" );"):i.push("outgoingLight = "+m.result+";")),c?i.push("gl_FragColor = vec4( outgoingLight, "+c.result+" );"):i.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),i.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>"),t=i.join("\n")}return t},k_.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.specular=e.specular,this.shininess=e.shininess,e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.environmentAlpha&&(this.environmentAlpha=e.environmentAlpha),this},k_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.environmentAlpha&&(t.environmentAlpha=this.environmentAlpha.toJSON(e).uuid)),t},I_.prototype=Object.create(Qb.prototype),I_.prototype.constructor=I_,I_.prototype.nodeType="Standard",I_.prototype.build=function(e){var t;e.define("STANDARD");var n=this.clearcoat||this.clearcoatRoughness||this.clearCoatNormal;if(n&&e.define("CLEARCOAT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){var i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(ec.merge([uc.fog,uc.lights])),uc.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];i&&r.push(i.code,i.result?"transformed = "+i.result+";":""),r.push("#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <fog_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=r.join("\n")}else{var o=new Aw("material.specularRoughness","f"),a=new Aw("material.clearcoatRoughness","f"),s={roughness:o,bias:new A_(o),viewNormal:new Aw("normal","v3"),worldNormal:new Aw("inverseTransformDirection( geometry.normal, viewMatrix )","v3"),gamma:!0},c={gamma:!0},l={roughness:a,bias:new A_(a),viewNormal:new Aw("clearcoatNormal","v3"),worldNormal:new Aw("inverseTransformDirection( geometry.clearcoatNormal, viewMatrix )","v3"),gamma:!0};this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color",context:c}),this.roughness.analyze(e),this.metalness.analyze(e),this.alpha&&this.alpha.analyze(e),this.normal&&this.normal.analyze(e),this.clearcoat&&this.clearcoat.analyze(e),this.clearcoatRoughness&&this.clearcoatRoughness.analyze(e),this.clearcoatNormal&&this.clearcoatNormal.analyze(e),this.reflectivity&&this.reflectivity.analyze(e),this.light&&this.light.analyze(e,{cache:"light"}),this.ao&&this.ao.analyze(e),this.ambient&&this.ambient.analyze(e),this.shadow&&this.shadow.analyze(e),this.emissive&&this.emissive.analyze(e,{slot:"emissive"}),this.environment&&(this.environment.analyze(e,{cache:"radiance",context:s,slot:"radiance"}),e.requires.irradiance&&this.environment.analyze(e,{cache:"irradiance",context:s,slot:"irradiance"})),this.sheen&&this.sheen.analyze(e);var u,h=this.mask?this.mask.flow(e,"b"):void 0,d=this.color.flow(e,"c",{slot:"color",context:c}),p=this.roughness.flow(e,"f"),f=this.metalness.flow(e,"f"),m=this.alpha?this.alpha.flow(e,"f"):void 0,g=this.normal?this.normal.flow(e,"v3"):void 0,v=this.clearcoat?this.clearcoat.flow(e,"f"):void 0,y=(a=this.clearcoatRoughness?this.clearcoatRoughness.flow(e,"f"):void 0,this.clearcoatNormal?this.clearcoatNormal.flow(e,"v3"):void 0),x=this.reflectivity?this.reflectivity.flow(e,"f"):void 0,b=this.light?this.light.flow(e,"v3",{cache:"light"}):void 0,w=this.ao?this.ao.flow(e,"f"):void 0,_=this.ambient?this.ambient.flow(e,"c"):void 0,S=this.shadow?this.shadow.flow(e,"c"):void 0,M=this.emissive?this.emissive.flow(e,"c",{slot:"emissive"}):void 0;this.environment&&(u={radiance:this.environment.flow(e,"c",{cache:"radiance",context:s,slot:"radiance"})},e.requires.irradiance&&(u.irradiance=this.environment.flow(e,"c",{cache:"irradiance",context:s,slot:"irradiance"})));var T=n&&u?this.environment.flow(e,"c",{cache:"clearcoat",context:l,slot:"environment"}):void 0,E=this.sheen?this.sheen.flow(e,"c"):void 0;e.requires.transparent=void 0!==m,e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n"));r=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\t#include <clearcoat_normal_fragment_begin>","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];h&&r.push(h.code,"if ( ! "+h.result+" ) discard;"),r.push(d.code,"\tvec3 diffuseColor = "+d.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",p.code,"\tfloat roughnessFactor = "+p.result+";",f.code,"\tfloat metalnessFactor = "+f.result+";"),m&&r.push(m.code,"#ifdef ALPHATEST","\tif ( "+m.result+" <= ALPHATEST ) discard;","#endif"),g&&r.push(g.code,"normal = "+g.result+";"),y&&r.push(y.code,"clearcoatNormal = "+y.result+";"),r.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),r.push("material.diffuseColor = "+(b?"vec3( 1.0 )":"diffuseColor * ( 1.0 - metalnessFactor )")+";","material.specularRoughness = max( roughnessFactor, 0.0525 );","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );"),v?r.push(v.code,"material.clearcoat = saturate( "+v.result+" );"):n&&r.push("material.clearcoat = 0.0;"),a?r.push(a.code,"material.clearcoatRoughness = max( "+a.result+", 0.0525 );","material.clearcoatRoughness += geometryRoughness;","material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );"):n&&r.push("material.clearcoatRoughness = 0.0;"),E&&r.push("material.sheenColor = "+E.result+";"),x?r.push(x.code,"material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( "+x.result+" ) ), diffuseColor, metalnessFactor );"):r.push("material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );"),r.push("#include <lights_fragment_begin>"),b&&(r.push(b.code,"reflectedLight.directDiffuse = "+b.result+";"),r.push("diffuseColor *= 1.0 - metalnessFactor;","reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),w&&r.push(w.code,"reflectedLight.indirectDiffuse *= "+w.result+";","float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );","reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, "+w.result+", material.specularRoughness );"),_&&r.push(_.code,"reflectedLight.indirectDiffuse += "+_.result+";"),S&&r.push(S.code,"reflectedLight.directDiffuse *= "+S.result+";","reflectedLight.directSpecular *= "+S.result+";"),M&&r.push(M.code,"reflectedLight.directDiffuse += "+M.result+";"),u&&(r.push(u.radiance.code),e.requires.irradiance&&r.push(u.irradiance.code),T&&r.push(T.code,"clearcoatRadiance += "+T.result+";"),r.push("radiance += "+u.radiance.result+";"),e.requires.irradiance&&r.push("iblIrradiance += PI * "+u.irradiance.result+";")),r.push("#include <lights_fragment_end>"),r.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),m?r.push("gl_FragColor = vec4( outgoingLight, "+m.result+" );"):r.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),r.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>","#include <dithering_fragment>"),t=r.join("\n")}return t},I_.prototype.copy=function(e){return Qb.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.roughness=e.roughness,this.metalness=e.metalness,e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.clearcoat&&(this.clearcoat=e.clearcoat),e.clearcoatRoughness&&(this.clearcoatRoughness=e.clearcoatRoughness),e.clearcoatNormal&&(this.clearcoatNormal=e.clearcoatNormal),e.reflectivity&&(this.reflectivity=e.reflectivity),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.sheen&&(this.sheen=e.sheen),this},I_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.roughness=this.roughness.toJSON(e).uuid,t.metalness=this.metalness.toJSON(e).uuid,this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.clearcoat&&(t.clearcoat=this.clearcoat.toJSON(e).uuid),this.clearcoatRoughness&&(t.clearcoatRoughness=this.clearcoatRoughness.toJSON(e).uuid),this.clearcoatNormal&&(t.clearcoatNormal=this.clearcoatNormal.toJSON(e).uuid),this.reflectivity&&(t.reflectivity=this.reflectivity.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.sheen&&(t.sheen=this.sheen.toJSON(e).uuid)),t},D_.prototype=Object.create(I_.prototype),D_.prototype.constructor=D_,D_.prototype.nodeType="MeshStandard",D_.prototype.build=function(e){var t=this.properties,n=this.inputs;if(e.isShader("fragment")){var i=e.findNode(t.color,n.color),r=e.resolve(t.map);this.color=r?new Iw(i,r,Iw.MUL):i;var o=e.findNode(t.roughness,n.roughness),a=e.resolve(t.roughnessMap);this.roughness=a?new Iw(o,new __(a,"g"),Iw.MUL):o;var s=e.findNode(t.metalness,n.metalness),c=e.resolve(t.metalnessMap);this.metalness=c?new Iw(s,new __(c,"b"),Iw.MUL):s,t.normalMap?(this.normal=new g_(e.resolve(t.normalMap)),this.normal.scale=e.findNode(t.normalScale,n.normalScale)):this.normal=void 0,this.environment=e.resolve(t.envMap)}return I_.prototype.build.call(this,e)},D_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),console.warn(".toJSON not implemented in",this)),t},F_.prototype=Object.create(qw.prototype),F_.prototype.constructor=F_,Yb.addShortcuts(F_.prototype,"fragment",["color","alpha","mask","position"]),z_.prototype=Object.create(qw.prototype),z_.prototype.constructor=z_,Yb.addShortcuts(z_.prototype,"fragment",["color","alpha","mask","position","spherical"]),B_.prototype=Object.create(qw.prototype),B_.prototype.constructor=B_,Yb.addShortcuts(B_.prototype,"fragment",["color","alpha","specular","shininess","normal","emissive","ambient","light","shadow","ao","environment","environmentAlpha","mask","position"]),U_.prototype=Object.create(qw.prototype),U_.prototype.constructor=U_,Yb.addShortcuts(U_.prototype,"fragment",["color","alpha","roughness","metalness","reflectivity","clearcoat","clearcoatRoughness","clearcoatNormal","normal","emissive","ambient","light","shadow","ao","environment","mask","position","sheen"]),j_.prototype=Object.create(qw.prototype),j_.prototype.constructor=j_,Yb.addShortcuts(j_.prototype,"properties",["color","roughness","metalness","map","normalMap","normalScale","metalnessMap","roughnessMap","envMap"]),H_.prototype={constructor:H_,render:function(e,t,n){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.output,this.material.build(),this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=this.renderTarget.texture),this.needsUpdate=!1),n.setRenderer(this.renderer).setRenderTexture(this.renderTarget.texture),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(e,t),n.updateNode(this.material),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)},setPixelRatio:function(e){this.renderer.setPixelRatio(e);var t=this.renderer.getSize(new bo);this.setSize(t.width,t.height)},setSize:function(e,t){var n=this.renderer.getPixelRatio();this.renderTarget.setSize(e*n,t*n),this.renderer.setSize(e,t)},copy:function(e){return this.output=e.output,this},toJSON:function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.post&&(e.post={}),!e.post[this.uuid]){var t={};t.uuid=this.uuid,t.type="NodePostProcessing",e.post[this.uuid]=t,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.output=this.output.toJSON(e).uuid}return e.post=this.uuid,e}};var G_={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","\tif(byp<1) {","\t\tvec2 p = vUv;","\t\tfloat xs = floor(gl_FragCoord.x / 0.5);","\t\tfloat ys = floor(gl_FragCoord.y / 0.5);","\t\tvec4 normal = texture2D (tDisp, p*seed*seed);","\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","\t\t\tif(seed_x>0.){","\t\t\t\tp.y = 1. - (p.y + distortion_y);","\t\t\t}","\t\t\telse {","\t\t\t\tp.y = distortion_y;","\t\t\t}","\t\t}","\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","\t\t\tif(seed_y>0.){","\t\t\t\tp.x=distortion_x;","\t\t\t}","\t\t\telse {","\t\t\t\tp.x = 1. - (p.x + distortion_x);","\t\t\t}","\t\t}","\t\tp.x+=normal.x*seed_x*(seed/5.);","\t\tp.y+=normal.y*seed_y*(seed/5.);","\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));","\t\tvec4 cr = texture2D(tDiffuse, p + offset);","\t\tvec4 cga = texture2D(tDiffuse, p);","\t\tvec4 cb = texture2D(tDiffuse, p - offset);","\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","\t\tgl_FragColor = gl_FragColor+ snow;","\t}","\telse {","\t\tgl_FragColor=texture2D (tDiffuse, vUv);","\t}","}"].join("\n")},V_=function(e){yy.call(this),void 0===G_&&console.error("GlitchPass relies on DigitalGlitch");var t=G_;this.uniforms=ec.clone(t.uniforms),null==e&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new tc({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.fsQuad=new yy.FullScreenQuad(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()};V_.prototype=Object.assign(Object.create(yy.prototype),{constructor:V_,render:function(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=xo.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=xo.randFloat(-1,1),this.uniforms.seed_y.value=xo.randFloat(-1,1),this.uniforms.distortion_x.value=xo.randFloat(0,1),this.uniforms.distortion_y.value=xo.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=xo.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=xo.randFloat(0,1),this.uniforms.distortion_y.value=xo.randFloat(0,1),this.uniforms.seed_x.value=xo.randFloat(-.3,.3),this.uniforms.seed_y.value=xo.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))},generateTrigger:function(){this.randX=xo.randInt(120,240)},generateHeightmap:function(e){for(var t=new Float32Array(e*e*3),n=e*e,i=0;i<n;i++){var r=xo.randFloat(0,1);t[3*i+0]=r,t[3*i+1]=r,t[3*i+2]=r}return new ac(t,e,e,xi,di)}});var W_=function(){function e(t){l()(this,e),this.context=t,this.spectrumStart=t.spectrumStart,this.beatManager=t.beatManager,this.pp=new Ty(this.context),this.audio=t.audio,this.glitchPass={},this.glitchThreshold=24,this.isGlitchTriggered=!1,this.nodePass={},this.minContrast=1,this.maxContrast=2,this.contrast={},this.contrastNode={},this.minBrightness=0,this.maxBrightness=.5,this.brightness={},this.brightnessNode={},this.blendThreshold=170,this.dropThreshold=-4.2,this.init()}return h()(e,[{key:"init",value:function(){this.glitchPass=new V_,this.pp.addPass(this.glitchPass),this.nodePass=new Xw;var e=new Jw;this.brightness=new Ew(0),this.contrast=new Ew(1),this.brightnessNode=new P_(e,this.brightness,P_.BRIGHTNESS),this.contrastNode=new P_(this.brightnessNode,this.contrast,P_.CONTRAST),this.nodePass.input=this.contrastNode,this.pp.addPass(this.nodePass),this.contrast.value=1,this.brightness.value=0}},{key:"update",value:function(){this.updateGlitch(),this.updateBlend(),this.updateDrop()}},{key:"updateGlitch",value:function(){var e=this.beatManager.bassAverages;if(0!==e.length){var t=e.length-1;e[t]-e[t-1]>this.glitchThreshold&&(this.glitchPass.curF=0,this.isGlitchTriggered=!0),this.glitchPass.curF>=20&&this.isGlitchTriggered&&(this.glitchPass.curF=100)}}},{key:"updateBlend",value:function(){var e=this.beatManager.midrangeAverages;0!==e.length&&(e[e.length-1]>this.blendThreshold?(this.contrast.value=1,this.brightness.value=.2):(this.contrast.value=1,this.brightness.value=0))}},{key:"updateDrop",value:function(){var e=this.beatManager.bassAverages;if(0!==e.length){var t=e.length-1;e[t]-e[t-1]<this.dropThreshold&&(this.brightness.value=0,this.contrast.value=.1)}}},{key:"render",value:function(){this.context.renderer.autoClear=!1,this.context.renderer.clear(),this.pp.render()}}]),e}(),q_=function(){function e(t){l()(this,e),this.context=t,this.spectrumStart=t.spectrumStart;var n=t.frequencyDataLength-1;this.bassWeight=(this.spectrumStart.midrange-this.spectrumStart.bass)/n,this.midrangeWeight=(this.spectrumStart.highrange-this.spectrumStart.midrange)/n,this.highrangeWeight=(n-this.spectrumStart.highrange)/n,this.bassAverages=[],this.midrangeAverages=[],this.highrangeAverages=[],this.overallAverages=[]}return h()(e,[{key:"latestBassAverage",get:function(){return this.bassAverages[this.bassAverages.length-1]}},{key:"latestMidrangeAverage",get:function(){return this.midrangeAverages[this.midrangeAverages.length-1]}},{key:"latestHighrangeAverage",get:function(){return this.highrangeAverages[this.highrangeAverages.length-1]}},{key:"update",value:function(){this.updateBassAverage(),this.updateMidrangeAverage(),this.updateHighrangeAverage(),this.updateOverallAverage()}},{key:"updateBassAverage",value:function(){for(var e=this.spectrumStart,t=e.bass,n=e.midrange,i=0,r=t;r<n;r++)i+=this.context.audio.frequencyData[r];i/=n-t,this.bassAverages.push(i)}},{key:"updateMidrangeAverage",value:function(){for(var e=this.spectrumStart,t=e.midrange,n=e.highrange,i=0,r=t;r<n;r++)i+=this.context.audio.frequencyData[r];i/=n-t,this.midrangeAverages.push(i)}},{key:"updateHighrangeAverage",value:function(){for(var e=this.spectrumStart.highrange,t=this.context.frequencyDataLength-1,n=0,i=e;i<t;i++)n+=this.context.audio.frequencyData[i];n/=t-e,this.highrangeAverages.push(n)}},{key:"updateOverallAverage",value:function(){this.overallAverages.push(this.bassAverages[this.bassAverages.length-1]*this.bassWeight+this.midrangeAverages[this.midrangeAverages.length-1]*this.midrangeWeight+this.highrangeAverages[this.highrangeAverages.length-1]*this.highrangeWeight)}}]),e}(),J_=n(68),X_=n.n(J_),Y_=n(69),Z_=n.n(Y_),Q_=function(){function e(t){var n=t.freqIndex,i=void 0===n?0:n,r=t.minRadius,o=void 0===r?1:r,a=t.maxRadius,s=void 0===a?10:a,c=t.minY,u=void 0===c?0:c,h=t.maxY,d=void 0===h?5:h;l()(this,e),this.freqIndex=i,this.minY=u,this.maxY=d,this.centerCoord=new Oo(0,Oy.randomFloatBetween(this.minY,this.maxY),0),this.radius=Oy.randomFloatBetween(o,s),this.angle=Oy.randomFloatBetween(0,2*Math.PI),this.rotation=new Oo,this.scale=1,this.minYVelocity=Oy.randomFloatBetween(.001,.005),this.maxYVelocity=Oy.randomFloatBetween(.02,.05),this.minAgleVelocity=0,this.maxAngleVelocity=Oy.randomFloatBetween(.001,.003),this.rotationVelocity={x:0,y:0,z:0};var p=Oy.randomBool()?-1:1;this.minRotationVelocityX=Oy.randomFloatBetween(.001,.01)*p,this.maxRotationVelocityX=Oy.randomFloatBetween(.013,.018)*p;var f=Oy.randomBool()?-1:1;this.minRotationVelocityY=Oy.randomFloatBetween(.001,.01)*f,this.maxRotationVelocityY=Oy.randomFloatBetween(.013,.018)*f;var m=Oy.randomBool()?-1:1;this.minRotationVelocityZ=Oy.randomFloatBetween(.001,.01)*m,this.maxRotationVelocityZ=Oy.randomFloatBetween(.013,.018)*m,this.geometry=new Zs(Oy.randomFloatBetween(.03,.1),Oy.randomFloatBetween(.03,.1),Oy.randomFloatBetween(.03,.1)),this.material=new zd({vertexShader:Z_.a,fragmentShader:X_.a,uniforms:{uFreq:{value:0}}}),this.pivot=new Hs(this.geometry,this.material),this.updatePosition(),this.updateScale()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updatePosition",value:function(){var e={x:this.centerCoord.x+this.radius*Math.cos(this.angle),y:this.centerCoord.y,z:this.centerCoord.z+this.radius*Math.sin(this.angle)};this.position.set(e.x,e.y,e.z)}},{key:"updateScale",value:function(){if(this.position.y>=4){var e=this.maxY-this.position.y;this.scale=Oy.remap(0,1,.01,1,e)}else{var t=Math.min(1,this.position.y-this.minY);this.scale=Oy.remap(0,1,.01,1,t)}this.pivot.scale.set(this.scale,this.scale,this.scale)}},{key:"remapFreq",value:function(e,t,n){return Oy.remap(0,255,e,t,n)}},{key:"remapAngleVelocity",value:function(e){return this.remapFreq(this.minAgleVelocity,this.maxAngleVelocity,e)}},{key:"remapYVelocity",value:function(e){return this.remapFreq(this.minYVelocity,this.maxYVelocity,e)}},{key:"remapRotationVelocityX",value:function(e){return this.remapFreq(this.minRotationVelocityX,this.maxRotationVelocityX,e)}},{key:"remapRotationVelocityY",value:function(e){return this.remapFreq(this.minRotationVelocityY,this.maxRotationVelocityY,e)}},{key:"remapRotationVelocityZ",value:function(e){return this.remapFreq(this.minRotationVelocityZ,this.maxRotationVelocityZ,e)}},{key:"update",value:function(e){this.centerCoord.y>=this.maxY?this.centerCoord.y=this.minY:this.centerCoord.y+=this.remapYVelocity(e),this.angle+=this.remapAngleVelocity(e),this.pivot.rotation.x+=this.remapRotationVelocityX(e),this.pivot.rotation.y+=this.remapRotationVelocityY(e),this.pivot.rotation.z+=this.remapRotationVelocityZ(e),this.updatePosition(),this.updateScale(),this.material.uniforms.uFreq.value=e}}]),e}(),$_=function(){function e(t,n){var i=n.radius,r=n.numNodes,o=void 0===r?10:r;l()(this,e),this.context=t,this.radius=i,this.numNodes=o,this.debris=[],this.pivot=new pu,this.init()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.debris.forEach((function(e){return e.dispose()}))}},{key:"init",value:function(){for(var e=0;e<this.numNodes;e++){var t=this.context.spectrumStart.midrange,n=Oy.randomIntBetween(t,this.context.frequencyDataLength-1),i=new Q_({freqIndex:n,minRadius:.3*this.radius,maxRadius:this.radius,minY:2,maxY:8});this.debris.push(i),this.pivot.add(i.pivot)}}},{key:"update",value:function(e){this.debris.forEach((function(t){return t.update(e[t.freqIndex])}))}}]),e}(),K_=function(){function e(t){var n=t.size,i=t.freqIndex,r=t.isActive,o=t.spectrum;l()(this,e),this.spectrum=o,this.isActive=r,this.freqIndex=i,this.geometry=new Zs(n,.023,n),this.material=new Vd({color:14013909}),this.pivot=new Hs(this.geometry,this.material),this.pivot.receiveShadow=!0,this.bbox=(new xa).setFromObject(this.pivot),this.size=new Oo,this.height=.001}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"min",get:function(){return this.bbox.min}},{key:"max",get:function(){return this.bbox.max}},{key:"height",get:function(){return this.max.y-this.min.y},set:function(e){this.pivot.scale.y=e,this.realignY()}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"updateSize",value:function(){this.bbox.setFromObject(this.pivot),this.bbox.getSize(this.size)}},{key:"getCenter",value:function(e){this.bbox.getCenter(e)}},{key:"realignY",value:function(){this.updateSize(),this.position.y=this.size.y/2}},{key:"remapFreq",value:function(){}},{key:"update",value:function(e,t){this.isActive&&(this.height=0!==t?Math.max(e-t,.001):.001)}}]),e}(),eS=n(19),tS=n.n(eS),nS=n(20),iS=n.n(nS),rS=function(){function e(t){l()(this,e),this.geometry=new pc(t,t,t,t),this.material=new zd({fragmentShader:tS.a,vertexShader:iS.a,side:Qt,transparent:!0}),this.frame={},this.tint={},this.pivot=new pu,this.createFrame(t),this.createTint(t/2),this.tint.position.y-=.01,this.bbox=(new xa).setFromObject(this.pivot)}return h()(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"createFrame",value:function(e){var t=new pc(e,e),n=new ns({color:16711680});this.frame=new Hs(t,n),this.frame.rotation.x-=Oy.toRadians(90),this.frame.visible=!1,this.pivot.add(this.frame)}},{key:"createTint",value:function(e){var t=new kd(e,32),n=new zd({fragmentShader:tS.a,vertexShader:iS.a,side:Yt,transparent:!0,uniforms:{uRadius:{value:e}}});this.tint=new Hs(t,n),this.tint.rotation.x-=Oy.toRadians(90),this.pivot.add(this.tint)}},{key:"min",get:function(){return this.bbox.min}}]),e}(),oS="bass",aS="midrange",sS="highrange",cS=function(){function e(t,n){var i=n.size,r=void 0===i?1:i,o=n.divisions,a=void 0===o?1:o;l()(this,e),this.context=t,this.spectrumStart=t.spectrumStart,this.tileBorderWidth=.05,this.size=r,this.divisions=a,this.numTiles=Math.pow(this.divisions,2),this.tiles=[],this.floorBack=new rS(r),this.pivot=new pu,this.pivot.add(this.floorBack.pivot),this.createTiles()}return h()(e,[{key:"position",get:function(){return this.pivot.position}},{key:"dispose",value:function(){this.floorBack.dispose(),this.tiles.forEach((function(e){return e.dispose()}))}},{key:"createTiles",value:function(){for(var e=this.divisions,t=this.size/this.divisions-.02,n=this.floorBack.min.x+t/2,i=n,r=this.floorBack.min.z+t/2,o=t+.02,a=t+.02,s=1;s<=this.numTiles;s++){var c=this.setActiveState(s),l=this.pickSpectrum(s),u=new K_({size:t,isActive:c,spectrum:l,freqIndex:this.pickFreqIndex(l)});u.position.set(i,0,r),this.tiles.push(u),this.pivot.add(u.pivot),s%e==0?(i=n,r+=a):i+=o}}},{key:"setActiveState",value:function(e){var t=Math.round(this.divisions/2),n=e%this.divisions,i=Math.abs(n-t),r=1-Oy.remap(0,t,.4,1,i),o=Math.round(this.divisions/2),a=Math.ceil(e/this.divisions)-1,s=Math.abs(a-o),c=1-Oy.remap(0,o,.25,1,s);return Oy.weightedRandomBool(r*c)}},{key:"pickSpectrum",value:function(e){var t=this.divisions/3;return e%this.divisions<t?oS:e%this.divisions<2*t?aS:sS}},{key:"pickFreqIndex",value:function(e){var t=this.spectrumStart,n=t.bass,i=t.midrange,r=t.highrange;switch(e){case oS:return Oy.randomIntBetween(n,i);case aS:return Oy.randomIntBetween(i,r);default:return Oy.randomIntBetween(r,this.context.frequencyDataLength-1)}}},{key:"update",value:function(){var e=this,t=this.context.beatManager,n=t.midrangeAverages,i=t.bassAverages,r=t.highrangeAverages,o=i[i.length-1],a=n[n.length-1],s=r[r.length-1];this.tiles.forEach((function(t){var n=t.spectrum===oS?o:t.spectrum===aS?a:s,i=e.context.audio.frequencyData[t.freqIndex];t.update(i,n)}))}}]),e}(),lS=function e(){l()(this,e),this.ambient=new ef(16777215,.5),this.directionalTop=new Kp(16777215,1),this.directionalTop.position.set(0,20,0),this.directionalSide=new Kp(16777215,.5),this.directionalSide.position.set(-10,0,10)};function uS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var hS=function(e){p()(n,e);var t=uS(n);function n(e,i){var r;l()(this,n),(r=t.call(this,e,i)).audioSrc=Me.S016,r.numFrequencyNodes=25,r.fftSize=512,r.frequencyDataLength=110,r.spectrumStart={bass:0,midrange:13,highrange:75},r.lights=new lS,r.cameraManager=new Jb(tv()(r)),r.beatManager=new q_(tv()(r)),r.effectManager=new W_(tv()(r));return r.debris=new $_(tv()(r),{radius:12.5,numNodes:20}),r.floor=new cS(tv()(r),{size:25,divisions:30}),r}return h()(n,[{key:"unmount",value:function(){this.audio.close(),this.debris.dispose(),this.floor.dispose(),this.clearScene()}},{key:"init",value:function(){this.setCameraPos(12,8,12),this.setClearColor(14013909),this.lookAt(0,0,0),this.camera.updateProjectionMatrix();var e={fftSize:this.fftSize,dataLength:this.frequencyDataLength};this.initAudio(e),this.audio.setSmoothingTimeConstant(.85),this.scene.add(this.lights.directionalTop),this.scene.add(this.lights.directionalSide),this.scene.add(this.debris.pivot),this.scene.add(this.floor.pivot)}},{key:"draw",value:function(){var e=this;this.audio.getByteFrequencyData(),this.beatManager.update(),this.effectManager.update(),this.cameraManager.update(),this.floor.update(),this.debris.update(this.audio.frequencyData),this.effectManager.render(),requestAnimationFrame((function(){return e.draw()}))}}]),n}(Ly);var dS=[{title:"Metaballs",image:Ce.S000,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new st(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Playing with oscillators",image:Ce.S001,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new pt(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"SDFs",image:Ce.S002,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new xt(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Ray marching",image:Ce.S003,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Tt(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Toon shading",image:Ce.S004,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Pt(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Basic texture mapping",image:Ce.S005,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Ft(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Mesh explosion",instructions:"Press & hold to make the sphere explode",image:Ce.S006,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new ky(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Tunnel",image:Ce.S007,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Fy(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"",instructions:"Right Now - Nurko & Misdom",isAudio:!0,image:Ce.S008,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Vy(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Light Tunnel",image:Ce.S009,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Jy(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Noise",instructions:"Hover to activate the ribbons",image:Ce.S010,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new ox(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Bloom",image:Ce.S011,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Cx(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"Noisey plane & texture mixing",instructions:"Press & hold to reach level 9000",image:Ce.S012,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new kx(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"God rays",image:Ce.S013,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Wx(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"",instructions:"Coven theme - Riot Games x Andrea Bellucci",isAudio:!0,image:Ce.S014,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new Mb(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"",instructions:"Nobody (ft. MINO) - Blue.D",isAudio:!0,image:Ce.S015,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new qb(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}},{title:"",instructions:"Wrong (ft. Lil Uzi Vert) - MAX",isAudio:!0,image:Ce.S016,component:function(e){var t=e.ready,n=void 0===t||t,i=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useMemo)((function(){if(i.current)return new hS(i.current,r.current)}),[i.current]),c=et(),l=c.width,u=c.height;return Object(a.useEffect)((function(){o&&o.resize(l,u)}),[o,l,u]),Object(a.useEffect)((function(){o&&n&&o.render()}),[o,n]),s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:i}),s.a.createElement("audio",{ref:r,loop:!0}))}}];function pS(e){var t=e.onLoad,n=void 0===t?function(e,t){}:t,i=Object(a.useState)(0),r=ke()(i,2),o=r[0],c=r[1],l=dS.slice().reverse(),u=dS.length-1;return Object(a.useEffect)((function(){n(o,dS.length)}),[o]),s.a.createElement(Ke,null,l.map((function(e,t){return s.a.createElement(Qe,{key:t,to:Oe.toSketch(u-t),title:e.title,image:e.image,isAudio:e.isAudio,onLoad:function(){return c(o+1)}})})))}var fS={title:"sketchbook",author:"misspia",socialLinks:[{label:"github",url:"https://github.com/misspia/sketchbook",icon:Ae.github}]};function mS(){var e=Object(a.useState)(0),t=ke()(e,2),n=t[0],i=t[1];return s.a.createElement(Ie,null,n<100&&s.a.createElement(qe,{progress:n}),s.a.createElement(De,null,s.a.createElement(Fe,null,"Sketchbook"),s.a.createElement(ze,null,"a collection of WebGL experiments"),s.a.createElement(Be,null,fS.socialLinks.map((function(e,t){return s.a.createElement(Ue,{key:t,href:e.url,target:"_blank"},s.a.createElement(He,{name:e.icon}))})))),s.a.createElement(pS,{onLoad:function(e,t){i(e/t*100)}}))}var gS=Object(ye.b)(Le.SectionContainer).withConfig({displayName:"entrystyles__Container",componentId:"frdmg6-0"})(["display:flex;flex-direction:column;"]),vS=ye.b.header.withConfig({displayName:"entrystyles__HeaderContainer",componentId:"frdmg6-1"})(["position:fixed;display:flex;flex-direction:row;justify-content:space-between;align-items:center;text-align:center;padding:1em 0;box-sizing:border-box;height:1.5em;font-size:1.0em;& > *{margin:0;padding:0 0.5em;color:",";}a{"," &:hover{transition:0.3s all;color:",";}}"],Te.greyDark,Le.anchorReset,Te.black),yS=ye.b.div.withConfig({displayName:"entrystyles__Instructions",componentId:"frdmg6-2"})(["font-size:0.9em;margin-left:0.5em;padding:0.1em 0.5em;background-color:",";letter-spacing:0.1em;"],Te.whiteTranslucent);ye.b.div.withConfig({displayName:"entrystyles__SketchContainer",componentId:"frdmg6-3"})(["z-index:1;"]);function xS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var bS=function(e){p()(n,e);var t=xS(n);function n(e){return l()(this,n),t.call(this,e)}return h()(n,[{key:"renderBackButton",value:function(){return s.a.createElement(ve,{exact:!0,to:Oe.home},s.a.createElement(He,{name:Ae.close}))}},{key:"renderInstructions",value:function(){if(this.props.instructions)return s.a.createElement(yS,null,this.props.instructions)}},{key:"render",value:function(){return s.a.createElement(vS,null,this.renderBackButton(),this.renderInstructions())}}]),n}(a.Component);bS.defaultProps={instructions:""};var wS=bS,_S=ye.b.div.withConfig({displayName:"mediaActivatorstyles__Container",componentId:"sc-1gfh8c2-0"})(["position:fixed;top:0;left:0;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center;z-index:999;background-color:rgba(0,0,0,1.0);"]),SS=ye.b.div.withConfig({displayName:"mediaActivatorstyles__Button",componentId:"sc-1gfh8c2-1"})(["font-size:1.4em;padding:0.2em 0.6em;color:",";border:solid 0 transparent;border-left-width:0.1em;border-right-width:0.1em;border-radius:0.1em;transition:all 0.3s;cursor:pointer;position:relative;&::after,&::before{content:'';position:absolute;transition:all 0.3s;height:1px;width:0px;background-color:",";}&::before{right:33.33%;top:0px;}&::after{left:33.33%;bottom:0px;}&:hover{letter-spacing:1px;&::before,&::after{width:33.33%;}}"],Te.cream,Te.cream);function MS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var TS=function(e){p()(n,e);var t=MS(n);function n(){return l()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this;return s.a.createElement(_S,null,s.a.createElement(SS,{onClick:function(t){return e.props.onClick(t)}},this.props.text))}}]),n}(s.a.Component);TS.defaultProps={text:"Press to play music",onClick:function(){}};var ES,AS,CS,RS=(AS="withRouter("+((ES=function(e){var t=e.match.params.index,n=dS[t],i=Object(a.useState)(!n.isAudio),r=ke()(i,2),o=r[0],c=r[1],l=Object(a.useMemo)((function(){return dS[t].component}),[t]);return o?s.a.createElement(gS,null,s.a.createElement(wS,{title:n.title,instructions:n.instructions}),s.a.createElement(l,{ready:o})):s.a.createElement(TS,{onClick:function(){return c(!0)}})}).displayName||ES.name)+")",(CS=function(e){var t=e.wrappedComponentRef,n=W(e,["wrappedComponentRef"]);return s.a.createElement(Y.Consumer,null,(function(e){return e||S(!1),s.a.createElement(ES,x({},n,e,{ref:t}))}))}).displayName=AS,CS.WrappedComponent=ES,J()(CS,ES));function LS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var PS=function(e){p()(n,e);var t=LS(n);function n(){return l()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){return s.a.createElement(se,null,s.a.createElement(Pe,null,s.a.createElement(ae,null,s.a.createElement(ee,{exact:!0,path:Oe.home,component:mS}),s.a.createElement(ee,{path:Oe.sketch,component:RS}))))}}]),n}(a.Component);o.a.render(s.a.createElement(PS,null),document.getElementById("app"))}]);